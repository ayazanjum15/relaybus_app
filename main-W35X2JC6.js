var kC=Object.defineProperty,VC=Object.defineProperties;var FC=Object.getOwnPropertyDescriptors;var E0=Object.getOwnPropertySymbols;var LC=Object.prototype.hasOwnProperty,$C=Object.prototype.propertyIsEnumerable;var D0=(n,t,e)=>t in n?kC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,k=(n,t)=>{for(var e in t||={})LC.call(t,e)&&D0(n,e,t[e]);if(E0)for(var e of E0(t))$C.call(t,e)&&D0(n,e,t[e]);return n},le=(n,t)=>VC(n,FC(t));function Vd(n,t){return Object.is(n,t)}var dt=null,cs=!1,Fd=1,rn=Symbol("SIGNAL");function xe(n){let t=dt;return dt=n,t}function Ld(){return dt}var Fo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lo(n){if(cs)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(n);let t=dt.nextProducerIndex++;if(ms(dt),t<dt.producerNode.length&&dt.producerNode[t]!==n&&Vo(dt)){let e=dt.producerNode[t];ps(e,dt.producerIndexOfThis[t])}dt.producerNode[t]!==n&&(dt.producerNode[t]=n,dt.producerIndexOfThis[t]=Vo(dt)?S0(n,dt,t):0),dt.producerLastReadVersion[t]=n.version}function M0(){Fd++}function $d(n){if(!(Vo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Fd)){if(!n.producerMustRecompute(n)&&!Ud(n)){kd(n);return}n.producerRecomputeValue(n),kd(n)}}function Bd(n){if(n.liveConsumerNode===void 0)return;let t=cs;cs=!0;try{for(let e of n.liveConsumerNode)e.dirty||BC(e)}finally{cs=t}}function zd(){return dt?.consumerAllowSignalWrites!==!1}function BC(n){n.dirty=!0,Bd(n),n.consumerMarkedDirty?.(n)}function kd(n){n.dirty=!1,n.lastCleanEpoch=Fd}function us(n){return n&&(n.nextProducerIndex=0),xe(n)}function jd(n,t){if(xe(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Vo(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)ps(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ud(n){ms(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||($d(e),i!==e.version))return!0}return!1}function Gd(n){if(ms(n),Vo(n))for(let t=0;t<n.producerNode.length;t++)ps(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function S0(n,t,e){if(I0(n),n.liveConsumerNode.length===0&&P0(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=S0(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function ps(n,t){if(I0(n),n.liveConsumerNode.length===1&&P0(n))for(let i=0;i<n.producerNode.length;i++)ps(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];ms(r),r.producerIndexOfThis[i]=t}}function Vo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ms(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function I0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function P0(n){return n.producerNode!==void 0}function Hd(n,t){let e=Object.create(zC);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if($d(e),Lo(e),e.value===ds)throw e.error;return e.value};return i[rn]=e,i}var Ad=Symbol("UNSET"),Nd=Symbol("COMPUTING"),ds=Symbol("ERRORED"),zC=le(k({},Fo),{value:Ad,dirty:!0,error:null,equal:Vd,kind:"computed",producerMustRecompute(n){return n.value===Ad||n.value===Nd},producerRecomputeValue(n){if(n.value===Nd)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Nd;let e=us(n),i,r=!1;try{i=n.computation(),xe(null),r=t!==Ad&&t!==ds&&i!==ds&&n.equal(t,i)}catch(s){i=ds,n.error=s}finally{jd(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function jC(){throw new Error}var T0=jC;function R0(n){T0(n)}function Xd(n){T0=n}var UC=null;function Wd(n,t){let e=Object.create(gs);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Lo(e),e.value);return i[rn]=e,i}function $o(n,t){zd()||R0(n),n.equal(n.value,t)||(n.value=t,GC(n))}function qd(n,t){zd()||R0(n),$o(n,t(n.value))}var gs=le(k({},Fo),{equal:Vd,value:void 0,kind:"signal"});function GC(n){n.version++,M0(),Bd(n),UC?.()}function Yd(n){let t=xe(null);try{return n()}finally{xe(t)}}var Zd;function Bo(){return Zd}function fi(n){let t=Zd;return Zd=n,t}var fs=Symbol("NotFound");function de(n){return typeof n=="function"}function Nr(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var _s=Nr(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Zi(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Ze=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(de(i))try{i()}catch(s){t=s instanceof _s?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{O0(s)}catch(d){t=t??[],d instanceof _s?t=[...t,...d.errors]:t.push(d)}}if(t)throw new _s(t)}}add(t){var e;if(t&&t!==this)if(this.closed)O0(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Zi(e,t)}remove(t){let{_finalizers:e}=this;e&&Zi(e,t),t instanceof n&&t._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var Jd=Ze.EMPTY;function hs(n){return n instanceof Ze||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function O0(n){de(n)?n():n.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var kr={setTimeout(n,t,...e){let{delegate:i}=kr;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=kr;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vs(n){kr.setTimeout(()=>{let{onUnhandledError:t}=kn;if(t)t(n);else throw n})}function Ji(){}var w0=Kd("C",void 0,void 0);function A0(n){return Kd("E",void 0,n)}function N0(n){return Kd("N",n,void 0)}function Kd(n,t,e){return{kind:n,value:t,error:e}}var Ki=null;function Vr(n){if(kn.useDeprecatedSynchronousErrorHandling){let t=!Ki;if(t&&(Ki={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=Ki;if(Ki=null,e)throw i}}else n()}function k0(n){kn.useDeprecatedSynchronousErrorHandling&&Ki&&(Ki.errorThrown=!0,Ki.error=n)}var Qi=class extends Ze{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,hs(t)&&t.add(this)):this.destination=ZC}static create(t,e,i){return new Fr(t,e,i)}next(t){this.isStopped?eu(N0(t),this):this._next(t)}error(t){this.isStopped?eu(A0(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?eu(w0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qC=Function.prototype.bind;function Qd(n,t){return qC.call(n,t)}var tu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){xs(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){xs(i)}else xs(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){xs(e)}}},Fr=class extends Qi{constructor(t,e,i){super();let r;if(de(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&kn.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Qd(t.next,s),error:t.error&&Qd(t.error,s),complete:t.complete&&Qd(t.complete,s)}):r=t}this.destination=new tu(r)}};function xs(n){kn.useDeprecatedSynchronousErrorHandling?k0(n):vs(n)}function YC(n){throw n}function eu(n,t){let{onStoppedNotification:e}=kn;e&&kr.setTimeout(()=>e(n,t))}var ZC={closed:!0,next:Ji,error:YC,complete:Ji};var Lr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(n){return n}function nu(...n){return iu(n)}function iu(n){return n.length===0?Qt:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Ee=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=KC(e)?e:new Fr(e,i,r);return Vr(()=>{let{operator:d,source:u}=this;s.add(d?d.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=V0(i),new i((r,s)=>{let d=new Fr({next:u=>{try{e(u)}catch(p){s(p),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Lr](){return this}pipe(...e){return iu(e)(this)}toPromise(e){return e=V0(e),new e((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return n.create=t=>new n(t),n})();function V0(n){var t;return(t=n??kn.Promise)!==null&&t!==void 0?t:Promise}function JC(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function KC(n){return n&&n instanceof Qi||JC(n)&&hs(n)}function ru(n){return de(n?.lift)}function Ce(n){return t=>{if(ru(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,t,e,i,r){return new ou(n,t,e,i,r)}var ou=class extends Qi{constructor(t,e,i,r,s,d){super(t),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(u){try{e(u)}catch(p){t.error(p)}}:super._next,this._error=r?function(u){try{r(u)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function $r(){return Ce((n,t)=>{let e=null;n._refCount++;let i=he(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Br=class extends Ee{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ru(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ze;let e=this.getSubject();t.add(this.source.subscribe(he(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ze.EMPTY)}return t}refCount(){return $r()(this)}};var F0=Nr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class n extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Cs(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new F0}next(e){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Vr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Jd:(this.currentObservers=null,s.push(e),new Ze(()=>{this.currentObservers=null,Zi(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new Ee;return e.source=this,e}}return n.create=(t,e)=>new Cs(t,e),n})(),Cs=class extends ot{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:Jd}};var mt=class extends ot{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var au={now(){return(au.delegate||Date).now()},delegate:void 0};var ys=class extends Ze{constructor(t,e){super()}schedule(t,e=0){return this}};var zo={setInterval(n,t,...e){let{delegate:i}=zo;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=zo;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var bs=class extends ys{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return zo.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&zo.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Zi(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var zr=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};zr.now=au.now;var Es=class extends zr{constructor(t,e=zr.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var su=new Es(bs),L0=su;var Lt=new Ee(n=>n.complete());function Ds(n){return n&&de(n.schedule)}function $0(n){return n[n.length-1]}function Ms(n){return de($0(n))?n.pop():void 0}function Ri(n){return Ds($0(n))?n.pop():void 0}function z0(n,t,e,i){function r(s){return s instanceof e?s:new e(function(d){d(s)})}return new(e||(e=Promise))(function(s,d){function u(b){try{f(i.next(b))}catch(D){d(D)}}function p(b){try{f(i.throw(b))}catch(D){d(D)}}function f(b){b.done?s(b.value):r(b.value).then(u,p)}f((i=i.apply(n,t||[])).next())})}function B0(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function er(n){return this instanceof er?(this.v=n,this):new er(n)}function j0(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(M){return function(R){return Promise.resolve(R).then(M,D)}}function u(M,R){i[M]&&(r[M]=function(A){return new Promise(function(z,U){s.push([M,A,z,U])>1||p(M,A)})},R&&(r[M]=R(r[M])))}function p(M,R){try{f(i[M](R))}catch(A){S(s[0][3],A)}}function f(M){M.value instanceof er?Promise.resolve(M.value.v).then(b,D):S(s[0][2],M)}function b(M){p("next",M)}function D(M){p("throw",M)}function S(M,R){M(R),s.shift(),s.length&&p(s[0][0],s[0][1])}}function U0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof B0=="function"?B0(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(d){return new Promise(function(u,p){d=n[s](d),r(u,p,d.done,d.value)})}}function r(s,d,u,p){Promise.resolve(p).then(function(f){s({value:f,done:u})},d)}}var Ss=n=>n&&typeof n.length=="number"&&typeof n!="function";function Is(n){return de(n?.then)}function Ps(n){return de(n[Lr])}function Ts(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function Rs(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Os=QC();function ws(n){return de(n?.[Os])}function As(n){return j0(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield er(e.read());if(r)return yield er(void 0);yield yield er(i)}}finally{e.releaseLock()}})}function Ns(n){return de(n?.getReader)}function Je(n){if(n instanceof Ee)return n;if(n!=null){if(Ps(n))return ey(n);if(Ss(n))return ty(n);if(Is(n))return ny(n);if(Ts(n))return G0(n);if(ws(n))return iy(n);if(Ns(n))return ry(n)}throw Rs(n)}function ey(n){return new Ee(t=>{let e=n[Lr]();if(de(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ty(n){return new Ee(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function ny(n){return new Ee(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,vs)})}function iy(n){return new Ee(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function G0(n){return new Ee(t=>{oy(n,t).catch(e=>t.error(e))})}function ry(n){return G0(As(n))}function oy(n,t){var e,i,r,s;return z0(this,void 0,void 0,function*(){try{for(e=U0(n);i=yield e.next(),!i.done;){let d=i.value;if(t.next(d),t.closed)return}}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function $t(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ks(n,t=0){return Ce((e,i)=>{e.subscribe(he(i,r=>$t(i,n,()=>i.next(r),t),()=>$t(i,n,()=>i.complete(),t),r=>$t(i,n,()=>i.error(r),t)))})}function Vs(n,t=0){return Ce((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function H0(n,t){return Je(n).pipe(Vs(t),ks(t))}function X0(n,t){return Je(n).pipe(Vs(t),ks(t))}function W0(n,t){return new Ee(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function q0(n,t){return new Ee(e=>{let i;return $t(e,t,()=>{i=n[Os](),$t(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){e.error(d);return}s?e.complete():e.next(r)},0,!0)}),()=>de(i?.return)&&i.return()})}function Fs(n,t){if(!n)throw new Error("Iterable cannot be null");return new Ee(e=>{$t(e,t,()=>{let i=n[Symbol.asyncIterator]();$t(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Y0(n,t){return Fs(As(n),t)}function Z0(n,t){if(n!=null){if(Ps(n))return H0(n,t);if(Ss(n))return W0(n,t);if(Is(n))return X0(n,t);if(Ts(n))return Fs(n,t);if(ws(n))return q0(n,t);if(Ns(n))return Y0(n,t)}throw Rs(n)}function $e(n,t){return t?Z0(n,t):Je(n)}function G(...n){let t=Ri(n);return $e(n,t)}function jr(n,t){let e=de(n)?n:()=>n,i=r=>r.error(e());return new Ee(t?r=>t.schedule(i,0,r):i)}function lu(n){return!!n&&(n instanceof Ee||de(n.lift)&&de(n.subscribe))}var _i=Nr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J0(n){return n instanceof Date&&!isNaN(n)}function te(n,t){return Ce((e,i)=>{let r=0;e.subscribe(he(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:ay}=Array;function sy(n,t){return ay(t)?n(...t):n(t)}function Ls(n){return te(t=>sy(n,t))}var{isArray:ly}=Array,{getPrototypeOf:cy,prototype:dy,keys:uy}=Object;function $s(n){if(n.length===1){let t=n[0];if(ly(t))return{args:t,keys:null};if(py(t)){let e=uy(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function py(n){return n&&typeof n=="object"&&cy(n)===dy}function Bs(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function jo(...n){let t=Ri(n),e=Ms(n),{args:i,keys:r}=$s(n);if(i.length===0)return $e([],t);let s=new Ee(my(i,t,r?d=>Bs(r,d):Qt));return e?s.pipe(Ls(e)):s}function my(n,t,e=Qt){return i=>{K0(t,()=>{let{length:r}=n,s=new Array(r),d=r,u=r;for(let p=0;p<r;p++)K0(t,()=>{let f=$e(n[p],t),b=!1;f.subscribe(he(i,D=>{s[p]=D,b||(b=!0,u--),u||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}function K0(n,t,e){n?$t(e,n,t):t()}function Q0(n,t,e,i,r,s,d,u){let p=[],f=0,b=0,D=!1,S=()=>{D&&!p.length&&!f&&t.complete()},M=A=>f<i?R(A):p.push(A),R=A=>{s&&t.next(A),f++;let z=!1;Je(e(A,b++)).subscribe(he(t,U=>{r?.(U),s?M(U):t.next(U)},()=>{z=!0},void 0,()=>{if(z)try{for(f--;p.length&&f<i;){let U=p.shift();d?$t(t,d,()=>R(U)):R(U)}S()}catch(U){t.error(U)}}))};return n.subscribe(he(t,M,()=>{D=!0,S()})),()=>{u?.()}}function qe(n,t,e=1/0){return de(t)?qe((i,r)=>te((s,d)=>t(i,s,r,d))(Je(n(i,r))),e):(typeof t=="number"&&(e=t),Ce((i,r)=>Q0(i,r,n,e)))}function Ur(n=1/0){return qe(Qt,n)}function ef(){return Ur(1)}function Oi(...n){return ef()($e(n,Ri(n)))}function zs(n){return new Ee(t=>{Je(n()).subscribe(t)})}function cu(...n){let t=Ms(n),{args:e,keys:i}=$s(n),r=new Ee(s=>{let{length:d}=e;if(!d){s.complete();return}let u=new Array(d),p=d,f=d;for(let b=0;b<d;b++){let D=!1;Je(e[b]).subscribe(he(s,S=>{D||(D=!0,f--),u[b]=S},()=>p--,void 0,()=>{(!p||!D)&&(f||s.next(i?Bs(i,u):u),s.complete())}))}});return t?r.pipe(Ls(t)):r}function tf(n=0,t,e=L0){let i=-1;return t!=null&&(Ds(t)?e=t:i=t),new Ee(r=>{let s=J0(n)?+n-e.now():n;s<0&&(s=0);let d=0;return e.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function gt(n,t){return Ce((e,i)=>{let r=0;e.subscribe(he(i,s=>n.call(t,s,r++)&&i.next(s)))})}function hi(n){return Ce((t,e)=>{let i=null,r=!1,s;i=t.subscribe(he(e,void 0,void 0,d=>{s=Je(n(d,hi(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function nf(n,t,e,i,r){return(s,d)=>{let u=e,p=t,f=0;s.subscribe(he(d,b=>{let D=f++;p=u?n(p,b,D):(u=!0,b),i&&d.next(p)},r&&(()=>{u&&d.next(p),d.complete()})))}}function Zn(n,t){return de(t)?qe(n,t,1):qe(n,1)}function wi(n){return Ce((t,e)=>{let i=!1;t.subscribe(he(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function on(n){return n<=0?()=>Lt:Ce((t,e)=>{let i=0;t.subscribe(he(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function rf(){return Ce((n,t)=>{n.subscribe(he(t,Ji))})}function of(n){return te(()=>n)}function du(n,t){return t?e=>Oi(t.pipe(on(1),rf()),e.pipe(du(n))):qe((e,i)=>Je(n(e,i)).pipe(on(1),of(e)))}function Me(n,t=su){let e=tf(n,t);return du(()=>e)}function js(n=gy){return Ce((t,e)=>{let i=!1;t.subscribe(he(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function gy(){return new _i}function tr(n){return Ce((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function vi(n,t){let e=arguments.length>=2;return i=>i.pipe(n?gt((r,s)=>n(r,s,i)):Qt,on(1),e?wi(t):js(()=>new _i))}function Gr(n){return n<=0?()=>Lt:Ce((t,e)=>{let i=[];t.subscribe(he(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function uu(n,t){let e=arguments.length>=2;return i=>i.pipe(n?gt((r,s)=>n(r,s,i)):Qt,Gr(1),e?wi(t):js(()=>new _i))}function pu(n,t){return Ce(nf(n,t,arguments.length>=2,!0))}function mu(...n){let t=Ri(n);return Ce((e,i)=>{(t?Oi(n,e,t):Oi(n,e)).subscribe(i)})}function Bt(n,t){return Ce((e,i)=>{let r=null,s=0,d=!1,u=()=>d&&!r&&i.complete();e.subscribe(he(i,p=>{r?.unsubscribe();let f=0,b=s++;Je(n(p,b)).subscribe(r=he(i,D=>i.next(t?t(p,D,b,f++):D),()=>{r=null,u()}))},()=>{d=!0,u()}))})}function gu(n){return Ce((t,e)=>{Je(n).subscribe(he(e,()=>e.complete(),Ji)),!e.closed&&t.subscribe(e)})}function ft(n,t,e){let i=de(n)||t||e?{next:n,error:t,complete:e}:n;return i?Ce((r,s)=>{var d;(d=i.subscribe)===null||d===void 0||d.call(i);let u=!0;r.subscribe(he(s,p=>{var f;(f=i.next)===null||f===void 0||f.call(i,p),s.next(p)},()=>{var p;u=!1,(p=i.complete)===null||p===void 0||p.call(i),s.complete()},p=>{var f;u=!1,(f=i.error)===null||f===void 0||f.call(i,p),s.error(p)},()=>{var p,f;u&&((p=i.unsubscribe)===null||p===void 0||p.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Qt}var Zf="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(t,e){super(Jf(t,e)),this.code=t}};function fy(n){return`NG0${Math.abs(n)}`}function Jf(n,t){return`${fy(n)}${t?": "+t:""}`}var Kf=Symbol("InputSignalNode#UNSET"),_y=le(k({},gs),{transformFn:void 0,applyValueToInputSignal(n,t){$o(n,t)}});function Qf(n,t){let e=Object.create(_y);e.value=n,e.transformFn=t?.transform;function i(){if(Lo(e),e.value===Kf){let r=null;throw new X(-950,r)}return e.value}return i[rn]=e,i}function oa(n){return{toString:n}.toString()}var Us="__parameters__";function hy(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function e_(n,t,e){return oa(()=>{let i=hy(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;let d=new r(...s);return u.annotation=d,u;function u(p,f,b){let D=p.hasOwnProperty(Us)?p[Us]:Object.defineProperty(p,Us,{value:[]})[Us];for(;D.length<=b;)D.push(null);return(D[b]=D[b]||[]).push(d),p}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Ci=globalThis;function Fe(n){for(let t in n)if(n[t]===Fe)return t;throw Error("Could not find renamed property on target object.")}function vy(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function jt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(jt).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function Ru(n,t){return n?t?`${n} ${t}`:n:t||""}var xy=Fe({__forward_ref__:Fe});function _t(n){return n.__forward_ref__=_t,n.toString=function(){return jt(this())},n}function St(n){return t_(n)?n():n}function t_(n){return typeof n=="function"&&n.hasOwnProperty(xy)&&n.__forward_ref__===_t}function Cy(n,t,e){n!=t&&yy(e,n,t,"==")}function yy(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sl(n){return af(n,i_)||af(n,r_)}function n_(n){return Sl(n)!==null}function af(n,t){return n.hasOwnProperty(t)?n[t]:null}function by(n){let t=n&&(n[i_]||n[r_]);return t||null}function sf(n){return n&&(n.hasOwnProperty(lf)||n.hasOwnProperty(Ey))?n[lf]:null}var i_=Fe({\u0275prov:Fe}),lf=Fe({\u0275inj:Fe}),r_=Fe({ngInjectableDef:Fe}),Ey=Fe({ngInjectorDef:Fe}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=H({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function o_(n){return n&&!!n.\u0275providers}var Dy=Fe({\u0275cmp:Fe}),My=Fe({\u0275dir:Fe}),Sy=Fe({\u0275pipe:Fe}),Iy=Fe({\u0275mod:Fe}),el=Fe({\u0275fac:Fe}),Xo=Fe({__NG_ELEMENT_ID__:Fe}),cf=Fe({__NG_ENV_ID__:Fe});function Kn(n){return typeof n=="string"?n:n==null?"":String(n)}function Py(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Kn(n)}function a_(n,t){throw new X(-200,n)}function Mp(n,t){throw new X(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Ou;function s_(){return Ou}function zt(n){let t=Ou;return Ou=n,t}function l_(n,t,e){let i=Sl(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&ge.Optional)return null;if(t!==void 0)return t;Mp(n,"Injector")}var Ty={},ir=Ty,wu="__NG_DI_FLAG__",tl=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?fs:ir,i)}},nl="ngTempTokenPath",Ry="ngTokenPath",Oy=/\n/gm,wy="\u0275",df="__source";function Ay(n,t=ge.Default){if(Bo()===void 0)throw new X(-203,!1);if(Bo()===null)return l_(n,void 0,t);{let e=Bo(),i;return e instanceof tl?i=e.injector:i=e,i.get(n,t&ge.Optional?null:void 0,t)}}function Q(n,t=ge.Default){return(s_()||Ay)(St(n),t)}function B(n,t=ge.Default){return Q(n,Il(t))}function Il(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Au(n){let t=[];for(let e=0;e<n.length;e++){let i=St(n[e]);if(Array.isArray(i)){if(i.length===0)throw new X(900,!1);let r,s=ge.Default;for(let d=0;d<i.length;d++){let u=i[d],p=Ny(u);typeof p=="number"?p===-1?r=u.token:s|=p:r=u}t.push(Q(r,s))}else t.push(Q(i))}return t}function c_(n,t){return n[wu]=t,n.prototype[wu]=t,n}function Ny(n){return n[wu]}function ky(n,t,e,i){let r=n[nl];throw t[df]&&r.unshift(t[df]),n.message=Vy(`
`+n.message,r,e,i),n[Ry]=r,n[nl]=null,n}function Vy(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==wy?n.slice(2):n;let r=jt(t);if(Array.isArray(t))r=t.map(jt).join(" -> ");else if(typeof t=="object"){let s=[];for(let d in t)if(t.hasOwnProperty(d)){let u=t[d];s.push(d+":"+(typeof u=="string"?JSON.stringify(u):jt(u)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(Oy,`
  `)}`}var Fy=c_(e_("Optional"),8);var Ly=c_(e_("SkipSelf"),4);function or(n,t){let e=n.hasOwnProperty(el);return e?n[el]:null}function Sp(n,t){n.forEach(e=>Array.isArray(e)?Sp(e,t):t(e))}function d_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function il(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function $y(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function Pl(n,t,e){let i=aa(n,t);return i>=0?n[i|1]=e:(i=~i,$y(n,i,t,e)),i}function fu(n,t){let e=aa(n,t);if(e>=0)return n[e|1]}function aa(n,t){return By(n,t,1)}function By(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),d=n[s<<e];if(t===d)return s<<e;d>t?r=s:i=s+1}return~(r<<e)}var ar={},It=[],Zo=new W(""),u_=new W("",-1),p_=new W(""),rl=class{get(t,e=ir){if(e===ir){let i=new Error(`NullInjectorError: No provider for ${jt(t)}!`);throw i.name="NullInjectorError",i}return e}};function m_(n,t){let e=n[Iy]||null;if(!e&&t===!0)throw new Error(`Type ${jt(n)} does not have '\u0275mod' property.`);return e}function sr(n){return n[Dy]||null}function zy(n){return n[My]||null}function jy(n){return n[Sy]||null}function sa(n){return{\u0275providers:n}}function Ip(...n){return{\u0275providers:g_(!0,n),\u0275fromNgModule:!0}}function g_(n,...t){let e=[],i=new Set,r,s=d=>{e.push(d)};return Sp(t,d=>{let u=d;Nu(u,s,[],i)&&(r||=[],r.push(u))}),r!==void 0&&f_(r,s),e}function f_(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Pp(r,s=>{t(s,i)})}}function Nu(n,t,e,i){if(n=St(n),!n)return!1;let r=null,s=sf(n),d=!s&&sr(n);if(!s&&!d){let p=n.ngModule;if(s=sf(p),s)r=p;else return!1}else{if(d&&!d.standalone)return!1;r=n}let u=i.has(r);if(d){if(u)return!1;if(i.add(r),d.dependencies){let p=typeof d.dependencies=="function"?d.dependencies():d.dependencies;for(let f of p)Nu(f,t,e,i)}}else if(s){if(s.imports!=null&&!u){i.add(r);let f;try{Sp(s.imports,b=>{Nu(b,t,e,i)&&(f||=[],f.push(b))})}finally{}f!==void 0&&f_(f,t)}if(!u){let f=or(r)||(()=>new r);t({provide:r,useFactory:f,deps:It},r),t({provide:p_,useValue:r,multi:!0},r),t({provide:Zo,useValue:()=>Q(r),multi:!0},r)}let p=s.providers;if(p!=null&&!u){let f=n;Pp(p,b=>{t(b,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Pp(n,t){for(let e of n)o_(e)&&(e=e.\u0275providers),Array.isArray(e)?Pp(e,t):t(e)}var Uy=Fe({provide:String,useValue:Fe});function __(n){return n!==null&&typeof n=="object"&&Uy in n}function Gy(n){return!!(n&&n.useExisting)}function Hy(n){return!!(n&&n.useFactory)}function Jr(n){return typeof n=="function"}function Xy(n){return!!n.useClass}var Tl=new W(""),Ws={},uf={},_u;function Tp(){return _u===void 0&&(_u=new rl),_u}var yt=class{},Jo=class extends yt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,Vu(t,d=>this.processProvider(d)),this.records.set(u_,Hr(void 0,this)),r.has("environment")&&this.records.set(yt,Hr(void 0,this));let s=this.records.get(Tl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(p_,It,ge.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?fs:ir,i)}destroy(){Go(this),this._destroyed=!0;let t=xe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xe(t)}}onDestroy(t){return Go(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Go(this);let e=fi(this),i=zt(void 0),r;try{return t()}finally{fi(e),zt(i)}}get(t,e=ir,i=ge.Default){if(Go(this),t.hasOwnProperty(cf))return t[cf](this);i=Il(i);let r,s=fi(this),d=zt(void 0);try{if(!(i&ge.SkipSelf)){let p=this.records.get(t);if(p===void 0){let f=Jy(t)&&Sl(t);f&&this.injectableDefInScope(f)?p=Hr(ku(t),Ws):p=null,this.records.set(t,p)}if(p!=null)return this.hydrate(t,p,i)}let u=i&ge.Self?Tp():this.parent;return e=i&ge.Optional&&e===ir?null:e,u.get(t,e)}catch(u){if(u.name==="NullInjectorError"){if((u[nl]=u[nl]||[]).unshift(jt(t)),s)throw u;return ky(u,t,"R3InjectorError",this.source)}else throw u}finally{zt(d),fi(s)}}resolveInjectorInitializers(){let t=xe(null),e=fi(this),i=zt(void 0),r;try{let s=this.get(Zo,It,ge.Self);for(let d of s)d()}finally{fi(e),zt(i),xe(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(jt(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=St(t);let e=Jr(t)?t:St(t&&t.provide),i=qy(t);if(!Jr(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Hr(void 0,Ws,!0),r.factory=()=>Au(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=xe(null);try{return e.value===uf?a_(jt(t)):e.value===Ws&&(e.value=uf,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&Zy(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{xe(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=St(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function ku(n){let t=Sl(n),e=t!==null?t.factory:or(n);if(e!==null)return e;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return Wy(n);throw new X(204,!1)}function Wy(n){if(n.length>0)throw new X(204,!1);let e=by(n);return e!==null?()=>e.factory(n):()=>new n}function qy(n){if(__(n))return Hr(void 0,n.useValue);{let t=h_(n);return Hr(t,Ws)}}function h_(n,t,e){let i;if(Jr(n)){let r=St(n);return or(r)||ku(r)}else if(__(n))i=()=>St(n.useValue);else if(Hy(n))i=()=>n.useFactory(...Au(n.deps||[]));else if(Gy(n))i=(r,s)=>Q(St(n.useExisting),s!==void 0&&s&ge.Optional?ge.Optional:void 0);else{let r=St(n&&(n.useClass||n.provide));if(Yy(n))i=()=>new r(...Au(n.deps));else return or(r)||ku(r)}return i}function Go(n){if(n.destroyed)throw new X(205,!1)}function Hr(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Yy(n){return!!n.deps}function Zy(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Jy(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Vu(n,t){for(let e of n)Array.isArray(e)?Vu(e,t):e&&o_(e)?Vu(e.\u0275providers,t):t(e)}function Gt(n,t){let e;n instanceof Jo?(Go(n),e=n):e=new tl(n);let i,r=fi(e),s=zt(void 0);try{return t()}finally{fi(r),zt(s)}}function v_(){return s_()!==void 0||Bo()!=null}function Ky(n){if(!v_())throw new X(-203,!1)}function Qy(n){return typeof n=="function"}var Ei=0,ye=1,ce=2,Pt=3,Ln=4,dn=5,ol=6,al=7,Ut=8,Kr=9,yi=10,Ve=11,Ko=12,pf=13,ao=14,$n=15,Qr=16,Xr=17,eo=18,Rl=19,x_=20,Ai=21,hu=22,sl=23,an=24,Yr=25,bt=26,C_=1;var lr=7,ll=8,cl=9,sn=10;function Ni(n){return Array.isArray(n)&&typeof n[C_]=="object"}function Di(n){return Array.isArray(n)&&n[C_]===!0}function y_(n){return(n.flags&4)!==0}function so(n){return n.componentOffset>-1}function Rp(n){return(n.flags&1)===1}function Qn(n){return!!n.template}function dl(n){return(n[ce]&512)!==0}function lo(n){return(n[ce]&256)===256}var Fu=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function b_(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var ii=(()=>{let n=()=>E_;return n.ngInherit=!0,n})();function E_(n){return n.type.prototype.ngOnChanges&&(n.setInput=tb),eb}function eb(){let n=M_(this),t=n?.current;if(t){let e=n.previous;if(e===ar)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function tb(n,t,e,i,r){let s=this.declaredInputs[i],d=M_(n)||nb(n,{previous:ar,current:null}),u=d.current||(d.current={}),p=d.previous,f=p[s];u[s]=new Fu(f&&f.currentValue,e,p===ar),b_(n,t,r,e)}var D_="__ngSimpleChanges__";function M_(n){return n[D_]||null}function nb(n,t){return n[D_]=t}var mf=null;var Ae=function(n,t=null,e){mf?.(n,t,e)},ib="svg",rb="math";function ln(n){for(;Array.isArray(n);)n=n[Ei];return n}function Ol(n,t){return ln(t[n])}function ri(n,t){return ln(t[n.index])}function S_(n,t){return n.data[t]}function Op(n,t){return n[t]}function ob(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function ei(n,t){let e=t[n];return Ni(e)?e:e[Ei]}function wp(n){return(n[ce]&128)===128}function ab(n){return Di(n[Pt])}function Qo(n,t){return t==null?null:n[t]}function I_(n){n[Xr]=0}function P_(n){n[ce]&1024||(n[ce]|=1024,wp(n)&&la(n))}function sb(n,t){for(;n>0;)t=t[ao],n--;return t}function wl(n){return!!(n[ce]&9216||n[an]?.dirty)}function Lu(n){n[yi].changeDetectionScheduler?.notify(8),n[ce]&64&&(n[ce]|=1024),wl(n)&&la(n)}function la(n){n[yi].changeDetectionScheduler?.notify(0);let t=cr(n);for(;t!==null&&!(t[ce]&8192||(t[ce]|=8192,!wp(t)));)t=cr(t)}function T_(n,t){if(lo(n))throw new X(911,!1);n[Ai]===null&&(n[Ai]=[]),n[Ai].push(t)}function lb(n,t){if(n[Ai]===null)return;let e=n[Ai].indexOf(t);e!==-1&&n[Ai].splice(e,1)}function cr(n){let t=n[Pt];return Di(t)?t[Pt]:t}function R_(n){return n[al]??=[]}function O_(n){return n.cleanup??=[]}var fe={lFrame:B_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $u=!1;function cb(){return fe.lFrame.elementDepthCount}function db(){fe.lFrame.elementDepthCount++}function ub(){fe.lFrame.elementDepthCount--}function w_(){return fe.bindingsEnabled}function pb(){return fe.skipHydrationRootTNode!==null}function mb(n){return fe.skipHydrationRootTNode===n}function gb(){fe.skipHydrationRootTNode=null}function ve(){return fe.lFrame.lView}function ht(){return fe.lFrame.tView}function C(n){return fe.lFrame.contextLView=n,n[Ut]}function y(n){return fe.lFrame.contextLView=null,n}function Ht(){let n=A_();for(;n!==null&&n.type===64;)n=n.parent;return n}function A_(){return fe.lFrame.currentTNode}function ea(){let n=fe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ki(n,t){let e=fe.lFrame;e.currentTNode=n,e.isParent=t}function N_(){return fe.lFrame.isParent}function fb(){fe.lFrame.isParent=!1}function _b(){return fe.lFrame.contextLView}function k_(){return $u}function gf(n){let t=$u;return $u=n,t}function Al(){let n=fe.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Ap(){return fe.lFrame.bindingIndex}function hb(n){return fe.lFrame.bindingIndex=n}function ca(){return fe.lFrame.bindingIndex++}function Nl(n){let t=fe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function vb(){return fe.lFrame.inI18n}function V_(n){fe.lFrame.inI18n=n}function xb(n,t){let e=fe.lFrame;e.bindingIndex=e.bindingRootIndex=n,Bu(t)}function Cb(){return fe.lFrame.currentDirectiveIndex}function Bu(n){fe.lFrame.currentDirectiveIndex=n}function yb(n){let t=fe.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function F_(n){fe.lFrame.currentQueryIndex=n}function bb(n){let t=n[ye];return t.type===2?t.declTNode:t.type===1?n[dn]:null}function L_(n,t,e){if(e&ge.SkipSelf){let r=t,s=n;for(;r=r.parent,r===null&&!(e&ge.Host);)if(r=bb(s),r===null||(s=s[ao],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=fe.lFrame=$_();return i.currentTNode=t,i.lView=n,!0}function Np(n){let t=$_(),e=n[ye];fe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function $_(){let n=fe.lFrame,t=n===null?null:n.child;return t===null?B_(n):t}function B_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function z_(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var j_=z_;function kp(){let n=z_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Eb(n){return(fe.lFrame.contextLView=sb(n,fe.lFrame.contextLView))[Ut]}function Mi(){return fe.lFrame.selectedIndex}function dr(n){fe.lFrame.selectedIndex=n}function Vp(){let n=fe.lFrame;return S_(n.tView,n.selectedIndex)}function Db(){return fe.lFrame.currentNamespace}var U_=!0;function kl(){return U_}function Vl(n){U_=n}function Mb(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let d=E_(t);(e.preOrderHooks??=[]).push(n,d),(e.preOrderCheckHooks??=[]).push(n,d)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function G_(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:u,ngAfterViewInit:p,ngAfterViewChecked:f,ngOnDestroy:b}=s;d&&(n.contentHooks??=[]).push(-e,d),u&&((n.contentHooks??=[]).push(e,u),(n.contentCheckHooks??=[]).push(e,u)),p&&(n.viewHooks??=[]).push(-e,p),f&&((n.viewHooks??=[]).push(e,f),(n.viewCheckHooks??=[]).push(e,f)),b!=null&&(n.destroyHooks??=[]).push(e,b)}}function qs(n,t,e){H_(n,t,3,e)}function Ys(n,t,e,i){(n[ce]&3)===e&&H_(n,t,e,i)}function vu(n,t){let e=n[ce];(e&3)===t&&(e&=16383,e+=1,n[ce]=e)}function H_(n,t,e,i){let r=i!==void 0?n[Xr]&65535:0,s=i??-1,d=t.length-1,u=0;for(let p=r;p<d;p++)if(typeof t[p+1]=="number"){if(u=t[p],i!=null&&u>=i)break}else t[p]<0&&(n[Xr]+=65536),(u<s||s==-1)&&(Sb(n,e,t,p),n[Xr]=(n[Xr]&4294901760)+p+2),p++}function ff(n,t){Ae(4,n,t);let e=xe(null);try{t.call(n)}finally{xe(e),Ae(5,n,t)}}function Sb(n,t,e,i){let r=e[i]<0,s=e[i+1],d=r?-e[i]:e[i],u=n[d];r?n[ce]>>14<n[Xr]>>16&&(n[ce]&3)===t&&(n[ce]+=16384,ff(u,s)):ff(u,s)}var Zr=-1,ur=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function Ib(n){return(n.flags&8)!==0}function Pb(n){return(n.flags&16)!==0}function Tb(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],d=e[i++],u=e[i++];n.setAttribute(t,d,u,s)}else{let s=r,d=e[++i];Rb(s)?n.setProperty(t,s,d):n.setAttribute(t,s,d),i++}}return i}function X_(n){return n===3||n===4||n===6}function Rb(n){return n.charCodeAt(0)===64}function ta(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?_f(n,e,r,null,t[++i]):_f(n,e,r,null,null))}}return n}function _f(n,t,e,i,r){let s=0,d=n.length;if(t===-1)d=-1;else for(;s<n.length;){let u=n[s++];if(typeof u=="number"){if(u===t){d=-1;break}else if(u>t){d=s-1;break}}}for(;s<n.length;){let u=n[s];if(typeof u=="number")break;if(u===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}d!==-1&&(n.splice(d,0,t),s=d+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function W_(n){return n!==Zr}function ul(n){return n&32767}function Ob(n){return n>>16}function pl(n,t){let e=Ob(n),i=t;for(;e>0;)i=i[ao],e--;return i}var zu=!0;function ml(n){let t=zu;return zu=n,t}var wb=256,q_=wb-1,Y_=5,Ab=0,Jn={};function Nb(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Xo)&&(i=e[Xo]),i==null&&(i=e[Xo]=Ab++);let r=i&q_,s=1<<r;t.data[n+(r>>Y_)]|=s}function gl(n,t){let e=Z_(n,t);if(e!==-1)return e;let i=t[ye];i.firstCreatePass&&(n.injectorIndex=t.length,xu(i.data,n),xu(t,null),xu(i.blueprint,null));let r=Fp(n,t),s=n.injectorIndex;if(W_(r)){let d=ul(r),u=pl(r,t),p=u[ye].data;for(let f=0;f<8;f++)t[s+f]=u[d+f]|p[d+f]}return t[s+8]=r,s}function xu(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Z_(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Fp(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=th(r),i===null)return Zr;if(e++,r=r[ao],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Zr}function ju(n,t,e){Nb(n,t,e)}function kb(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let s=e[r];if(X_(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(s===t)return e[r+1];r=r+2}}}return null}function J_(n,t,e){if(e&ge.Optional||n!==void 0)return n;Mp(t,"NodeInjector")}function K_(n,t,e,i){if(e&ge.Optional&&i===void 0&&(i=null),(e&(ge.Self|ge.Host))===0){let r=n[Kr],s=zt(void 0);try{return r?r.get(t,i,e&ge.Optional):l_(t,i,e&ge.Optional)}finally{zt(s)}}return J_(i,t,e)}function Q_(n,t,e,i=ge.Default,r){if(n!==null){if(t[ce]&2048&&!(i&ge.Self)){let d=Bb(n,t,e,i,Jn);if(d!==Jn)return d}let s=eh(n,t,e,i,Jn);if(s!==Jn)return s}return K_(t,e,i,r)}function eh(n,t,e,i,r){let s=Lb(e);if(typeof s=="function"){if(!L_(t,n,i))return i&ge.Host?J_(r,e,i):K_(t,e,i,r);try{let d;if(d=s(i),d==null&&!(i&ge.Optional))Mp(e);else return d}finally{j_()}}else if(typeof s=="number"){let d=null,u=Z_(n,t),p=Zr,f=i&ge.Host?t[$n][dn]:null;for((u===-1||i&ge.SkipSelf)&&(p=u===-1?Fp(n,t):t[u+8],p===Zr||!vf(i,!1)?u=-1:(d=t[ye],u=ul(p),t=pl(p,t)));u!==-1;){let b=t[ye];if(hf(s,u,b.data)){let D=Vb(u,t,e,d,i,f);if(D!==Jn)return D}p=t[u+8],p!==Zr&&vf(i,t[ye].data[u+8]===f)&&hf(s,u,t)?(d=b,u=ul(p),t=pl(p,t)):u=-1}}return r}function Vb(n,t,e,i,r,s){let d=t[ye],u=d.data[n+8],p=i==null?so(u)&&zu:i!=d&&(u.type&3)!==0,f=r&ge.Host&&s===u,b=Fb(u,d,e,p,f);return b!==null?fl(t,d,b,u,r):Jn}function Fb(n,t,e,i,r){let s=n.providerIndexes,d=t.data,u=s&1048575,p=n.directiveStart,f=n.directiveEnd,b=s>>20,D=i?u:u+b,S=r?u+b:f;for(let M=D;M<S;M++){let R=d[M];if(M<p&&e===R||M>=p&&R.type===e)return M}if(r){let M=d[p];if(M&&Qn(M)&&M.type===e)return p}return null}function fl(n,t,e,i,r){let s=n[e],d=t.data;if(s instanceof ur){let u=s;u.resolving&&a_(Py(d[e]));let p=ml(u.canSeeViewProviders);u.resolving=!0;let f,b=u.injectImpl?zt(u.injectImpl):null,D=L_(n,i,ge.Default);try{s=n[e]=u.factory(void 0,r,d,n,i),t.firstCreatePass&&e>=i.directiveStart&&Mb(e,d[e],t)}finally{b!==null&&zt(b),ml(p),u.resolving=!1,j_()}}return s}function Lb(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Xo)?n[Xo]:void 0;return typeof t=="number"?t>=0?t&q_:$b:t}function hf(n,t,e){let i=1<<n;return!!(e[t+(n>>Y_)]&i)}function vf(n,t){return!(n&ge.Self)&&!(n&ge.Host&&t)}var rr=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Q_(this._tNode,this._lView,t,Il(i),e)}};function $b(){return new rr(Ht(),ve())}function en(n){return oa(()=>{let t=n.prototype.constructor,e=t[el]||Uu(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[el]||Uu(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Uu(n){return t_(n)?()=>{let t=Uu(St(n));return t&&t()}:or(n)}function Bb(n,t,e,i,r){let s=n,d=t;for(;s!==null&&d!==null&&d[ce]&2048&&!dl(d);){let u=eh(s,d,e,i|ge.Self,Jn);if(u!==Jn)return u;let p=s.parent;if(!p){let f=d[x_];if(f){let b=f.get(e,Jn,i);if(b!==Jn)return b}p=th(d),d=d[ao]}s=p}return r}function th(n){let t=n[ye],e=t.type;return e===2?t.declTNode:e===1?n[dn]:null}function Lp(n){return kb(Ht(),n)}function xf(n,t=null,e=null,i){let r=nh(n,t,e,i);return r.resolveInjectorInitializers(),r}function nh(n,t=null,e=null,i,r=new Set){let s=[e||It,Ip(n)];return i=i||(typeof n=="object"?void 0:jt(n)),new Jo(s,t||Tp(),i||null,r)}var cn=class n{static THROW_IF_NOT_FOUND=ir;static NULL=new rl;static create(t,e){if(Array.isArray(t))return xf({name:""},e,t,"");{let i=t.name??"";return xf({name:i},t.parent,t.providers,i)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>Q(u_)});static __NG_ELEMENT_ID__=-1};var zb=new W("");zb.__NG_ELEMENT_ID__=n=>{let t=Ht();if(t===null)throw new X(204,!1);if(t.type&2)return t.value;if(n&ge.Optional)return null;throw new X(204,!1)};var ih=!1,co=(()=>{class n{static __NG_ELEMENT_ID__=jb;static __NG_ENV_ID__=e=>e}return n})(),Gu=class extends co{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return lo(e)?(t(),()=>{}):(T_(e,t),()=>lb(e,t))}};function jb(){return new Gu(ve())}var to=class{},rh=new W("",{providedIn:"root",factory:()=>!1});var oh=new W(""),ah=new W(""),Vi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new mt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();var Hu=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,v_()&&(this.destroyRef=B(co,{optional:!0})??void 0,this.pendingTasks=B(Vi,{optional:!0})??void 0)}emit(t){let e=xe(null);try{super.next(t)}finally{xe(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),d=i;if(t&&typeof t=="object"){let p=t;r=p.next?.bind(p),s=p.error?.bind(p),d=p.complete?.bind(p)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),d&&(d=this.wrapInTimeout(d)));let u=super.subscribe({next:r,error:s,complete:d});return t instanceof Ze&&t.add(u),u}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},tt=Hu;function _l(...n){}function sh(n){let t,e;function i(){n=_l;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Cf(n){return queueMicrotask(()=>n()),()=>{n=_l}}var $p="isAngularZone",hl=$p+"_ID",Ub=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new tt(!1);onMicrotaskEmpty=new tt(!1);onStable=new tt(!1);onError=new tt(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=ih}=t;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!r&&i,d.shouldCoalesceRunChangeDetection=r,d.callbackScheduled=!1,d.scheduleInRootZone=s,Xb(d)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($p)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,t,Gb,_l,_l);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},Gb={};function Bp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Hb(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){sh(()=>{n.callbackScheduled=!1,Xu(n),n.isCheckStableRunning=!0,Bp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Xu(n)}function Xb(n){let t=()=>{Hb(n)},e=Ub++;n._inner=n._inner.fork({name:"angular",properties:{[$p]:!0,[hl]:e,[hl+e]:!0},onInvokeTask:(i,r,s,d,u,p)=>{if(Wb(p))return i.invokeTask(s,d,u,p);try{return yf(n),i.invokeTask(s,d,u,p)}finally{(n.shouldCoalesceEventChangeDetection&&d.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),bf(n)}},onInvoke:(i,r,s,d,u,p,f)=>{try{return yf(n),i.invoke(s,d,u,p,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!qb(p)&&t(),bf(n)}},onHasTask:(i,r,s,d)=>{i.hasTask(s,d),r===s&&(d.change=="microTask"?(n._hasPendingMicrotasks=d.microTask,Xu(n),Bp(n)):d.change=="macroTask"&&(n.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,r,s,d)=>(i.handleError(s,d),n.runOutsideAngular(()=>n.onError.emit(d)),!1)})}function Xu(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function yf(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bf(n){n._nesting--,Bp(n)}var Wu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new tt;onMicrotaskEmpty=new tt;onStable=new tt;onError=new tt;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function Wb(n){return lh(n,"__ignore_ng_zone__")}function qb(n){return lh(n,"__scheduler_tick__")}function lh(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var ti=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Yb=new W("",{providedIn:"root",factory:()=>{let n=B(nt),t=B(ti);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function Ef(n,t){return Qf(n,t)}function Zb(n){return Qf(Kf,n)}var ch=(Ef.required=Zb,Ef);function Jb(){return Fl(Ht(),ve())}function Fl(n,t){return new jn(ri(n,t))}var jn=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=Jb}return n})();function Kb(n){return typeof n=="function"&&n[rn]!==void 0}function uo(n,t){let e=Wd(n,t?.equal),i=e[rn];return e.set=r=>$o(i,r),e.update=r=>qd(i,r),e.asReadonly=Qb.bind(e),e}function Qb(){let n=this[rn];if(n.readonlyFn===void 0){let t=()=>this();t[rn]=n,n.readonlyFn=t}return n.readonlyFn}function dh(n){return Kb(n)&&typeof n.set=="function"}function uh(n){return(n.flags&128)===128}var ph=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ph||{}),mh=new Map,eE=0;function tE(){return eE++}function nE(n){mh.set(n[Rl],n)}function qu(n){mh.delete(n[Rl])}var Df="__ngContext__";function pr(n,t){Ni(t)?(n[Df]=t[Rl],nE(t)):n[Df]=t}function gh(n){return _h(n[Ko])}function fh(n){return _h(n[Ln])}function _h(n){for(;n!==null&&!Di(n);)n=n[Ln];return n}var Yu;function hh(n){Yu=n}function vh(){if(Yu!==void 0)return Yu;if(typeof document<"u")return document;throw new X(210,!1)}var zp=new W("",{providedIn:"root",factory:()=>iE}),iE="ng",jp=new W(""),po=new W("",{providedIn:"platform",factory:()=>"unknown"});var Up=new W("",{providedIn:"root",factory:()=>vh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rE="h",oE="b";var xh=!1,aE=new W("",{providedIn:"root",factory:()=>xh});var Gp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Gp||{}),mo=new W(""),Mf=new Set;function da(n){Mf.has(n)||(Mf.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ch=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=sE}return n})();function sE(){return new Ch(ve(),Ht())}var Wr=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Wr||{}),yh=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),lE=[Wr.EarlyRead,Wr.Write,Wr.MixedReadWrite,Wr.Read],cE=(()=>{class n{ngZone=B(nt);scheduler=B(to);errorHandler=B(ti,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){B(mo,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Ae(16),this.executing=!0;for(let i of lE)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Ae(17)}register(e){let{view:i}=e;i!==void 0?((i[Yr]??=[]).push(e),la(i),i[ce]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Gp.AFTER_NEXT_RENDER,e):e()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Zu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,d=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=d,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Yr];t&&(this.view[Yr]=t.filter(e=>e!==this))}};function Hp(n,t){!t?.injector&&Ky(Hp);let e=t?.injector??B(cn);return da("NgAfterNextRender"),uE(n,e,t,!0)}function dE(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function uE(n,t,e,i){let r=t.get(yh);r.impl??=t.get(cE);let s=t.get(mo,null,{optional:!0}),d=e?.phase??Wr.MixedReadWrite,u=e?.manualCleanup!==!0?t.get(co):null,p=t.get(Ch,null,{optional:!0}),f=new Zu(r.impl,dE(n,d),p?.view,i,u,s?.snapshot(null));return r.impl.register(f),f}var pE=(n,t,e,i)=>{};function mE(n,t,e,i){pE(n,t,e,i)}var gE=()=>null;function bh(n,t,e=!1){return gE(n,t,e)}function Eh(n,t){let e=n.contentQueries;if(e!==null){let i=xe(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],d=e[r+1];if(d!==-1){let u=n.data[d];F_(s),u.contentQueries(2,t[d],d)}}}finally{xe(i)}}}function Ju(n,t,e){F_(0);let i=xe(null);try{t(n,e)}finally{xe(i)}}function Dh(n,t,e){if(y_(t)){let i=xe(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let d=r;d<s;d++){let u=n.data[d];if(u.contentQueries){let p=e[d];u.contentQueries(1,p,d)}}}finally{xe(i)}}}var ni=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ni||{}),Gs;function fE(){if(Gs===void 0&&(Gs=null,Ci.trustedTypes))try{Gs=Ci.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gs}function Xp(n){return fE()?.createHTML(n)||n}var Hs;function _E(){if(Hs===void 0&&(Hs=null,Ci.trustedTypes))try{Hs=Ci.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hs}function Sf(n){return _E()?.createScriptURL(n)||n}var vl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zf})`}};function ua(n){return n instanceof vl?n.changingThisBreaksApplicationSecurity:n}function Mh(n,t){let e=hE(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Zf})`)}return e===t}function hE(n){return n instanceof vl&&n.getTypeName()||null}function vE(n){let t=new Qu(n);return xE()?new Ku(t):t}var Ku=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Xp(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Qu=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Xp(t),e}};function xE(){try{return!!new window.DOMParser().parseFromString(Xp(""),"text/html")}catch{return!1}}var CE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Sh(n){return n=String(n),n.match(CE)?n:"unsafe:"+n}function Fi(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function pa(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var yE=Fi("area,br,col,hr,img,wbr"),Ih=Fi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ph=Fi("rp,rt"),bE=pa(Ph,Ih),EE=pa(Ih,Fi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),DE=pa(Ph,Fi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ME=pa(yE,EE,DE,bE),Th=Fi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SE=Fi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),IE=Fi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),PE=pa(Th,SE,IE);function TE(n){return"content"in n&&RE(n)?n.content:null}function RE(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Wp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wp||{});function qp(n){let t=Oh();return t?t.sanitize(Wp.URL,n)||"":Mh(n,"URL")?ua(n):Sh(Kn(n))}function OE(n){let t=Oh();if(t)return Sf(t.sanitize(Wp.RESOURCE_URL,n)||"");if(Mh(n,"ResourceURL"))return Sf(ua(n));throw new X(904,!1)}function wE(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?OE:qp}function Rh(n,t,e){return wE(t,e)(n)}function Oh(){let n=ve();return n&&n[yi].sanitizer}var AE=/^>|^->|<!--|-->|--!>|<!-$/g,NE=/(<|>)/g,kE="\u200B$1\u200B";function VE(n){return n.replace(AE,t=>t.replace(NE,kE))}function wh(n){return n.ownerDocument.defaultView}function Ah(n){return n.ownerDocument}function Nh(n){return n instanceof Function?n():n}function FE(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var kh="ng-template";function LE(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&FE(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Yp(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function Yp(n){return n.type===4&&n.value!==kh}function $E(n,t,e){let i=n.type===4&&!e?kh:n.value;return t===i}function BE(n,t,e){let i=4,r=n.attrs,s=r!==null?UE(r):0,d=!1;for(let u=0;u<t.length;u++){let p=t[u];if(typeof p=="number"){if(!d&&!Vn(i)&&!Vn(p))return!1;if(d&&Vn(p))continue;d=!1,i=p|i&1;continue}if(!d)if(i&4){if(i=2|i&1,p!==""&&!$E(n,p,e)||p===""&&t.length===1){if(Vn(i))return!1;d=!0}}else if(i&8){if(r===null||!LE(n,r,p,e)){if(Vn(i))return!1;d=!0}}else{let f=t[++u],b=zE(p,r,Yp(n),e);if(b===-1){if(Vn(i))return!1;d=!0;continue}if(f!==""){let D;if(b>s?D="":D=r[b+1].toLowerCase(),i&2&&f!==D){if(Vn(i))return!1;d=!0}}}}return Vn(i)||d}function Vn(n){return(n&1)===0}function zE(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let d=t[r];if(d===n)return r;if(d===3||d===6)s=!0;else if(d===1||d===2){let u=t[++r];for(;typeof u=="string";)u=t[++r];continue}else{if(d===4)break;if(d===0){r+=4;continue}}r+=s?1:2}return-1}else return GE(t,n)}function jE(n,t,e=!1){for(let i=0;i<t.length;i++)if(BE(n,t[i],e))return!0;return!1}function UE(n){for(let t=0;t<n.length;t++){let e=n[t];if(X_(e))return t}return n.length}function GE(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function If(n,t){return n?":not("+t.trim()+")":t}function HE(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let d=n[e];if(typeof d=="string")if(i&2){let u=n[++e];r+="["+d+(u.length>0?'="'+u+'"':"")+"]"}else i&8?r+="."+d:i&4&&(r+=" "+d);else r!==""&&!Vn(d)&&(t+=If(s,r),r=""),i=d,s=s||!Vn(i);e++}return r!==""&&(t+=If(s,r)),t}function XE(n){return n.map(HE).join(",")}function WE(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!Vn(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var Xt={};function Vh(n,t){return n.createText(t)}function Fh(n,t,e){n.setValue(t,e)}function qE(n,t){return n.createComment(VE(t))}function Zp(n,t,e){return n.createElement(t,e)}function mr(n,t,e,i,r){n.insertBefore(t,e,i,r)}function Lh(n,t,e){n.appendChild(t,e)}function Pf(n,t,e,i,r){i!==null?mr(n,t,e,i,r):Lh(n,t,e)}function $h(n,t,e){n.removeChild(null,t,e)}function YE(n,t,e){n.setAttribute(t,"style",e)}function ZE(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Bh(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&Tb(n,t,i),r!==null&&ZE(n,t,r),s!==null&&YE(n,t,s)}function Jp(n,t,e,i,r,s,d,u,p,f,b){let D=bt+i,S=D+r,M=JE(D,S),R=typeof f=="function"?f():f;return M[ye]={type:n,blueprint:M,template:e,queries:null,viewQuery:u,declTNode:t,data:M.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof d=="function"?d():d,firstChild:null,schemas:p,consts:R,incompleteFirstPass:!1,ssrId:b}}function JE(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Xt);return e}function KE(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Kp(n,t,e,i,r,s,d,u,p,f,b){let D=t.blueprint.slice();return D[Ei]=r,D[ce]=i|4|128|8|64|1024,(f!==null||n&&n[ce]&2048)&&(D[ce]|=2048),I_(D),D[Pt]=D[ao]=n,D[Ut]=e,D[yi]=d||n&&n[yi],D[Ve]=u||n&&n[Ve],D[Kr]=p||n&&n[Kr]||null,D[dn]=s,D[Rl]=tE(),D[ol]=b,D[x_]=f,D[$n]=t.type==2?n[$n]:D,D}function QE(n,t,e){let i=ri(t,n),r=KE(e),s=n[yi].rendererFactory,d=Qp(n,Kp(n,r,null,zh(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=d}function zh(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function ma(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Qp(n,t){return n[Ko]?n[pf][Ln]=t:n[Ko]=t,n[pf]=t,t}function c(n=1){jh(ht(),ve(),Mi()+n,!1)}function jh(n,t,e,i){if(!i)if((t[ce]&3)===3){let s=n.preOrderCheckHooks;s!==null&&qs(t,s,e)}else{let s=n.preOrderHooks;s!==null&&Ys(t,s,0,e)}dr(e)}var Ll=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ll||{});function ep(n,t,e,i){let r=xe(null);try{let[s,d,u]=n.inputs[e],p=null;(d&Ll.SignalBased)!==0&&(p=t[s][rn]),p!==null&&p.transformFn!==void 0?i=p.transformFn(i):u!==null&&(i=u.call(t,i)),n.setInput!==null?n.setInput(t,p,i,e,s):b_(t,p,s,i)}finally{xe(r)}}function Uh(n,t,e,i,r){let s=Mi(),d=i&2;try{dr(-1),d&&t.length>bt&&jh(n,t,bt,!1),Ae(d?2:0,r),e(i,r)}finally{dr(s),Ae(d?3:1,r)}}function em(n,t,e){oD(n,t,e),(e.flags&64)===64&&aD(n,t,e)}function Gh(n,t,e=ri){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let d=i[s+1],u=d===-1?e(t,n):n[d];n[r++]=u}}}function eD(n,t,e,i){let s=i.get(aE,xh)||e===ni.ShadowDom,d=n.selectRootElement(t,s);return tD(d),d}function tD(n){nD(n)}var nD=()=>null;function iD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function tm(n,t,e,i,r,s,d,u){if(!u&&im(t,n,e,i,r)){so(t)&&rD(e,t.index);return}if(t.type&3){let p=ri(t,e);i=iD(i),r=d!=null?d(r,t.value||"",i):r,s.setProperty(p,i,r)}else t.type&12}function rD(n,t){let e=ei(t,n);e[ce]&16||(e[ce]|=64)}function oD(n,t,e){let i=e.directiveStart,r=e.directiveEnd;so(e)&&QE(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||gl(e,t);let s=e.initialInputs;for(let d=i;d<r;d++){let u=n.data[d],p=fl(t,n,d,e);if(pr(p,t),s!==null&&cD(t,d-i,p,u,e,s),Qn(u)){let f=ei(e.index,t);f[Ut]=fl(t,n,d,e)}}}function aD(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,d=Cb();try{dr(s);for(let u=i;u<r;u++){let p=n.data[u],f=t[u];Bu(u),(p.hostBindings!==null||p.hostVars!==0||p.hostAttrs!==null)&&sD(p,f)}}finally{dr(-1),Bu(d)}}function sD(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Hh(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];jE(t,s.selectors,!1)&&(i??=[],Qn(s)?i.unshift(s):i.push(s))}return i}function lD(n,t,e,i,r,s){let d=ri(n,t);nm(t[Ve],d,s,n.value,e,i,r)}function nm(n,t,e,i,r,s,d){if(s==null)n.removeAttribute(t,r,e);else{let u=d==null?Kn(s):d(s,i||"",r);n.setAttribute(t,r,u,e)}}function cD(n,t,e,i,r,s){let d=s[t];if(d!==null)for(let u=0;u<d.length;u+=2){let p=d[u],f=d[u+1];ep(i,e,p,f)}}function dD(n,t){let e=n[Kr],i=e?e.get(ti,null):null;i&&i.handleError(t)}function im(n,t,e,i,r){let s=n.inputs?.[i],d=n.hostDirectiveInputs?.[i],u=!1;if(d)for(let p=0;p<d.length;p+=2){let f=d[p],b=d[p+1],D=t.data[f];ep(D,e[f],b,r),u=!0}if(s)for(let p of s){let f=e[p],b=t.data[p];ep(b,f,i,r),u=!0}return u}function uD(n,t){let e=ei(t,n),i=e[ye];pD(i,e);let r=e[Ei];r!==null&&e[ol]===null&&(e[ol]=bh(r,e[Kr])),Ae(18),rm(i,e,e[Ut]),Ae(19,e[Ut])}function pD(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function rm(n,t,e){Np(t);try{let i=n.viewQuery;i!==null&&Ju(1,i,e);let r=n.template;r!==null&&Uh(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[eo]?.finishViewCreation(n),n.staticContentQueries&&Eh(n,t),n.staticViewQueries&&Ju(2,n.viewQuery,e);let s=n.components;s!==null&&mD(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ce]&=-5,kp()}}function mD(n,t){for(let e=0;e<t.length;e++)uD(n,t[e])}function gD(n,t,e,i){let r=xe(null);try{let s=t.tView,u=n[ce]&4096?4096:16,p=Kp(n,s,e,u,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[t.index];p[Qr]=f;let b=n[eo];return b!==null&&(p[eo]=b.createEmbeddedView(s)),rm(s,p,e),p}finally{xe(r)}}function Tf(n,t){return!t||t.firstChild===null||uh(n)}var tp;function om(n,t){return tp(n,t)}function fD(n){tp===void 0&&(tp=n())}var bi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(bi||{});function Xh(n){return(n.flags&32)===32}function qr(n,t,e,i,r){if(i!=null){let s,d=!1;Di(i)?s=i:Ni(i)&&(d=!0,i=i[Ei]);let u=ln(i);n===0&&e!==null?r==null?Lh(t,e,u):mr(t,e,u,r||null,!0):n===1&&e!==null?mr(t,e,u,r||null,!0):n===2?$h(t,u,d):n===3&&t.destroyNode(u),s!=null&&DD(t,n,s,e,r)}}function _D(n,t){Wh(n,t),t[Ei]=null,t[dn]=null}function hD(n,t,e,i,r,s){i[Ei]=r,i[dn]=t,$l(n,i,e,1,r,s)}function Wh(n,t){t[yi].changeDetectionScheduler?.notify(9),$l(n,t,t[Ve],2,null,null)}function vD(n){let t=n[Ko];if(!t)return Cu(n[ye],n);for(;t;){let e=null;if(Ni(t))e=t[Ko];else{let i=t[sn];i&&(e=i)}if(!e){for(;t&&!t[Ln]&&t!==n;)Ni(t)&&Cu(t[ye],t),t=t[Pt];t===null&&(t=n),Ni(t)&&Cu(t[ye],t),e=t&&t[Ln]}t=e}}function am(n,t){let e=n[cl],i=e.indexOf(t);e.splice(i,1)}function qh(n,t){if(lo(t))return;let e=t[Ve];e.destroyNode&&$l(n,t,e,3,null,null),vD(t)}function Cu(n,t){if(lo(t))return;let e=xe(null);try{t[ce]&=-129,t[ce]|=256,t[an]&&Gd(t[an]),CD(n,t),xD(n,t),t[ye].type===1&&t[Ve].destroy();let i=t[Qr];if(i!==null&&Di(t[Pt])){i!==t[Pt]&&am(i,t);let r=t[eo];r!==null&&r.detachView(n)}qu(t)}finally{xe(e)}}function xD(n,t){let e=n.cleanup,i=t[al];if(e!==null)for(let d=0;d<e.length-1;d+=2)if(typeof e[d]=="string"){let u=e[d+3];u>=0?i[u]():i[-u].unsubscribe(),d+=2}else{let u=i[e[d+1]];e[d].call(u)}i!==null&&(t[al]=null);let r=t[Ai];if(r!==null){t[Ai]=null;for(let d=0;d<r.length;d++){let u=r[d];u()}}let s=t[sl];if(s!==null){t[sl]=null;for(let d of s)d.destroy()}}function CD(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof ur)){let s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){let u=r[s[d]],p=s[d+1];Ae(4,u,p);try{p.call(u)}finally{Ae(5,u,p)}}else{Ae(4,r,s);try{s.call(r)}finally{Ae(5,r,s)}}}}}function yD(n,t,e){return Yh(n,t.parent,e)}function Yh(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Ei];if(so(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ni.None||r===ni.Emulated)return null}return ri(i,e)}function bD(n,t,e){return Jh(n,t,e)}function Zh(n,t,e){return n.type&40?ri(n,e):null}var Jh=Zh,np;function Kh(n,t){Jh=n,np=t}function sm(n,t,e,i){let r=yD(n,i,t),s=t[Ve],d=i.parent||t[dn],u=bD(d,i,t);if(r!=null)if(Array.isArray(e))for(let p=0;p<e.length;p++)Pf(s,r,e[p],u,!1);else Pf(s,r,e,u,!1);np!==void 0&&np(s,i,t,e,r)}function Ho(n,t){if(t!==null){let e=t.type;if(e&3)return ri(t,n);if(e&4)return ip(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Ho(n,i);{let r=n[t.index];return Di(r)?ip(-1,r):ln(r)}}else{if(e&128)return Ho(n,t.next);if(e&32)return om(t,n)()||ln(n[t.index]);{let i=Qh(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=cr(n[$n]);return Ho(r,i)}else return Ho(n,t.next)}}}return null}function Qh(n,t){if(t!==null){let i=n[$n][dn],r=t.projection;return i.projection[r]}return null}function ip(n,t){let e=sn+n+1;if(e<t.length){let i=t[e],r=i[ye].firstChild;if(r!==null)return Ho(i,r)}return t[lr]}function lm(n,t,e,i,r,s,d){for(;e!=null;){if(e.type===128){e=e.next;continue}let u=i[e.index],p=e.type;if(d&&t===0&&(u&&pr(ln(u),i),e.flags|=2),!Xh(e))if(p&8)lm(n,t,e.child,i,r,s,!1),qr(t,n,r,u,s);else if(p&32){let f=om(e,i),b;for(;b=f();)qr(t,n,r,b,s);qr(t,n,r,u,s)}else p&16?ED(n,t,i,e,r,s):qr(t,n,r,u,s);e=d?e.projectionNext:e.next}}function $l(n,t,e,i,r,s){lm(e,i,n.firstChild,t,r,s,!1)}function ED(n,t,e,i,r,s){let d=e[$n],p=d[dn].projection[i.projection];if(Array.isArray(p))for(let f=0;f<p.length;f++){let b=p[f];qr(t,n,r,b,s)}else{let f=p,b=d[Pt];uh(i)&&(f.flags|=128),lm(n,t,f,b,r,s,!0)}}function DD(n,t,e,i,r){let s=e[lr],d=ln(e);s!==d&&qr(t,n,i,s,r);for(let u=sn;u<e.length;u++){let p=e[u];$l(p[ye],p,n,t,i,s)}}function MD(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:bi.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=bi.Important),n.setStyle(e,i,r,s))}}function xl(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(ln(s)),Di(s)&&SD(s,i);let d=e.type;if(d&8)xl(n,t,e.child,i);else if(d&32){let u=om(e,t),p;for(;p=u();)i.push(p)}else if(d&16){let u=Qh(t,e);if(Array.isArray(u))i.push(...u);else{let p=cr(t[$n]);xl(p[ye],p,u,i,!0)}}e=r?e.projectionNext:e.next}return i}function SD(n,t){for(let e=sn;e<n.length;e++){let i=n[e],r=i[ye].firstChild;r!==null&&xl(i[ye],i,r,t)}n[lr]!==n[Ei]&&t.push(n[lr])}function e1(n){if(n[Yr]!==null){for(let t of n[Yr])t.impl.addSequence(t);n[Yr].length=0}}var t1=[];function ID(n){return n[an]??PD(n)}function PD(n){let t=t1.pop()??Object.create(RD);return t.lView=n,t}function TD(n){n.lView[an]!==n&&(n.lView=null,t1.push(n))}var RD=le(k({},Fo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{la(n.lView)},consumerOnSignalRead(){this.lView[an]=this}});function OD(n){let t=n[an]??Object.create(wD);return t.lView=n,t}var wD=le(k({},Fo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=cr(n.lView);for(;t&&!n1(t[ye]);)t=cr(t);t&&P_(t)},consumerOnSignalRead(){this.lView[an]=this}});function n1(n){return n.type!==2}function i1(n){if(n[sl]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[sl])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[ce]&8192)}}var AD=100;function r1(n,t=!0,e=0){let r=n[yi].rendererFactory,s=!1;s||r.begin?.();try{ND(n,e)}catch(d){throw t&&dD(n,d),d}finally{s||r.end?.()}}function ND(n,t){let e=k_();try{gf(!0),rp(n,t);let i=0;for(;wl(n);){if(i===AD)throw new X(103,!1);i++,rp(n,1)}}finally{gf(e)}}function kD(n,t,e,i){if(lo(t))return;let r=t[ce],s=!1,d=!1;Np(t);let u=!0,p=null,f=null;s||(n1(n)?(f=ID(t),p=us(f)):Ld()===null?(u=!1,f=OD(t),p=us(f)):t[an]&&(Gd(t[an]),t[an]=null));try{I_(t),hb(n.bindingStartIndex),e!==null&&Uh(n,t,e,2,i);let b=(r&3)===3;if(!s)if(b){let M=n.preOrderCheckHooks;M!==null&&qs(t,M,null)}else{let M=n.preOrderHooks;M!==null&&Ys(t,M,0,null),vu(t,0)}if(d||VD(t),i1(t),o1(t,0),n.contentQueries!==null&&Eh(n,t),!s)if(b){let M=n.contentCheckHooks;M!==null&&qs(t,M)}else{let M=n.contentHooks;M!==null&&Ys(t,M,1),vu(t,1)}LD(n,t);let D=n.components;D!==null&&s1(t,D,0);let S=n.viewQuery;if(S!==null&&Ju(2,S,i),!s)if(b){let M=n.viewCheckHooks;M!==null&&qs(t,M)}else{let M=n.viewHooks;M!==null&&Ys(t,M,2),vu(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[hu]){for(let M of t[hu])M();t[hu]=null}s||(e1(t),t[ce]&=-73)}catch(b){throw s||la(t),b}finally{f!==null&&(jd(f,p),u&&TD(f)),kp()}}function o1(n,t){for(let e=gh(n);e!==null;e=fh(e))for(let i=sn;i<e.length;i++){let r=e[i];a1(r,t)}}function VD(n){for(let t=gh(n);t!==null;t=fh(t)){if(!(t[ce]&2))continue;let e=t[cl];for(let i=0;i<e.length;i++){let r=e[i];P_(r)}}}function FD(n,t,e){Ae(18);let i=ei(t,n);a1(i,e),Ae(19,i[Ut])}function a1(n,t){wp(n)&&rp(n,t)}function rp(n,t){let i=n[ye],r=n[ce],s=n[an],d=!!(t===0&&r&16);if(d||=!!(r&64&&t===0),d||=!!(r&1024),d||=!!(s?.dirty&&Ud(s)),d||=!1,s&&(s.dirty=!1),n[ce]&=-9217,d)kD(i,n,i.template,n[Ut]);else if(r&8192){i1(n),o1(n,1);let u=i.components;u!==null&&s1(n,u,1),e1(n)}}function s1(n,t,e){for(let i=0;i<t.length;i++)FD(n,t[i],e)}function LD(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)dr(~r);else{let s=r,d=e[++i],u=e[++i];xb(d,s);let p=t[s];Ae(24,p),u(2,p),Ae(25,p)}}}finally{dr(-1)}}function cm(n,t){let e=k_()?64:1088;for(n[yi].changeDetectionScheduler?.notify(t);n;){n[ce]|=e;let i=cr(n);if(dl(n)&&!i)return n;n=i}return null}function l1(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function $D(n,t,e,i=!0){let r=t[ye];if(BD(r,t,n,e),i){let d=ip(e,n),u=t[Ve],p=u.parentNode(n[lr]);p!==null&&hD(r,n[dn],u,t,p,d)}let s=t[ol];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function op(n,t){if(n.length<=sn)return;let e=sn+t,i=n[e];if(i){let r=i[Qr];r!==null&&r!==n&&am(r,i),t>0&&(n[e-1][Ln]=i[Ln]);let s=il(n,sn+t);_D(i[ye],i);let d=s[eo];d!==null&&d.detachView(s[ye]),i[Pt]=null,i[Ln]=null,i[ce]&=-129}return i}function BD(n,t,e,i){let r=sn+i,s=e.length;i>0&&(e[r-1][Ln]=t),i<s-sn?(t[Ln]=e[r],d_(e,sn+i,t)):(e.push(t),t[Ln]=null),t[Pt]=e;let d=t[Qr];d!==null&&e!==d&&c1(d,t);let u=t[eo];u!==null&&u.insertView(n),Lu(t),t[ce]|=128}function c1(n,t){let e=n[cl],i=t[Pt];if(Ni(i))n[ce]|=2;else{let r=i[Pt][$n];t[$n]!==r&&(n[ce]|=2)}e===null?n[cl]=[t]:e.push(t)}var na=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[ye];return xl(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Ut]}set context(t){this._lView[Ut]=t}get destroyed(){return lo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pt];if(Di(t)){let e=t[ll],i=e?e.indexOf(this):-1;i>-1&&(op(t,i),il(e,i))}this._attachedToViewContainer=!1}qh(this._lView[ye],this._lView)}onDestroy(t){T_(this._lView,t)}markForCheck(){cm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){Lu(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,r1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=dl(this._lView),e=this._lView[Qr];e!==null&&!t&&am(e,this._lView),Wh(this._lView[ye],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=t;let e=dl(this._lView),i=this._lView[Qr];i!==null&&!e&&c1(i,this._lView),Lu(this._lView)}};var go=(()=>{class n{static __NG_ELEMENT_ID__=UD}return n})(),zD=go,jD=class extends zD{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=gD(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new na(r)}};function UD(){return d1(Ht(),ve())}function d1(n,t){return n.type&4?new jD(t,n,Fl(n,t)):null}function u1(n,t,e){let i=t.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return r===null?Zh(n,t,e):ln(e[r])}function p1(n,t,e,i,r){let s=t.insertBeforeIndex;if(Array.isArray(s)){let d=i,u=null;if(t.type&3||(u=d,d=r),d!==null&&t.componentOffset===-1)for(let p=1;p<s.length;p++){let f=e[s[p]];mr(n,d,f,u,!1)}}}function dm(n,t,e,i,r){let s=n.data[t];if(s===null)s=um(n,t,e,i,r),vb()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let d=ea();s.injectorIndex=d===null?-1:d.injectorIndex}return ki(s,!0),s}function um(n,t,e,i,r){let s=A_(),d=N_(),u=d?s:s&&s.parent,p=n.data[t]=HD(n,u,e,t,i,r);return GD(n,p,s,d),p}function GD(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function HD(n,t,e,i,r,s){let d=t?t.injectorIndex:-1,u=0;return pb()&&(u|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function m1(n,t){if(n.push(t),n.length>1)for(let e=n.length-2;e>=0;e--){let i=n[e];g1(i)||XD(i,t)&&WD(i)===null&&qD(i,t.index)}}function g1(n){return!(n.type&64)}function XD(n,t){return g1(t)||n.index>t.index}function WD(n){let t=n.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function qD(n,t){let e=n.insertBeforeIndex;Array.isArray(e)?e[0]=t:(Kh(u1,p1),n.insertBeforeIndex=t)}function Wo(n,t){let e=n.data[t];return e===null||typeof e=="string"?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function YD(n,t,e){let i=n.data[t];i===null?n.data[t]=e:i.value=e}function ZD(n,t){let e=n.insertBeforeIndex;e===null?(Kh(u1,p1),e=n.insertBeforeIndex=[null,t]):(Cy(Array.isArray(e),!0,"Expecting array here"),e.push(t))}function JD(n,t,e){let i=um(n,e,64,null,null);return m1(t,i),i}function Bl(n,t){let e=t[n.currentCaseLViewIndex];return e===null?e:e<0?~e:e}function KD(n){return n>>>17}function QD(n){return(n&131070)>>>1}function eM(n,t,e){return n|t<<17|e<<1}function tM(n){return n===-1}function f1(n,t,e){n.index=0;let i=Bl(t,e);i!==null?n.removes=t.remove[i]:n.removes=It}function ap(n){if(n.index<n.removes.length){let t=n.removes[n.index++];if(t>0)return n.lView[t];{n.stack.push(n.index,n.removes);let e=~t,i=n.lView[ye].data[e];return f1(n,i,n.lView),ap(n)}}else return n.stack.length===0?null:(n.removes=n.stack.pop(),n.index=n.stack.pop(),ap(n))}function nM(){let n={stack:[],index:-1};function t(e,i){for(n.lView=i;n.stack.length;)n.stack.pop();return f1(n,e.value,i),ap.bind(null,n)}return t}var S9=new RegExp(`^(\\d+)*(${oE}|${rE})*(.*)`);var iM=()=>{};function rM(n,t,e,i){iM(n,t,e,i)}var oM=()=>{};function aM(n,t,e){oM(n,t,e)}var sM=()=>null;function Rf(n,t){return sM(n,t)}var lM=class{},_1=class{},sp=class{resolveComponentFactory(t){throw Error(`No component factory found for ${jt(t)}.`)}},zl=class{static NULL=new sp},no=class{},oi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>cM()}return n})();function cM(){let n=ve(),t=Ht(),e=ei(t.index,n);return(Ni(e)?e:n)[Ve]}var dM=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var yu={},lp=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Il(i);let r=this.injector.get(t,yu,i);return r!==yu||e===yu?r:this.parentInjector.get(t,e,i)}};function Of(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let d=0;d<t.length;d++){let u=t[d];if(typeof u=="number")s=u;else if(s==1)r=Ru(r,u);else if(s==2){let p=u,f=t[++d];i=Ru(i,p+": "+f+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function w(n,t=ge.Default){let e=ve();if(e===null)return Q(n,t);let i=Ht();return Q_(i,e,St(n),t)}function h1(){let n="invalid";throw new Error(n)}function v1(n,t,e,i,r){let s=i===null?null:{"":-1},d=r(n,e);if(d!==null){let u,p=null,f=null,b=pM(d);b===null?u=d:[u,p,f]=b,fM(n,t,e,u,s,p,f)}s!==null&&i!==null&&uM(e,i,s)}function uM(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new X(-301,!1);i.push(t[r],s)}}function pM(n){let t=null,e=!1;for(let d=0;d<n.length;d++){let u=n[d];if(d===0&&Qn(u)&&(t=u),u.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,s=null;for(let d of n)d.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,mM(d,i,s,r)),d===t&&(i??=[],i.push(d));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,s]):null}function mM(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function gM(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function fM(n,t,e,i,r,s,d){let u=i.length,p=!1;for(let S=0;S<u;S++){let M=i[S];!p&&Qn(M)&&(p=!0,gM(n,e,S)),ju(gl(e,t),n,M.type)}yM(e,n.data.length,u);for(let S=0;S<u;S++){let M=i[S];M.providersResolver&&M.providersResolver(M)}let f=!1,b=!1,D=ma(n,t,u,null);u>0&&(e.directiveToIndex=new Map);for(let S=0;S<u;S++){let M=i[S];if(e.mergedAttrs=ta(e.mergedAttrs,M.hostAttrs),hM(n,e,t,D,M),CM(D,M,r),d!==null&&d.has(M)){let[A,z]=d.get(M);e.directiveToIndex.set(M.type,[D,A+e.directiveStart,z+e.directiveStart])}else(s===null||!s.has(M))&&e.directiveToIndex.set(M.type,D);M.contentQueries!==null&&(e.flags|=4),(M.hostBindings!==null||M.hostAttrs!==null||M.hostVars!==0)&&(e.flags|=64);let R=M.type.prototype;!f&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),f=!0),!b&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),b=!0),D++}_M(n,e,s)}function _M(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))wf(0,t,r,i),wf(1,t,r,i),Nf(t,i,!1);else{let s=e.get(r);Af(0,t,s,i),Af(1,t,s,i),Nf(t,i,!0)}}}function wf(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d;n===0?d=t.inputs??={}:d=t.outputs??={},d[s]??=[],d[s].push(i),x1(t,s)}}function Af(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let d=r[s],u;n===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[d]??=[],u[d].push(i,s),x1(t,d)}}function x1(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Nf(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||Yp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let d=null,u=0;for(;u<i.length;){let p=i[u];if(p===0){u+=4;continue}else if(p===5){u+=2;continue}else if(typeof p=="number")break;if(!e&&r.hasOwnProperty(p)){let f=r[p];for(let b of f)if(b===t){d??=[],d.push(p,i[u+1]);break}}else if(e&&s.hasOwnProperty(p)){let f=s[p];for(let b=0;b<f.length;b+=2)if(f[b]===t){d??=[],d.push(f[b+1],i[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(d)}function hM(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=or(r.type,!0)),d=new ur(s,Qn(r),w);n.blueprint[i]=d,e[i]=d,vM(n,t,i,ma(n,e,r.hostVars,Xt),r)}function vM(n,t,e,i,r){let s=r.hostBindings;if(s){let d=n.hostBindingOpCodes;d===null&&(d=n.hostBindingOpCodes=[]);let u=~t.index;xM(d)!=u&&d.push(u),d.push(e,i,s)}}function xM(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function CM(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Qn(t)&&(e[""]=n)}}function yM(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function C1(n,t,e,i,r,s,d,u){let p=t.consts,f=Qo(p,d),b=dm(t,n,2,i,f);return s&&v1(t,e,b,Qo(p,u),r),b.mergedAttrs=ta(b.mergedAttrs,b.attrs),b.attrs!==null&&Of(b,b.attrs,!1),b.mergedAttrs!==null&&Of(b,b.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,b),b}function y1(n,t){G_(n,t),y_(t)&&n.queries.elementEnd(t)}var Cl=class extends zl{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=sr(t);return new io(e,this.ngModule)}};function bM(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Ll.SignalBased)!==0};return r&&(s.transform=r),s})}function EM(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function DM(n,t,e){let i=t instanceof yt?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new lp(e,i):e}function MM(n){let t=n.get(no,null);if(t===null)throw new X(407,!1);let e=n.get(dM,null),i=n.get(to,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function SM(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return Zp(t,e,e==="svg"?ib:e==="math"?rb:null)}var io=class extends _1{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=bM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=EM(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=XE(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){Ae(22);let s=xe(null);try{let d=this.componentDef,u=i?["ng-version","19.2.14"]:WE(this.componentDef.selectors[0]),p=Jp(0,null,null,1,0,null,null,null,null,[u],null),f=DM(d,r||this.ngModule,t),b=MM(f),D=b.rendererFactory.createRenderer(null,d),S=i?eD(D,i,d.encapsulation,f):SM(d,D),M=Kp(null,p,null,512|zh(d),null,null,b,D,f,null,bh(S,f,!0));M[bt]=S,Np(M);let R=null;try{let A=C1(bt,p,M,"#host",()=>[this.componentDef],!0,0);S&&(Bh(D,S,A),pr(S,M)),em(p,M,A),Dh(p,A,M),y1(p,A),e!==void 0&&IM(A,this.ngContentSelectors,e),R=ei(A.index,M),M[Ut]=R[Ut],rm(p,M,null)}catch(A){throw R!==null&&qu(R),qu(M),A}finally{Ae(23),kp()}return new cp(this.componentType,M)}finally{xe(s)}}},cp=class extends lM{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=S_(e[ye],bt),this.location=Fl(this._tNode,e),this.instance=ei(this._tNode.index,e)[Ut],this.hostView=this.changeDetectorRef=new na(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=im(i,r[ye],r,t,e);this.previousInputValues.set(t,e);let d=ei(i.index,r);cm(d,1)}get injector(){return new rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function IM(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var Li=(()=>{class n{static __NG_ELEMENT_ID__=PM}return n})();function PM(){let n=Ht();return RM(n,ve())}var TM=Li,b1=class extends TM{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Fl(this._hostTNode,this._hostLView)}get injector(){return new rr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Fp(this._hostTNode,this._hostLView);if(W_(t)){let e=pl(t,this._hostLView),i=ul(t),r=e[ye].data[i+8];return new rr(r,e)}else return new rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=kf(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let d=Rf(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(e||{},s,d);return this.insertImpl(u,r,Tf(this._hostTNode,d)),u}createComponent(t,e,i,r,s){let d=t&&!Qy(t),u;if(d)u=e;else{let R=e||{};u=R.index,i=R.injector,r=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}let p=d?t:new io(sr(t)),f=i||this.parentInjector;if(!s&&p.ngModule==null){let A=(d?f:this.parentInjector).get(yt,null);A&&(s=A)}let b=sr(p.componentType??{}),D=Rf(this._lContainer,b?.id??null),S=D?.firstChild??null,M=p.create(f,r,S,s);return this.insertImpl(M.hostView,u,Tf(this._hostTNode,D)),M}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(ab(r)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let p=r[Pt],f=new b1(p,p[dn],p[Pt]);f.detach(f.indexOf(t))}}let s=this._adjustIndex(e),d=this._lContainer;return $D(d,r,s,i),t.attachToViewContainerRef(),d_(bu(d),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=kf(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=op(this._lContainer,e);i&&(il(bu(this._lContainer),e),qh(i[ye],i))}detach(t){let e=this._adjustIndex(t,-1),i=op(this._lContainer,e);return i&&il(bu(this._lContainer),e)!=null?new na(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function kf(n){return n[ll]}function bu(n){return n[ll]||(n[ll]=[])}function RM(n,t){let e,i=t[n.index];return Di(i)?e=i:(e=l1(i,t,null,n),t[n.index]=e,Qp(t,e)),wM(e,t,n,i),new b1(e,n,t)}function OM(n,t){let e=n[Ve],i=e.createComment(""),r=ri(t,n),s=e.parentNode(r);return mr(e,s,i,e.nextSibling(r),!1),i}var wM=kM,AM=()=>!1;function NM(n,t,e){return AM(n,t,e)}function kM(n,t,e,i){if(n[lr])return;let r;e.type&8?r=ln(i):r=OM(t,e),n[lr]=r}var ro=class{},pm=class{};var dp=class extends ro{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cl(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=m_(t);this._bootstrapComponents=Nh(s.bootstrap),this._r3Injector=nh(t,e,[{provide:ro,useValue:this},{provide:zl,useValue:this.componentFactoryResolver},...i],jt(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},up=class extends pm{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new dp(this.moduleType,t,[])}};var yl=class extends ro{injector;componentFactoryResolver=new Cl(this);instance=null;constructor(t){super();let e=new Jo([...t.providers,{provide:ro,useValue:this},{provide:zl,useValue:this.componentFactoryResolver}],t.parent||Tp(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function ga(n,t,e=null){return new yl({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var VM=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=g_(!1,e.type),r=i.length>0?ga([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Q(yt))})}return n})();function J(n){return oa(()=>{let t=E1(n),e=le(k({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ph.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(VM).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ni.Emulated,styles:n.styles||It,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&da("NgStandalone"),D1(e);let i=n.dependencies;return e.directiveDefs=Vf(i,!1),e.pipeDefs=Vf(i,!0),e.id=zM(e),e})}function FM(n){return sr(n)||zy(n)}function LM(n){return n!==null}function Un(n){return oa(()=>({type:n.type,bootstrap:n.bootstrap||It,declarations:n.declarations||It,imports:n.imports||It,exports:n.exports||It,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $M(n,t){if(n==null)return ar;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,d,u,p;Array.isArray(r)?(u=r[0],s=r[1],d=r[2]??s,p=r[3]||null):(s=r,d=r,u=Ll.None,p=null),e[s]=[i,u,p],t[s]=d}return e}function BM(n){if(n==null)return ar;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function De(n){return oa(()=>{let t=E1(n);return D1(t),t})}function fa(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function E1(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||ar,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||It,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$M(n.inputs,t),outputs:BM(n.outputs),debugInfo:null}}function D1(n){n.features?.forEach(t=>t(n))}function Vf(n,t){if(!n)return null;let e=t?jy:FM;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(LM)}function zM(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function jM(n){return Object.getPrototypeOf(n.prototype).constructor}function at(n){let t=jM(n.type),e=!0,i=[n];for(;t;){let r;if(Qn(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new X(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let d=n;d.inputs=Eu(n.inputs),d.declaredInputs=Eu(n.declaredInputs),d.outputs=Eu(n.outputs);let u=r.hostBindings;u&&WM(n,u);let p=r.viewQuery,f=r.contentQueries;if(p&&HM(n,p),f&&XM(n,f),UM(n,r),vy(n.outputs,r.outputs),Qn(r)&&r.data.animation){let b=n.data;b.animation=(b.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let d=0;d<s.length;d++){let u=s[d];u&&u.ngInherit&&u(n),u===at&&(e=!1)}}t=Object.getPrototypeOf(t)}GM(i)}function UM(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function GM(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=ta(r.hostAttrs,e=ta(e,r.hostAttrs))}}function Eu(n){return n===ar?{}:n===It?[]:n}function HM(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function XM(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function WM(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function M1(n){return YM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function qM(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function YM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function mm(n,t,e){return n[t]=e}function ZM(n,t){return n[t]}function Bn(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function gm(n,t,e,i){let r=Bn(n,t,e);return Bn(n,t+1,i)||r}function JM(n,t,e,i,r){let s=gm(n,t,e,i);return Bn(n,t+2,r)||s}function KM(n,t,e,i,r,s,d,u,p){let f=t.consts,b=dm(t,n,4,d||null,u||null);w_()&&v1(t,e,b,Qo(f,p),Hh),b.mergedAttrs=ta(b.mergedAttrs,b.attrs),G_(t,b);let D=b.tView=Jp(2,b,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,f,null);return t.queries!==null&&(t.queries.template(t,b),D.queries=t.queries.embeddedTView(b)),b}function QM(n,t,e,i,r,s,d,u,p,f){let b=e+bt,D=t.firstCreatePass?KM(b,t,n,i,r,s,d,u,p):t.data[b];ki(D,!1);let S=eS(t,n,D,e);kl()&&sm(t,n,S,D),pr(S,n);let M=l1(S,n,S,D);return n[b]=M,Qp(n,M),NM(M,D,n),Rp(D)&&em(t,n,D),p!=null&&Gh(n,D,f),D}function v(n,t,e,i,r,s,d,u){let p=ve(),f=ht(),b=Qo(f.consts,s);return QM(p,f,n,t,e,i,r,b,d,u),v}var eS=tS;function tS(n,t,e,i){return Vl(!0),t[Ve].createComment("")}var S1=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var I1=new W("");var nS=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new pp})}return n})(),pp=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function _r(n){return!!n&&typeof n.then=="function"}function P1(n){return!!n&&typeof n.subscribe=="function"}var T1=new W("");function fm(n){return sa([{provide:T1,multi:!0,useValue:n}])}var R1=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=B(T1,{optional:!0})??[];injector=B(cn);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=Gt(this.injector,r);if(_r(s))e.push(s);else if(P1(s)){let d=new Promise((u,p)=>{s.subscribe({complete:u,error:p})});e.push(d)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jl=new W("");function iS(){Xd(()=>{throw new X(600,!1)})}function rS(n){return n.isBoundToModule}var oS=10;var gr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(Yb);afterRenderManager=B(yh);zonelessEnabled=B(rh);rootEffectScheduler=B(nS);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ot;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=B(Vi).hasPendingTasks.pipe(te(e=>!e));constructor(){B(mo,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=B(yt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=cn.NULL){Ae(10);let s=e instanceof _1;if(!this._injector.get(R1).done){let M="";throw new X(405,M)}let u;s?u=e:u=this._injector.get(zl).resolveComponentFactory(e),this.componentTypes.push(u.componentType);let p=rS(u)?void 0:this._injector.get(ro),f=i||u.selector,b=u.create(r,[],f,p),D=b.location.nativeElement,S=b.injector.get(I1,null);return S?.registerApplication(D),b.onDestroy(()=>{this.detachView(b.hostView),Zs(this.components,b),S?.unregisterApplication(D)}),this._loadComponent(b),Ae(11,b),b}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ae(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Gp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let e=xe(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,xe(e),this.afterTick.next(),Ae(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(no,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<oS;)Ae(14),this.synchronizeOnce(),Ae(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)aS(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>wl(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Zs(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(jl,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Zs(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new X(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zs(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function aS(n,t,e,i){if(!e&&!wl(n))return;r1(n,t,e&&!i?0:1)}function hr(n,t,e,i){let r=ve(),s=ca();if(Bn(r,s,t)){let d=ht(),u=Vp();lD(u,r,n,t,e,i)}return hr}function O1(n,t,e,i){return Bn(n,ca(),e)?t+Kn(e)+i:Xt}function sS(n,t,e,i,r,s){let d=Ap(),u=gm(n,d,e,r);return Nl(2),u?t+Kn(e)+i+Kn(r)+s:Xt}function lS(n,t,e,i,r,s,d,u){let p=Ap(),f=JM(n,p,e,r,d);return Nl(3),f?t+Kn(e)+i+Kn(r)+s+Kn(d)+u:Xt}function Xs(n,t){return n<<17|t<<2}function fr(n){return n>>17&32767}function cS(n){return(n&2)==2}function dS(n,t){return n&131071|t<<17}function mp(n){return n|2}function oo(n){return(n&131068)>>2}function Du(n,t){return n&-131069|t<<2}function uS(n){return(n&1)===1}function gp(n){return n|1}function pS(n,t,e,i,r,s){let d=s?t.classBindings:t.styleBindings,u=fr(d),p=oo(d);n[i]=e;let f=!1,b;if(Array.isArray(e)){let D=e;b=D[1],(b===null||aa(D,b)>0)&&(f=!0)}else b=e;if(r)if(p!==0){let S=fr(n[u+1]);n[i+1]=Xs(S,u),S!==0&&(n[S+1]=Du(n[S+1],i)),n[u+1]=dS(n[u+1],i)}else n[i+1]=Xs(u,0),u!==0&&(n[u+1]=Du(n[u+1],i)),u=i;else n[i+1]=Xs(p,0),u===0?u=i:n[p+1]=Du(n[p+1],i),p=i;f&&(n[i+1]=mp(n[i+1])),Ff(n,b,i,!0),Ff(n,b,i,!1),mS(t,b,n,i,s),d=Xs(u,p),s?t.classBindings=d:t.styleBindings=d}function mS(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&aa(s,t)>=0&&(e[i+1]=gp(e[i+1]))}function Ff(n,t,e,i){let r=n[e+1],s=t===null,d=i?fr(r):oo(r),u=!1;for(;d!==0&&(u===!1||s);){let p=n[d],f=n[d+1];gS(p,t)&&(u=!0,n[d+1]=i?gp(f):mp(f)),d=i?fr(f):oo(f)}u&&(n[e+1]=i?mp(r):gp(r))}function gS(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?aa(n,t)>=0:!1}var Fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fS(n){return n.substring(Fn.key,Fn.keyEnd)}function _S(n){return hS(n),w1(n,A1(n,0,Fn.textEnd))}function w1(n,t){let e=Fn.textEnd;return e===t?-1:(t=Fn.keyEnd=vS(n,Fn.key=t,e),A1(n,t,e))}function hS(n){Fn.key=0,Fn.keyEnd=0,Fn.value=0,Fn.valueEnd=0,Fn.textEnd=n.length}function A1(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function vS(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function m(n,t,e){let i=ve(),r=ca();if(Bn(i,r,t)){let s=ht(),d=Vp();tm(s,d,i,n,t,i[Ve],e,!1)}return m}function fp(n,t,e,i,r){im(t,n,e,r?"class":"style",i)}function Be(n,t,e){return k1(n,t,e,!1),Be}function I(n,t){return k1(n,t,null,!0),I}function q(n){V1(DS,N1,n,!0)}function N1(n,t){for(let e=_S(t);e>=0;e=w1(t,e))Pl(n,fS(t),!0)}function k1(n,t,e,i){let r=ve(),s=ht(),d=Nl(2);if(s.firstUpdatePass&&L1(s,n,d,i),t!==Xt&&Bn(r,d,t)){let u=s.data[Mi()];$1(s,u,r,r[Ve],n,r[d+1]=SS(t,e),i,d)}}function V1(n,t,e,i){let r=ht(),s=Nl(2);r.firstUpdatePass&&L1(r,null,s,i);let d=ve();if(e!==Xt&&Bn(d,s,e)){let u=r.data[Mi()];if(B1(u,i)&&!F1(r,s)){let p=i?u.classesWithoutHost:u.stylesWithoutHost;p!==null&&(e=Ru(p,e||"")),fp(r,u,d,e,i)}else MS(r,u,d,d[Ve],d[s+1],d[s+1]=ES(n,t,e),i,s)}}function F1(n,t){return t>=n.expandoStartIndex}function L1(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[Mi()],d=F1(n,e);B1(s,i)&&t===null&&!d&&(t=!1),t=xS(r,s,t,i),pS(r,s,t,e,d,i)}}function xS(n,t,e,i){let r=yb(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=Mu(null,n,t,e,i),e=ia(e,t.attrs,i),s=null);else{let d=t.directiveStylingLast;if(d===-1||n[d]!==r)if(e=Mu(r,n,t,e,i),s===null){let p=CS(n,t,i);p!==void 0&&Array.isArray(p)&&(p=Mu(null,n,t,p[1],i),p=ia(p,t.attrs,i),yS(n,t,i,p))}else s=bS(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function CS(n,t,e){let i=e?t.classBindings:t.styleBindings;if(oo(i)!==0)return n[fr(i)]}function yS(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[fr(r)]=i}function bS(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let d=n[s].hostAttrs;i=ia(i,d,e)}return ia(i,t.attrs,e)}function Mu(n,t,e,i,r){let s=null,d=e.directiveEnd,u=e.directiveStylingLast;for(u===-1?u=e.directiveStart:u++;u<d&&(s=t[u],i=ia(i,s.hostAttrs,r),s!==n);)u++;return n!==null&&(e.directiveStylingLast=u),i}function ia(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let d=t[s];typeof d=="number"?r=d:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Pl(n,d,e?!0:t[++s]))}return n===void 0?null:n}function ES(n,t,e){if(e==null||e==="")return It;let i=[],r=ua(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function DS(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&Pl(n,i,e)}function MS(n,t,e,i,r,s,d,u){r===Xt&&(r=It);let p=0,f=0,b=0<r.length?r[0]:null,D=0<s.length?s[0]:null;for(;b!==null||D!==null;){let S=p<r.length?r[p+1]:void 0,M=f<s.length?s[f+1]:void 0,R=null,A;b===D?(p+=2,f+=2,S!==M&&(R=D,A=M)):D===null||b!==null&&b<D?(p+=2,R=b):(f+=2,R=D,A=M),R!==null&&$1(n,t,e,i,R,A,d,u),b=p<r.length?r[p]:null,D=f<s.length?s[f]:null}}function $1(n,t,e,i,r,s,d,u){if(!(t.type&3))return;let p=n.data,f=p[u+1],b=uS(f)?Lf(p,t,e,r,oo(f),d):void 0;if(!bl(b)){bl(s)||cS(f)&&(s=Lf(p,null,e,r,u,d));let D=Ol(Mi(),e);MD(i,d,D,r,s)}}function Lf(n,t,e,i,r,s){let d=t===null,u;for(;r>0;){let p=n[r],f=Array.isArray(p),b=f?p[1]:p,D=b===null,S=e[r+1];S===Xt&&(S=D?It:void 0);let M=D?fu(S,i):b===i?S:void 0;if(f&&!bl(M)&&(M=fu(p,i)),bl(M)&&(u=M,d))return u;let R=n[r+1];r=d?fr(R):oo(R)}if(t!==null){let p=s?t.residualClasses:t.residualStyles;p!=null&&(u=fu(p,i))}return u}function bl(n){return n!==void 0}function SS(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=jt(ua(n)))),n}function B1(n,t){return(n.flags&(t?8:16))!==0}function Ul(n,t,e){let i=ve(),r=O1(i,n,t,e);V1(Pl,N1,r,!0)}function a(n,t,e,i){let r=ve(),s=ht(),d=bt+n,u=r[Ve],p=s.firstCreatePass?C1(d,s,r,t,Hh,w_(),e,i):s.data[d],f=IS(s,r,p,u,t,n);r[d]=f;let b=Rp(p);return ki(p,!0),Bh(u,f,p),!Xh(p)&&kl()&&sm(s,r,f,p),(cb()===0||b)&&pr(f,r),db(),b&&(em(s,r,p),Dh(s,p,r)),i!==null&&Gh(r,p),a}function o(){let n=Ht();N_()?fb():(n=n.parent,ki(n,!1));let t=n;mb(t)&&gb(),ub();let e=ht();return e.firstCreatePass&&y1(e,t),t.classesWithoutHost!=null&&Ib(t)&&fp(e,t,ve(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Pb(t)&&fp(e,t,ve(),t.stylesWithoutHost,!1),o}function P(n,t,e,i){return a(n,t,e,i),o(),P}var IS=(n,t,e,i,r,s)=>(Vl(!0),Zp(i,r,Db()));function O(){return ve()}var nr=void 0;function PS(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var TS=["en",[["a","p"],["AM","PM"],nr],[["AM","PM"],nr,nr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nr,"{1} 'at' {0}",nr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",PS],Su={};function Wt(n){let t=RS(n),e=$f(t);if(e)return e;let i=t.split("-")[0];if(e=$f(i),e)return e;if(i==="en")return TS;throw new X(701,!1)}function z1(n){return Wt(n)[Ye.PluralCase]}function $f(n){return n in Su||(Su[n]=Ci.ng&&Ci.ng.common&&Ci.ng.common.locales&&Ci.ng.common.locales[n]),Su[n]}var Ye=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ye||{});function RS(n){return n.toLowerCase().replace(/_/g,"-")}var OS=["zero","one","two","few","many"];function wS(n,t){let e=z1(t)(parseInt(n,10)),i=OS[e];return i!==void 0?i:"other"}var El="en-US";var j1={marker:"element"},U1={marker:"ICU"},xi=function(n){return n[n.SHIFT=2]="SHIFT",n[n.APPEND_EAGERLY=1]="APPEND_EAGERLY",n[n.COMMENT=2]="COMMENT",n}(xi||{}),G1=El;function AS(n){typeof n=="string"&&(G1=n.toLowerCase().replace(/_/g,"-"))}function NS(){return G1}var ra=0,qo=0;function kS(n){n&&(ra=ra|1<<Math.min(qo,31)),qo++}function VS(n,t,e){if(qo>0){let i=n.data[e],r=Array.isArray(i)?i:i.update,s=Ap()-qo-1;X1(n,t,r,s,ra)}ra=0,qo=0}function FS(n,t,e){let i=n[Ve];switch(e){case Node.COMMENT_NODE:return qE(i,t);case Node.TEXT_NODE:return Vh(i,t);case Node.ELEMENT_NODE:return Zp(i,t,null)}}var Js=(n,t,e,i)=>(Vl(!0),FS(n,e,i));function LS(n,t,e,i){let r=n[Ve];for(let s=0;s<t.length;s++){let d=t[s++],u=t[s],p=(d&xi.COMMENT)===xi.COMMENT,f=(d&xi.APPEND_EAGERLY)===xi.APPEND_EAGERLY,b=d>>>xi.SHIFT,D=n[b],S=!1;D===null&&(D=n[b]=Js(n,b,u,p?Node.COMMENT_NODE:Node.TEXT_NODE),S=kl()),f&&e!==null&&S&&mr(r,e,D,i,!1)}}function H1(n,t,e,i){let r=e[Ve],s=null,d;for(let u=0;u<t.length;u++){let p=t[u];if(typeof p=="string"){let f=t[++u];e[f]===null&&(e[f]=Js(e,f,p,Node.TEXT_NODE))}else if(typeof p=="number")switch(p&1){case 0:let f=KD(p);s===null&&(s=f,d=r.parentNode(i));let b,D;if(f===s?(b=i,D=d):(b=null,D=ln(e[f])),D!==null){let A=QD(p),z=e[A];mr(r,D,z,b,!1);let U=Wo(n,A);if(U!==null&&typeof U=="object"){let ue=Bl(U,e);ue!==null&&H1(n,U.create[ue],e,e[U.anchorIdx])}}break;case 1:let S=p>>>1,M=t[++u],R=t[++u];nm(r,Ol(S,e),null,null,M,R,null);break;default:}else switch(p){case U1:let f=t[++u],b=t[++u];if(e[b]===null){let M=e[b]=Js(e,b,f,Node.COMMENT_NODE);pr(M,e)}break;case j1:let D=t[++u],S=t[++u];if(e[S]===null){let M=e[S]=Js(e,S,D,Node.ELEMENT_NODE);pr(M,e)}break;default:}}}function X1(n,t,e,i,r){for(let s=0;s<e.length;s++){let d=e[s],u=e[++s];if(d&r){let p="";for(let f=s+1;f<=s+u;f++){let b=e[f];if(typeof b=="string")p+=b;else if(typeof b=="number")if(b<0)p+=Kn(t[i-b]);else{let D=b>>>2;switch(b&3){case 1:let S=e[++f],M=e[++f],R=n.data[D];typeof R=="string"?nm(t[Ve],t[D],null,R,S,p,M):tm(n,R,t,S,p,t[Ve],M,!1);break;case 0:let A=t[D];A!==null&&Fh(t[Ve],A,p);break;case 2:$S(n,Wo(n,D),t,p);break;case 3:Bf(n,Wo(n,D),i,t);break}}}}else{let p=e[s+1];if(p>0&&(p&3)===3){let f=p>>>2,b=Wo(n,f);t[b.currentCaseLViewIndex]<0&&Bf(n,b,i,t)}}s+=u}}function Bf(n,t,e,i){let r=i[t.currentCaseLViewIndex];if(r!==null){let s=ra;r<0&&(r=i[t.currentCaseLViewIndex]=~r,s=-1),X1(n,i,t.update[r],e,s)}}function $S(n,t,e,i){let r=BS(t,i);if(Bl(t,e)!==r&&(W1(n,t,e),e[t.currentCaseLViewIndex]=r===null?null:~r,r!==null)){let d=e[t.anchorIdx];d&&H1(n,t.create[r],e,d),aM(e,t.anchorIdx,r)}}function W1(n,t,e){let i=Bl(t,e);if(i!==null){let r=t.remove[i];for(let s=0;s<r.length;s++){let d=r[s];if(d>0){let u=Ol(d,e);u!==null&&$h(e[Ve],u)}else W1(n,Wo(n,~d),e)}}}function BS(n,t){let e=n.cases.indexOf(t);if(e===-1)switch(n.type){case 1:{let i=wS(t,NS());e=n.cases.indexOf(i),e===-1&&i!=="other"&&(e=n.cases.indexOf("other"));break}case 0:{e=n.cases.indexOf("other");break}}return e===-1?null:e}var Dl=/(\d+):?\d*/gi;var zS=/(\d+)/,q1=/^\s*(\d+:?\d*)\s*,\s*(select|plural)\s*,/,Yo="\uFFFD",jS=/\/?\*(\d+:\d+)/gi,US=/(\/?[#*]\d+):?\d*/gi,GS=/\uE500/g;function HS(n){return n.replace(GS," ")}function XS(n,t,e,i,r,s){let d=ea(),u=[],p=[],f=[[]],b=[[]];r=qS(r,s);let D=HS(r).split(US);for(let S=0;S<D.length;S++){let M=D[S];if((S&1)===0){let R=_p(M);for(let A=0;A<R.length;A++){let z=R[A];if((A&1)===0){let U=z;U!==""&&WS(b[0],n,d,f[0],u,p,e,U)}else{let U=z;if(typeof U!="object")throw new Error(`Unable to parse ICU expression in "${r}" message.`);let oe=Y1(n,d,f[0],e,u,"",!0).index;J1(b[0],n,e,p,t,U,oe)}}}else{let R=M.charCodeAt(0)===47,A=M.charCodeAt(R?1:0),z=bt+Number.parseInt(M.substring(R?2:1));if(R)f.shift(),b.shift(),ki(ea(),!1);else{let U=JD(n,f[0],z);f.unshift([]),ki(U,!0);let ue={kind:2,index:z,children:[],type:A===35?0:1};b[0].push(ue),b.unshift(ue.children)}}}n.data[i]={create:u,update:p,ast:b[0],parentTNodeIndex:t}}function Y1(n,t,e,i,r,s,d){let u=ma(n,i,1,null),p=u<<xi.SHIFT,f=ea();t===f&&(f=null),f===null&&(p|=xi.APPEND_EAGERLY),d&&(p|=xi.COMMENT,fD(nM)),r.push(p,s===null?"":s);let b=um(n,u,d?32:1,s===null?"":s,null);m1(e,b);let D=b.index;return ki(b,!1),f!==null&&t!==f&&ZD(f,D),b}function WS(n,t,e,i,r,s,d,u){let p=u.match(Dl),b=Y1(t,e,i,d,r,p?null:u,!1).index;p&&Ks(s,u,b,null,0,null),n.push({kind:0,index:b})}function Ks(n,t,e,i,r,s){let d=n.length,u=d+1;n.push(null,null);let p=d+2,f=t.split(Dl),b=0;for(let D=0;D<f.length;D++){let S=f[D];if(D&1){let M=r+parseInt(S,10);n.push(-1-M),b=b|Z1(M)}else S!==""&&n.push(S)}return n.push(e<<2|(i?1:0)),i&&n.push(i,s),n[d]=b,n[u]=n.length-p,b}function Z1(n){return 1<<Math.min(n,31)}function zf(n){let t,e="",i=0,r=!1,s;for(;(t=jS.exec(n))!==null;)r?t[0]===`${Yo}/*${s}${Yo}`&&(i=t.index,r=!1):(e+=n.substring(i,t.index+t[0].length),s=t[1],r=!0);return e+=n.slice(i),e}function qS(n,t){if(tM(t))return zf(n);{let e=n.indexOf(`:${t}${Yo}`)+2+t.toString().length,i=n.search(new RegExp(`${Yo}\\/\\*\\d+:${t}${Yo}`));return zf(n.substring(e,i))}}function J1(n,t,e,i,r,s,d){let u=0,p={type:s.type,currentCaseLViewIndex:ma(t,e,1,null),anchorIdx:d,cases:[],create:[],remove:[],update:[]};KS(i,s,d),YD(t,d,p);let f=s.values,b=[];for(let D=0;D<f.length;D++){let S=f[D],M=[];for(let A=0;A<S.length;A++){let z=S[A];if(typeof z!="string"){let U=M.push(z)-1;S[A]=`<!--\uFFFD${U}\uFFFD-->`}}let R=[];b.push(R),u=ZS(R,t,p,e,i,r,s.cases[D],S.join(""),M)|u}u&&QS(i,u,d),n.push({kind:3,index:d,cases:b,currentCaseLViewIndex:p.currentCaseLViewIndex})}function YS(n){let t=[],e=[],i=1,r=0;n=n.replace(q1,function(d,u,p){return p==="select"?i=0:i=1,r=parseInt(u.slice(1),10),""});let s=_p(n);for(let d=0;d<s.length;){let u=s[d++].trim();i===1&&(u=u.replace(/\s*(?:=)?(\w+)\s*/,"$1")),u.length&&t.push(u);let p=_p(s[d++]);t.length>e.length&&e.push(p)}return{type:i,mainBinding:r,cases:t,values:e}}function _p(n){if(!n)return[];let t=0,e=[],i=[],r=/[{}]/g;r.lastIndex=0;let s;for(;s=r.exec(n);){let u=s.index;if(s[0]=="}"){if(e.pop(),e.length==0){let p=n.substring(t,u);q1.test(p)?i.push(YS(p)):i.push(p),t=u+1}}else{if(e.length==0){let p=n.substring(t,u);i.push(p),t=u+1}e.push("{")}}let d=n.substring(t);return i.push(d),i}function ZS(n,t,e,i,r,s,d,u,p){let f=[],b=[],D=[];e.cases.push(d),e.create.push(f),e.remove.push(b),e.update.push(D);let M=vE(vh()).getInertBodyElement(u),R=TE(M)||M;return R?K1(n,t,e,i,r,f,b,D,R,s,p,0):0}function K1(n,t,e,i,r,s,d,u,p,f,b,D){let S=0,M=p.firstChild;for(;M;){let R=ma(t,i,1,null);switch(M.nodeType){case Node.ELEMENT_NODE:let A=M,z=A.tagName.toLowerCase();if(ME.hasOwnProperty(z)){Iu(s,j1,z,f,R),t.data[R]=z;let re=A.attributes;for(let We=0;We<re.length;We++){let Ue=re.item(We),rt=Ue.name.toLowerCase();!!Ue.value.match(Dl)?PE.hasOwnProperty(rt)&&(Th[rt]?Ks(u,Ue.value,R,Ue.name,0,Sh):Ks(u,Ue.value,R,Ue.name,0,null)):e2(s,R,Ue)}let ke={kind:1,index:R,children:[]};n.push(ke),S=K1(ke.children,t,e,i,r,s,d,u,M,R,b,D+1)|S,jf(d,R,D)}break;case Node.TEXT_NODE:let U=M.textContent||"",ue=U.match(Dl);Iu(s,null,ue?"":U,f,R),jf(d,R,D),ue&&(S=Ks(u,U,R,null,0,null)|S),n.push({kind:0,index:R});break;case Node.COMMENT_NODE:let oe=zS.exec(M.textContent||"");if(oe){let re=parseInt(oe[1],10),ke=b[re];Iu(s,U1,"",f,R),J1(n,t,i,r,f,ke,R),JS(d,R,D)}break}M=M.nextSibling}return S}function jf(n,t,e){e===0&&n.push(t)}function JS(n,t,e){e===0&&(n.push(~t),n.push(t))}function KS(n,t,e){n.push(Z1(t.mainBinding),2,-1-t.mainBinding,e<<2|2)}function QS(n,t,e){n.push(t,1,e<<2|3)}function Iu(n,t,e,i,r){t!==null&&n.push(t),n.push(e,r,eM(0,i,r))}function e2(n,t,e){n.push(t<<1|1,e.name,e.value)}function Gl(n,t,e=-1){let i=ht(),r=ve(),s=bt+n,d=Qo(i.consts,t),u=ea();if(i.firstCreatePass&&XS(i,u===null?0:u.index,r,s,d,e),i.type===2){let S=r[$n];S[ce]|=32}else r[ce]|=32;let p=i.data[s],f=u===r[dn]?null:u,b=Yh(i,f,r),D=u&&u.type&8?r[u.index]:null;rM(r,s,u,e),LS(r,p.create,b,D),V_(!0)}function Hl(){V_(!1)}function E(n,t,e){Gl(n,t,e),Hl()}function _a(n){let t=ve();return kS(Bn(t,ca(),n)),_a}function Xl(n){VS(ht(),ve(),n+bt)}function Uf(n,t,e){return function i(r){if(r===Function)return e;let s=so(n)?ei(n.index,t):t;cm(s,5);let d=t[Ut],u=Gf(t,d,e,r),p=i.__ngNextListenerFn__;for(;p;)u=Gf(t,d,p,r)&&u,p=p.__ngNextListenerFn__;return u}}function Gf(n,t,e,i){let r=xe(null);try{return Ae(6,t,e),e(i)!==!1}catch(s){return t2(n,s),!1}finally{Ae(7,t,e),xe(r)}}function t2(n,t){let e=n[Kr],i=e?e.get(ti,null):null;i&&i.handleError(t)}function Hf(n,t,e,i,r,s){let d=t[e],u=t[ye],f=u.data[e].outputs[i],b=d[f],D=u.firstCreatePass?O_(u):null,S=R_(t),M=b.subscribe(s),R=S.length;S.push(s,M),D&&D.push(r,n.index,R,-(R+1))}function h(n,t,e,i){let r=ve(),s=ht(),d=Ht();return Q1(s,r,r[Ve],d,n,t,i),h}function n2(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let d=r[s];if(d===e&&r[s+1]===i){let u=t[al],p=r[s+2];return u.length>p?u[p]:null}typeof d=="string"&&(s+=2)}return null}function Q1(n,t,e,i,r,s,d){let u=Rp(i),f=n.firstCreatePass?O_(n):null,b=R_(t),D=!0;if(i.type&3||d){let S=ri(i,t),M=d?d(S):S,R=b.length,A=d?U=>d(ln(U[i.index])):i.index,z=null;if(!d&&u&&(z=n2(n,t,r,i.index)),z!==null){let U=z.__ngLastListenerFn__||z;U.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,D=!1}else{s=Uf(i,t,s),mE(t,M,r,s);let U=e.listen(M,r,s);b.push(s,U),f&&f.push(r,A,R,R+1)}}else s=Uf(i,t,s);if(D){let S=i.outputs?.[r],M=i.hostDirectiveOutputs?.[r];if(M&&M.length)for(let R=0;R<M.length;R+=2){let A=M[R],z=M[R+1];Hf(i,t,A,z,r,s)}if(S&&S.length)for(let R of S)Hf(i,t,R,r,r,s)}}function g(n=1){return Eb(n)}function ai(n){let t=_b();return Op(t,bt+n)}function l(n,t=""){let e=ve(),i=ht(),r=n+bt,s=i.firstCreatePass?dm(i,r,1,t,null):i.data[r],d=i2(i,e,s,t,n);e[r]=d,kl()&&sm(i,e,d,s),ki(s,!1)}var i2=(n,t,e,i,r)=>(Vl(!0),Vh(t[Ve],i));function _(n){return x("",n,""),_}function x(n,t,e){let i=ve(),r=O1(i,n,t,e);return r!==Xt&&_m(i,Mi(),r),x}function Y(n,t,e,i,r){let s=ve(),d=sS(s,n,t,e,i,r);return d!==Xt&&_m(s,Mi(),d),Y}function Ke(n,t,e,i,r,s,d){let u=ve(),p=lS(u,n,t,e,i,r,s,d);return p!==Xt&&_m(u,Mi(),p),Ke}function _m(n,t,e){let i=Ol(t,n);Fh(n[Ve],i,e)}function F(n,t,e){dh(t)&&(t=t());let i=ve(),r=ca();if(Bn(i,r,t)){let s=ht(),d=Vp();tm(s,d,i,n,t,i[Ve],e,!1)}return F}function $(n,t){let e=dh(n);return e&&n.set(t),e}function L(n,t){let e=ve(),i=ht(),r=Ht();return Q1(i,e,e[Ve],r,n,t),L}function r2(n,t,e){let i=ht();if(i.firstCreatePass){let r=Qn(n);hp(e,i.data,i.blueprint,r,!0),hp(t,i.data,i.blueprint,r,!1)}}function hp(n,t,e,i,r){if(n=St(n),Array.isArray(n))for(let s=0;s<n.length;s++)hp(n[s],t,e,i,r);else{let s=ht(),d=ve(),u=Ht(),p=Jr(n)?n:St(n.provide),f=h_(n),b=u.providerIndexes&1048575,D=u.directiveStart,S=u.providerIndexes>>20;if(Jr(n)||!n.multi){let M=new ur(f,r,w),R=Tu(p,t,r?b:b+S,D);R===-1?(ju(gl(u,d),s,p),Pu(s,n,t.length),t.push(p),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(M),d.push(M)):(e[R]=M,d[R]=M)}else{let M=Tu(p,t,b+S,D),R=Tu(p,t,b,b+S),A=M>=0&&e[M],z=R>=0&&e[R];if(r&&!z||!r&&!A){ju(gl(u,d),s,p);let U=s2(r?a2:o2,e.length,r,i,f);!r&&z&&(e[R].providerFactory=U),Pu(s,n,t.length,0),t.push(p),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),e.push(U),d.push(U)}else{let U=ev(e[r?R:M],f,!r&&i);Pu(s,n,M>-1?M:R,U)}!r&&i&&z&&e[R].componentProviders++}}}function Pu(n,t,e,i){let r=Jr(t),s=Xy(t);if(r||s){let p=(s?St(t.useClass):t).prototype.ngOnDestroy;if(p){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let b=f.indexOf(e);b===-1?f.push(e,[i,p]):f[b+1].push(i,p)}else f.push(e,p)}}}function ev(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Tu(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function o2(n,t,e,i,r){return vp(this.multi,[])}function a2(n,t,e,i,r){let s=this.multi,d;if(this.providerFactory){let u=this.providerFactory.componentProviders,p=fl(i,i[ye],this.providerFactory.index,r);d=p.slice(0,u),vp(s,d);for(let f=u;f<p.length;f++)d.push(p[f])}else d=[],vp(s,d);return d}function vp(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function s2(n,t,e,i,r){let s=new ur(n,e,w);return s.multi=[],s.index=t,s.componentProviders=0,ev(s,r,i&&!e),s}function Tt(n,t=[]){return e=>{e.providersResolver=(i,r)=>r2(i,r?r(n):n,t)}}function si(n,t,e){let i=Al()+n,r=ve();return r[i]===Xt?mm(r,i,e?t.call(e):t()):ZM(r,i)}function $i(n,t,e,i){return nv(ve(),Al(),n,t,e,i)}function tv(n,t){let e=n[t];return e===Xt?void 0:e}function nv(n,t,e,i,r,s){let d=t+e;return Bn(n,d,r)?mm(n,d+1,s?i.call(s,r):i(r)):tv(n,d+1)}function l2(n,t,e,i,r,s,d){let u=t+e;return gm(n,u,r,s)?mm(n,u+2,d?i.call(d,r,s):i(r,s)):tv(n,u+2)}function j(n,t){let e=ht(),i,r=n+bt;e.firstCreatePass?(i=c2(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=or(i.type,!0)),d,u=zt(w);try{let p=ml(!1),f=s();return ml(p),ob(e,ve(),r,f),f}finally{zt(u)}}function c2(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function se(n,t,e){let i=n+bt,r=ve(),s=Op(r,i);return iv(r,i)?nv(r,Al(),t,s.transform,e,s):s.transform(e)}function ie(n,t,e,i){let r=n+bt,s=ve(),d=Op(s,r);return iv(s,r)?l2(s,Al(),t,d.transform,e,i,d):d.transform(e,i)}function iv(n,t){return n[ye].data[t].pure}function Bi(n,t){return d1(n,t)}var xp=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},rv=(()=>{class n{compileModuleSync(e){return new up(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=m_(e),s=Nh(r.declarations).reduce((d,u)=>{let p=sr(u);return p&&d.push(new io(p)),d},[]);return new xp(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d2=(()=>{class n{zone=B(nt);changeDetectionScheduler=B(to);applicationRef=B(gr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function u2({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new nt(le(k({},p2()),{scheduleInRootZone:e})),[{provide:nt,useFactory:n},{provide:Zo,multi:!0,useFactory:()=>{let i=B(d2,{optional:!0});return()=>i.initialize()}},{provide:Zo,multi:!0,useFactory:()=>{let i=B(m2);return()=>{i.initialize()}}},t===!0?{provide:oh,useValue:!0}:[],{provide:ah,useValue:e??ih}]}function p2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var m2=(()=>{class n{subscription=new Ze;initialized=!1;zone=B(nt);pendingTasks=B(Vi);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g2=(()=>{class n{appRef=B(gr);taskService=B(Vi);ngZone=B(nt);zonelessEnabled=B(rh);tracing=B(mo,{optional:!0});disableScheduling=B(oh,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(hl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(ah,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wu||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Cf:sh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(hl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Cf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function f2(){return typeof $localize<"u"&&$localize.locale||El}var ha=new W("",{providedIn:"root",factory:()=>B(ha,ge.Optional|ge.SkipSelf)||f2()});var Cp=new W(""),_2=new W("");function Uo(n){return!n.moduleRef}function h2(n){let t=Uo(n)?n.r3Injector:n.moduleRef.injector,e=t.get(nt);return e.run(()=>{Uo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(ti,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{i.handleError(s)}})}),Uo(n)){let s=()=>t.destroy(),d=n.platformInjector.get(Cp);d.add(s),t.onDestroy(()=>{r.unsubscribe(),d.delete(s)})}else{let s=()=>n.moduleRef.destroy(),d=n.platformInjector.get(Cp);d.add(s),n.moduleRef.onDestroy(()=>{Zs(n.allPlatformModules,n.moduleRef),r.unsubscribe(),d.delete(s)})}return x2(i,e,()=>{let s=t.get(R1);return s.runInitializers(),s.donePromise.then(()=>{let d=t.get(ha,El);if(AS(d||El),!t.get(_2,!0))return Uo(n)?t.get(gr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Uo(n)){let p=t.get(gr);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return v2(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function v2(n,t){let e=n.injector.get(gr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new X(-403,!1);t.push(n)}function x2(n,t,e){try{let i=e();return _r(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var Qs=null;function C2(n=[],t){return cn.create({name:t,providers:[{provide:Tl,useValue:"platform"},{provide:Cp,useValue:new Set([()=>Qs=null])},...n]})}function y2(n=[]){if(Qs)return Qs;let t=C2(n);return Qs=t,iS(),b2(t),t}function b2(n){let t=n.get(jp,null);Gt(n,()=>{t?.forEach(e=>e())})}var vr=(()=>{class n{static __NG_ELEMENT_ID__=E2}return n})();function E2(n){return D2(Ht(),ve(),(n&16)===16)}function D2(n,t,e){if(so(n)&&!e){let i=ei(n.index,t);return new na(i,i)}else if(n.type&175){let i=t[$n];return new na(i,t)}return null}var yp=class{constructor(){}supports(t){return M1(t)}create(t){return new bp(t)}},M2=(n,t)=>t,bp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||M2}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let d=!i||e&&e.currentIndex<Xf(i,r,s)?e:i,u=Xf(d,r,s),p=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(e=e._next,d.previousIndex==null)r++;else{s||(s=[]);let f=u-r,b=p-r;if(f!=b){for(let S=0;S<f;S++){let M=S<s.length?s[S]:s[S]=0,R=M+S;b<=R&&R<f&&(s[S]=M+1)}let D=d.previousIndex;s[D]=b-f}}u!==p&&t(d,u,p)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!M1(t))throw new X(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,d;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)s=t[u],d=this._trackByFn(u,s),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,s,d,u),i=!0):(i&&(e=this._verifyReinsertion(e,s,d,u)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,qM(t,u=>{d=this._trackByFn(r,u),e===null||!Object.is(e.trackById,d)?(e=this._mismatch(e,u,d,r),i=!0):(i&&(e=this._verifyReinsertion(e,u,d,r)),Object.is(e.item,u)||this._addIdentityChange(e,u)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new Ep(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ml),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ml),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ep=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Dp=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Ml=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Dp,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Xf(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function Wf(){return new hm([new yp])}var hm=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:Wf});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||Wf()),deps:[[n,new Ly,new Fy]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new X(901,!1)}}return n})();function ov(n){Ae(8);try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=y2(i),s=[u2({}),{provide:to,useExisting:g2},...e||[]],d=new yl({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return h2({r3Injector:d.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{Ae(9)}}function zi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function li(n){return Yd(n)}function fo(n,t){return Hd(n,t?.equal)}var qf=class{[rn];constructor(t){this[rn]=t}destroy(){this[rn].destroy()}};function av(n){let t=sr(n);if(!t)return null;let e=new io(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Qe=new W("");var cv=null;function un(){return cv}function vm(n){cv??=n}var va=class{},xa=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(dv),providedIn:"platform"})}return n})(),xm=new W(""),dv=(()=>{class n extends xa{_location;_history;_doc=B(Qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return un().getBaseHref(this._doc)}onPopState(e){let i=un().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=un().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Wl(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function sv(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Gn(n){return n&&n[0]!=="?"?`?${n}`:n}var Hn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(Yl),providedIn:"root"})}return n})(),ql=new W(""),Yl=(()=>{class n extends Hn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??B(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Wl(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+Gn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+Gn(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+Gn(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Q(xa),Q(ql,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ji=(()=>{class n{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=P2(sv(lv(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Gn(i))}normalize(e){return n.stripTrailingSlash(I2(this._basePath,lv(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gn(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Gn;static joinWithSlash=Wl;static stripTrailingSlash=sv;static \u0275fac=function(i){return new(i||n)(Q(Hn))};static \u0275prov=H({token:n,factory:()=>S2(),providedIn:"root"})}return n})();function S2(){return new ji(Q(Hn))}function I2(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function lv(n){return n.replace(/\/index.html$/,"")}function P2(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Sm=(()=>{class n extends Hn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=Wl(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let d=this.prepareExternalUrl(r+Gn(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,d)}replaceState(e,i,r,s){let d=this.prepareExternalUrl(r+Gn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(Q(xa),Q(ql,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Im=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Im||{});var Et=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Et||{}),Ne=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ne||{}),qt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(qt||{}),Yt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _v(n){return Wt(n)[Ye.LocaleId]}function hv(n,t,e){let i=Wt(n),r=[i[Ye.DayPeriodsFormat],i[Ye.DayPeriodsStandalone]],s=pn(r,t);return pn(s,e)}function vv(n,t,e){let i=Wt(n),r=[i[Ye.DaysFormat],i[Ye.DaysStandalone]],s=pn(r,t);return pn(s,e)}function xv(n,t,e){let i=Wt(n),r=[i[Ye.MonthsFormat],i[Ye.MonthsStandalone]],s=pn(r,t);return pn(s,e)}function Cv(n,t){let i=Wt(n)[Ye.Eras];return pn(i,t)}function Ca(n,t){let e=Wt(n);return pn(e[Ye.DateFormat],t)}function ya(n,t){let e=Wt(n);return pn(e[Ye.TimeFormat],t)}function ba(n,t){let i=Wt(n)[Ye.DateTimeFormat];return pn(i,t)}function ci(n,t){let e=Wt(n),i=e[Ye.NumberSymbols][t];if(typeof i>"u"){if(t===Yt.CurrencyDecimal)return e[Ye.NumberSymbols][Yt.Decimal];if(t===Yt.CurrencyGroup)return e[Ye.NumberSymbols][Yt.Group]}return i}function yv(n,t){return Wt(n)[Ye.NumberFormats][t]}function bv(n){if(!n[Ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ev(n){let t=Wt(n);return bv(t),(t[Ye.ExtraData][2]||[]).map(i=>typeof i=="string"?Cm(i):[Cm(i[0]),Cm(i[1])])}function Dv(n,t,e){let i=Wt(n);bv(i);let r=[i[Ye.ExtraData][0],i[Ye.ExtraData][1]],s=pn(r,t)||[];return pn(s,e)||[]}function pn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Cm(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var T2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zl={},R2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Mv(n,t,e,i){let r=$2(n);t=Si(e,t)||t;let d=[],u;for(;t;)if(u=R2.exec(t),u){d=d.concat(u.slice(1));let b=d.pop();if(!b)break;t=b}else{d.push(t);break}let p=r.getTimezoneOffset();i&&(p=Iv(i,p),r=L2(r,i));let f="";return d.forEach(b=>{let D=V2(b);f+=D?D(r,e,p):b==="''"?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function tc(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Si(n,t){let e=_v(n);if(Zl[e]??={},Zl[e][t])return Zl[e][t];let i="";switch(t){case"shortDate":i=Ca(n,qt.Short);break;case"mediumDate":i=Ca(n,qt.Medium);break;case"longDate":i=Ca(n,qt.Long);break;case"fullDate":i=Ca(n,qt.Full);break;case"shortTime":i=ya(n,qt.Short);break;case"mediumTime":i=ya(n,qt.Medium);break;case"longTime":i=ya(n,qt.Long);break;case"fullTime":i=ya(n,qt.Full);break;case"short":let r=Si(n,"shortTime"),s=Si(n,"shortDate");i=Jl(ba(n,qt.Short),[r,s]);break;case"medium":let d=Si(n,"mediumTime"),u=Si(n,"mediumDate");i=Jl(ba(n,qt.Medium),[d,u]);break;case"long":let p=Si(n,"longTime"),f=Si(n,"longDate");i=Jl(ba(n,qt.Long),[p,f]);break;case"full":let b=Si(n,"fullTime"),D=Si(n,"fullDate");i=Jl(ba(n,qt.Full),[b,D]);break}return i&&(Zl[e][t]=i),i}function Jl(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Xn(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let d=String(n);for(;d.length<t;)d="0"+d;return i&&(d=d.slice(d.length-t)),s+d}function O2(n,t){return Xn(n,3).substring(0,t)}function st(n,t,e=0,i=!1,r=!1){return function(s,d){let u=w2(n,s);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return O2(u,t);let p=ci(d,Yt.MinusSign);return Xn(u,t,p,i,r)}}function w2(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ze(n,t,e=Et.Format,i=!1){return function(r,s){return A2(r,s,n,t,e,i)}}function A2(n,t,e,i,r,s){switch(e){case 2:return xv(t,r,i)[n.getMonth()];case 1:return vv(t,r,i)[n.getDay()];case 0:let d=n.getHours(),u=n.getMinutes();if(s){let f=Ev(t),b=Dv(t,r,i),D=f.findIndex(S=>{if(Array.isArray(S)){let[M,R]=S,A=d>=M.hours&&u>=M.minutes,z=d<R.hours||d===R.hours&&u<R.minutes;if(M.hours<R.hours){if(A&&z)return!0}else if(A||z)return!0}else if(S.hours===d&&S.minutes===u)return!0;return!1});if(D!==-1)return b[D]}return hv(t,r,i)[d<12?0:1];case 3:return Cv(t,i)[n.getFullYear()<=0?0:1];default:let p=e;throw new Error(`unexpected translation type ${p}`)}}function Kl(n){return function(t,e,i){let r=-1*i,s=ci(e,Yt.MinusSign),d=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Xn(d,2,s)+Xn(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+Xn(d,1,s);case 2:return"GMT"+(r>=0?"+":"")+Xn(d,2,s)+":"+Xn(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+Xn(d,2,s)+":"+Xn(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var N2=0,ec=4;function k2(n){let t=tc(n,N2,1).getDay();return tc(n,0,1+(t<=ec?ec:ec+7)-t)}function Sv(n){let t=n.getDay(),e=t===0?-3:ec-t;return tc(n.getFullYear(),n.getMonth(),n.getDate()+e)}function ym(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();r=1+Math.floor((d+s)/7)}else{let s=Sv(e),d=k2(s.getFullYear()),u=s.getTime()-d.getTime();r=1+Math.round(u/6048e5)}return Xn(r,n,ci(i,Yt.MinusSign))}}function Ql(n,t=!1){return function(e,i){let s=Sv(e).getFullYear();return Xn(s,n,ci(i,Yt.MinusSign),t)}}var bm={};function V2(n){if(bm[n])return bm[n];let t;switch(n){case"G":case"GG":case"GGG":t=ze(3,Ne.Abbreviated);break;case"GGGG":t=ze(3,Ne.Wide);break;case"GGGGG":t=ze(3,Ne.Narrow);break;case"y":t=st(0,1,0,!1,!0);break;case"yy":t=st(0,2,0,!0,!0);break;case"yyy":t=st(0,3,0,!1,!0);break;case"yyyy":t=st(0,4,0,!1,!0);break;case"Y":t=Ql(1);break;case"YY":t=Ql(2,!0);break;case"YYY":t=Ql(3);break;case"YYYY":t=Ql(4);break;case"M":case"L":t=st(1,1,1);break;case"MM":case"LL":t=st(1,2,1);break;case"MMM":t=ze(2,Ne.Abbreviated);break;case"MMMM":t=ze(2,Ne.Wide);break;case"MMMMM":t=ze(2,Ne.Narrow);break;case"LLL":t=ze(2,Ne.Abbreviated,Et.Standalone);break;case"LLLL":t=ze(2,Ne.Wide,Et.Standalone);break;case"LLLLL":t=ze(2,Ne.Narrow,Et.Standalone);break;case"w":t=ym(1);break;case"ww":t=ym(2);break;case"W":t=ym(1,!0);break;case"d":t=st(2,1);break;case"dd":t=st(2,2);break;case"c":case"cc":t=st(7,1);break;case"ccc":t=ze(1,Ne.Abbreviated,Et.Standalone);break;case"cccc":t=ze(1,Ne.Wide,Et.Standalone);break;case"ccccc":t=ze(1,Ne.Narrow,Et.Standalone);break;case"cccccc":t=ze(1,Ne.Short,Et.Standalone);break;case"E":case"EE":case"EEE":t=ze(1,Ne.Abbreviated);break;case"EEEE":t=ze(1,Ne.Wide);break;case"EEEEE":t=ze(1,Ne.Narrow);break;case"EEEEEE":t=ze(1,Ne.Short);break;case"a":case"aa":case"aaa":t=ze(0,Ne.Abbreviated);break;case"aaaa":t=ze(0,Ne.Wide);break;case"aaaaa":t=ze(0,Ne.Narrow);break;case"b":case"bb":case"bbb":t=ze(0,Ne.Abbreviated,Et.Standalone,!0);break;case"bbbb":t=ze(0,Ne.Wide,Et.Standalone,!0);break;case"bbbbb":t=ze(0,Ne.Narrow,Et.Standalone,!0);break;case"B":case"BB":case"BBB":t=ze(0,Ne.Abbreviated,Et.Format,!0);break;case"BBBB":t=ze(0,Ne.Wide,Et.Format,!0);break;case"BBBBB":t=ze(0,Ne.Narrow,Et.Format,!0);break;case"h":t=st(3,1,-12);break;case"hh":t=st(3,2,-12);break;case"H":t=st(3,1);break;case"HH":t=st(3,2);break;case"m":t=st(4,1);break;case"mm":t=st(4,2);break;case"s":t=st(5,1);break;case"ss":t=st(5,2);break;case"S":t=st(6,1);break;case"SS":t=st(6,2);break;case"SSS":t=st(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Kl(0);break;case"ZZZZZ":t=Kl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Kl(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Kl(2);break;default:return null}return bm[n]=t,t}function Iv(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function F2(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function L2(n,t,e){let r=n.getTimezoneOffset(),s=Iv(t,r);return F2(n,-1*(s-r))}function $2(n){if(uv(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,d=1]=n.split("-").map(u=>+u);return tc(r,s-1,d)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(T2))return B2(i)}let t=new Date(n);if(!uv(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function B2(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let d=Number(n[4]||0)-e,u=Number(n[5]||0)-i,p=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,d,u,p,f),t}function uv(n){return n instanceof Date&&!isNaN(n.valueOf())}var z2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,pv=22,nc=".",Ea="0",j2=";",U2=",",Em="#";function G2(n,t,e,i,r,s,d=!1){let u="",p=!1;if(!isFinite(n))u=ci(e,Yt.Infinity);else{let f=W2(n);d&&(f=X2(f));let b=t.minInt,D=t.minFrac,S=t.maxFrac;if(s){let ue=s.match(z2);if(ue===null)throw new Error(`${s} is not a valid digit info`);let oe=ue[1],re=ue[3],ke=ue[5];oe!=null&&(b=Dm(oe)),re!=null&&(D=Dm(re)),ke!=null?S=Dm(ke):re!=null&&D>S&&(S=D)}q2(f,D,S);let M=f.digits,R=f.integerLen,A=f.exponent,z=[];for(p=M.every(ue=>!ue);R<b;R++)M.unshift(0);for(;R<0;R++)M.unshift(0);R>0?z=M.splice(R,M.length):(z=M,M=[0]);let U=[];for(M.length>=t.lgSize&&U.unshift(M.splice(-t.lgSize,M.length).join(""));M.length>t.gSize;)U.unshift(M.splice(-t.gSize,M.length).join(""));M.length&&U.unshift(M.join("")),u=U.join(ci(e,i)),z.length&&(u+=ci(e,r)+z.join("")),A&&(u+=ci(e,Yt.Exponential)+"+"+A)}return n<0&&!p?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function Pv(n,t,e){let i=yv(t,Im.Decimal),r=H2(i,ci(t,Yt.MinusSign));return G2(n,r,t,Yt.Group,Yt.Decimal,e)}function H2(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(j2),r=i[0],s=i[1],d=r.indexOf(nc)!==-1?r.split(nc):[r.substring(0,r.lastIndexOf(Ea)+1),r.substring(r.lastIndexOf(Ea)+1)],u=d[0],p=d[1]||"";e.posPre=u.substring(0,u.indexOf(Em));for(let b=0;b<p.length;b++){let D=p.charAt(b);D===Ea?e.minFrac=e.maxFrac=b+1:D===Em?e.maxFrac=b+1:e.posSuf+=D}let f=u.split(U2);if(e.gSize=f[1]?f[1].length:0,e.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,s){let b=r.length-e.posPre.length-e.posSuf.length,D=s.indexOf(Em);e.negPre=s.substring(0,D).replace(/'/g,""),e.negSuf=s.slice(D+b).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function X2(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function W2(n){let t=Math.abs(n)+"",e=0,i,r,s,d,u;for((r=t.indexOf(nc))>-1&&(t=t.replace(nc,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===Ea;s++);if(s===(u=t.length))i=[0],r=1;else{for(u--;t.charAt(u)===Ea;)u--;for(r-=s,i=[],d=0;s<=u;s++,d++)i[d]=Number(t.charAt(s))}return r>pv&&(i=i.splice(0,pv-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function q2(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen,s=Math.min(Math.max(t,r),e),d=s+n.integerLen,u=i[d];if(d>0){i.splice(Math.max(n.integerLen,d));for(let D=d;D<i.length;D++)i[D]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,d=s+1),i[0]=0;for(let D=1;D<d;D++)i[D]=0}if(u>=5)if(d-1<0){for(let D=0;D>d;D--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[d-1]++;for(;r<Math.max(0,s);r++)i.push(0);let p=s!==0,f=t+n.integerLen,b=i.reduceRight(function(D,S,M,R){return S=S+D,R[M]=S<10?S:S-10,p&&(R[M]===0&&M>=f?R.pop():p=!1),S>=10?1:0},0);b&&(i.unshift(b),n.integerLen++)}function Dm(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}var Mm=/\s+/,mv=[],Da=(()=>{class n{_ngEl;_renderer;initialClasses=mv;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(Mm):mv}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Mm):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(Mm).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(w(jn),w(oi))};static \u0275dir=De({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ic=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ae=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,s,d)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new ic(r.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,d),gv(u,r)}});for(let r=0,s=i.length;r<s;r++){let u=i.get(r).context;u.index=r,u.count=s,u.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);gv(s,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(w(Li),w(go),w(hm))};static \u0275dir=De({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function gv(n,t){n.context.$implicit=t.item}var ee=(()=>{class n{_viewContainer;_context=new rc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){fv(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){fv(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(w(Li),w(go))};static \u0275dir=De({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),rc=class{$implicit=null;ngIf=null};function fv(n,t){if(n&&!n.createEmbeddedView)throw new X(2020,!1)}var oc=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},Ii=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=De({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),xr=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new oc(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(i){return new(i||n)(w(Li),w(go),w(Ii,9))};static \u0275dir=De({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})(),Pm=(()=>{class n{constructor(e,i,r){r._addDefault(new oc(e,i))}static \u0275fac=function(i){return new(i||n)(w(Li),w(go),w(Ii,9))};static \u0275dir=De({type:n,selectors:[["","ngSwitchDefault",""]]})}return n})();function ac(n,t){return new X(2100,!1)}var Y2=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ge=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw ac(n,e);return e.replace(Y2,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=fa({name:"titlecase",type:n,pure:!0})}return n})(),Tm=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw ac(n,e);return e.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=fa({name:"uppercase",type:n,pure:!0})}return n})(),Z2="mediumDate",Tv=new W(""),Rv=new W(""),He=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let d=i??this.defaultOptions?.dateFormat??Z2,u=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Mv(e,d,s||this.locale,u)}catch(d){throw ac(n,d.message)}}static \u0275fac=function(i){return new(i||n)(w(ha,16),w(Tv,24),w(Rv,24))};static \u0275pipe=fa({name:"date",type:n,pure:!0})}return n})();var Rm=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!J2(e))return null;r||=this._locale;try{let s=K2(e);return Pv(s,r,i)}catch(s){throw ac(n,s.message)}}static \u0275fac=function(i){return new(i||n)(w(ha,16))};static \u0275pipe=fa({name:"number",type:n,pure:!0})}return n})();function J2(n){return!(n==null||n===""||n!==n)}function K2(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var K=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=zn({})}return n})();function Ma(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var Om="browser",Ov="server";function sc(n){return n===Ov}var Cr=class{};var wv=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new wm(B(Qe),window)})}return n})(),wm=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=eI(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function eI(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let d=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(d)return d}r=i.nextNode()}}return null}var dc=new W(""),Vm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new X(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(Q(dc),Q(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Sa=class{_doc;constructor(t){this._doc=t}manager},lc="ng-app-id";function Av(n){for(let t of n)t.remove()}function Nv(n,t){let e=t.createElement("style");return e.textContent=n,e}function tI(n,t,e,i){let r=n.head?.querySelectorAll(`style[${lc}="${t}"],link[${lc}="${t}"]`);if(r)for(let s of r)s.removeAttribute(lc),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Nm(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Fm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=sc(s),tI(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,Nv);i?.forEach(r=>this.addUsage(r,this.external,Nm))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(Av(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Av(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,Nv(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Nm(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(lc,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Q(Qe),Q(zp),Q(Up,8),Q(po))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Am={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lm=/%COMP%/g;var Vv="%COMP%",nI=`_nghost-${Vv}`,iI=`_ngcontent-${Vv}`,rI=!0,oI=new W("",{providedIn:"root",factory:()=>rI});function aI(n){return iI.replace(Lm,n)}function sI(n){return nI.replace(Lm,n)}function Fv(n,t){return t.map(e=>e.replace(Lm,n))}var $m=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,d,u,p,f=null,b=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=d,this.platformId=u,this.ngZone=p,this.nonce=f,this.tracingService=b,this.platformIsServer=sc(u),this.defaultRenderer=new Ia(e,d,p,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ni.ShadowDom&&(i=le(k({},i),{encapsulation:ni.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof cc?r.applyToHost(e):r instanceof Pa&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let d=this.doc,u=this.ngZone,p=this.eventManager,f=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,D=this.platformIsServer,S=this.tracingService;switch(i.encapsulation){case ni.Emulated:s=new cc(p,f,i,this.appId,b,d,u,D,S);break;case ni.ShadowDom:return new km(p,f,e,i,d,u,this.nonce,D,S);default:s=new Pa(p,f,i,b,d,u,D,S);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(Q(Vm),Q(Fm),Q(zp),Q(oI),Q(Qe),Q(po),Q(nt),Q(Up),Q(mo,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Ia=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Am[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(kv(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(kv(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new X(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=Am[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Am[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(bi.DashCase|bi.Important)?t.style.setProperty(e,i,r&bi.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&bi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=un().getGlobalEventTarget(this.doc,t),!t))throw new X(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function kv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var km=class extends Ia{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,d,u,p,f){super(t,s,d,p,f),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let b=r.styles;b=Fv(r.id,b);for(let S of b){let M=document.createElement("style");u&&M.setAttribute("nonce",u),M.textContent=S,this.shadowRoot.appendChild(M)}let D=r.getExternalStyles?.();if(D)for(let S of D){let M=Nm(S,s);u&&M.setAttribute("nonce",u),this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pa=class extends Ia{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,d,u,p,f){super(t,s,d,u,p),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let b=i.styles;this.styles=f?Fv(f,b):b,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cc=class extends Pa{contentAttr;hostAttr;constructor(t,e,i,r,s,d,u,p,f){let b=r+"-"+i.id;super(t,e,i,s,d,u,p,f,b),this.contentAttr=aI(b),this.hostAttr=sI(b)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var uc=class n extends va{supportsDOMEvents=!0;static makeCurrent(){vm(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=lI();return e==null?null:cI(e)}resetBaseElement(){Ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ma(document.cookie,t)}},Ta=null;function lI(){return Ta=Ta||document.head.querySelector("base"),Ta?Ta.getAttribute("href"):null}function cI(n){return new URL(n,document.baseURI).pathname}var dI=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),$v=(()=>{class n extends Sa{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(Q(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Lv=["alt","control","meta","shift"],uI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Bv=(()=>{class n extends Sa{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let d=n.parseEventName(i),u=n.eventCallback(d.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>un().onAndCancel(e,d.domEventName,u,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),d="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),d="code."),Lv.forEach(f=>{let b=i.indexOf(f);b>-1&&(i.splice(b,1),d+=f+".")}),d+=s,i.length!=0||s.length===0)return null;let p={};return p.domEventName=r,p.fullKey=d,p}static matchEventFullKeyCode(e,i){let r=uI[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Lv.forEach(d=>{if(d!==r){let u=pI[d];u(e)&&(s+=d+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(Q(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function Bm(n,t){return ov(k({rootComponent:n},mI(t)))}function mI(n){return{appProviders:[...vI,...n?.providers??[]],platformProviders:hI}}function gI(){uc.makeCurrent()}function fI(){return new ti}function _I(){return hh(document),document}var hI=[{provide:po,useValue:Om},{provide:jp,useValue:gI,multi:!0},{provide:Qe,useFactory:_I}];var vI=[{provide:Tl,useValue:"root"},{provide:ti,useFactory:fI},{provide:dc,useClass:$v,multi:!0,deps:[Qe]},{provide:dc,useClass:Bv,multi:!0,deps:[Qe]},$m,Fm,Vm,{provide:no,useExisting:$m},{provide:Cr,useClass:dI},[]];var ho=class{},Oa=class{},yr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let d=this.headers.get(e);if(!d)return;d=d.filter(u=>s.indexOf(u)===-1),d.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var mc=class{encodeKey(t){return zv(t)}encodeValue(t){return zv(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function xI(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[d,u]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(d)||[];p.push(u),e.set(d,p)}),e}var CI=/%(\d[a-f0-9])/gi,yI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zv(n){return encodeURIComponent(n).replace(CI,(t,e)=>yI[e]??t)}function pc(n){return`${n}`}var Ui=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new mc,t.fromString){if(t.fromObject)throw new X(2805,!1);this.map=xI(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(pc):[pc(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(pc(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(pc(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var gc=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function bI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Uv(n){return typeof Blob<"u"&&n instanceof Blob}function Gv(n){return typeof FormData<"u"&&n instanceof FormData}function EI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Hv="Content-Type",Xv="Accept",Wv="X-Request-URL",qv="text/plain",Yv="application/json",DI=`${Yv}, ${qv}, */*`,Ra=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,r){this.url=e,this.method=t.toUpperCase();let s;if(bI(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new yr,this.context??=new gc,!this.params)this.params=new Ui,this.urlWithParams=e;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),p=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+p+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jv(this.body)||Uv(this.body)||Gv(this.body)||EI(this.body)?this.body:this.body instanceof Ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Gv(this.body)?null:Uv(this.body)?this.body.type||null:jv(this.body)?null:typeof this.body=="string"?qv:this.body instanceof Ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Yv:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,d=t.body!==void 0?t.body:this.body,u=t.withCredentials??this.withCredentials,p=t.reportProgress??this.reportProgress,f=t.headers||this.headers,b=t.params||this.params,D=t.context??this.context;return t.setHeaders!==void 0&&(f=Object.keys(t.setHeaders).reduce((S,M)=>S.set(M,t.setHeaders[M]),f)),t.setParams&&(b=Object.keys(t.setParams).reduce((S,M)=>S.set(M,t.setParams[M]),b)),new n(e,i,d,{params:b,headers:f,context:D,reportProgress:p,responseType:r,withCredentials:u,transferCache:s})}},_o=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(_o||{}),vo=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new yr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},fc=class n extends vo{constructor(t={}){super(t)}type=_o.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},_c=class n extends vo{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=_o.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},hc=class extends vo{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},MI=200,SI=204;function zm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var II=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Ra)s=e;else{let p;r.headers instanceof yr?p=r.headers:p=new yr(r.headers);let f;r.params&&(r.params instanceof Ui?f=r.params:f=new Ui({fromObject:r.params})),s=new Ra(e,i,r.body!==void 0?r.body:null,{headers:p,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let d=G(s).pipe(Zn(p=>this.handler.handle(p)));if(e instanceof Ra||r.observe==="events")return d;let u=d.pipe(gt(p=>p instanceof _c));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(te(p=>{if(p.body!==null&&!(p.body instanceof ArrayBuffer))throw new X(2806,!1);return p.body}));case"blob":return u.pipe(te(p=>{if(p.body!==null&&!(p.body instanceof Blob))throw new X(2807,!1);return p.body}));case"text":return u.pipe(te(p=>{if(p.body!==null&&typeof p.body!="string")throw new X(2808,!1);return p.body}));case"json":default:return u.pipe(te(p=>p.body))}case"response":return u;default:throw new X(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Ui().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,zm(r,i))}post(e,i,r={}){return this.request("POST",e,zm(r,i))}put(e,i,r={}){return this.request("PUT",e,zm(r,i))}static \u0275fac=function(i){return new(i||n)(Q(ho))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var PI=new W("");function TI(n,t){return t(n)}function RI(n,t,e){return(i,r)=>Gt(e,()=>t(i,s=>n(s,r)))}var Zv=new W(""),OI=new W(""),Jv=new W("",{providedIn:"root",factory:()=>!0});var vc=(()=>{class n extends ho{backend;injector;chain=null;pendingTasks=B(Vi);contributeToStability=B(Jv);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Zv),...this.injector.get(OI,[])]));this.chain=i.reduceRight((r,s)=>RI(r,s,this.injector),TI)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(tr(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Q(Oa),Q(yt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var wI=/^\)\]\}',?\n/,AI=RegExp(`^${Wv}:`,"m");function NI(n){return"responseURL"in n&&n.responseURL?n.responseURL:AI.test(n.getAllResponseHeaders())?n.getResponseHeader(Wv):null}var jm=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new X(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?$e(i.\u0275loadImpl()):G(null)).pipe(Bt(()=>new Ee(s=>{let d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((A,z)=>d.setRequestHeader(A,z.join(","))),e.headers.has(Xv)||d.setRequestHeader(Xv,DI),!e.headers.has(Hv)){let A=e.detectContentTypeHeader();A!==null&&d.setRequestHeader(Hv,A)}if(e.responseType){let A=e.responseType.toLowerCase();d.responseType=A!=="json"?A:"text"}let u=e.serializeBody(),p=null,f=()=>{if(p!==null)return p;let A=d.statusText||"OK",z=new yr(d.getAllResponseHeaders()),U=NI(d)||e.url;return p=new fc({headers:z,status:d.status,statusText:A,url:U}),p},b=()=>{let{headers:A,status:z,statusText:U,url:ue}=f(),oe=null;z!==SI&&(oe=typeof d.response>"u"?d.responseText:d.response),z===0&&(z=oe?MI:0);let re=z>=200&&z<300;if(e.responseType==="json"&&typeof oe=="string"){let ke=oe;oe=oe.replace(wI,"");try{oe=oe!==""?JSON.parse(oe):null}catch(We){oe=ke,re&&(re=!1,oe={error:We,text:oe})}}re?(s.next(new _c({body:oe,headers:A,status:z,statusText:U,url:ue||void 0})),s.complete()):s.error(new hc({error:oe,headers:A,status:z,statusText:U,url:ue||void 0}))},D=A=>{let{url:z}=f(),U=new hc({error:A,status:d.status||0,statusText:d.statusText||"Unknown Error",url:z||void 0});s.error(U)},S=!1,M=A=>{S||(s.next(f()),S=!0);let z={type:_o.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(z.total=A.total),e.responseType==="text"&&d.responseText&&(z.partialText=d.responseText),s.next(z)},R=A=>{let z={type:_o.UploadProgress,loaded:A.loaded};A.lengthComputable&&(z.total=A.total),s.next(z)};return d.addEventListener("load",b),d.addEventListener("error",D),d.addEventListener("timeout",D),d.addEventListener("abort",D),e.reportProgress&&(d.addEventListener("progress",M),u!==null&&d.upload&&d.upload.addEventListener("progress",R)),d.send(u),s.next({type:_o.Sent}),()=>{d.removeEventListener("error",D),d.removeEventListener("abort",D),d.removeEventListener("load",b),d.removeEventListener("timeout",D),e.reportProgress&&(d.removeEventListener("progress",M),u!==null&&d.upload&&d.upload.removeEventListener("progress",R)),d.readyState!==d.DONE&&d.abort()}})))}static \u0275fac=function(i){return new(i||n)(Q(Cr))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Kv=new W(""),kI="XSRF-TOKEN",VI=new W("",{providedIn:"root",factory:()=>kI}),FI="X-XSRF-TOKEN",LI=new W("",{providedIn:"root",factory:()=>FI}),wa=class{},$I=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ma(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(Q(Qe),Q(VI))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function BI(n,t){let e=n.url.toLowerCase();if(!B(Kv)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=B(wa).getToken(),r=B(LI);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}function Um(...n){let t=[II,jm,vc,{provide:ho,useExisting:vc},{provide:Oa,useFactory:()=>B(PI,{optional:!0})??B(jm)},{provide:Zv,useValue:BI,multi:!0},{provide:Kv,useValue:!0},{provide:wa,useClass:$I}];for(let e of n)t.push(...e.\u0275providers);return sa(t)}var Qv=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(Q(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var me="primary",Ha=Symbol("RouteTitle"),qm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Dr(n){return new qm(n)}function sx(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let d=i[s],u=n[s];if(d[0]===":")r[d.substring(1)]=u;else if(d!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function jI(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!di(n[e],t[e]))return!1;return!0}function di(n,t){let e=n?Ym(n):void 0,i=t?Ym(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!lx(n[r],t[r]))return!1;return!0}function Ym(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lx(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function cx(n){return n.length>0?n[n.length-1]:null}function qi(n){return lu(n)?n:_r(n)?$e(Promise.resolve(n)):G(n)}var UI={exact:ux,subset:px},dx={exact:GI,subset:HI,ignored:()=>!0};function ex(n,t,e){return UI[e.paths](n.root,t.root,e.matrixParams)&&dx[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function GI(n,t){return di(n,t)}function ux(n,t,e){if(!br(n.segments,t.segments)||!yc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!ux(n.children[i],t.children[i],e))return!1;return!0}function HI(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>lx(n[e],t[e]))}function px(n,t,e){return mx(n,t,t.segments,e)}function mx(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!br(r,e)||t.hasChildren()||!yc(r,e,i))}else if(n.segments.length===e.length){if(!br(n.segments,e)||!yc(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!px(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!br(n.segments,r)||!yc(n.segments,r,i)||!n.children[me]?!1:mx(n.children[me],t,s,i)}}function yc(n,t,e){return t.every((i,r)=>dx[e](n[r].parameters,i.parameters))}var pi=class{root;queryParams;fragment;_queryParamMap;constructor(t=new we([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Dr(this.queryParams),this._queryParamMap}toString(){return qI.serialize(this)}},we=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bc(this)}},Gi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Dr(this.parameters),this._parameterMap}toString(){return fx(this)}};function XI(n,t){return br(n,t)&&n.every((e,i)=>di(e.parameters,t[i].parameters))}function br(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function WI(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===me&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==me&&(e=e.concat(t(r,i)))}),e}var Mr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>new Hi,providedIn:"root"})}return n})(),Hi=class{parse(t){let e=new Jm(t);return new pi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Aa(t.root,!0)}`,i=JI(t.queryParams),r=typeof t.fragment=="string"?`#${YI(t.fragment)}`:"";return`${e}${i}${r}`}},qI=new Hi;function bc(n){return n.segments.map(t=>fx(t)).join("/")}function Aa(n,t){if(!n.hasChildren())return bc(n);if(t){let e=n.children[me]?Aa(n.children[me],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==me&&i.push(`${r}:${Aa(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=WI(n,(i,r)=>r===me?[Aa(n.children[me],!1)]:[`${r}:${Aa(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[me]!=null?`${bc(n)}/${e[0]}`:`${bc(n)}/(${e.join("//")})`}}function gx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xc(n){return gx(n).replace(/%3B/gi,";")}function YI(n){return encodeURI(n)}function Zm(n){return gx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ec(n){return decodeURIComponent(n)}function tx(n){return Ec(n.replace(/\+/g,"%20"))}function fx(n){return`${Zm(n.path)}${ZI(n.parameters)}`}function ZI(n){return Object.entries(n).map(([t,e])=>`;${Zm(t)}=${Zm(e)}`).join("")}function JI(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${xc(e)}=${xc(r)}`).join("&"):`${xc(e)}=${xc(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var KI=/^[^\/()?;#]+/;function Gm(n){let t=n.match(KI);return t?t[0]:""}var QI=/^[^\/()?;=#]+/;function eP(n){let t=n.match(QI);return t?t[0]:""}var tP=/^[^=?&#]+/;function nP(n){let t=n.match(tP);return t?t[0]:""}var iP=/^[^&#]+/;function rP(n){let t=n.match(iP);return t?t[0]:""}var Jm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[me]=new we(t,e)),i}parseSegment(){let t=Gm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(t),new Gi(Ec(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=eP(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Gm(this.remaining);r&&(i=r,this.capture(i))}t[Ec(e)]=Ec(i)}parseQueryParam(t){let e=nP(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let d=rP(this.remaining);d&&(i=d,this.capture(i))}let r=tx(e),s=tx(i);if(t.hasOwnProperty(r)){let d=t[r];Array.isArray(d)||(d=[d],t[r]=d),d.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Gm(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new X(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=me);let d=this.parseChildren();e[s]=Object.keys(d).length===1?d[me]:new we([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new X(4011,!1)}};function _x(n){return n.segments.length>0?new we([],{[me]:n}):n}function hx(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=hx(r);if(i===me&&s.segments.length===0&&s.hasChildren())for(let[d,u]of Object.entries(s.children))t[d]=u;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new we(n.segments,t);return oP(e)}function oP(n){if(n.numberOfChildren===1&&n.children[me]){let t=n.children[me];return new we(n.segments.concat(t.segments),t.children)}return n}function Xi(n){return n instanceof pi}function vx(n,t,e=null,i=null){let r=xx(n);return Cx(r,t,e,i)}function xx(n){let t;function e(s){let d={};for(let p of s.children){let f=e(p);d[p.outlet]=f}let u=new we(s.url,d);return s===n&&(t=u),u}let i=e(n.root),r=_x(i);return t??r}function Cx(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return Hm(r,r,r,e,i);let s=aP(t);if(s.toRoot())return Hm(r,r,new we([],{}),e,i);let d=sP(s,r,n),u=d.processChildren?ka(d.segmentGroup,d.index,s.commands):bx(d.segmentGroup,d.index,s.commands);return Hm(r,d.segmentGroup,u,e,i)}function Mc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fa(n){return typeof n=="object"&&n!=null&&n.outlets}function Hm(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([p,f])=>{s[p]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`});let d;n===t?d=e:d=yx(n,t,e);let u=_x(hx(d));return new pi(u,s,r)}function yx(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=yx(s,t,e)}),new we(n.segments,i)}var Sc=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Mc(i[0]))throw new X(4003,!1);let r=i.find(Fa);if(r&&r!==cx(i))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function aP(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sc(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,d)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([p,f])=>{u[p]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:d===0?(s.split("/").forEach((u,p)=>{p==0&&u==="."||(p==0&&u===""?e=!0:u===".."?t++:u!=""&&r.push(u))}),r):[...r,s]},[]);return new Sc(e,t,i)}var yo=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function sP(n,t,e){if(n.isAbsolute)return new yo(t,!0,0);if(!e)return new yo(t,!1,NaN);if(e.parent===null)return new yo(e,!0,0);let i=Mc(n.commands[0])?0:1,r=e.segments.length-1+i;return lP(e,r,n.numberOfDoubleDots)}function lP(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new X(4005,!1);r=i.segments.length}return new yo(i,!1,r-s)}function cP(n){return Fa(n[0])?n[0].outlets:{[me]:n}}function bx(n,t,e){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return ka(n,t,e);let i=dP(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new we(n.segments.slice(0,i.pathIndex),{});return s.children[me]=new we(n.segments.slice(i.pathIndex),n.children),ka(s,0,r)}else return i.match&&r.length===0?new we(n.segments,{}):i.match&&!n.hasChildren()?Km(n,t,e):i.match?ka(n,0,r):Km(n,t,e)}function ka(n,t,e){if(e.length===0)return new we(n.segments,{});{let i=cP(e),r={};if(Object.keys(i).some(s=>s!==me)&&n.children[me]&&n.numberOfChildren===1&&n.children[me].segments.length===0){let s=ka(n.children[me],t,e);return new we(n.segments,s.children)}return Object.entries(i).forEach(([s,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(r[s]=bx(n.children[s],t,d))}),Object.entries(n.children).forEach(([s,d])=>{i[s]===void 0&&(r[s]=d)}),new we(n.segments,r)}}function dP(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let d=n.segments[r],u=e[i];if(Fa(u))break;let p=`${u}`,f=i<e.length-1?e[i+1]:null;if(r>0&&p===void 0)break;if(p&&f&&typeof f=="object"&&f.outlets===void 0){if(!ix(p,f,d))return s;i+=2}else{if(!ix(p,{},d))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Km(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Fa(s)){let p=uP(s.outlets);return new we(i,p)}if(r===0&&Mc(e[0])){let p=n.segments[t];i.push(new Gi(p.path,nx(e[0]))),r++;continue}let d=Fa(s)?s.outlets[me]:`${s}`,u=r<e.length-1?e[r+1]:null;d&&u&&Mc(u)?(i.push(new Gi(d,nx(u))),r+=2):(i.push(new Gi(d,{})),r++)}return new we(i,{})}function uP(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Km(new we([],{}),0,i))}),t}function nx(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function ix(n,t,e){return n==e.path&&di(t,e.parameters)}var Dc="imperative",ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ut||{}),nn=class{id;url;constructor(t,e){this.id=t,this.url=e}},Wi=class extends nn{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jt=class extends nn{urlAfterRedirects;type=ut.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Zt||{}),Eo=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Eo||{}),ui=class extends nn{reason;code;type=ut.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mi=class extends nn{reason;code;type=ut.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Do=class extends nn{error;target;type=ut.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},La=class extends nn{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class extends nn{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pc=class extends nn{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tc=class extends nn{urlAfterRedirects;state;type=ut.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rc=class extends nn{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oc=class{route;type=ut.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wc=class{route;type=ut.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ac=class{snapshot;type=ut.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nc=class{snapshot;type=ut.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kc=class{snapshot;type=ut.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vc=class{snapshot;type=ut.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mo=class{routerEvent;position;anchor;type=ut.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},$a=class{},So=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function pP(n,t){return n.providers&&!n._injector&&(n._injector=ga(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Wn(n){return n.outlet||me}function mP(n,t){let e=n.filter(i=>Wn(i)===t);return e.push(...n.filter(i=>Wn(i)!==t)),e}function Xa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Fc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Sr(this.rootInjector)}},Sr=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Fc(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(Q(yt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Qm(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Qm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=eg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return eg(t,this._root).map(e=>e.value)}};function Qm(n,t){if(n===t.value)return t;for(let e of t.children){let i=Qm(n,e);if(i)return i}return null}function eg(n,t){if(n===t.value)return[t];for(let e of t.children){let i=eg(n,e);if(i.length)return i.unshift(t),i}return[]}var tn=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Co(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ba=class extends Lc{snapshot;constructor(t,e){super(t),this.snapshot=e,lg(this,t)}toString(){return this.snapshot.toString()}};function Ex(n){let t=gP(n),e=new mt([new Gi("",{})]),i=new mt({}),r=new mt({}),s=new mt({}),d=new mt(""),u=new Te(e,i,s,d,r,me,n,t.root);return u.snapshot=t.root,new Ba(new tn(u,[]),t)}function gP(n){let t={},e={},i={},r="",s=new Er([],t,i,r,e,me,n,null,{});return new za("",new tn(s,[]))}var Te=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,d,u,p){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=d,this.component=u,this._futureSnapshot=p,this.title=this.dataSubject?.pipe(te(f=>f[Ha]))??G(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(t=>Dr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(t=>Dr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $c(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:k(k({},t.params),n.params),data:k(k({},t.data),n.data),resolve:k(k(k(k({},n.data),t.data),r?.data),n._resolvedData)}:i={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},r&&Mx(r)&&(i.resolve[Ha]=r.title),i}var Er=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ha]}constructor(t,e,i,r,s,d,u,p,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=d,this.component=u,this.routeConfig=p,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},za=class extends Lc{url;constructor(t,e){super(e),this.url=t,lg(this,e)}toString(){return Dx(this._root)}};function lg(n,t){t.value._routerState=n,t.children.forEach(e=>lg(n,e))}function Dx(n){let t=n.children.length>0?` { ${n.children.map(Dx).join(", ")} } `:"";return`${n.value}${t}`}function Xm(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,di(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),di(t.params,e.params)||n.paramsSubject.next(e.params),jI(t.url,e.url)||n.urlSubject.next(e.url),di(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tg(n,t){let e=di(n.params,t.params)&&XI(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||tg(n.parent,t.parent))}function Mx(n){return typeof n.title=="string"||n.title===null}var Sx=new W(""),Ir=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=me;activateEvents=new tt;deactivateEvents=new tt;attachEvents=new tt;detachEvents=new tt;routerOutletData=ch(void 0);parentContexts=B(Sr);location=B(Li);changeDetector=B(vr);inputBinder=B(Wa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=e;let r=this.location,d=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,p=new ng(e,u,r.injector,this.routerOutletData);this.activated=r.createComponent(d,{index:r.length,injector:p,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=De({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ii]})}return n})(),ng=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Te?this.route:t===Sr?this.childContexts:t===Sx?this.outletData:this.parent.get(t,e)}},Wa=new W(""),cg=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=jo([i.queryParams,i.params,i.data]).pipe(Bt(([s,d,u],p)=>(u=k(k(k({},s),d),u),p===0?G(u):Promise.resolve(u)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let d=av(i.component);if(!d){this.unsubscribeFromRouteData(e);return}for(let{templateName:u}of d.inputs)e.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),dg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=J({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&P(0,"router-outlet")},dependencies:[Ir],encapsulation:2})}return n})();function ug(n){let t=n.children&&n.children.map(ug),e=t?le(k({},n),{children:t}):k({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==me&&(e.component=dg),e}function fP(n,t,e){let i=ja(n,t._root,e?e._root:void 0);return new Ba(i,t)}function ja(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=_P(n,t,e);return new tn(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let d=s.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(u=>ja(n,u)),d}}let i=hP(t.value),r=t.children.map(s=>ja(n,s));return new tn(i,r)}}function _P(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ja(n,i,r);return ja(n,i)})}function hP(n){return new Te(new mt(n.url),new mt(n.params),new mt(n.queryParams),new mt(n.fragment),new mt(n.data),n.outlet,n.component,n)}var Io=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Ix="ngNavigationCancelingError";function Bc(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Xi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Px(!1,Zt.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Px(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Ix]=!0,e.cancellationCode=t,e}function vP(n){return Tx(n)&&Xi(n.url)}function Tx(n){return!!n&&n[Ix]}var xP=(n,t,e,i)=>te(r=>(new ig(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),ig=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Xm(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Co(e);t.children.forEach(s=>{let d=s.value.outlet;this.deactivateRoutes(s,r[d],i),delete r[d]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Co(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);if(i&&i.outlet){let d=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Co(t);for(let d of Object.values(s))this.deactivateRouteAndItsChildren(d,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Co(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Vc(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Nc(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(Xm(r),r===s)if(r.component){let d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(u.contexts),d.attachRef=u.componentRef,d.route=u.route.value,d.outlet&&d.outlet.attach(u.componentRef,u.route.value),Xm(u.route.value),this.activateChildRoutes(t,null,d.children)}else d.attachRef=null,d.route=r,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(t,null,d.children)}else this.activateChildRoutes(t,null,i)}},zc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},bo=class{component;route;constructor(t,e){this.component=t,this.route=e}};function CP(n,t,e){let i=n._root,r=t?t._root:null;return Na(i,r,e,[i.value])}function yP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function To(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!n_(n)?n:t.get(n):i}function Na(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Co(t);return n.children.forEach(d=>{bP(d,s[d.value.outlet],e,i.concat([d.value]),r),delete s[d.value.outlet]}),Object.entries(s).forEach(([d,u])=>Va(u,e.getContext(d),r)),r}function bP(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,d=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){let p=EP(d,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new zc(i)):(s.data=d.data,s._resolvedData=d._resolvedData),s.component?Na(n,t,u?u.children:null,i,r):Na(n,t,e,i,r),p&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new bo(u.outlet.component,d))}else d&&Va(t,u,r),r.canActivateChecks.push(new zc(i)),s.component?Na(n,null,u?u.children:null,i,r):Na(n,null,e,i,r);return r}function EP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!br(n.url,t.url);case"pathParamsOrQueryParamsChange":return!br(n.url,t.url)||!di(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tg(n,t)||!di(n.queryParams,t.queryParams);case"paramsChange":default:return!tg(n,t)}}function Va(n,t,e){let i=Co(n),r=n.value;Object.entries(i).forEach(([s,d])=>{r.component?t?Va(d,t.children.getContext(s),e):Va(d,null,e):Va(d,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new bo(t.outlet.component,r)):e.canDeactivateChecks.push(new bo(null,r)):e.canDeactivateChecks.push(new bo(null,r))}function qa(n){return typeof n=="function"}function DP(n){return typeof n=="boolean"}function MP(n){return n&&qa(n.canLoad)}function SP(n){return n&&qa(n.canActivate)}function IP(n){return n&&qa(n.canActivateChild)}function PP(n){return n&&qa(n.canDeactivate)}function TP(n){return n&&qa(n.canMatch)}function Rx(n){return n instanceof _i||n?.name==="EmptyError"}var Cc=Symbol("INITIAL_VALUE");function Po(){return Bt(n=>jo(n.map(t=>t.pipe(on(1),mu(Cc)))).pipe(te(t=>{for(let e of t)if(e!==!0){if(e===Cc)return Cc;if(e===!1||RP(e))return e}return!0}),gt(t=>t!==Cc),on(1)))}function RP(n){return Xi(n)||n instanceof Io}function OP(n,t){return qe(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return d.length===0&&s.length===0?G(le(k({},e),{guardsResult:!0})):wP(d,i,r,n).pipe(qe(u=>u&&DP(u)?AP(i,s,n,t):G(u)),te(u=>le(k({},e),{guardsResult:u})))})}function wP(n,t,e,i){return $e(n).pipe(qe(r=>LP(r.component,r.route,e,t,i)),vi(r=>r!==!0,!0))}function AP(n,t,e,i){return $e(t).pipe(Zn(r=>Oi(kP(r.route.parent,i),NP(r.route,i),FP(n,r.path,e),VP(n,r.route,e))),vi(r=>r!==!0,!0))}function NP(n,t){return n!==null&&t&&t(new kc(n)),G(!0)}function kP(n,t){return n!==null&&t&&t(new Ac(n)),G(!0)}function VP(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return G(!0);let r=i.map(s=>zs(()=>{let d=Xa(t)??e,u=To(s,d),p=SP(u)?u.canActivate(t,n):Gt(d,()=>u(t,n));return qi(p).pipe(vi())}));return G(r).pipe(Po())}function FP(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(d=>yP(d)).filter(d=>d!==null).map(d=>zs(()=>{let u=d.guards.map(p=>{let f=Xa(d.node)??e,b=To(p,f),D=IP(b)?b.canActivateChild(i,n):Gt(f,()=>b(i,n));return qi(D).pipe(vi())});return G(u).pipe(Po())}));return G(s).pipe(Po())}function LP(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let d=s.map(u=>{let p=Xa(t)??r,f=To(u,p),b=PP(f)?f.canDeactivate(n,t,e,i):Gt(p,()=>f(n,t,e,i));return qi(b).pipe(vi())});return G(d).pipe(Po())}function $P(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return G(!0);let s=r.map(d=>{let u=To(d,n),p=MP(u)?u.canLoad(t,e):Gt(n,()=>u(t,e));return qi(p)});return G(s).pipe(Po(),Ox(i))}function Ox(n){return nu(ft(t=>{if(typeof t!="boolean")throw Bc(n,t)}),te(t=>t===!0))}function BP(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return G(!0);let s=r.map(d=>{let u=To(d,n),p=TP(u)?u.canMatch(t,e):Gt(n,()=>u(t,e));return qi(p)});return G(s).pipe(Po(),Ox(i))}var Ua=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ga=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function xo(n){return jr(new Ua(n))}function zP(n){return jr(new X(4e3,!1))}function jP(n){return jr(Px(!1,Zt.GuardRejected))}var rg=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return G(i);if(r.numberOfChildren>1||!r.children[me])return zP(`${t.redirectTo}`);r=r.children[me]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let u=e,{queryParams:p,fragment:f,routeConfig:b,url:D,outlet:S,params:M,data:R,title:A}=r,z=Gt(s,()=>u({params:M,data:R,queryParams:p,fragment:f,routeConfig:b,url:D,outlet:S,title:A}));if(z instanceof pi)throw new Ga(z);e=z}let d=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Ga(d);return d}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new pi(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let u=s.substring(1);i[r]=e[u]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),d={};return Object.entries(e.children).forEach(([u,p])=>{d[u]=this.createSegmentGroup(t,p,i,r)}),new we(s,d)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new X(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},og={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UP(n,t,e,i,r){let s=wx(n,t,e);return s.matched?(i=pP(t,i),BP(i,t,e,r).pipe(te(d=>d===!0?s:k({},og)))):G(s)}function wx(n,t,e){if(t.path==="**")return GP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?k({},og):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||sx)(e,n,t);if(!r)return k({},og);let s={};Object.entries(r.posParams??{}).forEach(([u,p])=>{s[u]=p.path});let d=r.consumed.length>0?k(k({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function GP(n){return{matched:!0,parameters:n.length>0?cx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rx(n,t,e,i){return e.length>0&&WP(n,e,i)?{segmentGroup:new we(t,XP(i,new we(e,n.children))),slicedSegments:[]}:e.length===0&&qP(n,e,i)?{segmentGroup:new we(n.segments,HP(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new we(n.segments,n.children),slicedSegments:e}}function HP(n,t,e,i){let r={};for(let s of e)if(Uc(n,t,s)&&!i[Wn(s)]){let d=new we([],{});r[Wn(s)]=d}return k(k({},i),r)}function XP(n,t){let e={};e[me]=t;for(let i of n)if(i.path===""&&Wn(i)!==me){let r=new we([],{});e[Wn(i)]=r}return e}function WP(n,t,e){return e.some(i=>Uc(n,t,i)&&Wn(i)!==me)}function qP(n,t,e){return e.some(i=>Uc(n,t,i))}function Uc(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function YP(n,t,e){return t.length===0&&!n.children[e]}var ag=class{};function ZP(n,t,e,i,r,s,d="emptyOnly"){return new sg(n,t,e,i,r,d,s).recognize()}var JP=31,sg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,d,u){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=d,this.urlSerializer=u,this.applyRedirects=new rg(this.urlSerializer,this.urlTree)}noMatchError(t){return new X(4002,`'${t.segmentGroup}'`)}recognize(){let t=rx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(te(({children:e,rootSnapshot:i})=>{let r=new tn(i,e),s=new za("",r),d=vx(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(d),{state:s,tree:d}}))}match(t){let e=new Er([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,me,e).pipe(te(i=>({children:i,rootSnapshot:e})),hi(i=>{if(i instanceof Ga)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ua?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(te(d=>d instanceof tn?[d]:[]))}processChildren(t,e,i,r){let s=[];for(let d of Object.keys(i.children))d==="primary"?s.unshift(d):s.push(d);return $e(s).pipe(Zn(d=>{let u=i.children[d],p=mP(e,d);return this.processSegmentGroup(t,p,u,d,r)}),pu((d,u)=>(d.push(...u),d)),wi(null),uu(),qe(d=>{if(d===null)return xo(i);let u=Ax(d);return KP(u),G(u)}))}processSegment(t,e,i,r,s,d,u){return $e(e).pipe(Zn(p=>this.processSegmentAgainstRoute(p._injector??t,e,p,i,r,s,d,u).pipe(hi(f=>{if(f instanceof Ua)return G(null);throw f}))),vi(p=>!!p),hi(p=>{if(Rx(p))return YP(i,r,s)?G(new ag):xo(i);throw p}))}processSegmentAgainstRoute(t,e,i,r,s,d,u,p){return Wn(i)!==d&&(d===me||!Uc(r,s,i))?xo(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,d,p):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,d,p):xo(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,d,u){let{matched:p,parameters:f,consumedSegments:b,positionalParamSegments:D,remainingSegments:S}=wx(e,r,s);if(!p)return xo(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>JP&&(this.allowRedirects=!1));let M=new Er(s,f,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ox(r),Wn(r),r.component??r._loadedComponent??null,r,ax(r)),R=$c(M,u,this.paramsInheritanceStrategy);M.params=Object.freeze(R.params),M.data=Object.freeze(R.data);let A=this.applyRedirects.applyRedirectCommands(b,r.redirectTo,D,M,t);return this.applyRedirects.lineralizeSegments(r,A).pipe(qe(z=>this.processSegment(t,i,e,z.concat(S),d,!1,u)))}matchSegmentAgainstRoute(t,e,i,r,s,d){let u=UP(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),u.pipe(Bt(p=>p.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Bt(({routes:f})=>{let b=i._loadedInjector??t,{parameters:D,consumedSegments:S,remainingSegments:M}=p,R=new Er(S,D,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ox(i),Wn(i),i.component??i._loadedComponent??null,i,ax(i)),A=$c(R,d,this.paramsInheritanceStrategy);R.params=Object.freeze(A.params),R.data=Object.freeze(A.data);let{segmentGroup:z,slicedSegments:U}=rx(e,S,M,f);if(U.length===0&&z.hasChildren())return this.processChildren(b,f,z,R).pipe(te(oe=>new tn(R,oe)));if(f.length===0&&U.length===0)return G(new tn(R,[]));let ue=Wn(i)===s;return this.processSegment(b,f,z,U,ue?me:s,!0,R).pipe(te(oe=>new tn(R,oe instanceof tn?[oe]:[])))}))):xo(e)))}getChildConfig(t,e,i){return e.children?G({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?G({routes:e._loadedRoutes,injector:e._loadedInjector}):$P(t,e,i,this.urlSerializer).pipe(qe(r=>r?this.configLoader.loadChildren(t,e).pipe(ft(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):jP(e))):G({routes:[],injector:t})}};function KP(n){n.sort((t,e)=>t.value.outlet===me?-1:e.value.outlet===me?1:t.value.outlet.localeCompare(e.value.outlet))}function QP(n){let t=n.value.routeConfig;return t&&t.path===""}function Ax(n){let t=[],e=new Set;for(let i of n){if(!QP(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=Ax(i.children);t.push(new tn(i.value,r))}return t.filter(i=>!e.has(i))}function ox(n){return n.data||{}}function ax(n){return n.resolve||{}}function eT(n,t,e,i,r,s){return qe(d=>ZP(n,t,e,i,d.extractedUrl,r,s).pipe(te(({state:u,tree:p})=>le(k({},d),{targetSnapshot:u,urlAfterRedirects:p}))))}function tT(n,t){return qe(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return G(e);let s=new Set(r.map(p=>p.route)),d=new Set;for(let p of s)if(!d.has(p))for(let f of Nx(p))d.add(f);let u=0;return $e(d).pipe(Zn(p=>s.has(p)?nT(p,i,n,t):(p.data=$c(p,p.parent,n).resolve,G(void 0))),ft(()=>u++),Gr(1),qe(p=>u===d.size?G(e):Lt))})}function Nx(n){let t=n.children.map(e=>Nx(e)).flat();return[n,...t]}function nT(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Mx(r)&&(s[Ha]=r.title),iT(s,n,t,i).pipe(te(d=>(n._resolvedData=d,n.data=$c(n,n.parent,e).resolve,null)))}function iT(n,t,e,i){let r=Ym(n);if(r.length===0)return G({});let s={};return $e(r).pipe(qe(d=>rT(n[d],t,e,i).pipe(vi(),ft(u=>{if(u instanceof Io)throw Bc(new Hi,u);s[d]=u}))),Gr(1),te(()=>s),hi(d=>Rx(d)?Lt:jr(d)))}function rT(n,t,e,i){let r=Xa(t)??i,s=To(n,r),d=s.resolve?s.resolve(t,e):Gt(r,()=>s(t,e));return qi(d)}function Wm(n){return Bt(t=>{let e=n(t);return e?$e(e).pipe(te(()=>t)):G(t)})}var pg=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===me);return i}getResolvedTitleForRoute(e){return e.data[Ha]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(kx),providedIn:"root"})}return n})(),kx=(()=>{class n extends pg{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Q(Qv))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pr=new W("",{providedIn:"root",factory:()=>({})}),Tr=new W(""),Gc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=B(rv);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return G(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=qi(e.loadComponent()).pipe(te(Fx),ft(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),tr(()=>{this.componentLoaders.delete(e)})),r=new Br(i,()=>new ot).pipe($r());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Vx(i,this.compiler,e,this.onLoadEndListener).pipe(tr(()=>{this.childrenLoaders.delete(i)})),d=new Br(s,()=>new ot).pipe($r());return this.childrenLoaders.set(i,d),d}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vx(n,t,e,i){return qi(n.loadChildren()).pipe(te(Fx),qe(r=>r instanceof pm||Array.isArray(r)?G(r):$e(t.compileModuleAsync(r))),te(r=>{i&&i(n);let s,d,u=!1;return Array.isArray(r)?(d=r,u=!0):(s=r.create(e).injector,d=s.get(Tr,[],{optional:!0,self:!0}).flat()),{routes:d.map(ug),injector:s}}))}function oT(n){return n&&typeof n=="object"&&"default"in n}function Fx(n){return oT(n)?n.default:n}var Hc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(aT),providedIn:"root"})}return n})(),aT=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mg=new W(""),gg=new W("");function Lx(n,t,e){let i=n.get(gg),r=n.get(Qe);return n.get(nt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let s,d=new Promise(f=>{s=f}),u=r.startViewTransition(()=>(s(),sT(n))),{onViewTransitionCreated:p}=i;return p&&Gt(n,()=>p({transition:u,from:t,to:e})),d})}function sT(n){return new Promise(t=>{Hp({read:()=>setTimeout(t)},{injector:n})})}var fg=new W(""),Xc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortSubject=new ot;configLoader=B(Gc);environmentInjector=B(yt);destroyRef=B(co);urlSerializer=B(Mr);rootContexts=B(Sr);location=B(ji);inputBindingEnabled=B(Wa,{optional:!0})!==null;titleStrategy=B(pg);options=B(Pr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=B(Hc);createViewTransition=B(mg,{optional:!0});navigationErrorHandler=B(fg,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Oc(r)),i=r=>this.events.next(new wc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(le(k({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new mt(null),this.transitions.pipe(gt(i=>i!==null),Bt(i=>{let r=!1,s=!1;return G(i).pipe(Bt(d=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Zt.SupersededByNewNavigation),Lt;this.currentTransition=i,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?le(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&p!=="reload"){let f="";return this.events.next(new mi(d.id,this.urlSerializer.serialize(d.rawUrl),f,Eo.IgnoredSameUrlNavigation)),d.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return G(d).pipe(Bt(f=>(this.events.next(new Wi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Lt:Promise.resolve(f))),eT(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ft(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=le(k({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let b=new La(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(b)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:f,extractedUrl:b,source:D,restoredState:S,extras:M}=d,R=new Wi(f,this.urlSerializer.serialize(b),D,S);this.events.next(R);let A=Ex(this.rootComponentType).snapshot;return this.currentTransition=i=le(k({},d),{targetSnapshot:A,urlAfterRedirects:b,extras:le(k({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,G(i)}else{let f="";return this.events.next(new mi(d.id,this.urlSerializer.serialize(d.extractedUrl),f,Eo.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Lt}}),ft(d=>{let u=new Ic(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),te(d=>(this.currentTransition=i=le(k({},d),{guards:CP(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),i)),OP(this.environmentInjector,d=>this.events.next(d)),ft(d=>{if(i.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Bc(this.urlSerializer,d.guardsResult);let u=new Pc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),gt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Zt.GuardRejected),!1)),Wm(d=>{if(d.guards.canActivateChecks.length!==0)return G(d).pipe(ft(u=>{let p=new Tc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),Bt(u=>{let p=!1;return G(u).pipe(tT(this.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(u,"",Zt.NoDataFromResolver)}}))}),ft(u=>{let p=new Rc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}))}),Wm(d=>{let u=p=>{let f=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(p.routeConfig).pipe(ft(b=>{p.component=b}),te(()=>{})));for(let b of p.children)f.push(...u(b));return f};return jo(u(d.targetSnapshot.root)).pipe(wi(null),on(1))}),Wm(()=>this.afterPreactivation()),Bt(()=>{let{currentSnapshot:d,targetSnapshot:u}=i,p=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return p?$e(p).pipe(te(()=>i)):G(i)}),te(d=>{let u=fP(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=i=le(k({},d),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,i}),ft(()=>{this.events.next(new $a)}),xP(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),on(1),ft({next:d=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jt(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{r=!0}}),gu(this.transitionAbortSubject.pipe(ft(d=>{throw d}))),tr(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Zt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),hi(d=>{if(this.destroyed)return i.resolve(!1),Lt;if(s=!0,Tx(d))this.events.next(new ui(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode)),vP(d)?this.events.next(new So(d.url,d.navigationBehaviorOptions)):i.resolve(!1);else{let u=new Do(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);try{let p=Gt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(p instanceof Io){let{message:f,cancellationCode:b}=Bc(this.urlSerializer,p);this.events.next(new ui(i.id,this.urlSerializer.serialize(i.extractedUrl),f,b)),this.events.next(new So(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(u),d}catch(p){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(p)}}return Lt}))}))}cancelNavigationTransition(e,i,r){let s=new ui(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lT(n){return n!==Dc}var $x=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(cT),providedIn:"root"})}return n})(),jc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},cT=(()=>{class n extends jc{static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bx=(()=>{class n{urlSerializer=B(Mr);options=B(Pr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=B(ji);urlHandlingStrategy=B(Hc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,d=r??s;return d instanceof pi?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=Ex(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:()=>B(dT),providedIn:"root"})}return n})(),dT=(()=>{class n extends Bx{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Wi?this.updateStateMemento():e instanceof mi?this.commitTransition(i):e instanceof La?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof $a?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof ui&&(e.code===Zt.GuardRejected||e.code===Zt.NoDataFromResolver)?this.restoreHistory(i):e instanceof Do?this.restoreHistory(i,!0):e instanceof Jt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:d}=i;if(this.location.isCurrentPathEqualTo(e)||s){let u=this.browserPageId,p=k(k({},d),this.generateNgRouterState(r,u));this.location.replaceState(e,"",p)}else{let u=k(k({},d),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wc(n,t){n.events.pipe(gt(e=>e instanceof Jt||e instanceof ui||e instanceof Do||e instanceof mi),te(e=>e instanceof Jt||e instanceof mi?0:(e instanceof ui?e.code===Zt.Redirect||e.code===Zt.SupersededByNewNavigation:!1)?2:1),gt(e=>e!==2),on(1)).subscribe(()=>{t()})}var uT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ne=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=B(S1);stateManager=B(Bx);options=B(Pr,{optional:!0})||{};pendingTasks=B(Vi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=B(Xc);urlSerializer=B(Mr);location=B(ji);urlHandlingStrategy=B(Hc);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=B($x);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=B(Tr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!B(Wa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ui&&i.code!==Zt.Redirect&&i.code!==Zt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Jt)this.navigated=!0;else if(i instanceof So){let d=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),p=k({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lT(r.source)},d);this.scheduleNavigation(u,Dc,null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}gT(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},d=r?.navigationId?r:null;if(r){let p=k({},r);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(s.state=p)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,d,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ug),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:d,queryParamsHandling:u,preserveFragment:p}=i,f=p?this.currentUrlTree.fragment:d,b=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":b=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=s||null}b!==null&&(b=this.removeEmptyProps(b));let D;try{let S=r?r.snapshot:this.routerState.snapshot.root;D=xx(S)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),D=this.currentUrlTree.root}return Cx(D,e,b,f??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Xi(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Dc,null,i)}navigate(e,i={skipLocationChange:!1}){return mT(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=k({},uT):i===!1?r=k({},pT):r=i,Xi(e))return ex(this.currentUrlTree,e,r);let s=this.parseUrl(e);return ex(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,d){if(this.disposed)return Promise.resolve(!1);let u,p,f;d?(u=d.resolve,p=d.reject,f=d.promise):f=new Promise((D,S)=>{u=D,p=S});let b=this.pendingTasks.add();return Wc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:u,reject:p,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(D=>Promise.reject(D))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new X(4008,!1)}function gT(n){return!(n instanceof $a)&&!(n instanceof So)}var gi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;constructor(e,i,r,s,d,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=d,this.locationStrategy=u;let p=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=p==="a"||p==="area",this.isAnchorElement?this.subscription=e.events.subscribe(f=>{f instanceof Jt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xi(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,d){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||r||s||d||typeof this.target=="string"&&this.target!="_self"))return!0;let p={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,p),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:Rh(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Xi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(w(ne),w(Te),Lp("tabindex"),w(oi),w(jn),w(Hn))};static \u0275dir=De({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&h("click",function(d){return r.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&hr("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",zi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",zi],replaceUrl:[2,"replaceUrl","replaceUrl",zi],routerLink:"routerLink"},features:[ii]})}return n})();var Ya=class{};var zx=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(gt(e=>e instanceof Jt),Zn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=ga(s.providers,e,`Route: ${s.path}`));let d=s._injector??e,u=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(u,s.children??s._loadedRoutes))}return $e(r).pipe(Ur())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=G(null);let s=r.pipe(qe(d=>d===null?G(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));if(i.loadComponent&&!i._loadedComponent){let d=this.loader.loadComponent(i);return $e([s,d]).pipe(Ur())}else return s})}static \u0275fac=function(i){return new(i||n)(Q(ne),Q(yt),Q(Ya),Q(Gc))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jx=new W(""),fT=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=d,d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Wi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Jt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof mi&&e.code===Eo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Mo&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mo(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){h1()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function hg(n,...t){return sa([{provide:Tr,multi:!0,useValue:n},[],{provide:Te,useFactory:Ux,deps:[ne]},{provide:jl,multi:!0,useFactory:Gx},t.map(e=>e.\u0275providers)])}function Ux(n){return n.routerState.root}function Za(n,t){return{\u0275kind:n,\u0275providers:t}}function Gx(){let n=B(cn);return t=>{let e=n.get(gr);if(t!==e.components[0])return;let i=n.get(ne),r=n.get(Hx);n.get(vg)===1&&i.initialNavigation(),n.get(qx,null,ge.Optional)?.setUpPreloading(),n.get(jx,null,ge.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Hx=new W("",{factory:()=>new ot}),vg=new W("",{providedIn:"root",factory:()=>1});function Xx(){let n=[{provide:vg,useValue:0},fm(()=>{let t=B(cn);return t.get(xm,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(ne),s=t.get(Hx);Wc(r,()=>{i(!0)}),t.get(Xc).afterPreactivation=()=>(i(!0),s.closed?G(void 0):s),r.initialNavigation()}))})];return Za(2,n)}function Wx(){let n=[fm(()=>{B(ne).setUpLocationChangeListener()}),{provide:vg,useValue:2}];return Za(3,n)}var qx=new W("");function Yx(n){return Za(0,[{provide:qx,useExisting:zx},{provide:Ya,useExisting:n}])}function Zx(){return Za(8,[cg,{provide:Wa,useExisting:cg}])}function Jx(n){da("NgRouterViewTransitions");let t=[{provide:mg,useValue:Lx},{provide:gg,useValue:k({skipNextTransition:!!n?.skipInitialTransition},n)}];return Za(9,t)}var Kx=[ji,{provide:Mr,useClass:Hi},ne,Sr,{provide:Te,useFactory:Ux,deps:[ne]},Gc,[]],qn=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[Kx,[],{provide:Tr,multi:!0,useValue:e},[],i?.errorHandler?{provide:fg,useValue:i.errorHandler}:[],{provide:Pr,useValue:i||{}},i?.useHash?hT():vT(),_T(),i?.preloadingStrategy?Yx(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xT(i):[],i?.bindToComponentInputs?Zx().\u0275providers:[],i?.enableViewTransitions?Jx().\u0275providers:[],CT()]}}static forChild(e){return{ngModule:n,providers:[{provide:Tr,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=zn({})}return n})();function _T(){return{provide:jx,useFactory:()=>{let n=B(wv),t=B(nt),e=B(Pr),i=B(Xc),r=B(Mr);return e.scrollOffset&&n.setOffset(e.scrollOffset),new fT(r,i,n,t,e)}}}function hT(){return{provide:Hn,useClass:Sm}}function vT(){return{provide:Hn,useClass:Yl}}function xT(n){return[n.initialNavigation==="disabled"?Wx().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Xx().\u0275providers:[]]}var _g=new W("");function CT(){return[{provide:_g,useFactory:Gx},{provide:jl,multi:!0,useExisting:_g}]}var lC=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(w(oi),w(jn))};static \u0275dir=De({type:n})}return n})(),rs=(()=>{class n extends lC{static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,features:[at]})}return n})(),Or=new W(""),yT={provide:Or,useExisting:_t(()=>Yn),multi:!0},Yn=(()=>{class n extends rs{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&h("change",function(d){return r.onChange(d.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Tt([yT]),at]})}return n})(),bT={provide:Or,useExisting:_t(()=>Se),multi:!0};function ET(){let n=un()?un().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var DT=new W(""),Se=(()=>{class n extends lC{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!ET())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(w(oi),w(jn),w(DT,8))};static \u0275dir=De({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&h("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},standalone:!1,features:[Tt([bT]),at]})}return n})();function yg(n){return n==null||bg(n)===0}function bg(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ti=new W(""),Ao=new W(""),MT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,T=class{static min(t){return cC(t)}static max(t){return dC(t)}static required(t){return uC(t)}static requiredTrue(t){return ST(t)}static email(t){return IT(t)}static minLength(t){return PT(t)}static maxLength(t){return TT(t)}static pattern(t){return RT(t)}static nullValidator(t){return Yc()}static compose(t){return hC(t)}static composeAsync(t){return vC(t)}};function cC(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function dC(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function uC(n){return yg(n.value)?{required:!0}:null}function ST(n){return n.value===!0?null:{required:!0}}function IT(n){return yg(n.value)||MT.test(n.value)?null:{email:!0}}function PT(n){return t=>{let e=t.value?.length??bg(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function TT(n){return t=>{let e=t.value?.length??bg(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function RT(n){if(!n)return Yc;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(yg(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Yc(n){return null}function pC(n){return n!=null}function mC(n){return _r(n)?$e(n):n}function gC(n){let t={};return n.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function fC(n,t){return t.map(e=>e(n))}function OT(n){return!n.validate}function _C(n){return n.map(t=>OT(t)?t:e=>t.validate(e))}function hC(n){if(!n)return null;let t=n.filter(pC);return t.length==0?null:function(e){return gC(fC(e,t))}}function Eg(n){return n!=null?hC(_C(n)):null}function vC(n){if(!n)return null;let t=n.filter(pC);return t.length==0?null:function(e){let i=fC(e,t).map(mC);return cu(i).pipe(te(gC))}}function Dg(n){return n!=null?vC(_C(n)):null}function Qx(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function xC(n){return n._rawValidators}function CC(n){return n._rawAsyncValidators}function xg(n){return n?Array.isArray(n)?n:[n]:[]}function Zc(n,t){return Array.isArray(n)?n.includes(t):n===t}function eC(n,t){let e=xg(t);return xg(n).forEach(r=>{Zc(e,r)||e.push(r)}),e}function tC(n,t){return xg(t).filter(e=>!Zc(n,e))}var Jc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Eg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Dg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Rt=class extends Jc{name;get formDirective(){return null}get path(){return null}},Rr=class extends Jc{_parent=null;name=null;valueAccessor=null},Kc=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},wT={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fU=le(k({},wT),{"[class.ng-submitted]":"isSubmitted"}),Ie=(()=>{class n extends Kc{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(w(Rr,2))};static \u0275dir=De({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&I("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[at]})}return n})(),lt=(()=>{class n extends Kc{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(w(Rt,10))};static \u0275dir=De({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&I("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[at]})}return n})();var Ja="VALID",qc="INVALID",Ro="PENDING",Ka="DISABLED",Yi=class{},Qc=class extends Yi{value;source;constructor(t,e){super(),this.value=t,this.source=e}},es=class extends Yi{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},ts=class extends Yi{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Oo=class extends Yi{status;source;constructor(t,e){super(),this.status=t,this.source=e}},ed=class extends Yi{source;constructor(t){super(),this.source=t}},td=class extends Yi{source;constructor(t){super(),this.source=t}};function Mg(n){return(od(n)?n.validators:n)||null}function AT(n){return Array.isArray(n)?Eg(n):n||null}function Sg(n,t){return(od(t)?t.asyncValidators:n)||null}function NT(n){return Array.isArray(n)?Dg(n):n||null}function od(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function yC(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new X(1e3,"");if(!i[e])throw new X(1001,"")}function bC(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new X(1002,"")})}var wo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return li(this.statusReactive)}set status(t){li(()=>this.statusReactive.set(t))}_status=fo(()=>this.statusReactive());statusReactive=uo(void 0);get valid(){return this.status===Ja}get invalid(){return this.status===qc}get pending(){return this.status==Ro}get disabled(){return this.status===Ka}get enabled(){return this.status!==Ka}errors;get pristine(){return li(this.pristineReactive)}set pristine(t){li(()=>this.pristineReactive.set(t))}_pristine=fo(()=>this.pristineReactive());pristineReactive=uo(!0);get dirty(){return!this.pristine}get touched(){return li(this.touchedReactive)}set touched(t){li(()=>this.touchedReactive.set(t))}_touched=fo(()=>this.touchedReactive());touchedReactive=uo(!1);get untouched(){return!this.touched}_events=new ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(eC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(eC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(tC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(tC(t,this._rawAsyncValidators))}hasValidator(t){return Zc(this._rawValidators,t)}hasAsyncValidator(t){return Zc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(le(k({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ts(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new ts(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(le(k({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new es(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new es(!0,i))}markAsPending(t={}){this.status=Ro;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Oo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(le(k({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ka,this.errors=null,this._forEachChild(r=>{r.disable(le(k({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Qc(this.value,i)),this._events.next(new Oo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ja,this._forEachChild(i=>{i.enable(le(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(le(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ja||this.status===Ro)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Qc(this.value,e)),this._events.next(new Oo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(le(k({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ka:Ja}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Ro,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=mC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Oo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new tt,this.statusChanges=new tt}_calculateStatus(){return this._allControlsDisabled()?Ka:this.errors?qc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ro)?Ro:this._anyControlsHaveStatus(qc)?qc:Ja}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new es(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new ts(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){od(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=AT(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=NT(this._rawAsyncValidators)}},Pi=class extends wo{constructor(t,e,i){super(Mg(e),Sg(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){bC(this,!0,t),Object.keys(t).forEach(i=>{yC(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Cg=class extends Pi{};var os=new W("",{providedIn:"root",factory:()=>ad}),ad="always";function sd(n,t){return[...t.path,n]}function nd(n,t,e=ad){Ig(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),VT(n,t),LT(n,t),FT(n,t),kT(n,t)}function nC(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),rd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function id(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function kT(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Ig(n,t){let e=xC(n);t.validator!==null?n.setValidators(Qx(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=CC(n);t.asyncValidator!==null?n.setAsyncValidators(Qx(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();id(t._rawValidators,r),id(t._rawAsyncValidators,r)}function rd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=xC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(d=>d!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let r=CC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(d=>d!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}let i=()=>{};return id(t._rawValidators,i),id(t._rawAsyncValidators,i),e}function VT(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&EC(n,t)})}function FT(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&EC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function EC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LT(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function DC(n,t){n==null,Ig(n,t)}function $T(n,t){return rd(n,t)}function MC(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function BT(n){return Object.getPrototypeOf(n.constructor)===rs}function SC(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function IC(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Se?e=s:BT(s)?i=s:r=s}),r||i||e||null}function zT(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var jT={provide:Rt,useExisting:_t(()=>wr)},Qa=Promise.resolve(),wr=(()=>{class n extends Rt{callSetDisabledState;get submitted(){return li(this.submittedReactive)}_submitted=fo(()=>this.submittedReactive());submittedReactive=uo(!1);_directives=new Set;form;ngSubmit=new tt;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Pi({},Eg(e),Dg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Qa.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),nd(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Qa.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Qa.then(()=>{let i=this._findContainer(e.path),r=new Pi({});DC(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Qa.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Qa.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),SC(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new ed(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new td(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(w(Ti,10),w(Ao,10),w(os,8))};static \u0275dir=De({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&h("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Tt([jT]),at]})}return n})();function iC(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function rC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ns=class extends wo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Mg(e),Sg(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),od(e)&&(e.nonNullable||e.initialValueIsDefault)&&(rC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){iC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){iC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){rC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var UT=n=>n instanceof ns,GT=(()=>{class n extends Rt{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return sd(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,standalone:!1,features:[at]})}return n})();var HT={provide:Rr,useExisting:_t(()=>it)},oC=Promise.resolve(),it=(()=>{class n extends Rr{_changeDetectorRef;callSetDisabledState;control=new ns;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new tt;constructor(e,i,r,s,d,u){super(),this._changeDetectorRef=d,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=IC(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),MC(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){oC.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&zi(i);oC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?sd(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(w(Rt,9),w(Ti,10),w(Ao,10),w(Or,10),w(vr,8),w(os,8))};static \u0275dir=De({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Tt([HT]),at,ii]})}return n})();var ct=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=De({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),XT={provide:Or,useExisting:_t(()=>vt),multi:!0},vt=(()=>{class n extends rs{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&h("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Tt([XT]),at]})}return n})();var PC=new W("");var WT={provide:Rt,useExisting:_t(()=>Dt)},Dt=(()=>{class n extends Rt{callSetDisabledState;get submitted(){return li(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=fo(()=>this._submittedReactive());_submittedReactive=uo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new tt;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return nd(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){nC(e.control||null,e,!1),zT(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),SC(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ed(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new td(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(nC(i||null,e),UT(r)&&(nd(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);DC(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&$T(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ig(this.form,this),this._oldForm&&rd(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(w(Ti,10),w(Ao,10),w(os,8))};static \u0275dir=De({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&h("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Tt([WT]),at,ii]})}return n})(),qT={provide:Rt,useExisting:_t(()=>ld)},ld=(()=>{class n extends GT{name=null;constructor(e,i,r){super(),this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){TC(this._parent)}static \u0275fac=function(i){return new(i||n)(w(Rt,13),w(Ti,10),w(Ao,10))};static \u0275dir=De({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Tt([qT]),at]})}return n})(),YT={provide:Rt,useExisting:_t(()=>cd)},cd=(()=>{class n extends Rt{_parent;name=null;constructor(e,i,r){super(),this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){TC(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return sd(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||n)(w(Rt,13),w(Ti,10),w(Ao,10))};static \u0275dir=De({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Tt([YT]),at]})}return n})();function TC(n){return!(n instanceof ld)&&!(n instanceof Dt)&&!(n instanceof cd)}var ZT={provide:Rr,useExisting:_t(()=>Ot)},Ot=(()=>{class n extends Rr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new tt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,s,d){super(),this._ngModelWarningConfig=d,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=IC(this,s)}ngOnChanges(e){this._added||this._setUpControl(),MC(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return sd(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(w(Rt,13),w(Ti,10),w(Ao,10),w(Or,10),w(PC,8))};static \u0275dir=De({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Tt([ZT]),at,ii]})}return n})();var JT={provide:Or,useExisting:_t(()=>Pe),multi:!0};function RC(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function KT(n){return n.split(":")[0]}var Pe=(()=>{class n extends rs{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=RC(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=KT(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&h("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Tt([JT]),at]})}return n})(),Re=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(RC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(w(jn),w(oi),w(Pe,9))};static \u0275dir=De({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),QT={provide:Or,useExisting:_t(()=>OC),multi:!0};function aC(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function eR(n){return n.split(":")[0]}var OC=(()=>{class n extends rs{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,d)=>{s._setSelected(r.indexOf(d.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let d=s;for(let u=0;u<d.length;u++){let p=d[u],f=this._getOptionValue(p.value);r.push(f)}}else{let d=i.options;for(let u=0;u<d.length;u++){let p=d[u];if(p.selected){let f=this._getOptionValue(p.value);r.push(f)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=eR(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&h("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Tt([QT]),at]})}return n})(),Oe=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(aC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(aC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(w(jn),w(oi),w(OC,9))};static \u0275dir=De({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function wC(n){return typeof n=="number"?n:parseFloat(n)}var Pg=(()=>{class n{_validator=Yc;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Yc,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=De({type:n,features:[ii]})}return n})(),tR={provide:Ti,useExisting:_t(()=>wt),multi:!0},wt=(()=>{class n extends Pg{max;inputName="max";normalizeInput=e=>wC(e);createValidator=e=>dC(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&hr("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Tt([tR]),at]})}return n})(),nR={provide:Ti,useExisting:_t(()=>xt),multi:!0},xt=(()=>{class n extends Pg{min;inputName="min";normalizeInput=e=>wC(e);createValidator=e=>cC(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&hr("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Tt([nR]),at]})}return n})(),iR={provide:Ti,useExisting:_t(()=>Ar),multi:!0};var Ar=(()=>{class n extends Pg{required;inputName="required";normalizeInput=zi;createValidator=e=>uC;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=en(n)))(r||n)}})();static \u0275dir=De({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&hr("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Tt([iR]),at]})}return n})();var AC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=zn({})}return n})(),is=class extends wo{constructor(t,e,i){super(Mg(e),Sg(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){bC(this,!1,t),t.forEach((i,r)=>{yC(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function sC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Kt=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),s={};return sC(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Pi(r,s)}record(e,i=null){let r=this._reduceControls(e);return new Cg(r,i)}control(e,i,r){let s={};return this.useNonNullable?(sC(i)?s=i:(s.validators=i,s.asyncValidators=r),new ns(e,le(k({},s),{nonNullable:!0}))):new ns(e,i,r)}array(e,i,r){let s=e.map(d=>this._createControl(d));return new is(s,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof ns)return e;if(e instanceof wo)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(i,r,s)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var et=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:os,useValue:e.callSetDisabledState??ad}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=zn({imports:[AC]})}return n})(),Mt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:PC,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:os,useValue:e.callSetDisabledState??ad}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Un({type:n});static \u0275inj=zn({imports:[AC]})}return n})();var dd=class n{title="relaybus-fleet-management";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=J({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&P(0,"router-outlet")},dependencies:[Ir],encapsulation:2})};function rR(n,t){n&1&&(a(0,"span"),E(1,11),o())}function oR(n,t){n&1&&(a(0,"span"),E(1,12),o())}function aR(n,t){if(n&1&&(a(0,"div",55),v(1,rR,2,0,"span",35)(2,oR,2,0,"span",35),o()),n&2){let e=g();c(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),c(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email)}}function sR(n,t){n&1&&(a(0,"span"),l(1,"\u{1F441}\uFE0F"),o())}function lR(n,t){n&1&&(a(0,"span"),l(1,"\u{1F648}"),o())}function cR(n,t){n&1&&(a(0,"span"),E(1,13),o())}function dR(n,t){n&1&&(a(0,"span"),E(1,14),o())}function uR(n,t){if(n&1&&(a(0,"div",55),v(1,cR,2,0,"span",35)(2,dR,2,0,"span",35),o()),n&2){let e=g();c(),m("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),c(),m("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength)}}function pR(n,t){if(n&1&&(a(0,"div",56)(1,"span",57),l(2,"\u26A0\uFE0F"),o(),l(3),o()),n&2){let e=g();c(3),x(" ",e.errorMessage," ")}}function mR(n,t){n&1&&(a(0,"span",58),l(1,"\u{1F680}"),o())}function gR(n,t){n&1&&P(0,"span",59)}function fR(n,t){n&1&&(a(0,"span"),E(1,15),o())}function _R(n,t){n&1&&(a(0,"span"),E(1,16),o())}var ud=class n{constructor(t,e,i){this.formBuilder=t;this.router=e;this.document=i;this.loginForm=this.formBuilder.group({email:["",[T.required,T.email]],password:["",[T.required,T.minLength(6)]],rememberMe:[!1]})}loginForm;isLoading=!1;showPassword=!1;errorMessage="";onSubmit(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let t=this.loginForm.get("email")?.value,e=this.loginForm.get("password")?.value;setTimeout(()=>{t==="admin@relaybus.com"&&e==="P@$$w0rd"?(localStorage.setItem("authToken","mock-jwt-token"),localStorage.setItem("userEmail",t),this.router.navigate(["/dashboard"])):this.errorMessage="Invalid email or password",this.isLoading=!1},1e3)}else this.markFormGroupTouched()}togglePasswordVisibility(){this.showPassword=!this.showPassword}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}getCurrentLocale(){return this.document.documentElement.lang||"en-US"}switchLanguage(t){let e=this.document.location.href,i;if(t==="ar"){if(e.includes("/ar/"))return;i=e.replace(this.document.location.origin,this.document.location.origin+"/ar")}else if(e.includes("/ar/"))i=e.replace("/ar/","/");else return;this.document.location.href=i}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne),w(Qe))};static \u0275cmp=J({type:n,selectors:[["app-login"]],decls:73,vars:22,consts:()=>{let t;t=$localize`:@@login.email.placeholder:Enter your email`;let e;e=$localize`:@@login.password.placeholder:Enter your password`;let i;i=$localize`:@@login.title:Fleet Management Portal`;let r;r=$localize`:@@login.subtitle:Sign in to manage your fleet operations`;let s;s=$localize`:@@login.email.label:${"\uFFFD#20\uFFFD"}:START_TAG_SPAN:${"\uFFFD/#20\uFFFD"}:CLOSE_TAG_SPAN: Email Address `;let d;d=$localize`:@@login.password.label:${"\uFFFD#26\uFFFD"}:START_TAG_SPAN:${"\uFFFD/#26\uFFFD"}:CLOSE_TAG_SPAN: Password `;let u;u=$localize`:@@login.remember.me:Keep me signed in`;let p;p=$localize`:@@login.forgot.password:Forgot Password?`;let f;f=$localize`:@@login.contact.support:Contact Support`;let b;b=$localize`:@@login.copyright:  2024 RelayBus Fleet Management. All rights reserved. `;let D;D=$localize`:@@login.secure:Secure Login`;let S;S=$localize`:@@login.cloud:Cloud Based`;let M;M=$localize`:@@login.responsive:Mobile Ready`;let R;R=$localize`:@@login.email.required:Email is required`;let A;A=$localize`:@@login.email.invalid:Please enter a valid email`;let z;z=$localize`:@@login.password.required:Password is required`;let U;U=$localize`:@@login.password.minlength:Password must be at least 6 characters`;let ue;ue=$localize`:@@login.signin.button:Access Fleet Management`;let oe;return oe=$localize`:@@login.signing.in:Signing In...`,[i,r,s,d,u,p,f,b,D,S,M,R,A,z,U,ue,oe,[1,"login-container"],[1,"background-logo"],["src","assets/images/branding/relaybus-logo.png","alt","RelayBus",1,"logo-img"],[1,"language-switcher"],[1,"lang-btn",3,"click"],[1,"login-card"],[1,"login-header"],[1,"brand-logo"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],[1,"label-icon"],["type","email","id","email","formControlName","email","placeholder",t,1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],[1,"password-field"],["id","password","formControlName","password","placeholder",e,1,"form-control",3,"type"],["type","button",1,"password-toggle",3,"click"],[4,"ngIf"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","rememberMe",1,"custom-checkbox"],[1,"checkmark"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"button-content"],["class","button-icon",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"button-text"],[1,"login-footer"],[1,"footer-links"],["href","#",1,"footer-link"],[1,"divider"],[1,"copyright"],[1,"trust-badges"],[1,"badge"],[1,"badge-icon"],[1,"badge-text"],[1,"error-message"],[1,"error-message","global-error"],[1,"error-icon"],[1,"button-icon"],[1,"loading-spinner"]]},template:function(e,i){e&1&&(a(0,"div",17)(1,"div",18),P(2,"img",19),o(),a(3,"div",20)(4,"button",21),h("click",function(){return i.switchLanguage("en")}),l(5," \u{1F1FA}\u{1F1F8} English "),o(),a(6,"button",21),h("click",function(){return i.switchLanguage("ar")}),l(7," \u{1F1F8}\u{1F1E6} \u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),o()(),a(8,"div",22)(9,"div",23)(10,"div",24),P(11,"img",19),o(),a(12,"h1"),E(13,0),o(),a(14,"p"),E(15,1),o()(),a(16,"form",25),h("ngSubmit",function(){return i.onSubmit()}),a(17,"div",26)(18,"label",27),Gl(19,2),P(20,"span",28),Hl(),o(),P(21,"input",29),v(22,aR,3,2,"div",30),o(),a(23,"div",26)(24,"label",31),Gl(25,3),P(26,"span",28),Hl(),o(),a(27,"div",32),P(28,"input",33),a(29,"button",34),h("click",function(){return i.togglePasswordVisibility()}),v(30,sR,2,0,"span",35)(31,lR,2,0,"span",35),o()(),v(32,uR,3,2,"div",30),o(),a(33,"div",36)(34,"label",37),P(35,"input",38)(36,"span",39),a(37,"span"),E(38,4),o()()(),v(39,pR,4,1,"div",40),a(40,"button",41)(41,"span",42),v(42,mR,2,0,"span",43)(43,gR,1,0,"span",44),a(44,"span",45),v(45,fR,2,0,"span",35)(46,_R,2,0,"span",35),o()()()(),a(47,"div",46)(48,"div",47)(49,"a",48),E(50,5),o(),a(51,"span",49),l(52,"|"),o(),a(53,"a",48),E(54,6),o()(),a(55,"p",50),E(56,7),o()()(),a(57,"div",51)(58,"div",52)(59,"span",53),l(60,"\u{1F510}"),o(),a(61,"span",54),E(62,8),o()(),a(63,"div",52)(64,"span",53),l(65,"\u2601\uFE0F"),o(),a(66,"span",54),E(67,9),o()(),a(68,"div",52)(69,"span",53),l(70,"\u{1F4F1}"),o(),a(71,"span",54),E(72,10),o()()()()),e&2&&(c(4),I("active",i.getCurrentLocale()==="en-US"),c(2),I("active",i.getCurrentLocale()==="ar-SA"),c(10),m("formGroup",i.loginForm),c(5),I("error",(i.email==null?null:i.email.invalid)&&(i.email==null?null:i.email.touched)),c(),m("ngIf",(i.email==null?null:i.email.invalid)&&(i.email==null?null:i.email.touched)),c(6),I("error",(i.password==null?null:i.password.invalid)&&(i.password==null?null:i.password.touched)),m("type",i.showPassword?"text":"password"),c(2),m("ngIf",!i.showPassword),c(),m("ngIf",i.showPassword),c(),m("ngIf",(i.password==null?null:i.password.invalid)&&(i.password==null?null:i.password.touched)),c(7),m("ngIf",i.errorMessage),c(),I("loading",i.isLoading),m("disabled",i.isLoading),c(2),m("ngIf",!i.isLoading),c(),m("ngIf",i.isLoading),c(2),m("ngIf",!i.isLoading),c(),m("ngIf",i.isLoading))},dependencies:[K,ee,Mt,ct,Se,Yn,Ie,lt,Dt,Ot],styles:['[_ngcontent-%COMP%]:root{--relaybus-primary: #1e5aa8;--relaybus-secondary: #ff6b35;--relaybus-gradient: linear-gradient(135deg, #1e5aa8 0%, #2c5aa0 50%, #ff6b35 100%);--relaybus-blue-light: #e6f2ff;--relaybus-orange-light: #fff4f0}.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--relaybus-gradient);padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;position:relative;overflow:hidden}.background-logo[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.05;z-index:1;pointer-events:none}.bg-logo-img[_ngcontent-%COMP%]{width:800px;height:auto;max-width:80vw}.language-switcher[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;display:flex;gap:8px;z-index:1000}.lang-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid rgba(255,255,255,.3);background:#ffffff1a;color:#fff;border-radius:8px;font-size:12px;cursor:pointer;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);font-weight:500}.lang-btn.active[_ngcontent-%COMP%]{background:var(--relaybus-secondary);border-color:var(--relaybus-secondary);color:#fff;font-weight:600;box-shadow:0 4px 12px #ff6b354d}.lang-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:40px;box-shadow:0 20px 40px #0000001a,0 0 100px #1e5aa81a;width:100%;max-width:440px;animation:_ngcontent-%COMP%_slideIn .6s ease-out;position:relative;z-index:10;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:35px}.brand-logo[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:center}.logo-img[_ngcontent-%COMP%]{height:60px;width:auto;transition:transform .3s ease}.logo-img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--relaybus-primary);font-size:26px;font-weight:700;margin:0 0 8px;background:var(--relaybus-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:15px;margin:0;font-weight:500}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--relaybus-primary);font-size:14px;display:flex;align-items:center;gap:8px}.label-icon[_ngcontent-%COMP%]{font-size:16px}.form-control[_ngcontent-%COMP%]{padding:16px 18px;border:2px solid #e2e8f0;border-radius:12px;font-size:16px;transition:all .3s ease;outline:none;background:#fafbfc;font-family:inherit}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--relaybus-primary);box-shadow:0 0 0 3px #1e5aa81a,0 4px 12px #1e5aa826;background:#fff;transform:translateY(-1px)}.form-control.error[_ngcontent-%COMP%]{border-color:#ef4444;background:#fef2f2}.form-control[_ngcontent-%COMP%]::placeholder{color:#94a3b8;font-weight:400}.password-field[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:50px;width:100%}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:16px;background:none;border:none;cursor:pointer;font-size:18px;padding:8px;border-radius:8px;transition:all .2s ease;color:#64748b}.password-toggle[_ngcontent-%COMP%]:hover{background-color:var(--relaybus-blue-light);color:var(--relaybus-primary);transform:scale(1.1)}.checkbox-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:12px;margin:5px 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:14px;color:#475569;margin:0;font-weight:500;-webkit-user-select:none;user-select:none}.custom-checkbox[_ngcontent-%COMP%]{width:18px;height:18px;appearance:none;border:2px solid #d1d5db;border-radius:4px;position:relative;cursor:pointer;transition:all .2s ease}.custom-checkbox[_ngcontent-%COMP%]:checked{background:var(--relaybus-primary);border-color:var(--relaybus-primary)}.custom-checkbox[_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:600}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:13px;margin-top:6px;font-weight:500;display:flex;align-items:center;gap:6px}.global-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fee2e2);color:#dc2626;padding:16px;border-radius:12px;text-align:center;font-size:14px;border:1px solid #fecaca;display:flex;align-items:center;justify-content:center;gap:8px}.error-icon[_ngcontent-%COMP%]{font-size:18px}.login-button[_ngcontent-%COMP%]{background:var(--relaybus-gradient);color:#fff;border:none;padding:18px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px;position:relative;overflow:hidden}.login-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.login-button[_ngcontent-%COMP%]:hover:before{left:100%}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #1e5aa84d,0 0 30px #ff6b3533}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.button-icon[_ngcontent-%COMP%]{font-size:18px}.loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.demo-credentials[_ngcontent-%COMP%]{margin-top:30px;background:var(--relaybus-blue-light);border-radius:12px;padding:20px;border:1px solid rgba(30,90,168,.1)}.demo-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:15px}.demo-icon[_ngcontent-%COMP%]{font-size:20px}.demo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--relaybus-primary);font-size:16px;font-weight:600}.demo-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.demo-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:14px}.demo-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--relaybus-primary);min-width:80px;font-weight:600}.demo-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#fff;padding:4px 8px;border-radius:6px;font-family:Courier New,monospace;color:var(--relaybus-primary);border:1px solid rgba(30,90,168,.2);font-weight:500}.login-footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center;padding-top:25px;border-top:1px solid #e2e8f0}.footer-links[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:12px;margin-bottom:15px}.footer-link[_ngcontent-%COMP%]{color:var(--relaybus-primary);text-decoration:none;font-size:14px;font-weight:500;transition:all .2s ease}.footer-link[_ngcontent-%COMP%]:hover{color:var(--relaybus-secondary);text-decoration:underline}.divider[_ngcontent-%COMP%]{color:#cbd5e0;font-weight:300}.copyright[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#64748b;font-weight:400}.trust-badges[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:50%;transform:translate(-50%);display:flex;gap:20px;z-index:10}.badge[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;color:#fff;text-align:center}.badge-icon[_ngcontent-%COMP%]{font-size:24px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.badge-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.3)}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:15px}.login-card[_ngcontent-%COMP%]{padding:30px 25px;margin-top:20px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}.trust-badges[_ngcontent-%COMP%]{bottom:15px;gap:15px}.badge[_ngcontent-%COMP%]{gap:4px}.badge-icon[_ngcontent-%COMP%]{font-size:20px}.badge-text[_ngcontent-%COMP%]{font-size:10px}.bg-logo-img[_ngcontent-%COMP%]{width:600px}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:25px 20px}.demo-info[_ngcontent-%COMP%]{gap:8px}.demo-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}.demo-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{min-width:auto}.footer-links[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.divider[_ngcontent-%COMP%]{display:none}}[dir=rtl][_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{left:16px;right:auto}[dir=rtl][_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .language-switcher[_ngcontent-%COMP%]{left:20px;right:auto}']})};function hR(n,t){n&1&&(a(0,"span"),l(1,"\u2630"),o())}function vR(n,t){n&1&&(a(0,"span"),l(1,"\u2715"),o())}function xR(n,t){if(n&1){let e=O();a(0,"button",40),h("click",function(){C(e);let r=g();return y(r.toggleSidebar())}),v(1,hR,2,0,"span",26)(2,vR,2,0,"span",26),o()}if(n&2){let e=g();c(),m("ngIf",!e.sidebarOpen),c(),m("ngIf",e.sidebarOpen)}}function CR(n,t){n&1&&P(0,"img",41)}function yR(n,t){n&1&&P(0,"img",42)}function bR(n,t){n&1&&(a(0,"span"),l(1,"\u2190"),o())}function ER(n,t){n&1&&(a(0,"span"),l(1,"\u2192"),o())}function DR(n,t){if(n&1){let e=O();a(0,"button",43),h("click",function(){C(e);let r=g();return y(r.toggleSidebar())}),v(1,bR,2,0,"span",26)(2,ER,2,0,"span",26),o()}if(n&2){let e=g();c(),m("ngIf",!e.isSidebarCollapsed),c(),m("ngIf",e.isSidebarCollapsed)}}function MR(n,t){if(n&1&&(a(0,"span",50),l(1),o()),n&2){let e=g().$implicit;c(),_(e.label)}}function SR(n,t){if(n&1&&(a(0,"span",51),l(1),o()),n&2){let e=g().$implicit;c(),_(e.badge)}}function IR(n,t){if(n&1&&(a(0,"span",58),l(1),o()),n&2){let e=g().$implicit;c(),_(e.badge)}}function PR(n,t){if(n&1){let e=O();a(0,"div",54),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.navigateTo(r.route))}),a(1,"span",55),l(2),o(),a(3,"span",56),l(4),o(),v(5,IR,2,1,"span",57),o()}if(n&2){let e=t.$implicit,i=g(3);I("active",i.isCurrentRoute(e.route)),c(2),_(e.icon),c(2),_(e.label),c(),m("ngIf",e.badge&&e.route==="/trips/active")}}function TR(n,t){if(n&1&&(a(0,"div",52),v(1,PR,6,5,"div",53),o()),n&2){let e=g().$implicit;c(),m("ngForOf",e.children)}}function RR(n,t){if(n&1){let e=O();a(0,"div",44)(1,"div",45),h("click",function(){let r=C(e).$implicit,s=g();return y(s.navigateTo(r.route))}),a(2,"span",46),l(3),o(),v(4,MR,2,1,"span",47)(5,SR,2,1,"span",48),o(),v(6,TR,2,1,"div",49),o()}if(n&2){let e=t.$implicit,i=g();I("active",i.isCurrentRoute(e.route)),c(3),_(e.icon),c(),m("ngIf",!i.isSidebarCollapsed||i.isMobile),c(),m("ngIf",e.badge&&(!i.isSidebarCollapsed||i.isMobile)),c(),m("ngIf",e.children&&(!i.isSidebarCollapsed||i.isMobile)&&i.isCurrentRoute(e.route))}}function OR(n,t){if(n&1&&(a(0,"div",59)(1,"div",60),l(2),o(),a(3,"div",61),l(4),o(),a(5,"div",62),l(6,"Fleet Manager"),o()()),n&2){let e=g();c(2),_(e.userName||"Fleet Manager"),c(2),_(e.userEmail)}}function wR(n,t){n&1&&(a(0,"span",35),l(1,"Settings"),o())}function AR(n,t){n&1&&(a(0,"span",35),l(1,"Logout"),o())}function NR(n,t){if(n&1){let e=O();a(0,"div",63)(1,"button",64)(2,"span",30),l(3,"\u2699\uFE0F"),o(),v(4,wR,2,0,"span",65),o(),a(5,"button",66),h("click",function(){C(e);let r=g();return y(r.logout())}),a(6,"span",30),l(7,"\u{1F6AA}"),o(),v(8,AR,2,0,"span",65),o()()}if(n&2){let e=g();c(4),m("ngIf",!e.isSidebarCollapsed||e.isMobile),c(4),m("ngIf",!e.isSidebarCollapsed||e.isMobile)}}function kR(n,t){if(n&1){let e=O();a(0,"div",67),h("click",function(){C(e);let r=g();return y(r.closeSidebar())}),o()}}function VR(n,t){n&1&&P(0,"img",68)}function FR(n,t){n&1&&(a(0,"span"),l(1,"Relay Fleet Management"),o())}function LR(n,t){n&1&&(a(0,"span"),l(1,"Fleet Portal"),o())}function $R(n,t){if(n&1&&(a(0,"span",69),l(1),o()),n&2){let e=g();c(),_(e.notificationCount)}}function BR(n,t){if(n&1&&(a(0,"span",70),l(1),o()),n&2){let e,i=g();c(),x(" ",(e=i.findNavigationItem("/trips/active"))==null?null:e.badge," ")}}function zR(n,t){if(n&1){let e=O();a(0,"div",78)(1,"div",79)(2,"div",80)(3,"strong"),l(4),o(),a(5,"span"),l(6),o()()(),P(7,"div",81),a(8,"button",82),h("click",function(){C(e);let r=g(2);return y(r.navigateTo("/profile"))}),a(9,"span",83),l(10,"\u{1F464}"),o(),a(11,"span"),l(12,"My Profile"),o()(),a(13,"button",82),h("click",function(){C(e);let r=g(2);return y(r.navigateTo("/settings"))}),a(14,"span",83),l(15,"\u2699\uFE0F"),o(),a(16,"span"),l(17,"Settings"),o()(),a(18,"button",82),h("click",function(){C(e);let r=g(2);return y(r.navigateTo("/help"))}),a(19,"span",83),l(20,"\u2753"),o(),a(21,"span"),l(22,"Help & Support"),o()(),P(23,"div",81),a(24,"button",84),h("click",function(){C(e);let r=g(2);return y(r.logout())}),a(25,"span",83),l(26,"\u{1F6AA}"),o(),a(27,"span"),l(28,"Sign Out"),o()()()}if(n&2){let e=g(2);c(4),_(e.userName||"Fleet Manager"),c(2),_(e.userEmail)}}function jR(n,t){if(n&1){let e=O();a(0,"div",71)(1,"button",72),h("click",function(){C(e);let r=g();return y(r.toggleUserMenu())}),P(2,"img",73),a(3,"span",74),l(4,"\u{1F464}"),o(),a(5,"span",75),l(6),o(),a(7,"span",76),l(8,"\u25BC"),o()(),v(9,zR,29,2,"div",77),o()}if(n&2){let e=g();c(6),_(e.userName||"Admin"),c(3),m("ngIf",e.showUserMenu)}}function UR(n,t){n&1&&(a(0,"footer",85)(1,"div",86)(2,"div",87),P(3,"img",88),a(4,"span",89),l(5,"\xA9 2024 RelayBus Fleet Management"),o()(),a(6,"div",90)(7,"a",91),l(8,"Privacy Policy"),o(),a(9,"a",91),l(10,"Terms of Service"),o(),a(11,"a",91),l(12,"Support"),o()()()())}var pd=class n{constructor(t){this.router=t}userEmail="";userName="";currentTime=new Date;isSidebarCollapsed=!1;isMobile=!1;sidebarOpen=!1;showUserMenu=!1;showFooter=!0;currentRoute="";notificationCount=3;tripNotifications=8;hasNotifications=!0;navigationItems=[{icon:"\u{1F4CA}",label:"Dashboard",route:"/dashboard"},{icon:"\u{1F68C}",label:"Bus Management",route:"/buses",children:[{icon:"\u{1F4CB}",label:"All Buses",route:"/buses"},{icon:"\u2795",label:"Add New Bus",route:"/buses/add"},{icon:"\u{1F527}",label:"Maintenance",route:"/buses/maintenance"}]},{icon:"\u{1F468}\u200D\u2708\uFE0F",label:"Driver Management",route:"/drivers",children:[{icon:"\u{1F4CB}",label:"All Drivers",route:"/drivers"},{icon:"\u2795",label:"Add New Driver",route:"/drivers/add"},{icon:"\u{1F3AF}",label:"Assignments",route:"/drivers/assignments"}]},{icon:"\u{1F5FA}\uFE0F",label:"Route Management",route:"/routes",children:[{icon:"\u{1F4CB}",label:"All Routes",route:"/routes"},{icon:"\u2795",label:"Create Route",route:"/routes/add"}]},{icon:"\u{1F310}",label:"Cities & Stops",route:"/cities-stops"},{icon:"\u{1F690}",label:"Trip Management",route:"/trips",badge:15,children:[{icon:"\u{1F4CB}",label:"All Trips",route:"/trips"},{icon:"\u2795",label:"Schedule Trip",route:"/trips/schedule"},{icon:"\u{1F4C5}",label:"Trip Calendar",route:"/trips/calendar"},{icon:"\u{1F534}",label:"Active Trips",route:"/trips/active",badge:8}]},{icon:"\u{1F54C}",label:"Umrah Management",route:"/umrah",children:[{icon:"\u{1F4CB}",label:"All Packages",route:"/umrah"},{icon:"\u2795",label:"Create Package",route:"/umrah/create"},{icon:"\u{1F4CA}",label:"Package Analytics",route:"/umrah/analytics"}]},{icon:"\u{1F3AB}",label:"Booking Management",route:"/bookings",badge:5,children:[{icon:"\u{1F4CB}",label:"All Bookings",route:"/bookings"},{icon:"\u2795",label:"New Booking",route:"/bookings/create"},{icon:"\u{1F4CA}",label:"Booking Analytics",route:"/reports"}]},{icon:"\u{1F4CA}",label:"Reports & Analytics",route:"/reports",children:[{icon:"\u{1F4B0}",label:"Revenue Analytics",route:"/reports/revenue"},{icon:"\u{1F4C8}",label:"Performance Reports",route:"/reports/analytics"},{icon:"\u{1F4C9}",label:"Financial Summary",route:"/reports"}]}];onResize(){this.checkScreenSize()}onDocumentClick(t){t.target.closest(".user-menu")||(this.showUserMenu=!1)}ngOnInit(){this.loadUserData(),this.updateTime(),this.updateActiveTripsBadge(),this.checkScreenSize(),this.trackRoute(),this.updateNotifications(),setInterval(()=>{this.updateTime()},6e4),setInterval(()=>{this.updateActiveTripsBadge()},3e4),setInterval(()=>{this.updateNotifications()},12e4)}checkScreenSize(){this.isMobile=window.innerWidth<=1024,this.isMobile&&(this.sidebarOpen=!1,this.showUserMenu=!1)}trackRoute(){this.router.events.pipe(gt(t=>t instanceof Jt)).subscribe(t=>{this.currentRoute=t.url,this.showFooter=!this.currentRoute.includes("/login")&&!this.currentRoute.includes("/add")&&!this.currentRoute.includes("/edit"),this.isMobile&&this.closeSidebar()})}loadUserData(){if(this.userEmail=localStorage.getItem("userEmail")||"admin@relaybus.com",this.userName=localStorage.getItem("userName")||"Fleet Manager",!localStorage.getItem("userName")){let t=this.userEmail.split("@");t[0]&&(this.userName=t[0].charAt(0).toUpperCase()+t[0].slice(1))}}updateTime(){this.currentTime=new Date}updateActiveTripsBadge(){let t=this.findNavigationItem("/trips/active");t&&(t.badge=Math.floor(Math.random()*7)+6);let e=this.findNavigationItem("/trips");e&&t&&(e.badge=(t.badge||0)+Math.floor(Math.random()*8)+7)}updateNotifications(){this.notificationCount=Math.floor(Math.random()*5)+1,this.hasNotifications=this.notificationCount>0;let t=this.findNavigationItem("/bookings");t&&Math.random()>.7&&(t.badge=Math.floor(Math.random()*8)+2)}findNavigationItem(t){for(let e of this.navigationItems){if(e.route===t)return e;if(e.children){let i=e.children.find(r=>r.route===t);if(i)return i}}}toggleSidebar(){this.isMobile?(this.sidebarOpen=!this.sidebarOpen,document.body.classList.toggle("sidebar-open",this.sidebarOpen)):(this.isSidebarCollapsed=!this.isSidebarCollapsed,localStorage.setItem("sidebarCollapsed",this.isSidebarCollapsed.toString()))}closeSidebar(){this.isMobile&&(this.sidebarOpen=!1,document.body.classList.remove("sidebar-open"))}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}logout(){this.showUserMenu=!1,confirm("Are you sure you want to sign out?")&&(localStorage.removeItem("authToken"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("sidebarCollapsed"),this.router.navigate(["/login"]))}navigateTo(t){this.router.navigate([t]),this.isMobile&&this.closeSidebar(),this.showUserMenu=!1}isCurrentRoute(t){let e=this.router.url;return!!(e===t||t==="/trips/active"&&e==="/trips/active"||t==="/trips"&&e.startsWith("/trips")&&!e.startsWith("/trips/active")&&!e.startsWith("/trips/calendar")&&!e.startsWith("/trips/schedule")||t==="/drivers"&&e.startsWith("/drivers")&&!e.includes("/assign")||e.startsWith(t+"/")||e.includes(t+"?"))}getCurrentDateTime(){let t=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return t.toLocaleDateString("en-US",e)}loadSidebarState(){let t=localStorage.getItem("sidebarCollapsed");t!==null&&(this.isSidebarCollapsed=t==="true")}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-layout"]],hostBindings:function(e,i){e&1&&h("resize",function(s){return i.onResize(s)},!1,wh)("click",function(s){return i.onDocumentClick(s)},!1,Ah)},decls:53,vars:31,consts:[[1,"layout-container"],["class","mobile-menu-btn","style","position: fixed; top: 20px; left: 20px; z-index: 1001; background: #1e5aa8; color: white; border: none; border-radius: 8px; padding: 12px; cursor: pointer; box-shadow: 0 4px 12px rgba(30, 90, 168, 0.3);",3,"click",4,"ngIf"],[1,"sidebar"],[1,"sidebar-header"],[1,"logo"],[1,"logo-container"],["src","assets/images/branding/relaybus-logo-white.png","alt","RelayBus","class","logo-img","onerror","this.src='assets/images/branding/relaybus-logo.png'; this.onerror=null;",4,"ngIf"],["src","assets/images/branding/relaybus-icon.png","alt","R","class","logo-icon-img","onerror","this.innerHTML='<div style=\\'width:32px;height:32px;background:#ff6b35;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;\\'>R</div>'; this.onerror=null;",4,"ngIf"],["class","collapse-btn","title","Collapse Sidebar",3,"click",4,"ngIf"],[1,"nav-menu"],["class","nav-item",3,"active",4,"ngFor","ngForOf"],[1,"sidebar-footer"],[1,"user-info"],[1,"user-avatar"],["src","assets/images/default-avatar.png","alt","User","onerror","this.style.display='none'; this.nextElementSibling.style.display='flex'",1,"avatar-img"],[1,"avatar-fallback"],["class","user-details",4,"ngIf"],["class","user-actions",4,"ngIf"],["class","mobile-overlay","style","position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 999;",3,"click",4,"ngIf"],[1,"main-content"],[1,"top-header"],[1,"header-left"],[1,"header-brand"],["src","assets/images/branding/relaybus-logo.png","alt","RelayBus","class","header-logo","style","height: 35px; width: auto;","onerror","this.style.display='none'",4,"ngIf"],[1,"header-info"],[2,"margin","0 0 5px 0","font-size","24px","font-weight","600","color","var(--relaybus-primary, #1e5aa8)"],[4,"ngIf"],[1,"current-time",2,"margin","0","font-size","14px","color","#64748b"],[1,"header-right"],["title","Notifications",1,"header-btn","notification-btn"],[1,"btn-icon"],["class","notification-count",4,"ngIf"],["title","Messages",1,"header-btn","message-btn"],["title","Help & Support",1,"header-btn","help-btn"],["title","View Active Trips",1,"header-btn","active-trips-btn",3,"click"],[1,"btn-text"],["class","active-count",4,"ngIf"],["class","user-menu",4,"ngIf"],[1,"page-content"],["class","main-footer",4,"ngIf"],[1,"mobile-menu-btn",2,"position","fixed","top","20px","left","20px","z-index","1001","background","#1e5aa8","color","white","border","none","border-radius","8px","padding","12px","cursor","pointer","box-shadow","0 4px 12px rgba(30, 90, 168, 0.3)",3,"click"],["src","assets/images/branding/relaybus-logo-white.png","alt","RelayBus","onerror","this.src='assets/images/branding/relaybus-logo.png'; this.onerror=null;",1,"logo-img"],["src","assets/images/branding/relaybus-icon.png","alt","R","onerror","this.innerHTML='<div style=\\'width:32px;height:32px;background:#ff6b35;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;\\'>R</div>'; this.onerror=null;",1,"logo-icon-img"],["title","Collapse Sidebar",1,"collapse-btn",3,"click"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"nav-icon"],["class","nav-label",4,"ngIf"],["class","nav-badge",4,"ngIf"],["class","nav-children",4,"ngIf"],[1,"nav-label"],[1,"nav-badge"],[1,"nav-children"],["class","nav-child",3,"active","click",4,"ngFor","ngForOf"],[1,"nav-child",3,"click"],[1,"child-icon"],[1,"child-label"],["class","nav-badge active-badge",4,"ngIf"],[1,"nav-badge","active-badge"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-role"],[1,"user-actions"],["title","Settings",1,"action-btn","settings-btn"],["class","btn-text",4,"ngIf"],["title","Logout",1,"action-btn","logout-btn",3,"click"],[1,"mobile-overlay",2,"position","fixed","top","0","left","0","right","0","bottom","0","background","rgba(0, 0, 0, 0.5)","z-index","999",3,"click"],["src","assets/images/branding/relaybus-logo.png","alt","RelayBus","onerror","this.style.display='none'",1,"header-logo",2,"height","35px","width","auto"],[1,"notification-count"],[1,"active-count"],[1,"user-menu"],[1,"user-menu-btn",3,"click"],["src","assets/images/default-avatar.png","alt","User","onerror","this.style.display='none'; this.nextElementSibling.style.display='flex'",1,"user-avatar-small"],[1,"user-avatar-fallback-small"],[1,"user-name-header"],[1,"dropdown-arrow"],["class","user-dropdown",4,"ngIf"],[1,"user-dropdown"],[1,"dropdown-header"],[1,"dropdown-user-info"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],[1,"dropdown-icon"],[1,"dropdown-item","logout-item",3,"click"],[1,"main-footer"],[1,"footer-content"],[1,"footer-left"],["src","assets/images/branding/relaybus-logo.png","alt","RelayBus",1,"footer-logo",2,"height","25px","width","auto"],[1,"footer-text"],[1,"footer-right"],["href","#",1,"footer-link"]],template:function(e,i){if(e&1&&(a(0,"div",0),v(1,xR,3,2,"button",1),a(2,"nav",2)(3,"div",3)(4,"div",4)(5,"div",5),v(6,CR,1,0,"img",6)(7,yR,1,0,"img",7),o()(),v(8,DR,3,2,"button",8),o(),a(9,"div",9),v(10,RR,7,6,"div",10),o(),a(11,"div",11)(12,"div",12)(13,"div",13),P(14,"img",14),a(15,"span",15),l(16,"\u{1F464}"),o()(),v(17,OR,7,2,"div",16),o(),v(18,NR,9,2,"div",17),o()(),v(19,kR,1,0,"div",18),a(20,"main",19)(21,"header",20)(22,"div",21)(23,"div",22),v(24,VR,1,0,"img",23),a(25,"div",24)(26,"h1",25),v(27,FR,2,0,"span",26)(28,LR,2,0,"span",26),o(),a(29,"p",27),l(30),j(31,"date"),o()()()(),a(32,"div",28)(33,"button",29)(34,"span",30),l(35,"\u{1F514}"),o(),v(36,$R,2,1,"span",31),o(),a(37,"button",32)(38,"span",30),l(39,"\u{1F4AC}"),o()(),a(40,"button",33)(41,"span",30),l(42,"\u2753"),o()(),a(43,"button",34),h("click",function(){return i.navigateTo("/trips/active")}),a(44,"span",30),l(45,"\u{1F534}"),o(),a(46,"span",35),l(47,"Active"),o(),v(48,BR,2,1,"span",36),o(),v(49,jR,10,2,"div",37),o()(),a(50,"div",38),P(51,"router-outlet"),o(),v(52,UR,13,0,"footer",39),o()()),e&2){let r;I("sidebar-open",i.isMobile&&i.sidebarOpen),c(),m("ngIf",i.isMobile),c(),I("collapsed",!i.isMobile&&i.isSidebarCollapsed)("open",i.isMobile&&i.sidebarOpen),c(4),m("ngIf",!i.isSidebarCollapsed||i.isMobile),c(),m("ngIf",i.isSidebarCollapsed&&!i.isMobile),c(),m("ngIf",!i.isMobile),c(2),m("ngForOf",i.navigationItems),c(7),m("ngIf",!i.isSidebarCollapsed||i.isMobile),c(),m("ngIf",!i.isSidebarCollapsed||i.isMobile),c(),m("ngIf",i.isMobile&&i.sidebarOpen),c(),I("expanded",!i.isMobile&&i.isSidebarCollapsed),c(4),m("ngIf",i.isMobile),c(3),m("ngIf",!i.isMobile),c(),m("ngIf",i.isMobile),c(2),x(" ",ie(31,28,i.currentTime,"EEEE, MMMM d, y - h:mm a")," "),c(3),I("has-notifications",i.notificationCount>0),c(3),m("ngIf",i.notificationCount>0),c(7),I("current",i.isCurrentRoute("/trips/active")),c(5),m("ngIf",(r=i.findNavigationItem("/trips/active"))==null?null:r.badge),c(),m("ngIf",!i.isMobile),c(3),m("ngIf",i.showFooter)}},dependencies:[K,ae,ee,He,Ir],styles:['[_ngcontent-%COMP%]:root{--relaybus-primary: #1e5aa8;--relaybus-secondary: #ff6b35;--relaybus-gradient: linear-gradient(135deg, #1e5aa8 0%, #2c5aa0 50%, #ff6b35 100%);--relaybus-gradient-dark: linear-gradient(180deg, #1e5aa8 0%, #1a4d96 100%);--relaybus-blue-light: #e6f2ff;--relaybus-orange-light: #fff4f0;--sidebar-width: 280px;--sidebar-collapsed-width: 70px}.layout-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;position:relative;width:100%;overflow-x:hidden}.sidebar[_ngcontent-%COMP%]{width:var(--sidebar-width);min-width:var(--sidebar-width);max-width:var(--sidebar-width);background:var(--relaybus-gradient-dark);color:#fff;display:flex;flex-direction:column;transition:all .3s ease;box-shadow:2px 0 10px #0000001a,0 0 20px #1e5aa81a;position:fixed;left:0;top:0;height:100vh;z-index:100;overflow-y:auto;border-right:1px solid rgba(255,255,255,.1)}.sidebar.collapsed[_ngcontent-%COMP%]{width:var(--sidebar-collapsed-width);min-width:var(--sidebar-collapsed-width);max-width:var(--sidebar-collapsed-width)}.sidebar-header[_ngcontent-%COMP%]{padding:25px 20px;border-bottom:1px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:space-between;min-height:90px;flex-shrink:0}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:1}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.logo-img[_ngcontent-%COMP%]{height:45px;width:auto;transition:all .3s ease;filter:brightness(1.1)}.logo-icon-img[_ngcontent-%COMP%]{height:32px;width:32px;transition:all .3s ease}.collapse-btn[_ngcontent-%COMP%]{background:#ffffff1a;border:none;color:#fff;padding:10px;border-radius:8px;cursor:pointer;font-size:16px;transition:all .2s ease;flex-shrink:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.collapse-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.05);box-shadow:0 4px 8px #0003}.nav-menu[_ngcontent-%COMP%]{flex:1;padding:25px 0;overflow-y:auto}.nav-item[_ngcontent-%COMP%]{margin-bottom:6px}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:16px 20px;cursor:pointer;transition:all .3s ease;border-radius:0;position:relative;text-decoration:none;color:#ffffffe6;font-weight:500}.nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--relaybus-secondary);transform:scaleY(0);transition:transform .3s ease}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff;padding-left:24px}.nav-link[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background:#ff6b3533;color:#fff;border-right:4px solid var(--relaybus-secondary);font-weight:600}.nav-item.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{transform:scaleY(1)}.nav-icon[_ngcontent-%COMP%]{font-size:20px;width:24px;text-align:center;flex-shrink:0;filter:drop-shadow(0 1px 2px rgba(0,0,0,.3))}.nav-label[_ngcontent-%COMP%]{font-size:14px;font-weight:inherit;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.nav-badge[_ngcontent-%COMP%]{background:var(--relaybus-secondary);color:#fff;font-size:11px;padding:4px 8px;border-radius:12px;font-weight:600;min-width:20px;text-align:center;flex-shrink:0;box-shadow:0 2px 4px #ff6b354d}.nav-children[_ngcontent-%COMP%]{background:#0000004d;margin-top:4px;border-left:2px solid rgba(255,107,53,.3);margin-left:20px}.nav-child[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:all .2s ease;font-size:13px;color:#fffc;position:relative}.nav-child[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;width:8px;height:1px;background:#ffffff4d;transform:translateY(-50%)}.nav-child[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff;padding-left:24px}.nav-child.active[_ngcontent-%COMP%]{background:#ff6b3533;color:var(--relaybus-secondary);font-weight:600}.child-icon[_ngcontent-%COMP%]{font-size:14px;flex-shrink:0}.child-label[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.active-badge[_ngcontent-%COMP%]{background:var(--relaybus-secondary);color:#fff;font-size:10px;padding:3px 6px;border-radius:10px;font-weight:600;min-width:16px;text-align:center;flex-shrink:0;animation:_ngcontent-%COMP%_pulse 2s infinite}.sidebar-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid rgba(255,255,255,.15);flex-shrink:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:15px;padding:12px;border-radius:12px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1)}.user-avatar[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:#ffffff1a;border:2px solid rgba(255,255,255,.2);overflow:hidden}.avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.avatar-fallback[_ngcontent-%COMP%]{font-size:20px;color:#fff}.user-details[_ngcontent-%COMP%]{flex:1;min-width:0}.user-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-email[_ngcontent-%COMP%]{font-size:12px;color:#ffffffb3;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-role[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--relaybus-secondary);text-transform:uppercase;letter-spacing:.5px}.user-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.action-btn[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer;font-size:12px;transition:all .2s ease;flex:1;display:flex;align-items:center;justify-content:center;gap:6px;font-weight:500}.action-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.action-btn.logout-btn[_ngcontent-%COMP%]:hover{background:#e53e3ecc;border-color:#e53e3e}.btn-icon[_ngcontent-%COMP%]{font-size:14px}.btn-text[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:var(--sidebar-width);transition:margin-left .3s ease;background:#f8fafc;min-height:100vh;width:calc(100% - var(--sidebar-width));position:relative;z-index:1}.main-content.expanded[_ngcontent-%COMP%]{margin-left:var(--sidebar-collapsed-width);width:calc(100% - var(--sidebar-collapsed-width))}.top-header[_ngcontent-%COMP%]{background:#fff;padding:20px 30px;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 3px #0000001a,0 0 20px #1e5aa80d;position:sticky;top:0;z-index:50;flex-shrink:0;width:100%;box-sizing:border-box}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex:1}.header-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header-logo[_ngcontent-%COMP%]{height:35px;width:auto}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;font-size:24px;font-weight:600;color:var(--relaybus-primary);white-space:nowrap;background:var(--relaybus-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.current-time[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b;white-space:nowrap;font-weight:500}.header-right[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.header-btn[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;padding:12px;border-radius:10px;cursor:pointer;font-size:16px;transition:all .2s ease;position:relative;display:flex;align-items:center;justify-content:center;min-width:44px;height:44px;color:#64748b}.header-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e0;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.header-btn.has-notifications[_ngcontent-%COMP%]{background:var(--relaybus-orange-light);border-color:var(--relaybus-secondary);color:var(--relaybus-secondary)}.header-btn.current[_ngcontent-%COMP%]{background:var(--relaybus-blue-light);border-color:var(--relaybus-primary);color:var(--relaybus-primary)}.header-btn.active-trips-btn[_ngcontent-%COMP%]{gap:6px;padding:10px 14px;min-width:auto}.notification-count[_ngcontent-%COMP%], .active-count[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:var(--relaybus-secondary);color:#fff;font-size:11px;font-weight:600;padding:3px 6px;border-radius:12px;min-width:20px;text-align:center;box-shadow:0 2px 4px #ff6b354d;animation:_ngcontent-%COMP%_pulse 2s infinite}.user-menu[_ngcontent-%COMP%]{position:relative}.user-menu-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#fff;border:1px solid #e2e8f0;padding:8px 12px;border-radius:10px;cursor:pointer;transition:all .2s ease;color:var(--relaybus-primary);font-weight:500}.user-menu-btn[_ngcontent-%COMP%]:hover{background:var(--relaybus-blue-light);border-color:var(--relaybus-primary);transform:translateY(-1px)}.user-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.user-avatar-fallback-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--relaybus-primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px}.user-name-header[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.dropdown-arrow[_ngcontent-%COMP%]{font-size:10px;transition:transform .2s ease}.user-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 10px 25px #0000001a;min-width:200px;z-index:1000;padding:8px 0;margin-top:8px;animation:_ngcontent-%COMP%_dropdownSlide .2s ease-out}@keyframes _ngcontent-%COMP%_dropdownSlide{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-header[_ngcontent-%COMP%]{padding:12px 16px}.dropdown-user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--relaybus-primary);font-size:14px;font-weight:600}.dropdown-user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#64748b;font-size:12px}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e2e8f0;margin:8px 0}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:10px;padding:10px 16px;border:none;background:none;cursor:pointer;transition:background-color .2s ease;color:#374151;font-size:14px;text-align:left}.dropdown-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.dropdown-item.logout-item[_ngcontent-%COMP%]{color:#dc2626}.dropdown-item.logout-item[_ngcontent-%COMP%]:hover{background:#fef2f2}.dropdown-icon[_ngcontent-%COMP%]{font-size:16px;width:20px;text-align:center}.page-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;width:100%;min-height:0;padding:0}.dashboard-container[_ngcontent-%COMP%], .driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%], .trip-management-container[_ngcontent-%COMP%], .route-management-container[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box;margin:0;padding:30px;background:#f8fafc;min-height:calc(100vh - 80px)}.dashboard-grid[_ngcontent-%COMP%], .stats-grid[_ngcontent-%COMP%]{position:relative;z-index:1}.main-footer[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #e2e8f0;padding:20px 30px;margin-top:auto;flex-shrink:0}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.footer-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.footer-logo[_ngcontent-%COMP%]{height:25px;width:auto}.footer-text[_ngcontent-%COMP%]{color:#64748b;font-size:14px;font-weight:500}.footer-right[_ngcontent-%COMP%]{display:flex;gap:20px}.footer-link[_ngcontent-%COMP%]{color:var(--relaybus-primary);text-decoration:none;font-size:14px;font-weight:500;transition:color .2s ease}.footer-link[_ngcontent-%COMP%]:hover{color:var(--relaybus-secondary)}.sidebar.collapsed[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-badge[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .nav-children[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .user-actions[_ngcontent-%COMP%], .sidebar.collapsed[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:16px 10px}.sidebar.collapsed[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{justify-content:center;margin-bottom:0;padding:8px}.sidebar.collapsed[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:35px;height:35px}@media (max-width: 1024px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%);z-index:1000}.sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%);width:var(--sidebar-width);min-width:var(--sidebar-width);max-width:var(--sidebar-width)}.main-content[_ngcontent-%COMP%], .main-content.expanded[_ngcontent-%COMP%]{margin-left:0;width:100%}.top-header[_ngcontent-%COMP%]{padding:15px 20px}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.user-menu[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){.top-header[_ngcontent-%COMP%]{padding:12px 15px}.header-right[_ngcontent-%COMP%]{gap:8px}.header-btn[_ngcontent-%COMP%]{min-width:40px;height:40px;font-size:14px}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.current-time[_ngcontent-%COMP%]{font-size:12px}.active-trips-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.main-footer[_ngcontent-%COMP%]{padding:15px}.footer-content[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}.footer-right[_ngcontent-%COMP%]{gap:15px}.dashboard-container[_ngcontent-%COMP%], .driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%], .trip-management-container[_ngcontent-%COMP%], .route-management-container[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.sidebar-header[_ngcontent-%COMP%]{padding:20px 15px}.nav-menu[_ngcontent-%COMP%]{padding:20px 0}.sidebar-footer[_ngcontent-%COMP%]{padding:15px}.top-header[_ngcontent-%COMP%]{padding:10px}.current-time[_ngcontent-%COMP%]{display:none}.header-right[_ngcontent-%COMP%]{gap:6px}.header-btn[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:8px}.dashboard-container[_ngcontent-%COMP%], .driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%], .trip-management-container[_ngcontent-%COMP%], .route-management-container[_ngcontent-%COMP%]{padding:15px 10px}}.mobile-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:999;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;padding:0;overflow-x:hidden}']})};function GR(n,t){if(n&1&&(a(0,"span",38),l(1),o()),n&2){let e=g();c(),x(" (",e.stats.maintenance.overdue," overdue) ")}}function HR(n,t){if(n&1&&(a(0,"div",48)(1,"span",49),l(2,"\u{1F4CD} Current Location:"),o(),a(3,"span",50),l(4),o()()),n&2){let e=g().$implicit;c(4),_(e.currentLocation)}}function XR(n,t){if(n&1&&(a(0,"div",39)(1,"div",40)(2,"div",41)(3,"span",42),l(4),o(),a(5,"div",43)(6,"h4"),l(7),o(),a(8,"p",44),l(9),o()()(),a(10,"span",45),l(11),j(12,"titlecase"),o()(),a(13,"div",46)(14,"div",47)(15,"div",48)(16,"span",49),l(17,"\u{1F468}\u200D\u2708\uFE0F Driver:"),o(),a(18,"span",50),l(19),o()(),a(20,"div",48)(21,"span",49),l(22,"\u{1F550} Departure:"),o(),a(23,"span",50),l(24),j(25,"date"),o()(),a(26,"div",48)(27,"span",49),l(28,"\u{1F465} Passengers:"),o(),a(29,"span",50),l(30),a(31,"span",51),l(32),o()()(),v(33,HR,5,1,"div",52),o()()()),n&2){let e=t.$implicit,i=g();q(i.getStatusClass(e.status)),c(4),_(i.getTripTypeIcon(e.type)),c(3),_(e.busNumber),c(2),_(e.route),c(),q(i.getStatusClass(e.status)),c(),x(" ",se(12,16,e.status)," "),c(8),_(e.driverName),c(5),_(ie(25,18,e.departure,"HH:mm")),c(6),Y(" ",e.passengers,"/",e.maxCapacity," "),c(),q(i.getCapacityClass(i.getCapacityPercentage(e.passengers,e.maxCapacity))),c(),x(" ",i.getCapacityPercentage(e.passengers,e.maxCapacity),"% "),c(),m("ngIf",e.currentLocation)}}function WR(n,t){if(n&1){let e=O();a(0,"div",53)(1,"span",54),l(2,"\u{1F68C}"),o(),a(3,"h3"),l(4,"No trips scheduled for today"),o(),a(5,"button",4),h("click",function(){C(e);let r=g();return y(r.navigateTo("/trips/schedule"))}),l(6," Schedule New Trip "),o()()}}function qR(n,t){if(n&1&&(a(0,"div",55)(1,"div",56)(2,"h4"),l(3),o(),a(4,"span",45),l(5),j(6,"titlecase"),o()(),a(7,"div",57)(8,"div",58)(9,"div",59)(10,"span",49),l(11,"\u{1F3D9}\uFE0F From:"),o(),a(12,"span",50),l(13),o()(),a(14,"div",59)(15,"span",49),l(16,"\u{1F4C5} Duration:"),o(),a(17,"span",50),l(18),o()(),a(19,"div",59)(20,"span",49),l(21,"\u{1F465} Pilgrims:"),o(),a(22,"span",50),l(23),o()(),a(24,"div",59)(25,"span",49),l(26,"\u{1F68C} Buses:"),o(),a(27,"span",50),l(28),o()(),a(29,"div",59)(30,"span",49),l(31,"\u{1F3E8} Hotels:"),o(),a(32,"span",50),l(33),o()()(),a(34,"div",60),P(35,"div",61),o()()()),n&2){let e=t.$implicit,i=g();q(i.getStatusClass(e.status)),c(3),_(e.packageName),c(),q(i.getStatusClass(e.status)),c(),x(" ",se(6,16,e.status)," "),c(8),_(e.departureCity),c(5),x("",e.duration," days"),c(5),Y("",e.pilgrims,"/",e.maxCapacity,""),c(5),_(e.busesAssigned),c(5),_(e.hotelBookings.join(", ")),c(2),q(i.getCapacityClass(i.getCapacityPercentage(e.pilgrims,e.maxCapacity))),Be("width",i.getCapacityPercentage(e.pilgrims,e.maxCapacity),"%")}}function YR(n,t){if(n&1){let e=O();a(0,"div",53)(1,"span",54),l(2,"\u{1F54C}"),o(),a(3,"h3"),l(4,"No active Umrah packages"),o(),a(5,"button",4),h("click",function(){C(e);let r=g();return y(r.navigateTo("/umrah/create"))}),l(6," Create New Package "),o()()}}function ZR(n,t){if(n&1&&(a(0,"div",62)(1,"div",63),l(2),o(),a(3,"div",64)(4,"p",65),l(5),o(),a(6,"span",66),l(7),j(8,"date"),o()()()),n&2){let e=t.$implicit;c(2),_(e.icon),c(3),_(e.message),c(2),_(ie(8,3,e.time,"HH:mm"))}}function JR(n,t){n&1&&(a(0,"div",53)(1,"span",54),l(2,"\u{1F4CB}"),o(),a(3,"h3"),l(4,"No recent activities"),o()())}var md=class n{constructor(t){this.router=t}stats={totalBuses:45,activeBuses:38,totalDrivers:52,intercityTripsToday:24,umrahPackagesActive:3,totalPassengersToday:856,revenue:{today:45600,thisMonth:1234500},maintenance:{due:7,overdue:2}};todaysTrips=[];activeUmrahPackages=[];recentActivities=[];ngOnInit(){this.checkAuthentication(),this.loadMockData()}checkAuthentication(){if(!localStorage.getItem("authToken")){this.router.navigate(["/login"]);return}}loadMockData(){this.todaysTrips=[{id:"IC001",type:"intercity",busNumber:"RB-IC-001",driverName:"Ahmed Al-Rashid",route:"Riyadh \u2192 Jeddah",departure:new Date("2025-01-25T06:00:00"),arrival:new Date("2025-01-25T16:30:00"),status:"active",passengers:42,maxCapacity:45,currentLocation:"Al-Qassim Province"},{id:"IC002",type:"intercity",busNumber:"RB-IC-002",driverName:"Mohammad Al-Fahad",route:"Dammam \u2192 Riyadh",departure:new Date("2025-01-25T08:30:00"),arrival:new Date("2025-01-25T13:00:00"),status:"completed",passengers:38,maxCapacity:45},{id:"IC003",type:"intercity",busNumber:"RB-IC-003",driverName:"Salem Al-Mutairi",route:"Riyadh \u2192 Makkah",departure:new Date("2025-01-25T14:00:00"),arrival:new Date("2025-01-25T21:30:00"),status:"scheduled",passengers:35,maxCapacity:45},{id:"UM001",type:"umrah",busNumber:"RB-UM-001",driverName:"Khalid Al-Otaibi",route:"Riyadh \u2192 Makkah (Umrah)",departure:new Date("2025-01-25T22:00:00"),arrival:new Date("2025-01-26T05:30:00"),status:"scheduled",passengers:40,maxCapacity:45}],this.activeUmrahPackages=[{id:"UP001",packageName:"Premium Umrah Package - January",departureCity:"Riyadh",duration:7,startDate:new Date("2025-01-23T00:00:00"),endDate:new Date("2025-01-30T00:00:00"),pilgrims:180,maxCapacity:200,status:"active",busesAssigned:4,hotelBookings:["Hilton Makkah","Marriott Madinah"]},{id:"UP002",packageName:"Economy Umrah Package - February",departureCity:"Jeddah",duration:5,startDate:new Date("2025-02-01T00:00:00"),endDate:new Date("2025-02-06T00:00:00"),pilgrims:135,maxCapacity:150,status:"upcoming",busesAssigned:3,hotelBookings:["Al-Safwah Hotel Makkah","Madinah Palace"]},{id:"UP003",packageName:"VIP Umrah Experience",departureCity:"Dammam",duration:10,startDate:new Date("2025-01-20T00:00:00"),endDate:new Date("2025-01-30T00:00:00"),pilgrims:45,maxCapacity:50,status:"active",busesAssigned:1,hotelBookings:["Raffles Makkah Palace","Four Seasons Madinah"]}],this.recentActivities=[{time:new Date("2025-01-25T09:15:00"),type:"trip_completed",message:"Trip IC002 (Dammam \u2192 Riyadh) completed successfully",icon:"\u2705"},{time:new Date("2025-01-25T08:45:00"),type:"maintenance",message:"Bus RB-IC-015 scheduled for maintenance",icon:"\u{1F527}"},{time:new Date("2025-01-25T08:30:00"),type:"umrah_checkin",message:"40 pilgrims checked in for Umrah Package UP001",icon:"\u{1F54C}"},{time:new Date("2025-01-25T08:00:00"),type:"trip_started",message:"Trip IC002 departed from Dammam",icon:"\u{1F68C}"},{time:new Date("2025-01-25T07:45:00"),type:"driver_assigned",message:"Driver Abdullah Al-Dosari assigned to trip IC004",icon:"\u{1F468}\u200D\u2708\uFE0F"}]}getStatusClass(t){switch(t){case"active":return"status-active";case"scheduled":return"status-scheduled";case"completed":return"status-completed";case"cancelled":return"status-cancelled";case"delayed":return"status-delayed";case"upcoming":return"status-upcoming";default:return""}}getTripTypeIcon(t){return t==="umrah"?"\u{1F54C}":"\u{1F68C}"}getCapacityPercentage(t,e){return Math.round(t/e*100)}getCapacityClass(t){return t>=95?"capacity-full":t>=80?"capacity-high":t>=60?"capacity-medium":"capacity-low"}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(t)}navigateTo(t){this.router.navigate([t])}refreshData(){console.log("Refreshing dashboard data..."),this.loadMockData()}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-dashboard"]],decls:142,vars:16,consts:[[1,"dashboard-content"],[1,"dashboard-header"],[1,"header-info"],[1,"header-actions"],[1,"action-btn","primary",3,"click"],[1,"action-btn","secondary",3,"click"],[1,"action-btn","refresh",3,"click"],[1,"metrics-grid"],[1,"metric-card","fleet"],[1,"metric-header"],[1,"metric-icon"],[1,"metric-label"],[1,"metric-content"],[1,"metric-main"],[1,"metric-number"],[1,"metric-total"],[1,"metric-subtitle"],[1,"metric-card","drivers"],[1,"metric-card","trips"],[1,"metric-card","umrah"],[1,"metric-card","passengers"],[1,"metric-card","revenue"],[1,"metric-card","maintenance"],["class","metric-alert",4,"ngIf"],[1,"metric-card","monthly"],[1,"content-grid"],[1,"content-section","trips-section"],[1,"section-header"],[1,"view-all-btn",3,"click"],[1,"trips-list"],["class","trip-card",3,"class",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"content-section","umrah-section"],[1,"umrah-list"],["class","umrah-card",3,"class",4,"ngFor","ngForOf"],[1,"content-section","activities-section"],[1,"activities-list"],["class","activity-item",4,"ngFor","ngForOf"],[1,"metric-alert"],[1,"trip-card"],[1,"trip-header"],[1,"trip-info"],[1,"trip-type"],[1,"trip-details"],[1,"route"],[1,"status-badge"],[1,"trip-body"],[1,"trip-meta"],[1,"meta-item"],[1,"meta-label"],[1,"meta-value"],[1,"capacity-badge"],["class","meta-item",4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],[1,"umrah-card"],[1,"umrah-header"],[1,"umrah-body"],[1,"umrah-meta"],[1,"meta-row"],[1,"progress-bar"],[1,"progress-fill"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-message"],[1,"activity-time"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Fleet Management Dashboard"),o(),a(5,"p"),l(6,"Intercity Bus Services & Umrah Pilgrimage Operations"),o()(),a(7,"div",3)(8,"button",4),h("click",function(){return i.navigateTo("/trips/schedule")}),l(9," \u2795 Schedule Trip "),o(),a(10,"button",5),h("click",function(){return i.navigateTo("/umrah/create")}),l(11," \u{1F54C} Create Umrah Package "),o(),a(12,"button",6),h("click",function(){return i.refreshData()}),l(13," \u{1F504} Refresh "),o()()(),a(14,"div",7)(15,"div",8)(16,"div",9)(17,"span",10),l(18,"\u{1F68C}"),o(),a(19,"span",11),l(20,"Fleet Status"),o()(),a(21,"div",12)(22,"div",13)(23,"span",14),l(24),o(),a(25,"span",15),l(26),o()(),a(27,"div",16),l(28,"Buses Active"),o()()(),a(29,"div",17)(30,"div",9)(31,"span",10),l(32,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(33,"span",11),l(34,"Drivers"),o()(),a(35,"div",12)(36,"div",13)(37,"span",14),l(38),o()(),a(39,"div",16),l(40,"Available Drivers"),o()()(),a(41,"div",18)(42,"div",9)(43,"span",10),l(44,"\u{1F690}"),o(),a(45,"span",11),l(46,"Today's Trips"),o()(),a(47,"div",12)(48,"div",13)(49,"span",14),l(50),o()(),a(51,"div",16),l(52,"Intercity Trips"),o()()(),a(53,"div",19)(54,"div",9)(55,"span",10),l(56,"\u{1F54C}"),o(),a(57,"span",11),l(58,"Umrah Packages"),o()(),a(59,"div",12)(60,"div",13)(61,"span",14),l(62),o()(),a(63,"div",16),l(64,"Active Packages"),o()()(),a(65,"div",20)(66,"div",9)(67,"span",10),l(68,"\u{1F465}"),o(),a(69,"span",11),l(70,"Passengers"),o()(),a(71,"div",12)(72,"div",13)(73,"span",14),l(74),o()(),a(75,"div",16),l(76,"Today's Total"),o()()(),a(77,"div",21)(78,"div",9)(79,"span",10),l(80,"\u{1F4B0}"),o(),a(81,"span",11),l(82,"Revenue"),o()(),a(83,"div",12)(84,"div",13)(85,"span",14),l(86),o()(),a(87,"div",16),l(88,"Today's Revenue"),o()()(),a(89,"div",22)(90,"div",9)(91,"span",10),l(92,"\u{1F527}"),o(),a(93,"span",11),l(94,"Maintenance"),o()(),a(95,"div",12)(96,"div",13)(97,"span",14),l(98),o(),v(99,GR,2,1,"span",23),o(),a(100,"div",16),l(101,"Due for Service"),o()()(),a(102,"div",24)(103,"div",9)(104,"span",10),l(105,"\u{1F4CA}"),o(),a(106,"span",11),l(107,"Monthly Revenue"),o()(),a(108,"div",12)(109,"div",13)(110,"span",14),l(111),o()(),a(112,"div",16),l(113,"This Month"),o()()()(),a(114,"div",25)(115,"div",26)(116,"div",27)(117,"h2"),l(118,"\u{1F68C} Today's Trips"),o(),a(119,"button",28),h("click",function(){return i.navigateTo("/trips")}),l(120,"View All"),o()(),a(121,"div",29),v(122,XR,34,21,"div",30)(123,WR,7,0,"div",31),o()(),a(124,"div",32)(125,"div",27)(126,"h2"),l(127,"\u{1F54C} Active Umrah Packages"),o(),a(128,"button",28),h("click",function(){return i.navigateTo("/umrah")}),l(129,"View All"),o()(),a(130,"div",33),v(131,qR,36,18,"div",34)(132,YR,7,0,"div",31),o()(),a(133,"div",35)(134,"div",27)(135,"h2"),l(136,"\u{1F4CB} Recent Activities"),o(),a(137,"button",28),h("click",function(){return i.navigateTo("/reports")}),l(138,"View Reports"),o()(),a(139,"div",36),v(140,ZR,9,6,"div",37)(141,JR,5,0,"div",31),o()()()()),e&2&&(c(24),_(i.stats.activeBuses),c(2),x("/ ",i.stats.totalBuses,""),c(12),_(i.stats.totalDrivers),c(12),_(i.stats.intercityTripsToday),c(12),_(i.stats.umrahPackagesActive),c(12),_(i.stats.totalPassengersToday),c(12),_(i.formatCurrency(i.stats.revenue.today)),c(12),_(i.stats.maintenance.due),c(),m("ngIf",i.stats.maintenance.overdue>0),c(12),_(i.formatCurrency(i.stats.revenue.thisMonth)),c(11),m("ngForOf",i.todaysTrips),c(),m("ngIf",i.todaysTrips.length===0),c(8),m("ngForOf",i.activeUmrahPackages),c(),m("ngIf",i.activeUmrahPackages.length===0),c(8),m("ngForOf",i.recentActivities),c(),m("ngIf",i.recentActivities.length===0))},dependencies:[K,ae,ee,Ge,He],styles:[".dashboard-content[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:calc(100vh - 140px);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:20px 0;border-bottom:1px solid #e2e8f0}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.action-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.action-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169);color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #48bb784d}.action-btn.refresh[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.action-btn.refresh[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:40px}.metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease;border-left:4px solid #e2e8f0}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.metric-card.fleet[_ngcontent-%COMP%]{border-left-color:#4299e1}.metric-card.drivers[_ngcontent-%COMP%]{border-left-color:#48bb78}.metric-card.trips[_ngcontent-%COMP%]{border-left-color:#ed8936}.metric-card.umrah[_ngcontent-%COMP%]{border-left-color:#9f7aea}.metric-card.passengers[_ngcontent-%COMP%]{border-left-color:#38b2ac}.metric-card.revenue[_ngcontent-%COMP%]{border-left-color:#22c35e}.metric-card.maintenance[_ngcontent-%COMP%]{border-left-color:#ecc94b}.metric-card.monthly[_ngcontent-%COMP%]{border-left-color:#667eea}.metric-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.metric-icon[_ngcontent-%COMP%]{font-size:24px}.metric-label[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.metric-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.metric-main[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px}.metric-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#2d3748}.metric-total[_ngcontent-%COMP%]{font-size:18px;color:#718096;font-weight:500}.metric-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#a0aec0;font-weight:500}.metric-alert[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:600}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:30px;margin-bottom:30px}.content-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 6px #0000000d}.content-section.activities-section[_ngcontent-%COMP%]{grid-column:1 / -1}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#2d3748;font-weight:600}.view-all-btn[_ngcontent-%COMP%]{background:none;border:1px solid #e2e8f0;color:#667eea;padding:8px 16px;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.view-all-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#667eea}.trips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.trip-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.trip-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.trip-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.trip-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.trip-type[_ngcontent-%COMP%]{font-size:24px}.trip-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#2d3748;font-weight:600}.route[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#718096}.trip-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.trip-meta[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.meta-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px}.meta-label[_ngcontent-%COMP%]{color:#718096;font-weight:500}.meta-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;text-align:right}.umrah-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.umrah-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.umrah-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.umrah-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.umrah-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#2d3748;font-weight:600}.umrah-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.umrah-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.meta-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:all .3s ease}.activities-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-height:400px;overflow-y:auto}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:12px;border-radius:8px;transition:all .2s ease}.activity-item[_ngcontent-%COMP%]:hover{background:#f7fafc}.activity-icon[_ngcontent-%COMP%]{font-size:20px;width:40px;height:40px;background:#f7fafc;border-radius:50%;display:flex;align-items:center;justify-content:center}.activity-content[_ngcontent-%COMP%]{flex:1}.activity-message[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;color:#2d3748}.activity-time[_ngcontent-%COMP%]{font-size:12px;color:#a0aec0}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-scheduled[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.status-completed[_ngcontent-%COMP%]{background:#d6f5d6;color:#22543d}.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-delayed[_ngcontent-%COMP%]{background:#faf089;color:#744210}.status-upcoming[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.capacity-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px;border-radius:8px;font-weight:600;margin-left:6px}.progress-fill.capacity-low[_ngcontent-%COMP%]{background:#48bb78}.progress-fill.capacity-medium[_ngcontent-%COMP%]{background:#ecc94b}.progress-fill.capacity-high[_ngcontent-%COMP%]{background:#ed8936}.progress-fill.capacity-full[_ngcontent-%COMP%]{background:#f56565}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;display:block}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;color:#4a5568}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:14px}@media (max-width: 1200px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{padding:20px 15px}.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px}.metric-card[_ngcontent-%COMP%]{padding:20px}.metric-number[_ngcontent-%COMP%]{font-size:24px}.content-section[_ngcontent-%COMP%]{padding:20px}.trip-meta[_ngcontent-%COMP%]{grid-template-columns:1fr}.section-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.view-all-btn[_ngcontent-%COMP%]{align-self:center}}@media (max-width: 480px){.dashboard-content[_ngcontent-%COMP%]{padding:15px 10px}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.action-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.metric-card[_ngcontent-%COMP%], .content-section[_ngcontent-%COMP%], .trip-card[_ngcontent-%COMP%], .umrah-card[_ngcontent-%COMP%]{padding:16px}}.dashboard-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f8fafc;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.dashboard-header[_ngcontent-%COMP%]{background:#fff;color:#fff;padding:20px 30px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 6px #0000001a}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600}.current-time[_ngcontent-%COMP%]{margin:5px 0 0;opacity:.9;font-size:14px}.header-right[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-email[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.refresh-btn[_ngcontent-%COMP%], .logout-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.refresh-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3)}.refresh-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:rotate(180deg)}.logout-btn[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.3)}.logout-btn[_ngcontent-%COMP%]:hover{background:#fff3}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;padding:30px;max-width:1400px;margin:0 auto}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:20px;transition:all .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#4299e1}.stat-card.active[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.routes[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.passengers[_ngcontent-%COMP%]{border-left-color:#9f7aea}.stat-card.maintenance[_ngcontent-%COMP%]{border-left-color:#ecc94b}.stat-card.breakdown[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-icon[_ngcontent-%COMP%]{font-size:32px;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:#f7fafc}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:700;color:#2d3748}.vehicles-section[_ngcontent-%COMP%]{padding:0 30px 30px;max-width:1400px;margin:0 auto}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;flex-wrap:wrap;gap:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:24px;font-weight:600}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e2e8f0;background:#fff;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;color:#4a5568}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;background:#f7fafc}.filter-btn.active[_ngcontent-%COMP%]{background:#667eea;border-color:#667eea;color:#fff}.filter-btn.status-active.active[_ngcontent-%COMP%]{background:#48bb78;border-color:#48bb78}.filter-btn.status-maintenance.active[_ngcontent-%COMP%]{background:#ecc94b;border-color:#ecc94b;color:#2d3748}.filter-btn.status-breakdown.active[_ngcontent-%COMP%]{background:#f56565;border-color:#f56565}.vehicles-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:20px}.vehicle-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease}.vehicle-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.vehicle-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.vehicle-number[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:18px;color:#2d3748}.status-icon[_ngcontent-%COMP%]{font-size:20px}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-maintenance[_ngcontent-%COMP%]{background:#faf089;color:#744210}.status-breakdown[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.vehicle-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.label[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500}.value[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:500;text-align:right}.capacity-percentage[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:2px 6px;border-radius:4px;margin-left:8px}.capacity-low[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.capacity-medium[_ngcontent-%COMP%]{background:#faf089;color:#744210}.capacity-high[_ngcontent-%COMP%]{background:#fbb6ce;color:#97266d}.capacity-full[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.vehicle-actions[_ngcontent-%COMP%]{margin-top:20px;padding-top:15px;border-top:1px solid #e2e8f0}.capacity-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.capacity-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:all .3s ease}.capacity-fill.capacity-low[_ngcontent-%COMP%]{background:#48bb78}.capacity-fill.capacity-medium[_ngcontent-%COMP%]{background:#ecc94b}.capacity-fill.capacity-high[_ngcontent-%COMP%]{background:#ed8936}.capacity-fill.capacity-full[_ngcontent-%COMP%]{background:#f56565}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:20px;color:#4a5568}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}@media (max-width: 1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));padding:20px}.vehicles-section[_ngcontent-%COMP%]{padding:0 20px 20px}.vehicles-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center;padding:20px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:15px}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-buttons[_ngcontent-%COMP%]{justify-content:center}.vehicles-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.vehicles-section[_ngcontent-%COMP%]{padding:0 15px 15px}.vehicle-card[_ngcontent-%COMP%]{padding:20px}}"]})};var KR=()=>[];function QR(n,t){n&1&&(a(0,"span"),l(1,"\u{1F68C}"),o())}function eO(n,t){n&1&&(a(0,"span"),l(1,"\u{1F54C}"),o())}function tO(n,t){n&1&&(a(0,"span"),l(1,"\u{1F690}"),o())}function nO(n,t){n&1&&(a(0,"span"),l(1,"\u{1F68C}"),o())}function iO(n,t){n&1&&(a(0,"span"),E(1,13),o())}function rO(n,t){n&1&&(a(0,"span"),E(1,14),o())}function oO(n,t){n&1&&(a(0,"span"),E(1,15),o())}function aO(n,t){if(n&1&&(a(0,"span"),l(1),j(2,"uppercase"),o()),n&2){let e=g().$implicit;c(),_(se(2,1,e.busType))}}function sO(n,t){n&1&&(a(0,"span"),E(1,16),o())}function lO(n,t){n&1&&(a(0,"span"),E(1,17),o())}function cO(n,t){n&1&&(a(0,"span"),E(1,18),o())}function dO(n,t){n&1&&(a(0,"span"),E(1,19),o())}function uO(n,t){if(n&1&&(a(0,"span"),l(1),j(2,"uppercase"),o()),n&2){let e=g().$implicit;c(),_(se(2,1,e.status))}}function pO(n,t){if(n&1&&(a(0,"span",104)(1,"span",105),l(2,"\u{1F4CD}"),o(),l(3),o()),n&2){let e=g().$implicit;c(3),x(" ",e.currentLocation," ")}}function mO(n,t){n&1&&(a(0,"span",106),E(1,20),o())}function gO(n,t){if(n&1&&(a(0,"span",107)(1,"span",108),l(2,"\u{1F468}\u200D\u2708\uFE0F"),o(),l(3),o()),n&2){let e=g().$implicit;c(3),x(" ",e.driverAssigned," ")}}function fO(n,t){n&1&&(a(0,"span",106),E(1,21),o())}function _O(n,t){if(n&1&&(a(0,"span",109)(1,"span",110),l(2,"\u{1F527}"),o(),a(3,"span",111),l(4),j(5,"date"),o()()),n&2){let e=g().$implicit;c(4),_(ie(5,1,e.lastMaintenance,"MMM dd"))}}function hO(n,t){n&1&&(a(0,"span",112)(1,"span",113),l(2,"\u26A0\uFE0F"),o(),a(3,"span"),E(4,22),o()())}function vO(n,t){n&1&&(a(0,"span",106)(1,"span"),E(2,23),o()())}function xO(n,t){if(n&1){let e=O();a(0,"tr",65)(1,"td",66)(2,"div",67)(3,"div",68)(4,"span",69),v(5,QR,2,0,"span",70)(6,eO,2,0,"span",70)(7,tO,2,0,"span",70)(8,nO,2,0,"span",71),o()(),a(9,"div",72)(10,"div",73),l(11),o(),a(12,"div",74),l(13),o()()()(),a(14,"td",75)(15,"div",76),l(16),o()(),a(17,"td",77)(18,"div",78)(19,"div",79),l(20),o(),a(21,"div",80),l(22),o()()(),a(23,"td",81)(24,"div",82)(25,"div",83),l(26),a(27,"span"),E(28,12),o()()()(),a(29,"td",84)(30,"span",85)(31,"span",69),v(32,iO,2,0,"span",70)(33,rO,2,0,"span",70)(34,oO,2,0,"span",70)(35,aO,3,3,"span",71),o()()(),a(36,"td",86)(37,"span",87)(38,"span",69),v(39,sO,2,0,"span",70)(40,lO,2,0,"span",70)(41,cO,2,0,"span",70)(42,dO,2,0,"span",70)(43,uO,3,3,"span",71),o()()(),a(44,"td",88)(45,"div",89),v(46,pO,4,1,"span",90)(47,mO,2,0,"ng-template",null,0,Bi),o()(),a(49,"td",91)(50,"div",92),v(51,gO,4,1,"span",93)(52,fO,2,0,"ng-template",null,1,Bi),o()(),a(54,"td",94)(55,"div",95),v(56,_O,6,4,"span",96)(57,hO,5,0,"span",97)(58,vO,3,0,"span",98),o()(),a(59,"td",99)(60,"div",100)(61,"button",101),h("click",function(){let r=C(e).$implicit,s=g();return y(s.viewBusDetails(r.id))}),l(62," \u{1F441}\uFE0F "),o(),a(63,"button",102),h("click",function(){let r=C(e).$implicit,s=g();return y(s.editBus(r.id))}),l(64," \u270F\uFE0F "),o(),a(65,"button",103),h("click",function(){let r=C(e).$implicit,s=g();return y(s.deleteBus(r.id))}),l(66," \u{1F5D1}\uFE0F "),o()()()()}if(n&2){let e=t.$implicit,i=ai(48),r=ai(53),s=g();c(4),m("ngSwitch",e.busType),c(),m("ngSwitchCase","intercity"),c(),m("ngSwitchCase","umrah"),c(),m("ngSwitchCase","both"),c(4),_(e.busNumber),c(2),_(e.year||"N/A"),c(3),_(e.registrationNumber),c(4),_(e.make),c(2),_(e.model),c(4),x("",e.seatingCapacity," "),c(4),q(s.getTypeClass(e.busType)),c(),m("ngSwitch",e.busType),c(),m("ngSwitchCase","intercity"),c(),m("ngSwitchCase","umrah"),c(),m("ngSwitchCase","both"),c(3),q(s.getStatusClass(e.status)),c(),m("ngSwitch",e.status),c(),m("ngSwitchCase","active"),c(),m("ngSwitchCase","inactive"),c(),m("ngSwitchCase","maintenance"),c(),m("ngSwitchCase","out-of-service"),c(4),m("ngIf",e.currentLocation)("ngIfElse",i),c(5),m("ngIf",e.driverAssigned)("ngIfElse",r),c(5),m("ngIf",e.lastMaintenance),c(),m("ngIf",s.isMaintenanceOverdue(e)),c(),m("ngIf",!e.lastMaintenance)}}function CO(n,t){if(n&1){let e=O();a(0,"div",114)(1,"div",115),l(2,"\u{1F68C}"),o(),a(3,"h3"),l(4,"No buses found"),o(),a(5,"p"),l(6,"No buses match your current filter criteria."),o(),a(7,"button",28),h("click",function(){C(e);let r=g();return y(r.addNewBus())}),l(8,"Add Your First Bus"),o()()}}function yO(n,t){if(n&1){let e=O();a(0,"button",120),h("click",function(){let r=C(e).index,s=g(2);return y(s.changePage(r+1))}),l(1),o()}if(n&2){let e=t.index,i=g(2);I("active",i.currentPage===e+1),c(),x(" ",e+1," ")}}function bO(n,t){if(n&1){let e=O();a(0,"div",116)(1,"button",117),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage-1))}),l(2," \u2190 Previous "),o(),a(3,"div",118),v(4,yO,2,3,"button",119),o(),a(5,"button",117),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage+1))}),l(6," Next \u2192 "),o()()}if(n&2){let e=g();c(),m("disabled",e.currentPage===1),c(3),m("ngForOf",si(3,KR).constructor(e.totalPages)),c(),m("disabled",e.currentPage===e.totalPages)}}function EO(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g();c(),x(" (filtered from ",e.stats.total," total) ")}}var gd=class n{constructor(t){this.router=t}buses=[];filteredBuses=[];stats={total:0,active:0,maintenance:0,breakdown:0,inactive:0,intercityOnly:0,umrahOnly:0,both:0};Math=Math;searchTerm="";statusFilter="all";typeFilter="all";sortBy="busNumber";sortDirection="asc";currentPage=1;itemsPerPage=10;totalPages=1;ngOnInit(){this.loadMockData(),this.applyFilters()}loadMockData(){this.buses=[{id:"B001",busNumber:"RB-IC-001",registrationNumber:"RYD-1234-A",make:"Mercedes-Benz",model:"Tourismo",year:2022,seatingCapacity:45,busType:"intercity",status:"active",amenities:["AC","WiFi","USB Charging","Reclining Seats","Entertainment System"],currentLocation:"Riyadh Central Station",assignedRoute:"Riyadh - Jeddah",driverAssigned:"Ahmed Al-Rashid",lastMaintenance:new Date("2024-12-15"),nextMaintenanceDue:new Date("2025-03-15"),mileage:45e3,fuelType:"diesel",insuranceExpiry:new Date("2025-12-31"),licenseExpiry:new Date("2025-11-30"),purchaseDate:new Date("2022-03-10"),imageUrl:"assets/images/bus-placeholder.jpg"},{id:"B002",busNumber:"RB-UM-001",registrationNumber:"RYD-5678-B",make:"Volvo",model:"9700 Coach",year:2021,seatingCapacity:50,busType:"umrah",status:"active",amenities:["AC","Prayer Space","Luggage Storage","Comfortable Beds","Meal Service"],currentLocation:"Makkah Holy Mosque",assignedRoute:"Umrah Package Route",driverAssigned:"Mohammad Al-Fahad",lastMaintenance:new Date("2025-01-10"),nextMaintenanceDue:new Date("2025-04-10"),mileage:38e3,fuelType:"diesel",insuranceExpiry:new Date("2025-09-30"),licenseExpiry:new Date("2025-08-15"),purchaseDate:new Date("2021-08-20"),imageUrl:"assets/images/bus-placeholder.jpg"},{id:"B003",busNumber:"RB-IC-002",registrationNumber:"JED-9876-C",make:"Scania",model:"Touring HD",year:2020,seatingCapacity:42,busType:"both",status:"maintenance",amenities:["AC","WiFi","USB Charging","Reclining Seats"],currentLocation:"Workshop - Riyadh",lastMaintenance:new Date("2025-01-20"),nextMaintenanceDue:new Date("2025-04-20"),mileage:62e3,fuelType:"diesel",insuranceExpiry:new Date("2025-07-31"),licenseExpiry:new Date("2025-06-30"),purchaseDate:new Date("2020-11-05"),imageUrl:"assets/images/bus-placeholder.jpg"},{id:"B004",busNumber:"RB-IC-003",registrationNumber:"DAM-4321-D",make:"Mercedes-Benz",model:"Travego",year:2023,seatingCapacity:48,busType:"intercity",status:"active",amenities:["AC","WiFi","USB Charging","Reclining Seats","Entertainment System","Mini Fridge"],currentLocation:"Dammam Station",assignedRoute:"Dammam - Riyadh",driverAssigned:"Salem Al-Mutairi",lastMaintenance:new Date("2025-01-05"),nextMaintenanceDue:new Date("2025-04-05"),mileage:15e3,fuelType:"diesel",insuranceExpiry:new Date("2026-01-31"),licenseExpiry:new Date("2026-01-15"),purchaseDate:new Date("2023-02-15"),imageUrl:"assets/images/bus-placeholder.jpg"},{id:"B005",busNumber:"RB-UM-002",registrationNumber:"MED-8765-E",make:"Iveco",model:"Magelys Pro",year:2019,seatingCapacity:44,busType:"umrah",status:"breakdown",amenities:["AC","Prayer Space","Luggage Storage","Comfortable Seats"],currentLocation:"Madinah - Emergency Service",lastMaintenance:new Date("2024-11-20"),nextMaintenanceDue:new Date("2025-02-20"),mileage:78e3,fuelType:"diesel",insuranceExpiry:new Date("2025-05-31"),licenseExpiry:new Date("2025-04-30"),purchaseDate:new Date("2019-07-10"),imageUrl:"assets/images/bus-placeholder.jpg"},{id:"B006",busNumber:"RB-IC-004",registrationNumber:"RYD-1111-F",make:"MAN",model:"Lion's Coach",year:2021,seatingCapacity:40,busType:"both",status:"inactive",amenities:["AC","WiFi","USB Charging"],currentLocation:"Depot - Riyadh",lastMaintenance:new Date("2024-10-15"),nextMaintenanceDue:new Date("2025-01-15"),mileage:55e3,fuelType:"diesel",insuranceExpiry:new Date("2025-08-31"),licenseExpiry:new Date("2025-07-30"),purchaseDate:new Date("2021-04-25"),imageUrl:"assets/images/bus-placeholder.jpg"}],this.calculateStats()}calculateStats(){this.stats.total=this.buses.length,this.stats.active=this.buses.filter(t=>t.status==="active").length,this.stats.maintenance=this.buses.filter(t=>t.status==="maintenance").length,this.stats.breakdown=this.buses.filter(t=>t.status==="breakdown").length,this.stats.inactive=this.buses.filter(t=>t.status==="inactive").length,this.stats.intercityOnly=this.buses.filter(t=>t.busType==="intercity").length,this.stats.umrahOnly=this.buses.filter(t=>t.busType==="umrah").length,this.stats.both=this.buses.filter(t=>t.busType==="both").length}applyFilters(){let t=[...this.buses];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.busNumber.toLowerCase().includes(e)||i.registrationNumber.toLowerCase().includes(e)||i.make.toLowerCase().includes(e)||i.model.toLowerCase().includes(e)||i.driverAssigned&&i.driverAssigned.toLowerCase().includes(e))}this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.typeFilter!=="all"&&(t=t.filter(e=>e.busType===this.typeFilter)),t.sort((e,i)=>{let r=e[this.sortBy],s=i[this.sortBy];return r===void 0&&(r=""),s===void 0&&(s=""),typeof r=="string"&&(r=r.toLowerCase()),typeof s=="string"&&(s=s.toLowerCase()),r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0}),this.filteredBuses=t,this.totalPages=Math.ceil(t.length/this.itemsPerPage),this.currentPage=1}getPaginatedBuses(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredBuses.slice(t,e)}changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}getStatusClass(t){switch(t){case"active":return"status-active";case"inactive":return"status-inactive";case"maintenance":return"status-maintenance";case"out-of-service":return"status-out-of-service";default:return""}}getBusTypeClass(t){switch(t){case"intercity":return"type-intercity";case"umrah":return"type-umrah";case"both":return"type-both";default:return""}}getBusTypeIcon(t){switch(t){case"intercity":return"\u{1F68C}";case"umrah":return"\u{1F54C}";case"both":return"\u{1F68C}\u{1F54C}";default:return"\u{1F68C}"}}toggleSort(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc"),this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}viewBusDetails(t){this.router.navigate(["/buses",t])}editBus(t){this.router.navigate(["/buses",t,"edit"])}addNewBus(){this.router.navigate(["/buses/add"])}deleteBus(t){confirm("Are you sure you want to delete this bus?")&&(this.buses=this.buses.filter(e=>e.id!==t),this.calculateStats(),this.applyFilters())}isMaintenanceDue(t){let e=new Date,i=new Date(t.nextMaintenanceDue);return Math.ceil((i.getTime()-e.getTime())/(1e3*3600*24))<=30}isMaintenanceOverdue(t){if(!t.lastMaintenance)return!1;let e=new Date(t.lastMaintenance);return Math.floor((new Date().getTime()-e.getTime())/(1e3*3600*24))>90}getDaysUntilMaintenance(t){let e=new Date,i=new Date(t.nextMaintenanceDue);return Math.ceil((i.getTime()-e.getTime())/(1e3*3600*24))}getTypeClass(t){switch(t){case"intercity":return"type-intercity";case"luxury":return"type-luxury";case"economy":return"type-economy";case"both":return"type-both";default:return""}}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-bus-list"]],decls:144,vars:23,consts:()=>{let t;t=$localize`:@@bus.table.number:Bus Number`;let e;e=$localize`:@@bus.table.registration:Registration`;let i;i=$localize`:@@bus.table.make-model:Make/Model`;let r;r=$localize`:@@bus.table.capacity:Capacity`;let s;s=$localize`:@@bus.table.type:Type`;let d;d=$localize`:@@bus.table.status:Status`;let u;u=$localize`:@@bus.table.location:Current Location`;let p;p=$localize`:@@bus.table.driver:Driver`;let f;f=$localize`:@@bus.table.maintenance:Maintenance`;let b;b=$localize`:@@common.actions:Actions`;let D;D=$localize`:@@common.view:View Details`;let S;S=$localize`:@@common.edit:Edit Bus`;let M;M=$localize`:@@common.delete:Delete Bus`;let R;R=$localize`:@@bus.seats:seats`;let A;A=$localize`:@@bus.type.intercity:INTERCITY`;let z;z=$localize`:@@bus.type.umrah:UMRAH`;let U;U=$localize`:@@bus.type.both:BOTH`;let ue;ue=$localize`:@@bus.status.active:ACTIVE`;let oe;oe=$localize`:@@bus.status.inactive:INACTIVE`;let re;re=$localize`:@@bus.status.maintenance:MAINTENANCE`;let ke;ke=$localize`:@@bus.status.out-of-service:OUT OF SERVICE`;let We;We=$localize`:@@bus.no-location:Location not set`;let Ue;Ue=$localize`:@@bus.no-driver:Unassigned`;let rt;rt=$localize`:@@bus.maintenance.overdue:Overdue`;let pt;return pt=$localize`:@@bus.maintenance.no-record:No record`,[["noLocation",""],["noDriver",""],t,e,i,r,s,d,u,p,f,b,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,[1,"bus-management-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","active"],[1,"stat-card","maintenance"],[1,"stat-card","breakdown"],[1,"stat-card","intercity"],[1,"stat-card","umrah"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder","Search buses by number, registration, make, model, or driver...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","maintenance"],["value","breakdown"],["value","inactive"],["value","intercity"],["value","umrah"],["value","both"],["value","10"],["value","25"],["value","50"],[1,"table-container"],[1,"bus-table"],[1,"sortable",3,"click"],["class","bus-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"results-info"],[4,"ngIf"],[1,"bus-row"],[1,"bus-number"],[1,"bus-info"],[1,"bus-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"bus-details"],[1,"number"],[1,"year"],[1,"registration"],[1,"registration-badge"],[1,"make-model"],[1,"vehicle-info"],[1,"make"],[1,"model"],[1,"capacity"],[1,"capacity-info"],[1,"seats"],[1,"bus-type"],[1,"type-badge"],[1,"status"],[1,"status-badge"],[1,"location"],[1,"location-info"],["class","location-text",4,"ngIf","ngIfElse"],[1,"driver"],[1,"driver-info"],["class","driver-name",4,"ngIf","ngIfElse"],[1,"maintenance"],[1,"maintenance-status"],["class","maintenance-info",4,"ngIf"],["class","overdue-warning",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"actions"],[1,"action-buttons"],["title",D,1,"action-btn","view",3,"click"],["title",S,1,"action-btn","edit",3,"click"],["title",M,1,"action-btn","delete",3,"click"],[1,"location-text"],[1,"location-icon"],[1,"text-muted"],[1,"driver-name"],[1,"driver-icon"],[1,"maintenance-info"],[1,"maintenance-icon"],[1,"last-service"],[1,"overdue-warning"],[1,"warning-icon"],[1,"empty-state"],[1,"empty-icon"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-numbers"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"]]},template:function(e,i){e&1&&(a(0,"div",24)(1,"div",25)(2,"div",26)(3,"h1"),l(4,"\u{1F68C} Bus Management"),o(),a(5,"p"),l(6,"Manage your fleet of intercity and Umrah service buses"),o()(),a(7,"div",27)(8,"button",28),h("click",function(){return i.addNewBus()}),l(9," \u2795 Add New Bus "),o()()(),a(10,"div",29)(11,"div",30)(12,"div",31),l(13,"\u{1F68C}"),o(),a(14,"div",32)(15,"h3"),l(16,"Total Buses"),o(),a(17,"p",33),l(18),o()()(),a(19,"div",34)(20,"div",31),l(21,"\u2705"),o(),a(22,"div",32)(23,"h3"),l(24,"Active"),o(),a(25,"p",33),l(26),o()()(),a(27,"div",35)(28,"div",31),l(29,"\u{1F527}"),o(),a(30,"div",32)(31,"h3"),l(32,"In Maintenance"),o(),a(33,"p",33),l(34),o()()(),a(35,"div",36)(36,"div",31),l(37,"\u26A0\uFE0F"),o(),a(38,"div",32)(39,"h3"),l(40,"Breakdown"),o(),a(41,"p",33),l(42),o()()(),a(43,"div",37)(44,"div",31),l(45,"\u{1F68C}"),o(),a(46,"div",32)(47,"h3"),l(48,"Intercity Only"),o(),a(49,"p",33),l(50),o()()(),a(51,"div",38)(52,"div",31),l(53,"\u{1F54C}"),o(),a(54,"div",32)(55,"h3"),l(56,"Umrah Only"),o(),a(57,"p",33),l(58),o()()()(),a(59,"div",39)(60,"div",40)(61,"input",41),L("ngModelChange",function(s){return $(i.searchTerm,s)||(i.searchTerm=s),s}),h("input",function(){return i.applyFilters()}),o(),a(62,"span",42),l(63,"\u{1F50D}"),o()(),a(64,"div",43)(65,"div",44)(66,"label"),l(67,"Status:"),o(),a(68,"select",45),L("ngModelChange",function(s){return $(i.statusFilter,s)||(i.statusFilter=s),s}),h("change",function(){return i.applyFilters()}),a(69,"option",46),l(70,"All Status"),o(),a(71,"option",47),l(72,"Active"),o(),a(73,"option",48),l(74,"Maintenance"),o(),a(75,"option",49),l(76,"Breakdown"),o(),a(77,"option",50),l(78,"Inactive"),o()()(),a(79,"div",44)(80,"label"),l(81,"Type:"),o(),a(82,"select",45),L("ngModelChange",function(s){return $(i.typeFilter,s)||(i.typeFilter=s),s}),h("change",function(){return i.applyFilters()}),a(83,"option",46),l(84,"All Types"),o(),a(85,"option",51),l(86,"Intercity"),o(),a(87,"option",52),l(88,"Umrah"),o(),a(89,"option",53),l(90,"Both"),o()()(),a(91,"div",44)(92,"label"),l(93,"Items per page:"),o(),a(94,"select",45),L("ngModelChange",function(s){return $(i.itemsPerPage,s)||(i.itemsPerPage=s),s}),h("change",function(){return i.applyFilters()}),a(95,"option",54),l(96,"10"),o(),a(97,"option",55),l(98,"25"),o(),a(99,"option",56),l(100,"50"),o()()()()(),a(101,"div",57)(102,"table",58)(103,"thead")(104,"tr")(105,"th",59),h("click",function(){return i.toggleSort("busNumber")}),a(106,"span"),E(107,2),o(),l(108),o(),a(109,"th",59),h("click",function(){return i.toggleSort("registrationNumber")}),a(110,"span"),E(111,3),o(),l(112),o(),a(113,"th",59),h("click",function(){return i.toggleSort("make")}),a(114,"span"),E(115,4),o(),l(116),o(),a(117,"th",59),h("click",function(){return i.toggleSort("capacity")}),a(118,"span"),E(119,5),o(),l(120),o(),a(121,"th",59),h("click",function(){return i.toggleSort("type")}),a(122,"span"),E(123,6),o(),l(124),o(),a(125,"th",59),h("click",function(){return i.toggleSort("status")}),a(126,"span"),E(127,7),o(),l(128),o(),a(129,"th"),E(130,8),o(),a(131,"th"),E(132,9),o(),a(133,"th"),E(134,10),o(),a(135,"th"),E(136,11),o()()(),a(137,"tbody"),v(138,xO,67,30,"tr",60),o()(),v(139,CO,9,0,"div",61),o(),v(140,bO,7,4,"div",62),a(141,"div",63),l(142),v(143,EO,2,1,"span",64),o()()),e&2&&(c(18),_(i.stats.total),c(8),_(i.stats.active),c(8),_(i.stats.maintenance),c(8),_(i.stats.breakdown),c(8),_(i.stats.intercityOnly),c(8),_(i.stats.umrahOnly),c(3),F("ngModel",i.searchTerm),c(7),F("ngModel",i.statusFilter),c(14),F("ngModel",i.typeFilter),c(12),F("ngModel",i.itemsPerPage),c(14),x(" ",i.getSortIcon("busNumber")," "),c(4),x(" ",i.getSortIcon("registrationNumber")," "),c(4),x(" ",i.getSortIcon("make")," "),c(4),x(" ",i.getSortIcon("capacity")," "),c(4),x(" ",i.getSortIcon("type")," "),c(4),x(" ",i.getSortIcon("status")," "),c(10),m("ngForOf",i.getPaginatedBuses()),c(),m("ngIf",i.getPaginatedBuses().length===0),c(),m("ngIf",i.totalPages>1),c(2),Ke(" Showing ",(i.currentPage-1)*i.itemsPerPage+1," to ",i.Math.min(i.currentPage*i.itemsPerPage,i.filteredBuses.length)," of ",i.filteredBuses.length," buses "),c(),m("ngIf",i.filteredBuses.length!==i.stats.total))},dependencies:[K,ae,ee,Ii,xr,Pm,Tm,He,et,Re,Oe,Se,Pe,Ie,it],styles:[".bus-management-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px;transition:all .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#4299e1}.stat-card.active[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.maintenance[_ngcontent-%COMP%]{border-left-color:#ecc94b}.stat-card.breakdown[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-card.intercity[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.umrah[_ngcontent-%COMP%]{border-left-color:#9f7aea}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#f7fafc}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#2d3748}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 45px 12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:16px;color:#718096}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#4a5568}.filter-select[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;margin-bottom:25px}.bus-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.bus-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.bus-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;color:#2d3748;border-bottom:1px solid #e2e8f0;white-space:nowrap;position:sticky;top:0;background:#f8fafc;z-index:10}.bus-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.bus-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#edf2f7}.bus-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;border-bottom:1px solid #e2e8f0;vertical-align:middle}.bus-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.bus-number[_ngcontent-%COMP%]{min-width:120px}.bus-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.bus-icon[_ngcontent-%COMP%]{font-size:20px;width:24px;text-align:center}.bus-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.number[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.year[_ngcontent-%COMP%]{color:#718096;font-size:11px}.registration[_ngcontent-%COMP%]{min-width:120px}.registration-badge[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568;padding:6px 10px;border-radius:6px;font-weight:500;font-size:12px;display:inline-block;font-family:monospace}.make-model[_ngcontent-%COMP%]{min-width:150px}.vehicle-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.make[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.model[_ngcontent-%COMP%]{color:#718096;font-size:12px}.capacity[_ngcontent-%COMP%]{min-width:80px;text-align:center}.capacity-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.seats[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.bus-type[_ngcontent-%COMP%]{min-width:100px}.type-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-align:center;text-transform:uppercase;display:inline-block}.type-intercity[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.type-umrah[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.type-both[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status[_ngcontent-%COMP%]{min-width:120px}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:6px 12px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d;border:1px solid #9ae6b4}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568;border:1px solid #cbd5e0}.status-maintenance[_ngcontent-%COMP%]{background:#fef5e7;color:#c05621;border:1px solid #f6ad55}.status-breakdown[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a;border:1px solid #fc8181}.location[_ngcontent-%COMP%]{min-width:150px;max-width:200px}.location-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.location-text[_ngcontent-%COMP%]{color:#2d3748;font-size:13px;display:flex;align-items:center;gap:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.location-icon[_ngcontent-%COMP%]{font-size:12px;color:#718096}.driver[_ngcontent-%COMP%]{min-width:120px;max-width:150px}.driver-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.driver-name[_ngcontent-%COMP%]{color:#2d3748;font-size:13px;font-weight:500;display:flex;align-items:center;gap:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.driver-icon[_ngcontent-%COMP%]{font-size:12px;color:#718096}.maintenance[_ngcontent-%COMP%]{min-width:100px}.maintenance-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.maintenance-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#4a5568;font-size:12px}.maintenance-icon[_ngcontent-%COMP%]{font-size:12px;color:#718096}.last-service[_ngcontent-%COMP%]{font-weight:500}.overdue-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#e53e3e;font-size:11px;font-weight:600}.warning-icon[_ngcontent-%COMP%]{font-size:12px}.text-muted[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic;font-size:12px}.actions[_ngcontent-%COMP%]{min-width:120px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center}.action-btn[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s ease;background:#f7fafc;color:#4a5568;display:flex;align-items:center;justify-content:center;min-width:32px;height:32px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.action-btn.view[_ngcontent-%COMP%]:hover{background:#bee3f8;color:#2a4365}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#faf089;color:#744210}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#fed7d7;color:#742a2a}@media (max-width: 1400px){.bus-table[_ngcontent-%COMP%]{font-size:13px}.bus-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.location[_ngcontent-%COMP%], .driver[_ngcontent-%COMP%]{max-width:120px}}@media (max-width: 1024px){.table-container[_ngcontent-%COMP%]{overflow-x:auto}.bus-table[_ngcontent-%COMP%]{min-width:1000px}}@media (max-width: 768px){.bus-table[_ngcontent-%COMP%]{min-width:900px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.action-btn[_ngcontent-%COMP%]{min-width:28px;height:28px;font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#4a5568;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:14px}.empty-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}@media (max-width: 1200px){.bus-management-container[_ngcontent-%COMP%]{padding:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.bus-table[_ngcontent-%COMP%]{font-size:12px}.bus-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.vehicle-info[_ngcontent-%COMP%]{font-size:12px}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}}@media (max-width: 480px){.bus-management-container[_ngcontent-%COMP%]{padding:15px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.bus-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}}.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box;margin:0;padding:30px;background:#f8fafc;min-height:calc(100vh - 140px)}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px;contain:layout}.driver-table[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse;table-layout:fixed}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0;width:100%;box-sizing:border-box}.header-content[_ngcontent-%COMP%]{flex:1;min-width:0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.header-actions[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;width:100%}.stat-card[_ngcontent-%COMP%]{min-width:0;overflow:hidden}.filter-controls[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;background:#fff;border-radius:12px;padding:20px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d}.filter-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;width:100%}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:150px;box-sizing:border-box}.actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center;flex-wrap:nowrap;min-width:120px}.action-btn[_ngcontent-%COMP%]{flex-shrink:0;min-width:32px;height:32px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin:25px 0;flex-wrap:wrap;width:100%}@media (max-width: 1400px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 1024px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}}@media (max-width: 768px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]{min-width:unset}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.driver-management-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{max-width:100%;box-sizing:border-box}.assignment[_ngcontent-%COMP%], .location[_ngcontent-%COMP%], .driver-name[_ngcontent-%COMP%], .bus-number[_ngcontent-%COMP%], .email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.driver-table[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]{min-width:800px}}"]})};function DO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("busNumber")," ")}}function MO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("registrationNumber")," ")}}function SO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("busType")," ")}}function IO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("seatingCapacity")," ")}}function PO(n,t){if(n&1&&(a(0,"option",58),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function TO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("make")," ")}}function RO(n,t){if(n&1&&(a(0,"option",58),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function OO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("model")," ")}}function wO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("year")," ")}}function AO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("fuelType")," ")}}function NO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("mileage")," ")}}function kO(n,t){n&1&&(a(0,"span"),l(1,"\u2713"),o())}function VO(n,t){if(n&1){let e=O();a(0,"div",59),h("click",function(){let r=C(e).$implicit,s=g();return y(s.toggleAmenity(r))}),a(1,"div",60),v(2,kO,2,0,"span",56),o(),a(3,"span",61),l(4),o()()}if(n&2){let e=t.$implicit,i=g();I("selected",i.isAmenitySelected(e)),c(2),m("ngIf",i.isAmenitySelected(e)),c(2),_(e)}}function FO(n,t){if(n&1){let e=O();a(0,"span",65),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleAmenity(r))}),l(1),o()}if(n&2){let e=t.$implicit;c(),x(" ",e," \u2715 ")}}function LO(n,t){if(n&1&&(a(0,"div",62)(1,"h4"),l(2),o(),a(3,"div",63),v(4,FO,2,1,"span",64),o()()),n&2){let e=g();c(2),x("Selected Amenities (",e.selectedAmenities.length,"):"),c(2),m("ngForOf",e.selectedAmenities)}}function $O(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("purchaseDate")," ")}}function BO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("nextMaintenanceDue")," ")}}function zO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("insuranceExpiry")," ")}}function jO(n,t){if(n&1&&(a(0,"div",57),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("licenseExpiry")," ")}}function UO(n,t){n&1&&(a(0,"span"),l(1,"\u2705 Add Bus to Fleet"),o())}function GO(n,t){n&1&&(a(0,"span"),l(1,"\u23F3 Adding Bus..."),o())}var fd=class n{constructor(t,e){this.formBuilder=t;this.router=e;this.busForm=this.createForm()}busForm;isSubmitting=!1;selectedAmenities=[];busManufacturers=["Mercedes-Benz","Volvo","Scania","MAN","Iveco","DAF","Isuzu","Mitsubishi"];availableAmenities=["AC","WiFi","USB Charging","Reclining Seats","Entertainment System","Mini Fridge","Prayer Space","Luggage Storage","Comfortable Beds","Meal Service","Reading Lights","Footrest","Blankets & Pillows","Emergency Exit","First Aid Kit","GPS Tracking","CCTV","Audio System"];currentYear=new Date().getFullYear();minDate=new Date().toISOString().split("T")[0];ngOnInit(){this.generateBusNumber()}createForm(){return this.formBuilder.group({busNumber:["",[T.required,T.pattern(/^RB-[A-Z]{2,3}-\d{3}$/)]],registrationNumber:["",[T.required,T.pattern(/^[A-Z]{3}-\d{4}-[A-Z]$/)]],make:["",T.required],model:["",T.required],year:["",[T.required,T.min(2e3),T.max(this.currentYear+1)]],seatingCapacity:["",[T.required,T.min(20),T.max(60)]],busType:["intercity",T.required],fuelType:["diesel",T.required],purchaseDate:["",T.required],insuranceExpiry:["",T.required],licenseExpiry:["",T.required],nextMaintenanceDue:["",T.required],mileage:["0",[T.required,T.min(0)]],notes:[""]})}generateBusNumber(){let t=this.busForm.get("busType")?.value==="umrah"?"UM":"IC",e=Math.floor(Math.random()*900)+100,i=`RB-${t}-${e.toString().padStart(3,"0")}`;this.busForm.patchValue({busNumber:i})}onBusTypeChange(){this.generateBusNumber();let t=this.busForm.get("busType")?.value;t==="umrah"?this.selectedAmenities=["AC","Prayer Space","Luggage Storage","Comfortable Beds"]:t==="intercity"?this.selectedAmenities=["AC","WiFi","USB Charging","Reclining Seats"]:this.selectedAmenities=["AC","WiFi","USB Charging","Reclining Seats","Prayer Space"]}toggleAmenity(t){let e=this.selectedAmenities.indexOf(t);e>-1?this.selectedAmenities.splice(e,1):this.selectedAmenities.push(t)}isAmenitySelected(t){return this.selectedAmenities.includes(t)}onMakeChange(){this.busForm.patchValue({model:""})}getModelsForMake(){let t=this.busForm.get("make")?.value;return{"Mercedes-Benz":["Tourismo","Travego","Citaro","Sprinter"],Volvo:["9700 Coach","9900","B8R","B11R"],Scania:["Touring HD","Interlink HD","Citywide"],MAN:["Lion's Coach","Lion's City","Lion's Intercity"],Iveco:["Magelys Pro","Crossway","Daily"],DAF:["CF","LF","XF"],Isuzu:["Novo","Gala","Journey"],Mitsubishi:["Rosa","Canter","Fuso"]}[t]||[]}setMaintenanceDate(){let t=this.busForm.get("purchaseDate")?.value;if(t){let e=new Date(t);e.setMonth(e.getMonth()+3);let i=e.toISOString().split("T")[0];this.busForm.patchValue({nextMaintenanceDue:i})}}setInsuranceExpiry(){let t=this.busForm.get("purchaseDate")?.value;if(t){let e=new Date(t);e.setFullYear(e.getFullYear()+1);let i=e.toISOString().split("T")[0];this.busForm.patchValue({insuranceExpiry:i,licenseExpiry:i})}}onSubmit(){if(this.busForm.valid&&this.selectedAmenities.length>0){this.isSubmitting=!0;let t=le(k({},this.busForm.value),{amenities:this.selectedAmenities});setTimeout(()=>{console.log("New bus data:",t),alert("Bus added successfully!"),this.router.navigate(["/buses"]),this.isSubmitting=!1},1500)}else this.markFormGroupTouched(),this.selectedAmenities.length===0&&alert("Please select at least one amenity for the bus.")}markFormGroupTouched(){Object.keys(this.busForm.controls).forEach(t=>{this.busForm.get(t)?.markAsTouched()})}onCancel(){confirm("Are you sure you want to cancel? All unsaved changes will be lost.")&&this.router.navigate(["/buses"])}get busNumber(){return this.busForm.get("busNumber")}get registrationNumber(){return this.busForm.get("registrationNumber")}get make(){return this.busForm.get("make")}get model(){return this.busForm.get("model")}get year(){return this.busForm.get("year")}get seatingCapacity(){return this.busForm.get("seatingCapacity")}get busType(){return this.busForm.get("busType")}get fuelType(){return this.busForm.get("fuelType")}get purchaseDate(){return this.busForm.get("purchaseDate")}get insuranceExpiry(){return this.busForm.get("insuranceExpiry")}get licenseExpiry(){return this.busForm.get("licenseExpiry")}get nextMaintenanceDue(){return this.busForm.get("nextMaintenanceDue")}get mileage(){return this.busForm.get("mileage")}get notes(){return this.busForm.get("notes")}isFieldInvalid(t){let e=this.busForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.busForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${t} is required`;if(e.errors.pattern)return`Invalid ${t} format`;if(e.errors.min)return`${t} is too low`;if(e.errors.max)return`${t} is too high`}return""}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-bus-add"]],decls:149,vars:57,consts:[[1,"bus-add-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-container"],[1,"bus-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","busNumber"],["type","text","id","busNumber","formControlName","busNumber","placeholder","RB-IC-001","readonly","",1,"form-control"],[1,"help-text"],["class","error-message",4,"ngIf"],["for","registrationNumber"],["type","text","id","registrationNumber","formControlName","registrationNumber","placeholder","RYD-1234-A",1,"form-control"],["for","busType"],["id","busType","formControlName","busType",1,"form-control",3,"change"],["value","intercity"],["value","umrah"],["value","both"],["for","seatingCapacity"],["type","number","id","seatingCapacity","formControlName","seatingCapacity","placeholder","45","min","20","max","60",1,"form-control"],["for","make"],["id","make","formControlName","make",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","model"],["id","model","formControlName","model",1,"form-control",3,"disabled"],["for","year"],["type","number","id","year","formControlName","year","placeholder","2024",1,"form-control",3,"min","max"],["for","fuelType"],["id","fuelType","formControlName","fuelType",1,"form-control"],["value","diesel"],["value","petrol"],["value","electric"],["value","hybrid"],["for","mileage"],["type","number","id","mileage","formControlName","mileage","placeholder","0","min","0",1,"form-control"],[1,"section-description"],[1,"amenities-grid"],["class","amenity-item",3,"selected","click",4,"ngFor","ngForOf"],["class","selected-amenities",4,"ngIf"],["for","purchaseDate"],["type","date","id","purchaseDate","formControlName","purchaseDate",1,"form-control",3,"change","max"],["for","nextMaintenanceDue"],["type","date","id","nextMaintenanceDue","formControlName","nextMaintenanceDue",1,"form-control",3,"min"],["for","insuranceExpiry"],["type","date","id","insuranceExpiry","formControlName","insuranceExpiry",1,"form-control",3,"min"],["for","licenseExpiry"],["type","date","id","licenseExpiry","formControlName","licenseExpiry",1,"form-control",3,"min"],["for","notes"],["id","notes","formControlName","notes","rows","4","placeholder","Any additional information about this bus...",1,"form-control","textarea"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],[3,"value"],[1,"amenity-item",3,"click"],[1,"amenity-checkbox"],[1,"amenity-label"],[1,"selected-amenities"],[1,"amenity-tags"],["class","amenity-tag",3,"click",4,"ngFor","ngForOf"],[1,"amenity-tag",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"\u2795 Add New Bus"),o(),a(5,"p"),l(6,"Register a new vehicle in your fleet"),o()(),a(7,"div",3)(8,"button",4),h("click",function(){return i.onCancel()}),l(9," \u2190 Back to Bus List "),o()()(),a(10,"div",5)(11,"form",6),h("ngSubmit",function(){return i.onSubmit()}),a(12,"div",7)(13,"h2"),l(14,"\u{1F68C} Basic Information"),o(),a(15,"div",8)(16,"div",9)(17,"label",10),l(18,"Bus Number *"),o(),P(19,"input",11),a(20,"small",12),l(21,"Auto-generated based on bus type"),o(),v(22,DO,2,1,"div",13),o(),a(23,"div",9)(24,"label",14),l(25,"Registration Number *"),o(),P(26,"input",15),a(27,"small",12),l(28,"Format: XXX-0000-X (e.g., RYD-1234-A)"),o(),v(29,MO,2,1,"div",13),o()(),a(30,"div",8)(31,"div",9)(32,"label",16),l(33,"Service Type *"),o(),a(34,"select",17),h("change",function(){return i.onBusTypeChange()}),a(35,"option",18),l(36,"\u{1F68C} Intercity Service"),o(),a(37,"option",19),l(38,"\u{1F54C} Umrah Service"),o(),a(39,"option",20),l(40,"\u{1F68C}\u{1F54C} Both Services"),o()(),v(41,SO,2,1,"div",13),o(),a(42,"div",9)(43,"label",21),l(44,"Seating Capacity *"),o(),P(45,"input",22),a(46,"small",12),l(47,"Number of passenger seats (20-60)"),o(),v(48,IO,2,1,"div",13),o()()(),a(49,"div",7)(50,"h2"),l(51,"\u{1F527} Vehicle Specifications"),o(),a(52,"div",8)(53,"div",9)(54,"label",23),l(55,"Make *"),o(),a(56,"select",24),h("change",function(){return i.onMakeChange()}),a(57,"option",25),l(58,"Select Make"),o(),v(59,PO,2,2,"option",26),o(),v(60,TO,2,1,"div",13),o(),a(61,"div",9)(62,"label",27),l(63,"Model *"),o(),a(64,"select",28)(65,"option",25),l(66,"Select Model"),o(),v(67,RO,2,2,"option",26),o(),v(68,OO,2,1,"div",13),o(),a(69,"div",9)(70,"label",29),l(71,"Year *"),o(),P(72,"input",30),v(73,wO,2,1,"div",13),o()(),a(74,"div",8)(75,"div",9)(76,"label",31),l(77,"Fuel Type *"),o(),a(78,"select",32)(79,"option",33),l(80,"\u26FD Diesel"),o(),a(81,"option",34),l(82,"\u26FD Petrol"),o(),a(83,"option",35),l(84,"\u{1F50B} Electric"),o(),a(85,"option",36),l(86,"\u{1F50B}\u26FD Hybrid"),o()(),v(87,AO,2,1,"div",13),o(),a(88,"div",9)(89,"label",37),l(90,"Current Mileage (km) *"),o(),P(91,"input",38),a(92,"small",12),l(93,"Current odometer reading"),o(),v(94,NO,2,1,"div",13),o()()(),a(95,"div",7)(96,"h2"),l(97,"\u2728 Amenities & Features"),o(),a(98,"p",39),l(99,"Select all amenities available in this bus"),o(),a(100,"div",40),v(101,VO,5,4,"div",41),o(),v(102,LO,5,2,"div",42),o(),a(103,"div",7)(104,"h2"),l(105,"\u{1F4C5} Important Dates"),o(),a(106,"div",8)(107,"div",9)(108,"label",43),l(109,"Purchase Date *"),o(),a(110,"input",44),h("change",function(){return i.setInsuranceExpiry(),i.setMaintenanceDate()}),o(),v(111,$O,2,1,"div",13),o(),a(112,"div",9)(113,"label",45),l(114,"Next Maintenance Due *"),o(),P(115,"input",46),a(116,"small",12),l(117,"Auto-set to 3 months after purchase"),o(),v(118,BO,2,1,"div",13),o()(),a(119,"div",8)(120,"div",9)(121,"label",47),l(122,"Insurance Expiry *"),o(),P(123,"input",48),a(124,"small",12),l(125,"Auto-set to 1 year after purchase"),o(),v(126,zO,2,1,"div",13),o(),a(127,"div",9)(128,"label",49),l(129,"License Expiry *"),o(),P(130,"input",50),a(131,"small",12),l(132,"Vehicle license expiration date"),o(),v(133,jO,2,1,"div",13),o()()(),a(134,"div",7)(135,"h2"),l(136,"\u{1F4DD} Additional Notes"),o(),a(137,"div",9)(138,"label",51),l(139,"Notes (Optional)"),o(),P(140,"textarea",52),a(141,"small",12),l(142,"Special features, conditions, or other remarks"),o()()(),a(143,"div",53)(144,"button",54),h("click",function(){return i.onCancel()}),l(145," Cancel "),o(),a(146,"button",55),v(147,UO,2,0,"span",56)(148,GO,2,0,"span",56),o()()()()()),e&2&&(c(11),m("formGroup",i.busForm),c(8),I("error",i.isFieldInvalid("busNumber")),c(3),m("ngIf",i.isFieldInvalid("busNumber")),c(4),I("error",i.isFieldInvalid("registrationNumber")),c(3),m("ngIf",i.isFieldInvalid("registrationNumber")),c(5),I("error",i.isFieldInvalid("busType")),c(7),m("ngIf",i.isFieldInvalid("busType")),c(4),I("error",i.isFieldInvalid("seatingCapacity")),c(3),m("ngIf",i.isFieldInvalid("seatingCapacity")),c(8),I("error",i.isFieldInvalid("make")),c(3),m("ngForOf",i.busManufacturers),c(),m("ngIf",i.isFieldInvalid("make")),c(4),I("error",i.isFieldInvalid("model")),m("disabled",!(i.make!=null&&i.make.value)),c(3),m("ngForOf",i.getModelsForMake()),c(),m("ngIf",i.isFieldInvalid("model")),c(4),I("error",i.isFieldInvalid("year")),m("min",2e3)("max",i.currentYear+1),c(),m("ngIf",i.isFieldInvalid("year")),c(5),I("error",i.isFieldInvalid("fuelType")),c(9),m("ngIf",i.isFieldInvalid("fuelType")),c(4),I("error",i.isFieldInvalid("mileage")),c(3),m("ngIf",i.isFieldInvalid("mileage")),c(7),m("ngForOf",i.availableAmenities),c(),m("ngIf",i.selectedAmenities.length>0),c(8),I("error",i.isFieldInvalid("purchaseDate")),m("max",i.minDate),c(),m("ngIf",i.isFieldInvalid("purchaseDate")),c(4),I("error",i.isFieldInvalid("nextMaintenanceDue")),m("min",i.minDate),c(3),m("ngIf",i.isFieldInvalid("nextMaintenanceDue")),c(5),I("error",i.isFieldInvalid("insuranceExpiry")),m("min",i.minDate),c(3),m("ngIf",i.isFieldInvalid("insuranceExpiry")),c(4),I("error",i.isFieldInvalid("licenseExpiry")),m("min",i.minDate),c(3),m("ngIf",i.isFieldInvalid("licenseExpiry")),c(11),m("disabled",i.isSubmitting),c(2),I("loading",i.isSubmitting),m("disabled",i.busForm.invalid||i.selectedAmenities.length===0||i.isSubmitting),c(),m("ngIf",!i.isSubmitting),c(),m("ngIf",i.isSubmitting))},dependencies:[K,ae,ee,Mt,ct,Re,Oe,Se,vt,Pe,Ie,lt,xt,wt,Dt,Ot],styles:[`.bus-add-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;border-color:#cbd5e0}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn.loading[_ngcontent-%COMP%]{position:relative}.form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.bus-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000000d}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:20px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.section-description[_ngcontent-%COMP%]{margin:0 0 20px;color:#718096;font-size:14px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease;outline:none;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.amenities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:25px}.amenity-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff}.amenity-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;background:#f7fafc}.amenity-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#eef2ff}.amenity-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e2e8f0;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#667eea;font-weight:700;transition:all .2s ease}.amenity-item.selected[_ngcontent-%COMP%]   .amenity-checkbox[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea;color:#fff}.amenity-label[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:500}.amenity-item.selected[_ngcontent-%COMP%]   .amenity-label[_ngcontent-%COMP%]{color:#667eea;font-weight:600}.selected-amenities[_ngcontent-%COMP%]{padding:20px;background:#f7fafc;border-radius:8px;border:1px solid #e2e8f0}.selected-amenities[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:16px;font-weight:600}.amenity-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.amenity-tag[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px}.amenity-tag[_ngcontent-%COMP%]:hover{background:#5a6fd8;transform:translateY(-1px)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}@media (max-width: 768px){.bus-add-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.amenities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.bus-add-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-section[_ngcontent-%COMP%]{padding:15px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.amenity-item[_ngcontent-%COMP%]{padding:10px 12px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.amenity-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.form-control[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>') no-repeat center center;background-size:16px 16px;cursor:pointer}`]})};function HO(n,t){if(n&1){let e=O();a(0,"a",18),h("click",function(){C(e);let r=g(2);return y(r.changeStatus("active"))}),l(1,"\u2705 Mark as Active"),o()}}function XO(n,t){if(n&1){let e=O();a(0,"a",18),h("click",function(){C(e);let r=g(2);return y(r.changeStatus("maintenance"))}),l(1,"\u{1F527} Mark for Maintenance"),o()}}function WO(n,t){if(n&1){let e=O();a(0,"a",18),h("click",function(){C(e);let r=g(2);return y(r.changeStatus("inactive"))}),l(1,"\u23F8\uFE0F Mark as Inactive"),o()}}function qO(n,t){if(n&1){let e=O();a(0,"a",18),h("click",function(){C(e);let r=g(2);return y(r.changeStatus("breakdown"))}),l(1,"\u26A0\uFE0F Report Breakdown"),o()}}function YO(n,t){n&1&&(a(0,"span",50),l(1," \u26A0\uFE0F Maintenance Overdue "),o())}function ZO(n,t){if(n&1&&(a(0,"span",51),l(1),o()),n&2){let e=g(3);c(),x(" \u{1F514} Due in ",e.getDaysUntilMaintenance()," days ")}}function JO(n,t){if(n&1&&(a(0,"span",52),l(1),o()),n&2){let e=g(3);c(),x(" \u2705 Next due in ",e.getDaysUntilMaintenance()," days ")}}function KO(n,t){if(n&1&&(a(0,"span",53),l(1),o()),n&2){let e=t.$implicit;c(),x(" ",e," ")}}function QO(n,t){if(n&1&&(a(0,"div",54)(1,"h3"),l(2,"\u{1F4DD} Additional Notes"),o(),a(3,"p",55),l(4),o()()),n&2){let e=g(3);c(4),_(e.bus.notes)}}function ew(n,t){if(n&1&&(a(0,"div",33)(1,"div",34)(2,"div",35)(3,"h3"),l(4,"\u{1F3AF} Current Assignment"),o(),a(5,"div",36)(6,"div",37)(7,"span",38),l(8,"\u{1F4CD} Location:"),o(),a(9,"span",39),l(10),o()(),a(11,"div",37)(12,"span",38),l(13,"\u{1F5FA}\uFE0F Route:"),o(),a(14,"span",39),l(15),o()(),a(16,"div",37)(17,"span",38),l(18,"\u{1F468}\u200D\u2708\uFE0F Driver:"),o(),a(19,"span",39),l(20),o()()()(),a(21,"div",35)(22,"h3"),l(23,"\u{1F68C} Vehicle Information"),o(),a(24,"div",36)(25,"div",37)(26,"span",38),l(27,"Registration:"),o(),a(28,"span",39),l(29),o()(),a(30,"div",37)(31,"span",38),l(32,"Capacity:"),o(),a(33,"span",39),l(34),o()(),a(35,"div",37)(36,"span",38),l(37,"Fuel Type:"),o(),a(38,"span",39),l(39),j(40,"titlecase"),o()(),a(41,"div",37)(42,"span",38),l(43,"Mileage:"),o(),a(44,"span",39),l(45),o()()()(),a(46,"div",35)(47,"h3"),l(48,"\u{1F527} Maintenance Status"),o(),a(49,"div",40)(50,"div",41),v(51,YO,2,0,"span",42)(52,ZO,2,1,"span",43)(53,JO,2,1,"span",44),o(),a(54,"div",45)(55,"div",37)(56,"span",38),l(57,"Last Maintenance:"),o(),a(58,"span",39),l(59),j(60,"date"),o()(),a(61,"div",37)(62,"span",38),l(63,"Next Due:"),o(),a(64,"span",39),l(65),j(66,"date"),o()()()()(),a(67,"div",46)(68,"h3"),l(69,"\u2728 Amenities & Features"),o(),a(70,"div",47),v(71,KO,2,1,"span",48),o()()(),v(72,QO,5,1,"div",49),o()),n&2){let e=g(2);c(10),_(e.bus.currentLocation||"Not assigned"),c(5),_(e.bus.assignedRoute||"Not assigned"),c(5),_(e.bus.driverAssigned||"Not assigned"),c(9),_(e.bus.registrationNumber),c(5),x("",e.bus.seatingCapacity," passengers"),c(5),_(se(40,20,e.bus.fuelType)),c(6),x("",e.bus.mileage.toLocaleString()," km"),c(5),I("overdue",e.isMaintenanceOverdue())("due-soon",e.isMaintenanceDue()&&!e.isMaintenanceOverdue())("ok",!e.isMaintenanceDue()),c(),m("ngIf",e.isMaintenanceOverdue()),c(),m("ngIf",e.isMaintenanceDue()&&!e.isMaintenanceOverdue()),c(),m("ngIf",!e.isMaintenanceDue()),c(6),_(ie(60,22,e.bus.lastMaintenance,"mediumDate")),c(6),_(ie(66,25,e.bus.nextMaintenanceDue,"mediumDate")),c(6),m("ngForOf",e.bus.amenities),c(),m("ngIf",e.bus.notes)}}function tw(n,t){if(n&1&&(a(0,"div",33)(1,"div",56)(2,"div",57)(3,"h3"),l(4,"\u{1F68C} Vehicle Details"),o(),a(5,"div",58)(6,"div",59)(7,"span",60),l(8,"Make:"),o(),a(9,"span",61),l(10),o()(),a(11,"div",59)(12,"span",60),l(13,"Model:"),o(),a(14,"span",61),l(15),o()(),a(16,"div",59)(17,"span",60),l(18,"Year:"),o(),a(19,"span",61),l(20),o()(),a(21,"div",59)(22,"span",60),l(23,"Registration Number:"),o(),a(24,"span",61),l(25),o()(),a(26,"div",59)(27,"span",60),l(28,"Bus Number:"),o(),a(29,"span",61),l(30),o()()()(),a(31,"div",57)(32,"h3"),l(33,"\u2699\uFE0F Technical Specifications"),o(),a(34,"div",58)(35,"div",59)(36,"span",60),l(37,"Seating Capacity:"),o(),a(38,"span",61),l(39),o()(),a(40,"div",59)(41,"span",60),l(42,"Fuel Type:"),o(),a(43,"span",61),l(44),j(45,"titlecase"),o()(),a(46,"div",59)(47,"span",60),l(48,"Service Type:"),o(),a(49,"span",61),l(50),j(51,"titlecase"),o()(),a(52,"div",59)(53,"span",60),l(54,"Current Mileage:"),o(),a(55,"span",61),l(56),o()(),a(57,"div",59)(58,"span",60),l(59,"Purchase Date:"),o(),a(60,"span",61),l(61),j(62,"date"),o()()()()()()),n&2){let e=g(2);c(10),_(e.bus.make),c(5),_(e.bus.model),c(5),_(e.bus.year),c(5),_(e.bus.registrationNumber),c(5),_(e.bus.busNumber),c(9),x("",e.bus.seatingCapacity," passengers"),c(5),_(se(45,10,e.bus.fuelType)),c(6),_(se(51,12,e.bus.busType)),c(6),x("",e.bus.mileage.toLocaleString()," km"),c(5),_(ie(62,14,e.bus.purchaseDate,"mediumDate"))}}function nw(n,t){if(n&1&&(a(0,"span",78),l(1),j(2,"date"),o()),n&2){let e=g().$implicit;c(),x(" \u{1F4C5} Next due: ",ie(2,1,e.nextDue,"mediumDate")," ")}}function iw(n,t){if(n&1&&(a(0,"div",66)(1,"div",67)(2,"div",68)(3,"span",69),l(4),o(),a(5,"div",70)(6,"h4"),l(7),j(8,"titlecase"),o(),a(9,"p",71),l(10),j(11,"date"),o()()(),a(12,"div",72),l(13),o()(),a(14,"div",73)(15,"p",74),l(16),o(),a(17,"div",75)(18,"span",76),l(19),o(),v(20,nw,3,4,"span",77),o()()()),n&2){let e=t.$implicit,i=g(3);c(4),_(i.getMaintenanceTypeIcon(e.type)),c(3),x("",se(8,7,e.type)," Maintenance"),c(3),_(ie(11,9,e.date,"fullDate")),c(3),x(" ",i.formatCurrency(e.cost)," "),c(3),_(e.description),c(3),x("\u{1F527} ",e.mechanic,""),c(),m("ngIf",e.nextDue)}}function rw(n,t){if(n&1){let e=O();a(0,"div",33)(1,"div",62)(2,"div",63)(3,"h3"),l(4,"\u{1F6E0}\uFE0F Maintenance Records"),o(),a(5,"button",14),h("click",function(){C(e);let r=g(2);return y(r.scheduleMaintenance())}),l(6," \u2795 Schedule Maintenance "),o()(),a(7,"div",64),v(8,iw,21,12,"div",65),o()()()}if(n&2){let e=g(2);c(8),m("ngForOf",e.maintenanceRecords)}}function ow(n,t){if(n&1){let e=O();a(0,"div",84)(1,"div",85)(2,"div",86)(3,"h4"),l(4),o(),a(5,"p",87),l(6),j(7,"date"),o()(),a(8,"div",88)(9,"span",10),l(10),j(11,"titlecase"),o()()(),a(12,"div",89)(13,"div",90)(14,"span",91),l(15),o(),a(16,"span",91),l(17),o(),a(18,"span",91),l(19),o()(),a(20,"button",92),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.viewTrip(r.id))}),l(21," \u{1F441}\uFE0F View Details "),o()()()}if(n&2){let e=t.$implicit;q(e.status),c(4),_(e.route),c(2),_(ie(7,10,e.date,"fullDate")),c(3),q(e.status),c(),x(" ",se(11,13,e.status)," "),c(5),x("\u{1F468}\u200D\u2708\uFE0F ",e.driver,""),c(2),x("\u{1F465} ",e.passengers," passengers"),c(2),x("\u{1F6E3}\uFE0F ",e.distance," km")}}function aw(n,t){if(n&1&&(a(0,"div",33)(1,"div",79)(2,"div",80)(3,"h3"),l(4,"\u{1F690} Recent Trip History"),o(),a(5,"div",81)(6,"span"),l(7),o(),a(8,"span"),l(9),o()()(),a(10,"div",82),v(11,ow,22,15,"div",83),o()()()),n&2){let e=g(2);c(7),x("",e.getCompletedTripsCount()," completed trips"),c(2),x("",e.getTotalDistance().toLocaleString()," km total"),c(2),m("ngForOf",e.tripHistory)}}function sw(n,t){n&1&&(a(0,"span",102),l(1," \u26A0\uFE0F Expired "),o())}function lw(n,t){n&1&&(a(0,"span",102),l(1," \u{1F514} Expiring Soon "),o())}function cw(n,t){n&1&&(a(0,"span",102),l(1," \u2705 Valid "),o())}function dw(n,t){n&1&&(a(0,"span",102),l(1," \u26A0\uFE0F Expired "),o())}function uw(n,t){n&1&&(a(0,"span",102),l(1," \u{1F514} Expiring Soon "),o())}function pw(n,t){n&1&&(a(0,"span",102),l(1," \u2705 Valid "),o())}function mw(n,t){if(n&1&&(a(0,"div",33)(1,"div",93)(2,"h3"),l(3,"\u{1F4C4} Vehicle Documents"),o(),a(4,"div",94)(5,"div",95)(6,"div",96)(7,"span",97),l(8,"\u{1F6E1}\uFE0F"),o(),a(9,"h4"),l(10,"Insurance"),o()(),a(11,"div",98)(12,"div",99),v(13,sw,2,0,"span",100)(14,lw,2,0,"span",100)(15,cw,2,0,"span",100),o(),a(16,"p",101),l(17),j(18,"date"),o()()(),a(19,"div",95)(20,"div",96)(21,"span",97),l(22,"\u{1F4CB}"),o(),a(23,"h4"),l(24,"Vehicle License"),o()(),a(25,"div",98)(26,"div",99),v(27,dw,2,0,"span",100)(28,uw,2,0,"span",100)(29,pw,2,0,"span",100),o(),a(30,"p",101),l(31),j(32,"date"),o()()()()()()),n&2){let e=g(2);c(12),I("expiring",e.isDocumentExpiring(e.bus.insuranceExpiry))("expired",e.isDocumentExpired(e.bus.insuranceExpiry)),c(),m("ngIf",e.isDocumentExpired(e.bus.insuranceExpiry)),c(),m("ngIf",e.isDocumentExpiring(e.bus.insuranceExpiry)&&!e.isDocumentExpired(e.bus.insuranceExpiry)),c(),m("ngIf",!e.isDocumentExpiring(e.bus.insuranceExpiry)&&!e.isDocumentExpired(e.bus.insuranceExpiry)),c(2),x("Expires: ",ie(18,16,e.bus.insuranceExpiry,"mediumDate"),""),c(9),I("expiring",e.isDocumentExpiring(e.bus.licenseExpiry))("expired",e.isDocumentExpired(e.bus.licenseExpiry)),c(),m("ngIf",e.isDocumentExpired(e.bus.licenseExpiry)),c(),m("ngIf",e.isDocumentExpiring(e.bus.licenseExpiry)&&!e.isDocumentExpired(e.bus.licenseExpiry)),c(),m("ngIf",!e.isDocumentExpiring(e.bus.licenseExpiry)&&!e.isDocumentExpired(e.bus.licenseExpiry)),c(2),x("Expires: ",ie(32,19,e.bus.licenseExpiry,"mediumDate"),"")}}function gw(n,t){if(n&1){let e=O();a(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),l(5),o(),a(6,"div",8)(7,"h1"),l(8),o(),a(9,"p"),l(10),o()()(),a(11,"div",9)(12,"span",10),l(13),j(14,"titlecase"),o(),a(15,"span",11),l(16),j(17,"titlecase"),o()()(),a(18,"div",12)(19,"button",13),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(20," \u2190 Back to List "),o(),a(21,"button",14),h("click",function(){C(e);let r=g();return y(r.editBus())}),l(22," \u270F\uFE0F Edit Bus "),o(),a(23,"div",15)(24,"button",16),l(25,"\u2699\uFE0F Actions"),o(),a(26,"div",17)(27,"a",18),h("click",function(){C(e);let r=g();return y(r.scheduleMaintenance())}),l(28,"\u{1F527} Schedule Maintenance"),o(),a(29,"a",18),h("click",function(){C(e);let r=g();return y(r.assignDriver())}),l(30,"\u{1F468}\u200D\u2708\uFE0F Assign/Change Driver"),o(),a(31,"a",18),h("click",function(){C(e);let r=g();return y(r.assignRoute())}),l(32,"\u{1F5FA}\uFE0F Assign Route"),o(),a(33,"a",18),h("click",function(){C(e);let r=g();return y(r.updateLocation())}),l(34,"\u{1F4CD} Update Location"),o(),P(35,"div",19),v(36,HO,2,0,"a",20)(37,XO,2,0,"a",20)(38,WO,2,0,"a",20)(39,qO,2,0,"a",20),P(40,"div",19),a(41,"a",21),h("click",function(){C(e);let r=g();return y(r.emergencyAlert())}),l(42,"\u{1F6A8} Emergency Alert"),o(),a(43,"a",22),h("click",function(){C(e);let r=g();return y(r.deleteBus())}),l(44,"\u{1F5D1}\uFE0F Delete Bus"),o()()()()(),a(45,"div",23)(46,"div",24)(47,"span",25),l(48,"\u{1F6E3}\uFE0F"),o(),a(49,"div",26)(50,"span",27),l(51),o(),a(52,"span",28),l(53,"Total Distance"),o()()(),a(54,"div",24)(55,"span",25),l(56,"\u{1F68C}"),o(),a(57,"div",26)(58,"span",27),l(59),o(),a(60,"span",28),l(61,"Completed Trips"),o()()(),a(62,"div",24)(63,"span",25),l(64,"\u{1F465}"),o(),a(65,"div",26)(66,"span",27),l(67),o(),a(68,"span",28),l(69,"Avg. Passengers"),o()()(),a(70,"div",24)(71,"span",25),l(72,"\u{1F4B0}"),o(),a(73,"div",26)(74,"span",27),l(75),o(),a(76,"span",28),l(77,"Maintenance Cost"),o()()()(),a(78,"div",29)(79,"button",30),h("click",function(){C(e);let r=g();return y(r.setActiveTab("overview"))}),l(80," \u{1F4CB} Overview "),o(),a(81,"button",30),h("click",function(){C(e);let r=g();return y(r.setActiveTab("specifications"))}),l(82," \u{1F527} Specifications "),o(),a(83,"button",30),h("click",function(){C(e);let r=g();return y(r.setActiveTab("maintenance"))}),l(84," \u{1F6E0}\uFE0F Maintenance "),o(),a(85,"button",30),h("click",function(){C(e);let r=g();return y(r.setActiveTab("trips"))}),l(86," \u{1F690} Trip History "),o(),a(87,"button",30),h("click",function(){C(e);let r=g();return y(r.setActiveTab("documents"))}),l(88," \u{1F4C4} Documents "),o()(),a(89,"div",31),v(90,ew,73,28,"div",32)(91,tw,63,17,"div",32)(92,rw,9,1,"div",32)(93,aw,12,3,"div",32)(94,mw,33,22,"div",32),o()()}if(n&2){let e=g();c(5),_(e.getBusTypeIcon(e.bus.busType)),c(3),_(e.bus.busNumber),c(2),Ke("",e.bus.make," ",e.bus.model," (",e.bus.year,")"),c(2),q(e.getStatusClass(e.bus.status)),c(),x(" ",se(14,34,e.bus.status)," "),c(2),q(e.getBusTypeClass(e.bus.busType)),c(),x(" ",se(17,36,e.bus.busType)," "),c(20),m("ngIf",e.bus.status!=="active"),c(),m("ngIf",e.bus.status!=="maintenance"),c(),m("ngIf",e.bus.status!=="inactive"),c(),m("ngIf",e.bus.status!=="breakdown"),c(12),x("",e.getTotalDistance().toLocaleString()," km"),c(8),_(e.getCompletedTripsCount()),c(8),_(e.getAveragePassengers()),c(8),_(e.formatCurrency(e.getTotalMaintenanceCost())),c(4),I("active",e.activeTab==="overview"),c(2),I("active",e.activeTab==="specifications"),c(2),I("active",e.activeTab==="maintenance"),c(2),I("active",e.activeTab==="trips"),c(2),I("active",e.activeTab==="documents"),c(3),m("ngIf",e.activeTab==="overview"),c(),m("ngIf",e.activeTab==="specifications"),c(),m("ngIf",e.activeTab==="maintenance"),c(),m("ngIf",e.activeTab==="trips"),c(),m("ngIf",e.activeTab==="documents")}}function fw(n,t){n&1&&(a(0,"div",103),P(1,"div",104),a(2,"p"),l(3,"Loading bus details..."),o()())}function _w(n,t){if(n&1){let e=O();a(0,"div",105)(1,"div",106),l(2,"\u{1F68C}"),o(),a(3,"h2"),l(4,"Bus Not Found"),o(),a(5,"p"),l(6,"The requested bus could not be found."),o(),a(7,"button",14),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(8," \u2190 Back to Bus List "),o()()}}var _d=class n{constructor(t,e){this.router=t;this.route=e}bus=null;busId="";isLoading=!0;activeTab="overview";maintenanceRecords=[];tripHistory=[];ngOnInit(){this.busId=this.route.snapshot.params.id,this.loadBusDetails()}loadBusDetails(){setTimeout(()=>{this.bus=this.getMockBusData(this.busId),this.loadMaintenanceRecords(),this.loadTripHistory(),this.isLoading=!1},500)}getMockBusData(t){let e={B001:{id:"B001",busNumber:"RB-IC-001",registrationNumber:"RYD-1234-A",make:"Mercedes-Benz",model:"Tourismo",year:2022,seatingCapacity:45,busType:"intercity",status:"active",amenities:["AC","WiFi","USB Charging","Reclining Seats","Entertainment System"],currentLocation:"Riyadh Central Station",assignedRoute:"Riyadh - Jeddah",driverAssigned:"Ahmed Al-Rashid",lastMaintenance:new Date("2024-12-15"),nextMaintenanceDue:new Date("2025-03-15"),mileage:45e3,fuelType:"diesel",insuranceExpiry:new Date("2025-12-31"),licenseExpiry:new Date("2025-11-30"),purchaseDate:new Date("2022-03-10"),imageUrl:"assets/images/bus-placeholder.jpg",notes:"Premium intercity service bus with excellent passenger comfort ratings."}};return e[t]||e.B001}loadMaintenanceRecords(){this.maintenanceRecords=[{id:"M001",date:new Date("2024-12-15"),type:"routine",description:"Regular maintenance check - oil change, filter replacement",cost:850,mechanic:"Ali Maintenance Center",nextDue:new Date("2025-03-15")},{id:"M002",date:new Date("2024-09-20"),type:"repair",description:"AC system repair and coolant refill",cost:1200,mechanic:"Advanced Auto Service"},{id:"M003",date:new Date("2024-06-10"),type:"inspection",description:"Annual safety inspection and brake check",cost:450,mechanic:"Official Inspection Center"}]}loadTripHistory(){this.tripHistory=[{id:"T001",date:new Date("2025-01-24"),route:"Riyadh \u2192 Jeddah",driver:"Ahmed Al-Rashid",passengers:42,distance:950,status:"completed"},{id:"T002",date:new Date("2025-01-22"),route:"Jeddah \u2192 Riyadh",driver:"Ahmed Al-Rashid",passengers:38,distance:950,status:"completed"},{id:"T003",date:new Date("2025-01-20"),route:"Riyadh \u2192 Dammam",driver:"Mohammad Al-Fahad",passengers:35,distance:400,status:"completed"},{id:"T004",date:new Date("2025-01-18"),route:"Riyadh \u2192 Jeddah",driver:"Ahmed Al-Rashid",passengers:0,distance:0,status:"cancelled"}]}setActiveTab(t){this.activeTab=t}getStatusClass(t){switch(t){case"active":return"status-active";case"maintenance":return"status-maintenance";case"breakdown":return"status-breakdown";case"inactive":return"status-inactive";default:return""}}getBusTypeClass(t){switch(t){case"intercity":return"type-intercity";case"umrah":return"type-umrah";case"both":return"type-both";default:return""}}getBusTypeIcon(t){switch(t){case"intercity":return"\u{1F68C}";case"umrah":return"\u{1F54C}";case"both":return"\u{1F68C}\u{1F54C}";default:return"\u{1F68C}"}}getMaintenanceTypeIcon(t){switch(t){case"routine":return"\u{1F527}";case"repair":return"\u26A0\uFE0F";case"inspection":return"\u{1F50D}";default:return"\u{1F527}"}}isMaintenanceDue(){if(!this.bus)return!1;let t=new Date,e=new Date(this.bus.nextMaintenanceDue);return Math.ceil((e.getTime()-t.getTime())/(1e3*3600*24))<=30}isMaintenanceOverdue(){if(!this.bus)return!1;let t=new Date,e=new Date(this.bus.nextMaintenanceDue);return t>e}getDaysUntilMaintenance(){if(!this.bus)return 0;let t=new Date,e=new Date(this.bus.nextMaintenanceDue);return Math.ceil((e.getTime()-t.getTime())/(1e3*3600*24))}isDocumentExpiring(t){let e=new Date,i=new Date(t),r=Math.ceil((i.getTime()-e.getTime())/(1e3*3600*24));return r<=60&&r>0}isDocumentExpired(t){let e=new Date,i=new Date(t);return e>i}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(t)}getTotalMaintenanceCost(){return this.maintenanceRecords.reduce((t,e)=>t+e.cost,0)}getCompletedTripsCount(){return this.tripHistory.filter(t=>t.status==="completed").length}getTotalDistance(){return this.tripHistory.filter(t=>t.status==="completed").reduce((t,e)=>t+e.distance,0)}getAveragePassengers(){let t=this.tripHistory.filter(i=>i.status==="completed");if(t.length===0)return 0;let e=t.reduce((i,r)=>i+r.passengers,0);return Math.round(e/t.length)}editBus(){this.router.navigate(["/buses",this.busId,"edit"])}deleteBus(){confirm(`Are you sure you want to delete bus ${this.bus?.busNumber}?`)&&(alert("Bus deleted successfully!"),this.router.navigate(["/buses"]))}goBack(){this.router.navigate(["/buses"])}scheduleMaintenance(){let t=["Routine Maintenance","Oil Change","Brake Inspection","AC Service","Tire Replacement","Engine Check","Safety Inspection"],e=prompt(`Select maintenance type:
${t.map((i,r)=>`${r+1}. ${i}`).join(`
`)}

Enter number (1-${t.length}):`);if(e&&!isNaN(Number(e))){let i=Number(e)-1;if(i>=0&&i<t.length){let r=prompt("Enter maintenance date (YYYY-MM-DD):");r&&(alert(`\u2705 Maintenance scheduled!

Type: ${t[i]}
Date: ${r}
Bus: ${this.bus?.busNumber}

Maintenance team will be notified.`),this.bus&&(this.bus.status="maintenance",this.bus.nextMaintenanceDue=new Date(r)))}}}changeStatus(t){if(!this.bus)return;let e={active:"Mark this bus as Active and ready for service?",maintenance:"Mark this bus as In Maintenance? It will be unavailable for trips.",inactive:"Mark this bus as Inactive? It will be removed from active service.",breakdown:"Mark this bus as Breakdown? Emergency protocols will be initiated."},i={active:()=>{this.bus.currentLocation="Available at Depot",this.bus.assignedRoute=void 0},maintenance:()=>{this.bus.currentLocation="Workshop - Riyadh",this.bus.assignedRoute=void 0,this.bus.driverAssigned=void 0},inactive:()=>{this.bus.currentLocation="Depot - Storage",this.bus.assignedRoute=void 0,this.bus.driverAssigned=void 0},breakdown:()=>{this.bus.currentLocation="Emergency Service Required",this.bus.assignedRoute=void 0,this.bus.driverAssigned=void 0}};if(confirm(e[t])){let r=this.bus.status;this.bus.status=t,i[t](),alert(`\u2705 Bus status changed from ${r} to ${t}

Location: ${this.bus.currentLocation}`)}}viewTrip(t){let e=this.tripHistory.find(i=>i.id===t);if(e){let i=`
\u{1F68C} Trip Details: ${t}

\u{1F4CD} Route: ${e.route}
\u{1F4C5} Date: ${e.date.toLocaleDateString()}
\u{1F468}\u200D\u2708\uFE0F Driver: ${e.driver}
\u{1F465} Passengers: ${e.passengers}
\u{1F6E3}\uFE0F Distance: ${e.distance} km
\u2705 Status: ${e.status}

${e.status==="completed"?"\u2705 Trip completed successfully":"\u274C Trip was cancelled"}
      `;alert(i)}}assignDriver(){let t=["Ahmed Al-Rashid","Mohammad Al-Fahad","Salem Al-Mutairi","Khalid Al-Otaibi","Abdullah Al-Dosari","Faisal Al-Qahtani","Omar Al-Zahrani","Yasir Al-Mansouri"],e=t.map((r,s)=>`${s+1}. ${r}`).join(`
`),i=prompt(`Available Drivers:
${e}

Enter number (1-${t.length}) or 0 to unassign:`);if(i!==null){let r=Number(i)-1;i==="0"?this.bus&&(this.bus.driverAssigned=void 0,alert("\u2705 Driver unassigned successfully")):!isNaN(r)&&r>=0&&r<t.length&&this.bus&&(this.bus.driverAssigned=t[r],alert(`\u2705 Driver assigned successfully!

Driver: ${t[r]}
Bus: ${this.bus.busNumber}

Driver has been notified.`))}}updateLocation(){let t=["Riyadh Central Station","Jeddah Terminal","Dammam Station","Makkah Holy Mosque","Madinah Prophet's Mosque","Workshop - Riyadh","Depot - Storage","King Khalid International Airport","Prince Mohammad Bin Abdulaziz Airport"],e=t.map((s,d)=>`${d+1}. ${s}`).join(`
`),i=`${t.length+1}. Custom Location`,r=prompt(`Current Locations:
${e}
${i}

Enter number (1-${t.length+1}):`);if(r!==null){let s=Number(r)-1;if(s===t.length){let d=prompt("Enter custom location:");d&&this.bus&&(this.bus.currentLocation=d,alert(`\u2705 Location updated to: ${d}`))}else!isNaN(s)&&s>=0&&s<t.length&&this.bus&&(this.bus.currentLocation=t[s],alert(`\u2705 Location updated to: ${t[s]}`))}}assignRoute(){let t=["Riyadh \u2192 Jeddah","Riyadh \u2192 Dammam","Riyadh \u2192 Makkah","Jeddah \u2192 Riyadh","Dammam \u2192 Riyadh","Makkah \u2192 Madinah","Madinah \u2192 Makkah","Umrah Package Route","Hajj Package Route"],e=t.map((r,s)=>`${s+1}. ${r}`).join(`
`),i=prompt(`Available Routes:
${e}

Enter number (1-${t.length}) or 0 to unassign:`);if(i!==null){let r=Number(i)-1;i==="0"?this.bus&&(this.bus.assignedRoute=void 0,alert("\u2705 Route unassigned successfully")):!isNaN(r)&&r>=0&&r<t.length&&this.bus&&(this.bus.assignedRoute=t[r],alert(`\u2705 Route assigned successfully!

Route: ${t[r]}
Bus: ${this.bus.busNumber}`))}}emergencyAlert(){let t=["Breakdown on Route","Accident Reported","Medical Emergency","Security Issue","Fuel Emergency","Mechanical Failure"],e=t.map((r,s)=>`${s+1}. ${r}`).join(`
`),i=prompt(`Emergency Type:
${e}

Enter number (1-${t.length}):`);if(i&&!isNaN(Number(i))){let r=Number(i)-1;if(r>=0&&r<t.length){let s=prompt("Current location of emergency:")||"Unknown",d=prompt("Brief description of emergency:")||"No description provided";alert(`\u{1F6A8} EMERGENCY ALERT SENT! \u{1F6A8}

Type: ${t[r]}
Bus: ${this.bus?.busNumber}
Location: ${s}
Description: ${d}

\u2705 Emergency services notified
\u2705 Fleet manager alerted
\u2705 Driver support dispatched`),this.bus&&(this.bus.status="breakdown",this.bus.currentLocation=`EMERGENCY - ${s}`)}}}static \u0275fac=function(e){return new(e||n)(w(ne),w(Te))};static \u0275cmp=J({type:n,selectors:[["app-bus-detail"]],decls:3,vars:3,consts:[["class","bus-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"bus-detail-container"],[1,"page-header"],[1,"header-content"],[1,"bus-title"],[1,"bus-icon"],[1,"title-info"],[1,"bus-status"],[1,"status-badge"],[1,"type-badge"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"dropdown"],[1,"btn","btn-outline"],[1,"dropdown-content"],[3,"click"],[1,"dropdown-divider"],[3,"click",4,"ngIf"],[1,"emergency",3,"click"],[1,"danger",3,"click"],[1,"quick-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],[1,"tab-content"],["class","tab-panel",4,"ngIf"],[1,"tab-panel"],[1,"overview-grid"],[1,"info-card"],[1,"info-list"],[1,"info-item"],[1,"label"],[1,"value"],[1,"maintenance-status"],[1,"status-indicator"],["class","status-text overdue",4,"ngIf"],["class","status-text due-soon",4,"ngIf"],["class","status-text ok",4,"ngIf"],[1,"maintenance-info"],[1,"info-card","amenities-card"],[1,"amenities-grid"],["class","amenity-tag",4,"ngFor","ngForOf"],["class","notes-section",4,"ngIf"],[1,"status-text","overdue"],[1,"status-text","due-soon"],[1,"status-text","ok"],[1,"amenity-tag"],[1,"notes-section"],[1,"notes-content"],[1,"specifications-grid"],[1,"spec-section"],[1,"spec-list"],[1,"spec-item"],[1,"spec-label"],[1,"spec-value"],[1,"maintenance-content"],[1,"maintenance-header"],[1,"maintenance-list"],["class","maintenance-record",4,"ngFor","ngForOf"],[1,"maintenance-record"],[1,"record-header"],[1,"record-info"],[1,"record-icon"],[1,"record-details"],[1,"record-date"],[1,"record-cost"],[1,"record-body"],[1,"record-description"],[1,"record-meta"],[1,"mechanic"],["class","next-due",4,"ngIf"],[1,"next-due"],[1,"trips-content"],[1,"trips-header"],[1,"trips-summary"],[1,"trips-list"],["class","trip-record",3,"class",4,"ngFor","ngForOf"],[1,"trip-record"],[1,"trip-header"],[1,"trip-info"],[1,"trip-date"],[1,"trip-status"],[1,"trip-details"],[1,"trip-meta"],[1,"meta-item"],[1,"view-trip-btn",3,"click"],[1,"documents-content"],[1,"documents-grid"],[1,"document-card"],[1,"document-header"],[1,"document-icon"],[1,"document-info"],[1,"document-status"],["class","status-text",4,"ngIf"],[1,"expiry-date"],[1,"status-text"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"]],template:function(e,i){e&1&&v(0,gw,95,38,"div",0)(1,fw,4,0,"div",1)(2,_w,9,0,"div",2),e&2&&(m("ngIf",!i.isLoading&&i.bus),c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&!i.bus))},dependencies:[K,ae,ee,Ge,He],styles:[".bus-detail-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:25px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.bus-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.bus-icon[_ngcontent-%COMP%]{font-size:32px}.title-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.title-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.bus-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;right:0;background:#fff;min-width:200px;box-shadow:0 8px 16px #0000001a;border-radius:8px;z-index:1;border:1px solid #e2e8f0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2d3748;padding:12px 16px;text-decoration:none;display:block;font-size:14px;cursor:pointer;transition:all .2s ease}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f7fafc}.dropdown-content[_ngcontent-%COMP%]   a.danger[_ngcontent-%COMP%]{color:#e53e3e}.dropdown-content[_ngcontent-%COMP%]   a.danger[_ngcontent-%COMP%]:hover{background:#fed7d7}.dropdown-content[_ngcontent-%COMP%]   a.emergency[_ngcontent-%COMP%]{color:#d53f8c;font-weight:600}.dropdown-content[_ngcontent-%COMP%]   a.emergency[_ngcontent-%COMP%]:hover{background:#fbb6ce}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e2e8f0;margin:8px 0}.status-badge[_ngcontent-%COMP%], .type-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-maintenance[_ngcontent-%COMP%]{background:#faf089;color:#744210}.status-breakdown[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.type-intercity[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.type-umrah[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.type-both[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.quick-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-item[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;background:#f7fafc;border-radius:10px;display:flex;align-items:center;justify-content:center}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2d3748}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;text-transform:uppercase;letter-spacing:.5px}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d;overflow-x:auto}.tab-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;background:transparent;color:#718096;font-size:14px;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s ease;white-space:nowrap}.tab-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#2d3748}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff}.tab-content[_ngcontent-%COMP%]{min-height:400px}.tab-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.overview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.info-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.label[_ngcontent-%COMP%]{color:#718096;font-weight:500;font-size:14px}.value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:14px}.maintenance-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.status-indicator[_ngcontent-%COMP%]{padding:15px;border-radius:8px;text-align:center}.status-indicator.ok[_ngcontent-%COMP%]{background:#c6f6d5;border:1px solid #48bb78}.status-indicator.due-soon[_ngcontent-%COMP%]{background:#faf089;border:1px solid #ecc94b}.status-indicator.overdue[_ngcontent-%COMP%]{background:#fed7d7;border:1px solid #f56565}.status-text[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.status-text.ok[_ngcontent-%COMP%]{color:#22543d}.status-text.due-soon[_ngcontent-%COMP%]{color:#744210}.status-text.overdue[_ngcontent-%COMP%]{color:#742a2a}.amenities-card[_ngcontent-%COMP%]{grid-column:1 / -1}.amenities-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.amenity-tag[_ngcontent-%COMP%]{background:#eef2ff;color:#667eea;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500}.notes-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.notes-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:18px;font-weight:600}.notes-content[_ngcontent-%COMP%]{color:#4a5568;line-height:1.6;margin:0}.specifications-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px}.spec-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.spec-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.spec-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.spec-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}.spec-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.spec-label[_ngcontent-%COMP%]{color:#718096;font-weight:500}.spec-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:600}.maintenance-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.maintenance-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.maintenance-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.maintenance-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.maintenance-record[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.maintenance-record[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.record-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.record-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.record-icon[_ngcontent-%COMP%]{font-size:24px}.record-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:16px;font-weight:600}.record-date[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.record-cost[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#22c35e}.record-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.record-description[_ngcontent-%COMP%]{margin:0;color:#4a5568;line-height:1.5}.record-meta[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:12px;color:#718096}.trips-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.trips-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.trips-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.trips-summary[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:14px;color:#718096}.trips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.trip-record[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.trip-record[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.trip-record.cancelled[_ngcontent-%COMP%]{background:#fef5e7;border-color:#f6ad55}.trip-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.trip-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:16px;font-weight:600}.trip-date[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.trip-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.trip-meta[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:14px;color:#718096}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.view-trip-btn[_ngcontent-%COMP%]{background:#f7fafc;border:1px solid #e2e8f0;padding:8px 16px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.view-trip-btn[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.documents-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.documents-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 25px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.document-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.document-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.document-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:15px}.document-icon[_ngcontent-%COMP%]{font-size:24px}.document-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.document-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.document-status[_ngcontent-%COMP%]{padding:8px 12px;border-radius:6px;text-align:center;font-weight:600;font-size:14px}.document-status[_ngcontent-%COMP%]:not(.expiring):not(.expired){background:#c6f6d5;color:#22543d}.document-status.expiring[_ngcontent-%COMP%]{background:#faf089;color:#744210}.document-status.expired[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.expiry-date[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}@media (max-width: 1200px){.bus-detail-container[_ngcontent-%COMP%]{padding:20px}.overview-grid[_ngcontent-%COMP%], .specifications-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.bus-title[_ngcontent-%COMP%]{justify-content:center;text-align:center}.bus-status[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.tab-navigation[_ngcontent-%COMP%]{overflow-x:auto}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.trips-summary[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.trip-details[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.trip-meta[_ngcontent-%COMP%]{justify-content:space-between}}@media (max-width: 480px){.bus-detail-container[_ngcontent-%COMP%]{padding:15px}.info-card[_ngcontent-%COMP%], .spec-section[_ngcontent-%COMP%], .maintenance-content[_ngcontent-%COMP%], .trips-content[_ngcontent-%COMP%], .documents-content[_ngcontent-%COMP%]{padding:20px}.trip-meta[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function hw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("busNumber")," ")}}function vw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("registrationNumber")," ")}}function xw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("busType")," ")}}function Cw(n,t){if(n&1&&(a(0,"option",65),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),x(" ",e.label," ")}}function yw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("status")," ")}}function bw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("seatingCapacity")," ")}}function Ew(n,t){if(n&1&&(a(0,"option",65),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function Dw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("make")," ")}}function Mw(n,t){if(n&1&&(a(0,"option",65),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function Sw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("model")," ")}}function Iw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("year")," ")}}function Pw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("fuelType")," ")}}function Tw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("mileage")," ")}}function Rw(n,t){n&1&&(a(0,"span"),l(1,"\u2713"),o())}function Ow(n,t){if(n&1){let e=O();a(0,"div",66),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleAmenity(r))}),a(1,"div",67),v(2,Rw,2,0,"span",63),o(),a(3,"span",68),l(4),o()()}if(n&2){let e=t.$implicit,i=g(2);I("selected",i.isAmenitySelected(e)),c(2),m("ngIf",i.isAmenitySelected(e)),c(2),_(e)}}function ww(n,t){if(n&1){let e=O();a(0,"span",72),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.toggleAmenity(r))}),l(1),o()}if(n&2){let e=t.$implicit;c(),x(" ",e," \u2715 ")}}function Aw(n,t){if(n&1&&(a(0,"div",69)(1,"h4"),l(2),o(),a(3,"div",70),v(4,ww,2,1,"span",71),o()()),n&2){let e=g(2);c(2),x("Selected Amenities (",e.selectedAmenities.length,"):"),c(2),m("ngForOf",e.selectedAmenities)}}function Nw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("purchaseDate")," ")}}function kw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("nextMaintenanceDue")," ")}}function Vw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("insuranceExpiry")," ")}}function Fw(n,t){if(n&1&&(a(0,"div",64),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("licenseExpiry")," ")}}function Lw(n,t){n&1&&(a(0,"span"),l(1,"\u{1F4BE} Save Changes"),o())}function $w(n,t){n&1&&(a(0,"span"),l(1,"\u23F3 Saving..."),o())}function Bw(n,t){if(n&1){let e=O();a(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1"),l(4),o(),a(5,"p"),l(6,"Update vehicle information and settings"),o()(),a(7,"div",6)(8,"button",7),h("click",function(){C(e);let r=g();return y(r.goToBusDetails())}),l(9," \u{1F441}\uFE0F View Details "),o(),a(10,"button",8),h("click",function(){C(e);let r=g();return y(r.goToBusList())}),l(11," \u2190 Back to List "),o()()(),a(12,"div",9)(13,"form",10),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),a(14,"div",11)(15,"h2"),l(16,"\u{1F68C} Basic Information"),o(),a(17,"div",12)(18,"div",13)(19,"label",14),l(20,"Bus Number *"),o(),P(21,"input",15),v(22,hw,2,1,"div",16),o(),a(23,"div",13)(24,"label",17),l(25,"Registration Number *"),o(),P(26,"input",18),v(27,vw,2,1,"div",16),o()(),a(28,"div",12)(29,"div",13)(30,"label",19),l(31,"Service Type *"),o(),a(32,"select",20)(33,"option",21),l(34,"\u{1F68C} Intercity Service"),o(),a(35,"option",22),l(36,"\u{1F54C} Umrah Service"),o(),a(37,"option",23),l(38,"\u{1F68C}\u{1F54C} Both Services"),o()(),v(39,xw,2,1,"div",16),o(),a(40,"div",13)(41,"label",24),l(42,"Current Status *"),o(),a(43,"select",25),v(44,Cw,2,2,"option",26),o(),v(45,yw,2,1,"div",16),o(),a(46,"div",13)(47,"label",27),l(48,"Seating Capacity *"),o(),P(49,"input",28),v(50,bw,2,1,"div",16),o()()(),a(51,"div",11)(52,"h2"),l(53,"\u{1F527} Vehicle Specifications"),o(),a(54,"div",12)(55,"div",13)(56,"label",29),l(57,"Make *"),o(),a(58,"select",30),h("change",function(){C(e);let r=g();return y(r.onMakeChange())}),a(59,"option",31),l(60,"Select Make"),o(),v(61,Ew,2,2,"option",26),o(),v(62,Dw,2,1,"div",16),o(),a(63,"div",13)(64,"label",32),l(65,"Model *"),o(),a(66,"select",33)(67,"option",31),l(68,"Select Model"),o(),v(69,Mw,2,2,"option",26),o(),v(70,Sw,2,1,"div",16),o(),a(71,"div",13)(72,"label",34),l(73,"Year *"),o(),P(74,"input",35),v(75,Iw,2,1,"div",16),o()(),a(76,"div",12)(77,"div",13)(78,"label",36),l(79,"Fuel Type *"),o(),a(80,"select",37)(81,"option",38),l(82,"\u26FD Diesel"),o(),a(83,"option",39),l(84,"\u26FD Petrol"),o(),a(85,"option",40),l(86,"\u{1F50B} Electric"),o(),a(87,"option",41),l(88,"\u{1F50B}\u26FD Hybrid"),o()(),v(89,Pw,2,1,"div",16),o(),a(90,"div",13)(91,"label",42),l(92,"Current Mileage (km) *"),o(),P(93,"input",43),a(94,"small",44),l(95,"Current odometer reading"),o(),v(96,Tw,2,1,"div",16),o()()(),a(97,"div",11)(98,"h2"),l(99,"\u2728 Amenities & Features"),o(),a(100,"p",45),l(101,"Select all amenities available in this bus"),o(),a(102,"div",46),v(103,Ow,5,4,"div",47),o(),v(104,Aw,5,2,"div",48),o(),a(105,"div",11)(106,"h2"),l(107,"\u{1F4C5} Important Dates"),o(),a(108,"div",12)(109,"div",13)(110,"label",49),l(111,"Purchase Date *"),o(),P(112,"input",50),v(113,Nw,2,1,"div",16),o(),a(114,"div",13)(115,"label",51),l(116,"Next Maintenance Due *"),o(),P(117,"input",52),v(118,kw,2,1,"div",16),o()(),a(119,"div",12)(120,"div",13)(121,"label",53),l(122,"Insurance Expiry *"),o(),P(123,"input",54),v(124,Vw,2,1,"div",16),o(),a(125,"div",13)(126,"label",55),l(127,"License Expiry *"),o(),P(128,"input",56),v(129,Fw,2,1,"div",16),o()()(),a(130,"div",11)(131,"h2"),l(132,"\u{1F4DD} Additional Notes"),o(),a(133,"div",13)(134,"label",57),l(135,"Notes (Optional)"),o(),P(136,"textarea",58),a(137,"small",44),l(138,"Special features, conditions, or other remarks"),o()()(),a(139,"div",59)(140,"button",60),h("click",function(){C(e);let r=g();return y(r.resetForm())}),l(141," \u{1F504} Reset Changes "),o(),a(142,"button",61),h("click",function(){C(e);let r=g();return y(r.onCancel())}),l(143," Cancel "),o(),a(144,"button",62),v(145,Lw,2,0,"span",63)(146,$w,2,0,"span",63),o()()()()()}if(n&2){let e=g();c(4),x("\u270F\uFE0F Edit Bus: ",e.originalBus.busNumber,""),c(9),m("formGroup",e.busForm),c(8),I("error",e.isFieldInvalid("busNumber")),c(),m("ngIf",e.isFieldInvalid("busNumber")),c(4),I("error",e.isFieldInvalid("registrationNumber")),c(),m("ngIf",e.isFieldInvalid("registrationNumber")),c(5),I("error",e.isFieldInvalid("busType")),c(7),m("ngIf",e.isFieldInvalid("busType")),c(4),I("error",e.isFieldInvalid("status")),c(),m("ngForOf",e.statusOptions),c(),m("ngIf",e.isFieldInvalid("status")),c(4),I("error",e.isFieldInvalid("seatingCapacity")),c(),m("ngIf",e.isFieldInvalid("seatingCapacity")),c(8),I("error",e.isFieldInvalid("make")),c(3),m("ngForOf",e.busManufacturers),c(),m("ngIf",e.isFieldInvalid("make")),c(4),I("error",e.isFieldInvalid("model")),m("disabled",!(e.make!=null&&e.make.value)),c(3),m("ngForOf",e.getModelsForMake()),c(),m("ngIf",e.isFieldInvalid("model")),c(4),I("error",e.isFieldInvalid("year")),m("min",2e3)("max",e.currentYear+1),c(),m("ngIf",e.isFieldInvalid("year")),c(5),I("error",e.isFieldInvalid("fuelType")),c(9),m("ngIf",e.isFieldInvalid("fuelType")),c(4),I("error",e.isFieldInvalid("mileage")),c(3),m("ngIf",e.isFieldInvalid("mileage")),c(7),m("ngForOf",e.availableAmenities),c(),m("ngIf",e.selectedAmenities.length>0),c(8),I("error",e.isFieldInvalid("purchaseDate")),c(),m("ngIf",e.isFieldInvalid("purchaseDate")),c(4),I("error",e.isFieldInvalid("nextMaintenanceDue")),m("min",e.minDate),c(),m("ngIf",e.isFieldInvalid("nextMaintenanceDue")),c(5),I("error",e.isFieldInvalid("insuranceExpiry")),m("min",e.minDate),c(),m("ngIf",e.isFieldInvalid("insuranceExpiry")),c(4),I("error",e.isFieldInvalid("licenseExpiry")),m("min",e.minDate),c(),m("ngIf",e.isFieldInvalid("licenseExpiry")),c(11),m("disabled",e.isSubmitting),c(2),m("disabled",e.isSubmitting),c(2),I("loading",e.isSubmitting),m("disabled",e.busForm.invalid||e.selectedAmenities.length===0||e.isSubmitting),c(),m("ngIf",!e.isSubmitting),c(),m("ngIf",e.isSubmitting)}}function zw(n,t){n&1&&(a(0,"div",73),P(1,"div",74),a(2,"p"),l(3,"Loading bus information..."),o()())}function jw(n,t){if(n&1){let e=O();a(0,"div",75)(1,"div",76),l(2,"\u{1F68C}"),o(),a(3,"h2"),l(4,"Bus Not Found"),o(),a(5,"p"),l(6,"The requested bus could not be found or loaded."),o(),a(7,"button",77),h("click",function(){C(e);let r=g();return y(r.goToBusList())}),l(8," \u2190 Back to Bus List "),o()()}}var hd=class n{constructor(t,e,i){this.formBuilder=t;this.router=e;this.route=i;this.busForm=this.createForm()}busForm;isSubmitting=!1;isLoading=!0;busId="";originalBus=null;selectedAmenities=[];busManufacturers=["Mercedes-Benz","Volvo","Scania","MAN","Iveco","DAF","Isuzu","Mitsubishi"];availableAmenities=["AC","WiFi","USB Charging","Reclining Seats","Entertainment System","Mini Fridge","Prayer Space","Luggage Storage","Comfortable Beds","Meal Service","Reading Lights","Footrest","Blankets & Pillows","Emergency Exit","First Aid Kit","GPS Tracking","CCTV","Audio System"];statusOptions=[{value:"active",label:"Active"},{value:"maintenance",label:"In Maintenance"},{value:"inactive",label:"Inactive"},{value:"breakdown",label:"Breakdown"}];currentYear=new Date().getFullYear();minDate=new Date().toISOString().split("T")[0];ngOnInit(){this.busId=this.route.snapshot.params.id,this.loadBusData()}createForm(){return this.formBuilder.group({busNumber:["",[T.required,T.pattern(/^RB-[A-Z]{2,3}-\d{3}$/)]],registrationNumber:["",[T.required,T.pattern(/^[A-Z]{3}-\d{4}-[A-Z]$/)]],make:["",T.required],model:["",T.required],year:["",[T.required,T.min(2e3),T.max(this.currentYear+1)]],seatingCapacity:["",[T.required,T.min(20),T.max(60)]],busType:["",T.required],status:["",T.required],fuelType:["",T.required],purchaseDate:["",T.required],insuranceExpiry:["",T.required],licenseExpiry:["",T.required],nextMaintenanceDue:["",T.required],mileage:["",[T.required,T.min(0)]],notes:[""]})}loadBusData(){setTimeout(()=>{this.originalBus=this.getMockBusData(this.busId),this.originalBus&&(this.populateForm(this.originalBus),this.selectedAmenities=[...this.originalBus.amenities]),this.isLoading=!1},500)}getMockBusData(t){return{B001:{id:"B001",busNumber:"RB-IC-001",registrationNumber:"RYD-1234-A",make:"Mercedes-Benz",model:"Tourismo",year:2022,seatingCapacity:45,busType:"intercity",status:"active",fuelType:"diesel",amenities:["AC","WiFi","USB Charging","Reclining Seats","Entertainment System"],purchaseDate:"2022-03-10",insuranceExpiry:"2025-12-31",licenseExpiry:"2025-11-30",nextMaintenanceDue:"2025-03-15",mileage:45e3,notes:"Premium intercity service bus with excellent passenger comfort ratings."}}[t]||null}populateForm(t){this.busForm.patchValue({busNumber:t.busNumber,registrationNumber:t.registrationNumber,make:t.make,model:t.model,year:t.year,seatingCapacity:t.seatingCapacity,busType:t.busType,status:t.status,fuelType:t.fuelType,purchaseDate:t.purchaseDate,insuranceExpiry:t.insuranceExpiry,licenseExpiry:t.licenseExpiry,nextMaintenanceDue:t.nextMaintenanceDue,mileage:t.mileage,notes:t.notes||""})}onMakeChange(){this.busForm.patchValue({model:""})}getModelsForMake(){let t=this.busForm.get("make")?.value;return{"Mercedes-Benz":["Tourismo","Travego","Citaro","Sprinter"],Volvo:["9700 Coach","9900","B8R","B11R"],Scania:["Touring HD","Interlink HD","Citywide"],MAN:["Lion's Coach","Lion's City","Lion's Intercity"],Iveco:["Magelys Pro","Crossway","Daily"],DAF:["CF","LF","XF"],Isuzu:["Novo","Gala","Journey"],Mitsubishi:["Rosa","Canter","Fuso"]}[t]||[]}toggleAmenity(t){let e=this.selectedAmenities.indexOf(t);e>-1?this.selectedAmenities.splice(e,1):this.selectedAmenities.push(t)}isAmenitySelected(t){return this.selectedAmenities.includes(t)}onSubmit(){if(this.busForm.valid&&this.selectedAmenities.length>0){this.isSubmitting=!0;let t=le(k({},this.busForm.value),{amenities:this.selectedAmenities});setTimeout(()=>{console.log("Updated bus data:",t),alert("Bus updated successfully!"),this.router.navigate(["/buses",this.busId]),this.isSubmitting=!1},1500)}else this.markFormGroupTouched(),this.selectedAmenities.length===0&&alert("Please select at least one amenity for the bus.")}markFormGroupTouched(){Object.keys(this.busForm.controls).forEach(t=>{this.busForm.get(t)?.markAsTouched()})}onCancel(){this.hasChanges()?confirm("You have unsaved changes. Are you sure you want to cancel?")&&this.router.navigate(["/buses",this.busId]):this.router.navigate(["/buses",this.busId])}hasChanges(){if(!this.originalBus)return!1;let t=this.busForm.value,e={busNumber:this.originalBus.busNumber,registrationNumber:this.originalBus.registrationNumber,make:this.originalBus.make,model:this.originalBus.model,year:this.originalBus.year,seatingCapacity:this.originalBus.seatingCapacity,busType:this.originalBus.busType,status:this.originalBus.status,fuelType:this.originalBus.fuelType,purchaseDate:this.originalBus.purchaseDate,insuranceExpiry:this.originalBus.insuranceExpiry,licenseExpiry:this.originalBus.licenseExpiry,nextMaintenanceDue:this.originalBus.nextMaintenanceDue,mileage:this.originalBus.mileage,notes:this.originalBus.notes||""};for(let i in e)if(t[i]!==e[i])return!0;if(this.selectedAmenities.length!==this.originalBus.amenities.length)return!0;for(let i of this.selectedAmenities)if(!this.originalBus.amenities.includes(i))return!0;return!1}resetForm(){confirm("Are you sure you want to reset all changes?")&&this.originalBus&&(this.populateForm(this.originalBus),this.selectedAmenities=[...this.originalBus.amenities])}goToBusDetails(){this.router.navigate(["/buses",this.busId])}goToBusList(){this.router.navigate(["/buses"])}get busNumber(){return this.busForm.get("busNumber")}get registrationNumber(){return this.busForm.get("registrationNumber")}get make(){return this.busForm.get("make")}get model(){return this.busForm.get("model")}get year(){return this.busForm.get("year")}get seatingCapacity(){return this.busForm.get("seatingCapacity")}get busType(){return this.busForm.get("busType")}get status(){return this.busForm.get("status")}get fuelType(){return this.busForm.get("fuelType")}get purchaseDate(){return this.busForm.get("purchaseDate")}get insuranceExpiry(){return this.busForm.get("insuranceExpiry")}get licenseExpiry(){return this.busForm.get("licenseExpiry")}get nextMaintenanceDue(){return this.busForm.get("nextMaintenanceDue")}get mileage(){return this.busForm.get("mileage")}get notes(){return this.busForm.get("notes")}isFieldInvalid(t){let e=this.busForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.busForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${t} is required`;if(e.errors.pattern)return`Invalid ${t} format`;if(e.errors.min)return`${t} is too low`;if(e.errors.max)return`${t} is too high`}return""}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne),w(Te))};static \u0275cmp=J({type:n,selectors:[["app-bus-edit"]],decls:3,vars:3,consts:[["class","bus-edit-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"bus-edit-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-container"],[1,"bus-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","busNumber"],["type","text","id","busNumber","formControlName","busNumber","placeholder","RB-IC-001",1,"form-control"],["class","error-message",4,"ngIf"],["for","registrationNumber"],["type","text","id","registrationNumber","formControlName","registrationNumber","placeholder","RYD-1234-A",1,"form-control"],["for","busType"],["id","busType","formControlName","busType",1,"form-control"],["value","intercity"],["value","umrah"],["value","both"],["for","status"],["id","status","formControlName","status",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","seatingCapacity"],["type","number","id","seatingCapacity","formControlName","seatingCapacity","min","20","max","60",1,"form-control"],["for","make"],["id","make","formControlName","make",1,"form-control",3,"change"],["value",""],["for","model"],["id","model","formControlName","model",1,"form-control",3,"disabled"],["for","year"],["type","number","id","year","formControlName","year",1,"form-control",3,"min","max"],["for","fuelType"],["id","fuelType","formControlName","fuelType",1,"form-control"],["value","diesel"],["value","petrol"],["value","electric"],["value","hybrid"],["for","mileage"],["type","number","id","mileage","formControlName","mileage","min","0",1,"form-control"],[1,"help-text"],[1,"section-description"],[1,"amenities-grid"],["class","amenity-item",3,"selected","click",4,"ngFor","ngForOf"],["class","selected-amenities",4,"ngIf"],["for","purchaseDate"],["type","date","id","purchaseDate","formControlName","purchaseDate",1,"form-control"],["for","nextMaintenanceDue"],["type","date","id","nextMaintenanceDue","formControlName","nextMaintenanceDue",1,"form-control",3,"min"],["for","insuranceExpiry"],["type","date","id","insuranceExpiry","formControlName","insuranceExpiry",1,"form-control",3,"min"],["for","licenseExpiry"],["type","date","id","licenseExpiry","formControlName","licenseExpiry",1,"form-control",3,"min"],["for","notes"],["id","notes","formControlName","notes","rows","4","placeholder","Any additional information about this bus...",1,"form-control","textarea"],[1,"form-actions"],["type","button",1,"btn","btn-outline",3,"click","disabled"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],[3,"value"],[1,"amenity-item",3,"click"],[1,"amenity-checkbox"],[1,"amenity-label"],[1,"selected-amenities"],[1,"amenity-tags"],["class","amenity-tag",3,"click",4,"ngFor","ngForOf"],[1,"amenity-tag",3,"click"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&v(0,Bw,147,62,"div",0)(1,zw,4,0,"div",1)(2,jw,9,0,"div",2),e&2&&(m("ngIf",!i.isLoading&&i.originalBus),c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&!i.originalBus))},dependencies:[K,ae,ee,Mt,ct,Re,Oe,Se,vt,Pe,Ie,lt,xt,wt,Dt,Ot],styles:[`.bus-edit-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;border-color:#cbd5e0}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn.loading[_ngcontent-%COMP%]{position:relative}.form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.bus-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000000d}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:20px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.section-description[_ngcontent-%COMP%]{margin:0 0 20px;color:#718096;font-size:14px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease;outline:none;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.amenities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:25px}.amenity-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff}.amenity-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;background:#f7fafc}.amenity-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#eef2ff}.amenity-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e2e8f0;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#667eea;font-weight:700;transition:all .2s ease}.amenity-item.selected[_ngcontent-%COMP%]   .amenity-checkbox[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea;color:#fff}.amenity-label[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:500}.amenity-item.selected[_ngcontent-%COMP%]   .amenity-label[_ngcontent-%COMP%]{color:#667eea;font-weight:600}.selected-amenities[_ngcontent-%COMP%]{padding:20px;background:#f7fafc;border-radius:8px;border:1px solid #e2e8f0}.selected-amenities[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:16px;font-weight:600}.amenity-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.amenity-tag[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px}.amenity-tag[_ngcontent-%COMP%]:hover{background:#5a6fd8;transform:translateY(-1px)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}@media (max-width: 768px){.bus-edit-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.amenities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.bus-edit-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-section[_ngcontent-%COMP%]{padding:15px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.amenity-item[_ngcontent-%COMP%]{padding:10px 12px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.amenity-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.form-control[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>') no-repeat center center;background-size:16px 16px;cursor:pointer}.form-section.has-changes[_ngcontent-%COMP%]{border-left:4px solid #667eea}.form-section.has-changes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#667eea}.status-warning[_ngcontent-%COMP%]{background:#fef5e7;border:1px solid #f6ad55;padding:15px;border-radius:8px;margin-bottom:20px}.status-warning[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#c05621;font-size:16px}.status-warning[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#744210;font-size:14px}`]})};var Uw=()=>[];function Gw(n,t){n&1&&(a(0,"span"),E(1,38),o())}function Hw(n,t){n&1&&(a(0,"span"),E(1,39),o())}function Xw(n,t){n&1&&(a(0,"span"),E(1,40),o())}function Ww(n,t){n&1&&(a(0,"span"),l(1,"\u26A0\uFE0F Expired"),o())}function qw(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g().$implicit,i=g();c(),x("\u26A0\uFE0F Expires in ",i.getDaysUntilLicenseExpiry(e)," days")}}function Yw(n,t){if(n&1&&(a(0,"span"),l(1),j(2,"date"),o()),n&2){let e=g().$implicit;c(),x("\u2705 ",ie(2,1,e.licenseExpiry,"MMM yyyy"),"")}}function Zw(n,t){n&1&&(a(0,"span"),E(1,41),o())}function Jw(n,t){n&1&&(a(0,"span"),E(1,42),o())}function Kw(n,t){n&1&&(a(0,"span"),E(1,43),o())}function Qw(n,t){n&1&&(a(0,"span"),E(1,44),o())}function e8(n,t){if(n&1&&(a(0,"span",126),l(1),o()),n&2){let e=g().$implicit;c(),x(" ",e.currentAssignment," ")}}function t8(n,t){n&1&&(a(0,"span",127),E(1,45),o())}function n8(n,t){if(n&1){let e=O();a(0,"tr",91)(1,"td",92)(2,"div",93)(3,"div",94)(4,"strong"),l(5),o()(),a(6,"div",95)(7,"span"),E(8,35),o(),l(9),o()()(),a(10,"td",96)(11,"div",97),l(12),o()(),a(13,"td",98)(14,"div",99)(15,"div",100),l(16),o(),a(17,"div",101),l(18),o()()(),a(19,"td",102)(20,"div",103)(21,"div",104)(22,"span",105),v(23,Gw,2,0,"span",106)(24,Hw,2,0,"span",106)(25,Xw,2,0,"span",106),o()(),a(26,"div",107),v(27,Ww,2,0,"span",90)(28,qw,2,1,"span",90)(29,Yw,3,4,"span",90),o()()(),a(30,"td",108)(31,"div",109)(32,"div",110),l(33),a(34,"span"),E(35,36),o()(),a(36,"div",111),l(37),a(38,"span"),E(39,37),o()()()(),a(40,"td",112)(41,"span",113)(42,"span",105),v(43,Zw,2,0,"span",106)(44,Jw,2,0,"span",106)(45,Kw,2,0,"span",106)(46,Qw,2,0,"span",106),o()()(),a(47,"td",114),v(48,e8,2,1,"span",115)(49,t8,2,0,"ng-template",null,0,Bi),o(),a(51,"td",116)(52,"div",117)(53,"span",118),l(54),o(),a(55,"span",119),l(56),o()()(),a(57,"td",120)(58,"div",121)(59,"button",122),h("click",function(){let r=C(e).$implicit,s=g();return y(s.viewDriverDetails(r.id))}),l(60," \u{1F441}\uFE0F "),o(),a(61,"button",123),h("click",function(){let r=C(e).$implicit,s=g();return y(s.editDriver(r.id))}),l(62," \u270F\uFE0F "),o(),a(63,"button",124),h("click",function(){let r=C(e).$implicit,s=g();return y(s.assignDriver(r.id))}),l(64," \u{1F3AF} "),o(),a(65,"button",125),h("click",function(){let r=C(e).$implicit,s=g();return y(s.deleteDriver(r.id))}),l(66," \u{1F5D1}\uFE0F "),o()()()()}if(n&2){let e=t.$implicit,i=ai(50),r=g();c(5),_(r.getFullName(e)),c(4),x(" ",r.getDriverAge(e)," "),c(3),_(e.employeeId),c(4),_(e.phoneNumber),c(2),_(e.email),c(3),q(r.getLicenseTypeClass(e.licenseType)),c(),m("ngSwitch",e.licenseType),c(),m("ngSwitchCase","light"),c(),m("ngSwitchCase","heavy"),c(),m("ngSwitchCase","public"),c(),I("expiring",r.isLicenseExpiringSoon(e))("expired",r.isLicenseExpired(e)),c(),m("ngIf",r.isLicenseExpired(e)),c(),m("ngIf",r.isLicenseExpiringSoon(e)&&!r.isLicenseExpired(e)),c(),m("ngIf",!r.isLicenseExpiringSoon(e)&&!r.isLicenseExpired(e)),c(4),x("",e.experience," "),c(4),x("",e.totalTrips," "),c(4),q(r.getStatusClass(e.status)),c(),m("ngSwitch",e.status),c(),m("ngSwitchCase","available"),c(),m("ngSwitchCase","on-duty"),c(),m("ngSwitchCase","on-leave"),c(),m("ngSwitchCase","inactive"),c(2),m("ngIf",e.currentAssignment)("ngIfElse",i),c(6),_(r.getRatingStars(e.rating)),c(2),x("(",e.rating,")"),c(7),m("disabled",e.status!=="available")}}function i8(n,t){if(n&1){let e=O();a(0,"div",128)(1,"div",129),l(2,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(3,"h3"),l(4,"No drivers found"),o(),a(5,"p"),l(6,"No drivers match your current filter criteria."),o(),a(7,"button",54),h("click",function(){C(e);let r=g();return y(r.addNewDriver())}),l(8,"Add Your First Driver"),o()()}}function r8(n,t){if(n&1){let e=O();a(0,"button",134),h("click",function(){let r=C(e).index,s=g(2);return y(s.changePage(r+1))}),l(1),o()}if(n&2){let e=t.index,i=g(2);I("active",i.currentPage===e+1),c(),x(" ",e+1," ")}}function o8(n,t){if(n&1){let e=O();a(0,"div",130)(1,"button",131),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage-1))}),E(2,46),o(),a(3,"div",132),v(4,r8,2,3,"button",133),o(),a(5,"button",131),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage+1))}),E(6,47),o()()}if(n&2){let e=g();c(),m("disabled",e.currentPage===1),c(3),m("ngForOf",si(3,Uw).constructor(e.totalPages)),c(),m("disabled",e.currentPage===e.totalPages)}}function a8(n,t){if(n&1&&(a(0,"span"),l(1," ("),a(2,"span"),E(3,48),o(),l(4),a(5,"span"),E(6,49),o(),l(7,") "),o()),n&2){let e=g();c(4),x(" ",e.stats.total," ")}}var vd=class n{constructor(t){this.router=t}drivers=[];filteredDrivers=[];stats={total:0,available:0,onDuty:0,onLeave:0,inactive:0,licenseExpiringSoon:0};Math=Math;searchTerm="";statusFilter="all";licenseTypeFilter="all";sortBy="firstName";sortDirection="asc";currentPage=1;itemsPerPage=10;totalPages=1;ngOnInit(){this.loadMockData(),this.applyFilters()}loadMockData(){this.drivers=[{id:"D001",employeeId:"EMP-001",firstName:"Ahmed",lastName:"Al-Rashid",phoneNumber:"+966501234567",email:"ahmed.rashid@relaybus.com",licenseNumber:"DL-RYD-001234",licenseType:"heavy",licenseExpiry:new Date("2025-12-31"),experience:8,status:"on-duty",currentAssignment:"RB-IC-001 (Riyadh \u2192 Jeddah)",address:"Al-Malaz District, Riyadh",emergencyContact:"Fatima Al-Rashid",emergencyPhone:"+966501234568",dateOfBirth:new Date("1985-03-15"),hireDate:new Date("2020-01-15"),salary:4500,rating:4.8,totalTrips:342,notes:"Excellent safety record, preferred for long-distance routes"},{id:"D002",employeeId:"EMP-002",firstName:"Mohammad",lastName:"Al-Fahad",phoneNumber:"+966502345678",email:"mohammad.fahad@relaybus.com",licenseNumber:"DL-JED-005678",licenseType:"heavy",licenseExpiry:new Date("2026-06-30"),experience:12,status:"available",address:"Al-Andalus District, Jeddah",emergencyContact:"Khalid Al-Fahad",emergencyPhone:"+966502345679",dateOfBirth:new Date("1980-08-22"),hireDate:new Date("2018-05-10"),salary:5200,rating:4.9,totalTrips:567,notes:"Senior driver, excellent for Umrah routes"},{id:"D003",employeeId:"EMP-003",firstName:"Salem",lastName:"Al-Mutairi",phoneNumber:"+966503456789",email:"salem.mutairi@relaybus.com",licenseNumber:"DL-DAM-009876",licenseType:"heavy",licenseExpiry:new Date("2025-03-15"),experience:5,status:"available",address:"King Fahd District, Dammam",emergencyContact:"Nora Al-Mutairi",emergencyPhone:"+966503456790",dateOfBirth:new Date("1990-11-08"),hireDate:new Date("2021-09-01"),salary:4200,rating:4.5,totalTrips:189},{id:"D004",employeeId:"EMP-004",firstName:"Khalid",lastName:"Al-Otaibi",phoneNumber:"+966504567890",email:"khalid.otaibi@relaybus.com",licenseNumber:"DL-MED-012345",licenseType:"heavy",licenseExpiry:new Date("2024-12-31"),experience:15,status:"on-leave",address:"Al-Haram District, Makkah",emergencyContact:"Aisha Al-Otaibi",emergencyPhone:"+966504567891",dateOfBirth:new Date("1975-05-14"),hireDate:new Date("2015-03-20"),salary:5800,rating:4.7,totalTrips:823,notes:"Specialist in Umrah and Hajj routes, very experienced"},{id:"D005",employeeId:"EMP-005",firstName:"Abdullah",lastName:"Al-Dosari",phoneNumber:"+966505678901",email:"abdullah.dosari@relaybus.com",licenseNumber:"DL-RYD-067890",licenseType:"heavy",licenseExpiry:new Date("2025-09-30"),experience:3,status:"available",address:"Olaya District, Riyadh",emergencyContact:"Maryam Al-Dosari",emergencyPhone:"+966505678902",dateOfBirth:new Date("1992-12-03"),hireDate:new Date("2022-06-15"),salary:3800,rating:4.3,totalTrips:95},{id:"D006",employeeId:"EMP-006",firstName:"Faisal",lastName:"Al-Qahtani",phoneNumber:"+966506789012",email:"faisal.qahtani@relaybus.com",licenseNumber:"DL-RYD-054321",licenseType:"heavy",licenseExpiry:new Date("2025-02-28"),experience:7,status:"inactive",address:"Al-Naseem District, Riyadh",emergencyContact:"Sarah Al-Qahtani",emergencyPhone:"+966506789013",dateOfBirth:new Date("1988-07-19"),hireDate:new Date("2019-11-01"),salary:4300,rating:4.1,totalTrips:278,notes:"Currently on medical leave"}],this.calculateStats()}calculateStats(){this.stats.total=this.drivers.length,this.stats.available=this.drivers.filter(t=>t.status==="available").length,this.stats.onDuty=this.drivers.filter(t=>t.status==="on-duty").length,this.stats.onLeave=this.drivers.filter(t=>t.status==="on-leave").length,this.stats.inactive=this.drivers.filter(t=>t.status==="inactive").length,this.stats.licenseExpiringSoon=this.drivers.filter(t=>this.isLicenseExpiringSoon(t)).length}applyFilters(){let t=[...this.drivers];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>`${i.firstName} ${i.lastName}`.toLowerCase().includes(e)||i.employeeId.toLowerCase().includes(e)||i.licenseNumber.toLowerCase().includes(e)||i.phoneNumber.includes(e)||i.email&&i.email.toLowerCase().includes(e))}this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.licenseTypeFilter!=="all"&&(t=t.filter(e=>e.licenseType===this.licenseTypeFilter)),t.sort((e,i)=>{let r=e[this.sortBy],s=i[this.sortBy];return r===void 0&&(r=""),s===void 0&&(s=""),typeof r=="string"&&(r=r.toLowerCase()),typeof s=="string"&&(s=s.toLowerCase()),r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0}),this.filteredDrivers=t,this.totalPages=Math.ceil(t.length/this.itemsPerPage),this.currentPage=1}getPaginatedDrivers(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredDrivers.slice(t,e)}changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}getStatusClass(t){switch(t){case"available":return"status-available";case"on-duty":return"status-on-duty";case"on-leave":return"status-on-leave";case"inactive":return"status-inactive";default:return""}}getLicenseTypeClass(t){switch(t){case"light":return"license-light";case"heavy":return"license-heavy";case"public":return"license-public";default:return""}}toggleSort(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc"),this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}viewDriverDetails(t){this.router.navigate(["/drivers",t])}editDriver(t){this.router.navigate(["/drivers",t,"edit"])}addNewDriver(){this.router.navigate(["/drivers/add"])}deleteDriver(t){confirm("Are you sure you want to delete this driver?")&&(this.drivers=this.drivers.filter(e=>e.id!==t),this.calculateStats(),this.applyFilters())}isLicenseExpiringSoon(t){let e=new Date,i=new Date(t.licenseExpiry),r=Math.ceil((i.getTime()-e.getTime())/(1e3*3600*24));return r<=90&&r>0}isLicenseExpired(t){let e=new Date,i=new Date(t.licenseExpiry);return e>i}getDaysUntilLicenseExpiry(t){let e=new Date,i=new Date(t.licenseExpiry);return Math.ceil((i.getTime()-e.getTime())/(1e3*3600*24))}getDriverAge(t){let e=new Date,i=new Date(t.dateOfBirth);return Math.floor((e.getTime()-i.getTime())/(1e3*3600*24*365.25))}getFullName(t){return`${t.firstName} ${t.lastName}`}getRatingStars(t){let e=Math.floor(t),i=t%1>=.5,r="\u2605".repeat(e);return i&&(r+="\u2606"),r}assignDriver(t){this.router.navigate(["/drivers",t,"assign"])}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-driver-list"]],decls:153,vars:23,consts:()=>{let t;t=$localize`:@@driver.search.placeholder:Search drivers by name, employee ID, license number, or phone...`;let e;e=$localize`:@@driver.list.title: Driver Management`;let i;i=$localize`:@@driver.list.subtitle:Manage your fleet drivers and their assignments`;let r;r=$localize`:@@driver.list.add-new: Add New Driver`;let s;s=$localize`:@@driver.stats.total:Total Drivers`;let d;d=$localize`:@@driver.stats.available:Available`;let u;u=$localize`:@@driver.stats.on-duty:On Duty`;let p;p=$localize`:@@driver.stats.on-leave:On Leave`;let f;f=$localize`:@@driver.stats.inactive:Inactive`;let b;b=$localize`:@@driver.stats.license-expiring:License Expiring`;let D;D=$localize`:@@driver.filter.status:Status:`;let S;S=$localize`:@@common.all:All Status`;let M;M=$localize`:@@driver.status.available:Available`;let R;R=$localize`:@@driver.status.on-duty:On Duty`;let A;A=$localize`:@@driver.status.on-leave:On Leave`;let z;z=$localize`:@@driver.status.inactive:Inactive`;let U;U=$localize`:@@driver.filter.license-type:License Type:`;let ue;ue=$localize`:@@common.all:All Types`;let oe;oe=$localize`:@@driver.license.light:Light Vehicle`;let re;re=$localize`:@@driver.license.heavy:Heavy Vehicle`;let ke;ke=$localize`:@@driver.license.public:Public Transport`;let We;We=$localize`:@@common.items-per-page:Items per page:`;let Ue;Ue=$localize`:@@driver.table.name:Name`;let rt;rt=$localize`:@@driver.table.employee-id:Employee ID`;let pt;pt=$localize`:@@driver.table.contact:Contact`;let _e;_e=$localize`:@@driver.table.license:License`;let At;At=$localize`:@@driver.table.experience:Experience`;let Nt;Nt=$localize`:@@driver.table.status:Status`;let kt;kt=$localize`:@@driver.table.assignment:Current Assignment`;let Vt;Vt=$localize`:@@driver.table.rating:Rating`;let Ft;Ft=$localize`:@@common.actions:Actions`;let pe;pe=$localize`:@@common.showing:Showing`;let mn;mn=$localize`:@@common.to:to`;let gn;gn=$localize`:@@common.of:of`;let fn;fn=$localize`:@@driver.results.drivers:drivers`;let _n;_n=$localize`:@@common.view:View Details`;let hn;hn=$localize`:@@common.edit:Edit Driver`;let vn;vn=$localize`:@@driver.assign:Assign Driver`;let xn;xn=$localize`:@@common.delete:Delete Driver`;let Cn;Cn=$localize`:@@driver.age:Age:`;let yn;yn=$localize`:@@common.years:years`;let bn;bn=$localize`:@@driver.trips:trips`;let En;En=$localize`:@@driver.license.light:LIGHT`;let Dn;Dn=$localize`:@@driver.license.heavy:HEAVY`;let Mn;Mn=$localize`:@@driver.license.public:PUBLIC`;let Sn;Sn=$localize`:@@driver.status.available:Available`;let In;In=$localize`:@@driver.status.on-duty:On Duty`;let Pn;Pn=$localize`:@@driver.status.on-leave:On Leave`;let Tn;Tn=$localize`:@@driver.status.inactive:Inactive`;let Rn;Rn=$localize`:@@driver.no-assignment:Not assigned`;let On;On=$localize`:@@common.pagination.previous:  Previous `;let wn;wn=$localize`:@@common.pagination.next: Next  `;let An;An=$localize`:@@common.filtered-from:filtered from`;let Nn;return Nn=$localize`:@@common.total:total`,[["noAssignment",""],e,i,r,s,d,u,p,f,b,D,S,M,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,_e,At,Nt,kt,Vt,Ft,pe,mn,gn,fn,Cn,yn,bn,En,Dn,Mn,Sn,In,Pn,Tn,Rn,On,wn,An,Nn,[1,"driver-management-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","available"],[1,"stat-card","on-duty"],[1,"stat-card","on-leave"],[1,"stat-card","inactive"],[1,"stat-card","license-expiring"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder",t,1,"search-input",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","available"],["value","on-duty"],["value","on-leave"],["value","inactive"],["value","light"],["value","heavy"],["value","public"],["value","10"],["value","25"],["value","50"],[1,"table-container"],[1,"driver-table"],[1,"sortable",3,"click"],["class","driver-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"results-info"],[4,"ngIf"],[1,"driver-row"],[1,"driver-info"],[1,"driver-details"],[1,"driver-name"],[1,"driver-age"],[1,"employee-id"],[1,"id-badge"],[1,"contact-info"],[1,"contact-details"],[1,"phone"],[1,"email"],[1,"license-info"],[1,"license-details"],[1,"license-type"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"license-expiry"],[1,"experience"],[1,"experience-info"],[1,"years"],[1,"total-trips"],[1,"status"],[1,"status-badge"],[1,"assignment"],["class","assignment-text",4,"ngIf","ngIfElse"],[1,"rating"],[1,"rating-display"],[1,"stars"],[1,"rating-number"],[1,"actions"],[1,"action-buttons"],["title",_n,1,"action-btn","view",3,"click"],["title",hn,1,"action-btn","edit",3,"click"],["title",vn,1,"action-btn","assign",3,"click","disabled"],["title",xn,1,"action-btn","delete",3,"click"],[1,"assignment-text"],[1,"text-muted"],[1,"empty-state"],[1,"empty-icon"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-numbers"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"]]},template:function(e,i){e&1&&(a(0,"div",50)(1,"div",51)(2,"div",52)(3,"h1"),E(4,1),o(),a(5,"p"),E(6,2),o()(),a(7,"div",53)(8,"button",54),h("click",function(){return i.addNewDriver()}),a(9,"span"),E(10,3),o()()()(),a(11,"div",55)(12,"div",56)(13,"div",57),l(14,"\u{1F465}"),o(),a(15,"div",58)(16,"h3"),E(17,4),o(),a(18,"p",59),l(19),o()()(),a(20,"div",60)(21,"div",57),l(22,"\u2705"),o(),a(23,"div",58)(24,"h3"),E(25,5),o(),a(26,"p",59),l(27),o()()(),a(28,"div",61)(29,"div",57),l(30,"\u{1F68C}"),o(),a(31,"div",58)(32,"h3"),E(33,6),o(),a(34,"p",59),l(35),o()()(),a(36,"div",62)(37,"div",57),l(38,"\u{1F3D6}\uFE0F"),o(),a(39,"div",58)(40,"h3"),E(41,7),o(),a(42,"p",59),l(43),o()()(),a(44,"div",63)(45,"div",57),l(46,"\u23F8\uFE0F"),o(),a(47,"div",58)(48,"h3"),E(49,8),o(),a(50,"p",59),l(51),o()()(),a(52,"div",64)(53,"div",57),l(54,"\u26A0\uFE0F"),o(),a(55,"div",58)(56,"h3"),E(57,9),o(),a(58,"p",59),l(59),o()()()(),a(60,"div",65)(61,"div",66)(62,"input",67),L("ngModelChange",function(s){return $(i.searchTerm,s)||(i.searchTerm=s),s}),h("input",function(){return i.applyFilters()}),o(),a(63,"span",68),l(64,"\u{1F50D}"),o()(),a(65,"div",69)(66,"div",70)(67,"label"),E(68,10),o(),a(69,"select",71),L("ngModelChange",function(s){return $(i.statusFilter,s)||(i.statusFilter=s),s}),h("change",function(){return i.applyFilters()}),a(70,"option",72),E(71,11),o(),a(72,"option",73),E(73,12),o(),a(74,"option",74),E(75,13),o(),a(76,"option",75),E(77,14),o(),a(78,"option",76),E(79,15),o()()(),a(80,"div",70)(81,"label"),E(82,16),o(),a(83,"select",71),L("ngModelChange",function(s){return $(i.licenseTypeFilter,s)||(i.licenseTypeFilter=s),s}),h("change",function(){return i.applyFilters()}),a(84,"option",72),E(85,17),o(),a(86,"option",77),E(87,18),o(),a(88,"option",78),E(89,19),o(),a(90,"option",79),E(91,20),o()()(),a(92,"div",70)(93,"label"),E(94,21),o(),a(95,"select",71),L("ngModelChange",function(s){return $(i.itemsPerPage,s)||(i.itemsPerPage=s),s}),h("change",function(){return i.applyFilters()}),a(96,"option",80),l(97,"10"),o(),a(98,"option",81),l(99,"25"),o(),a(100,"option",82),l(101,"50"),o()()()()(),a(102,"div",83)(103,"table",84)(104,"thead")(105,"tr")(106,"th",85),h("click",function(){return i.toggleSort("firstName")}),a(107,"span"),E(108,22),o(),l(109),o(),a(110,"th",85),h("click",function(){return i.toggleSort("employeeId")}),a(111,"span"),E(112,23),o(),l(113),o(),a(114,"th",85),h("click",function(){return i.toggleSort("phoneNumber")}),a(115,"span"),E(116,24),o(),l(117),o(),a(118,"th",85),h("click",function(){return i.toggleSort("licenseType")}),a(119,"span"),E(120,25),o(),l(121),o(),a(122,"th",85),h("click",function(){return i.toggleSort("experience")}),a(123,"span"),E(124,26),o(),l(125),o(),a(126,"th",85),h("click",function(){return i.toggleSort("status")}),a(127,"span"),E(128,27),o(),l(129),o(),a(130,"th"),E(131,28),o(),a(132,"th"),E(133,29),o(),a(134,"th"),E(135,30),o()()(),a(136,"tbody"),v(137,n8,67,32,"tr",86),o()(),v(138,i8,9,0,"div",87),o(),v(139,o8,7,4,"div",88),a(140,"div",89)(141,"span"),E(142,31),o(),l(143),a(144,"span"),E(145,32),o(),l(146),a(147,"span"),E(148,33),o(),l(149),a(150,"span"),E(151,34),o(),v(152,a8,8,1,"span",90),o()()),e&2&&(c(19),_(i.stats.total),c(8),_(i.stats.available),c(8),_(i.stats.onDuty),c(8),_(i.stats.onLeave),c(8),_(i.stats.inactive),c(8),_(i.stats.licenseExpiringSoon),c(3),F("ngModel",i.searchTerm),c(7),F("ngModel",i.statusFilter),c(14),F("ngModel",i.licenseTypeFilter),c(12),F("ngModel",i.itemsPerPage),c(14),x(" ",i.getSortIcon("firstName")," "),c(4),x(" ",i.getSortIcon("employeeId")," "),c(4),x(" ",i.getSortIcon("phoneNumber")," "),c(4),x(" ",i.getSortIcon("licenseType")," "),c(4),x(" ",i.getSortIcon("experience")," "),c(4),x(" ",i.getSortIcon("status")," "),c(8),m("ngForOf",i.getPaginatedDrivers()),c(),m("ngIf",i.getPaginatedDrivers().length===0),c(),m("ngIf",i.totalPages>1),c(4),x(" ",(i.currentPage-1)*i.itemsPerPage+1," "),c(3),x(" ",i.Math.min(i.currentPage*i.itemsPerPage,i.filteredDrivers.length)," "),c(3),x(" ",i.filteredDrivers.length," "),c(3),m("ngIf",i.filteredDrivers.length!==i.stats.total))},dependencies:[K,ae,ee,Ii,xr,He,et,Re,Oe,Se,Pe,Ie,it],styles:[".driver-management-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px;transition:all .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#4299e1}.stat-card.available[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.on-duty[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.on-leave[_ngcontent-%COMP%]{border-left-color:#9f7aea}.stat-card.inactive[_ngcontent-%COMP%]{border-left-color:#a0aec0}.stat-card.license-expiring[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#f7fafc}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#2d3748}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 45px 12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:16px;color:#718096}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#4a5568}.filter-select[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;margin-bottom:25px}.driver-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.driver-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.driver-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;font-weight:600;color:#2d3748;border-bottom:1px solid #e2e8f0;white-space:nowrap;position:sticky;top:0;background:#f8fafc;z-index:10}.driver-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.driver-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#edf2f7}.driver-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;border-bottom:1px solid #e2e8f0;vertical-align:top}.driver-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.driver-info[_ngcontent-%COMP%]{min-width:180px}.driver-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.driver-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.driver-age[_ngcontent-%COMP%]{color:#718096;font-size:12px}.employee-id[_ngcontent-%COMP%]{min-width:100px}.id-badge[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568;padding:4px 8px;border-radius:6px;font-weight:500;font-size:12px;display:inline-block}.contact-info[_ngcontent-%COMP%]{min-width:200px}.contact-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.phone[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:13px}.email[_ngcontent-%COMP%]{color:#718096;font-size:12px}.license-info[_ngcontent-%COMP%]{min-width:140px}.license-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.license-type[_ngcontent-%COMP%]{padding:3px 8px;border-radius:12px;font-size:11px;font-weight:600;text-align:center;text-transform:uppercase;display:inline-block;max-width:fit-content}.license-light[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.license-heavy[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.license-public[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.license-expiry[_ngcontent-%COMP%]{font-size:11px;color:#718096}.license-expiry.expiring[_ngcontent-%COMP%]{color:#d69e2e;font-weight:600}.license-expiry.expired[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600}.experience[_ngcontent-%COMP%]{min-width:100px;text-align:center}.experience-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center}.years[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.total-trips[_ngcontent-%COMP%]{color:#718096;font-size:12px}.status[_ngcontent-%COMP%]{min-width:100px}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.status-available[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d;border:1px solid #9ae6b4}.status-on-duty[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621;border:1px solid #fbb6ce}.status-on-leave[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a;border:1px solid #b794f6}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568;border:1px solid #cbd5e0}.assignment[_ngcontent-%COMP%]{max-width:200px;min-width:150px}.assignment-text[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:13px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-muted[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic;font-size:12px}.rating[_ngcontent-%COMP%]{min-width:80px;text-align:center}.rating-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px}.stars[_ngcontent-%COMP%]{color:#f6ad55;font-size:16px}.rating-number[_ngcontent-%COMP%]{font-size:12px;color:#718096}.actions[_ngcontent-%COMP%]{min-width:140px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center}.action-btn[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s ease;background:#f7fafc;color:#4a5568;display:flex;align-items:center;justify-content:center;min-width:32px;height:32px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.action-btn.view[_ngcontent-%COMP%]:hover{background:#bee3f8;color:#2a4365}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#faf089;color:#744210}.action-btn.assign[_ngcontent-%COMP%]:hover{background:#e6fffa;color:#234e52}.action-btn.assign[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#f7fafc}.action-btn.assign[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:none}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#fed7d7;color:#742a2a}@media (max-width: 1200px){.driver-table[_ngcontent-%COMP%]{font-size:13px}.driver-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .driver-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.contact-info[_ngcontent-%COMP%], .assignment[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto}.driver-table[_ngcontent-%COMP%]{min-width:800px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.action-btn[_ngcontent-%COMP%]{min-width:28px;height:28px;font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#4a5568;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:14px}.empty-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}[dir=rtl][_ngcontent-%COMP%]   .driver-management-container[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{left:16px;right:auto}[dir=rtl][_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding:12px 16px 12px 45px}[dir=rtl][_ngcontent-%COMP%]   .driver-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .driver-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .filter-controls[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .driver-info[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .rating-display[_ngcontent-%COMP%]{align-items:flex-end}@media (max-width: 1200px){.driver-management-container[_ngcontent-%COMP%]{padding:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.driver-table[_ngcontent-%COMP%]{font-size:12px}.driver-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .driver-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.contact-info[_ngcontent-%COMP%], .license-info[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%]{font-size:11px}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.assignment[_ngcontent-%COMP%]{max-width:120px}}@media (max-width: 480px){.driver-management-container[_ngcontent-%COMP%]{padding:15px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.driver-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}.filter-group[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{width:100%}.action-btn.assign[_ngcontent-%COMP%]:hover{background:#e6fffa;color:#234e52}.action-btn.assign[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#f7fafc}.action-btn.assign[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:none}}.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box;margin:0;padding:30px;background:#f8fafc;min-height:calc(100vh - 140px)}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px;contain:layout}.driver-table[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse;table-layout:fixed}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0;width:100%;box-sizing:border-box}.header-content[_ngcontent-%COMP%]{flex:1;min-width:0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.header-actions[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;width:100%}.stat-card[_ngcontent-%COMP%]{min-width:0;overflow:hidden}.filter-controls[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;background:#fff;border-radius:12px;padding:20px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d}.filter-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;width:100%}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:150px;box-sizing:border-box}.actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center;flex-wrap:nowrap;min-width:120px}.action-btn[_ngcontent-%COMP%]{flex-shrink:0;min-width:32px;height:32px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin:25px 0;flex-wrap:wrap;width:100%}@media (max-width: 1400px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 1024px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.header-actions[_ngcontent-%COMP%]{margin-left:0;width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}}@media (max-width: 768px){.driver-management-container[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]{padding:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]{min-width:unset}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}.driver-management-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .bus-management-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{max-width:100%;box-sizing:border-box}.assignment[_ngcontent-%COMP%], .location[_ngcontent-%COMP%], .driver-name[_ngcontent-%COMP%], .bus-number[_ngcontent-%COMP%], .email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.driver-table[_ngcontent-%COMP%], .bus-table[_ngcontent-%COMP%]{min-width:800px}}"]})};function s8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("employeeId")," ")}}function l8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("firstName")," ")}}function c8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("lastName")," ")}}function d8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("dateOfBirth")," ")}}function u8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("phoneNumber")," ")}}function p8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("email")," ")}}function m8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("address")," ")}}function g8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("licenseNumber")," ")}}function f8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("licenseType")," ")}}function _8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("licenseExpiry")," ")}}function h8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("experience")," ")}}function v8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("hireDate")," ")}}function x8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("status")," ")}}function C8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("salary")," ")}}function y8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("emergencyContact")," ")}}function b8(n,t){if(n&1&&(a(0,"div",104),l(1),o()),n&2){let e=g();c(),x(" ",e.getFieldError("emergencyPhone")," ")}}function E8(n,t){n&1&&(a(0,"span"),E(1,42),o())}function D8(n,t){n&1&&(a(0,"span"),E(1,43),o())}var xd=class n{constructor(t,e){this.formBuilder=t;this.router=e;this.driverForm=this.createForm()}driverForm;isSubmitting=!1;currentYear=new Date().getFullYear();minDate=new Date().toISOString().split("T")[0];minBirthDate=new Date(1950,0,1).toISOString().split("T")[0];maxBirthDate=new Date(this.currentYear-18,11,31).toISOString().split("T")[0];ngOnInit(){this.generateEmployeeId(),this.driverForm.patchValue({hireDate:new Date().toISOString().split("T")[0]})}createForm(){return this.formBuilder.group({employeeId:["",[T.required,T.pattern(/^EMP-\d{3}$/)]],firstName:["",[T.required,T.minLength(2),T.maxLength(50)]],lastName:["",[T.required,T.minLength(2),T.maxLength(50)]],phoneNumber:["",[T.required,T.pattern(/^\+966[5][0-9]{8}$/)]],email:["",[T.required,T.email]],licenseNumber:["",[T.required,T.pattern(/^DL-[A-Z]{3}-\d{6}$/)]],licenseType:["heavy",T.required],licenseExpiry:["",T.required],experience:["",[T.required,T.min(0),T.max(50)]],status:["available",T.required],address:["",[T.required,T.minLength(10)]],emergencyContact:["",[T.required,T.minLength(2)]],emergencyPhone:["",[T.required,T.pattern(/^\+966[5][0-9]{8}$/)]],dateOfBirth:["",T.required],hireDate:["",T.required],salary:["",[T.required,T.min(2e3),T.max(15e3)]],notes:[""]})}generateEmployeeId(){let e=`EMP-${(Math.floor(Math.random()*900)+100).toString().padStart(3,"0")}`;this.driverForm.patchValue({employeeId:e})}generateLicenseNumber(){let t=["RYD","JED","DAM","MED","TAF","ABH","HAL"],e=t[Math.floor(Math.random()*t.length)],i=Math.floor(Math.random()*9e5)+1e5,r=`DL-${e}-${i.toString().padStart(6,"0")}`;this.driverForm.patchValue({licenseNumber:r})}onLicenseTypeChange(){this.driverForm.patchValue({licenseNumber:""})}setLicenseExpiry(){let t=this.driverForm.get("hireDate")?.value;if(t){let e=new Date(t);e.setFullYear(e.getFullYear()+5);let i=e.toISOString().split("T")[0];this.driverForm.patchValue({licenseExpiry:i})}}calculateMinimumSalary(){let t=this.driverForm.get("experience")?.value;if(t!=null){let e=3e3;t>=10?e=5e3:t>=5?e=4e3:t>=2&&(e=3500),this.driverForm.get("salary")?.setValidators([T.required,T.min(e),T.max(15e3)]),this.driverForm.get("salary")?.updateValueAndValidity()}}onSubmit(){if(this.driverForm.valid){this.isSubmitting=!0;let t=k({},this.driverForm.value);setTimeout(()=>{console.log("New driver data:",t),alert("Driver added successfully!"),this.router.navigate(["/drivers"]),this.isSubmitting=!1},1500)}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.driverForm.controls).forEach(t=>{this.driverForm.get(t)?.markAsTouched()})}onCancel(){confirm("Are you sure you want to cancel? All unsaved changes will be lost.")&&this.router.navigate(["/drivers"])}get employeeId(){return this.driverForm.get("employeeId")}get firstName(){return this.driverForm.get("firstName")}get lastName(){return this.driverForm.get("lastName")}get phoneNumber(){return this.driverForm.get("phoneNumber")}get email(){return this.driverForm.get("email")}get licenseNumber(){return this.driverForm.get("licenseNumber")}get licenseType(){return this.driverForm.get("licenseType")}get licenseExpiry(){return this.driverForm.get("licenseExpiry")}get experience(){return this.driverForm.get("experience")}get status(){return this.driverForm.get("status")}get address(){return this.driverForm.get("address")}get emergencyContact(){return this.driverForm.get("emergencyContact")}get emergencyPhone(){return this.driverForm.get("emergencyPhone")}get dateOfBirth(){return this.driverForm.get("dateOfBirth")}get hireDate(){return this.driverForm.get("hireDate")}get salary(){return this.driverForm.get("salary")}get notes(){return this.driverForm.get("notes")}isFieldInvalid(t){let e=this.driverForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.driverForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${this.getFieldDisplayName(t)} is required`;if(e.errors.pattern)return`Invalid ${this.getFieldDisplayName(t)} format`;if(e.errors.email)return"Invalid email format";if(e.errors.min)return`${this.getFieldDisplayName(t)} is too low`;if(e.errors.max)return`${this.getFieldDisplayName(t)} is too high`;if(e.errors.minlength)return`${this.getFieldDisplayName(t)} is too short`;if(e.errors.maxlength)return`${this.getFieldDisplayName(t)} is too long`}return""}getFieldDisplayName(t){return{employeeId:"Employee ID",firstName:"First Name",lastName:"Last Name",phoneNumber:"Phone Number",email:"Email",licenseNumber:"License Number",licenseType:"License Type",licenseExpiry:"License Expiry",experience:"Experience",status:"Status",address:"Address",emergencyContact:"Emergency Contact",emergencyPhone:"Emergency Phone",dateOfBirth:"Date of Birth",hireDate:"Hire Date",salary:"Salary",notes:"Notes"}[t]||t}getMinSalary(){let t=this.driverForm.get("experience")?.value||0,e=3e3;return t>=10?e=5e3:t>=5?e=4e3:t>=2&&(e=3500),e}getSalaryRange(){return`${this.getMinSalary().toLocaleString()} - 15,000 SAR`}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-driver-add"]],decls:162,vars:61,consts:()=>{let t;t=$localize`:@@driver.form.employee-id-placeholder:EMP-001`;let e;e=$localize`:@@driver.form.first-name-placeholder:Ahmed`;let i;i=$localize`:@@driver.form.last-name-placeholder:Al-Rashid`;let r;r=$localize`:@@driver.form.phone-placeholder:+966501234567`;let s;s=$localize`:@@driver.form.email-placeholder:driver@relaybus.com`;let d;d=$localize`:@@driver.form.address-placeholder:Enter full address including district and city`;let u;u=$localize`:@@driver.form.license-number-placeholder:DL-RYD-123456`;let p;p=$localize`:@@driver.form.experience-placeholder:5`;let f;f=$localize`:@@driver.form.salary-placeholder:4500`;let b;b=$localize`:@@driver.form.emergency-contact-placeholder:Full name of emergency contact`;let D;D=$localize`:@@driver.form.emergency-phone-placeholder:+966501234568`;let S;S=$localize`:@@driver.form.notes-placeholder:Any additional information about this driver (certifications, special skills, preferences, etc.)`;let M;M=$localize`:@@driver.add.title: Add New Driver`;let R;R=$localize`:@@driver.add.subtitle:Register a new driver in your fleet`;let A;A=$localize`:@@driver.add.back-to-list: Back to Driver List`;let z;z=$localize`:@@driver.form.personal-info: Personal Information`;let U;U=$localize`:@@driver.form.employee-id:Employee ID *`;let ue;ue=$localize`:@@driver.form.employee-id-help:Auto-generated employee identifier`;let oe;oe=$localize`:@@driver.form.first-name:First Name *`;let re;re=$localize`:@@driver.form.last-name:Last Name *`;let ke;ke=$localize`:@@driver.form.date-of-birth:Date of Birth *`;let We;We=$localize`:@@driver.form.date-of-birth-help:Driver must be at least 18 years old`;let Ue;Ue=$localize`:@@driver.form.phone:Phone Number *`;let rt;rt=$localize`:@@driver.form.phone-help:Format: +966XXXXXXXXX`;let pt;pt=$localize`:@@driver.form.email:Email Address *`;let _e;_e=$localize`:@@driver.form.address:Address *`;let At;At=$localize`:@@driver.form.license-info: License Information`;let Nt;Nt=$localize`:@@driver.form.license-number:License Number *`;let kt;kt=$localize`:@@driver.form.generate:Generate`;let Vt;Vt=$localize`:@@driver.form.license-number-help:Format: DL-CCC-NNNNNN (City-Number)`;let Ft;Ft=$localize`:@@driver.form.license-type:License Type *`;let pe;pe=$localize`:@@driver.license.light:Light Vehicle License`;let mn;mn=$localize`:@@driver.license.heavy:Heavy Vehicle License`;let gn;gn=$localize`:@@driver.license.public:Public Transport License`;let fn;fn=$localize`:@@driver.form.license-expiry:License Expiry *`;let _n;_n=$localize`:@@driver.form.experience:Years of Experience *`;let hn;hn=$localize`:@@driver.form.experience-help:Years of professional driving experience`;let vn;vn=$localize`:@@driver.form.employment-info: Employment Information`;let xn;xn=$localize`:@@driver.form.hire-date:Hire Date *`;let Cn;Cn=$localize`:@@driver.form.status:Employment Status *`;let yn;yn=$localize`:@@driver.status.available:Available`;let bn;bn=$localize`:@@driver.status.on-duty:On Duty`;let En;En=$localize`:@@driver.status.on-leave:On Leave`;let Dn;Dn=$localize`:@@driver.status.inactive:Inactive`;let Mn;Mn=$localize`:@@driver.form.salary:Monthly Salary (SAR) *`;let Sn;Sn=$localize`:@@driver.form.salary-help:Recommended range:`;let In;In=$localize`:@@driver.form.emergency-contact: Emergency Contact`;let Pn;Pn=$localize`:@@driver.form.emergency-contact-name:Emergency Contact Name *`;let Tn;Tn=$localize`:@@driver.form.emergency-phone:Emergency Contact Phone *`;let Rn;Rn=$localize`:@@driver.form.emergency-phone-help:Format: +966XXXXXXXXX`;let On;On=$localize`:@@driver.form.additional-notes: Additional Notes`;let wn;wn=$localize`:@@driver.form.notes:Notes (Optional)`;let An;An=$localize`:@@driver.form.notes-help:Special qualifications, route preferences, or other relevant information`;let Nn;Nn=$localize`:@@common.cancel:Cancel`;let N;N=$localize`:@@driver.form.add-driver: Add Driver to Fleet`;let ko;return ko=$localize`:@@driver.form.adding: Adding Driver...`,[M,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,_e,At,Nt,kt,Vt,Ft,pe,mn,gn,fn,_n,hn,vn,xn,Cn,yn,bn,En,Dn,Mn,Sn,In,Pn,Tn,Rn,On,wn,An,Nn,N,ko,[1,"driver-add-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-container"],[1,"driver-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","employeeId"],["type","text","id","employeeId","formControlName","employeeId","placeholder",t,"readonly","",1,"form-control"],[1,"help-text"],["class","error-message",4,"ngIf"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder",e,1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder",i,1,"form-control"],["for","dateOfBirth"],["type","date","id","dateOfBirth","formControlName","dateOfBirth",1,"form-control",3,"min","max"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder",r,1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","placeholder",s,1,"form-control"],[1,"form-group","full-width"],["for","address"],["id","address","formControlName","address","rows","3","placeholder",d,1,"form-control","textarea"],["for","licenseNumber"],[1,"input-with-button"],["type","text","id","licenseNumber","formControlName","licenseNumber","placeholder",u,1,"form-control"],["type","button",1,"btn","btn-outline",3,"click"],["for","licenseType"],["id","licenseType","formControlName","licenseType",1,"form-control",3,"change"],["value","light"],["value","heavy"],["value","public"],["for","licenseExpiry"],["type","date","id","licenseExpiry","formControlName","licenseExpiry",1,"form-control",3,"min"],["for","experience"],["type","number","id","experience","formControlName","experience","min","0","max","50","placeholder",p,1,"form-control",3,"change"],["for","hireDate"],["type","date","id","hireDate","formControlName","hireDate",1,"form-control",3,"change","max"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","available"],["value","on-duty"],["value","on-leave"],["value","inactive"],["for","salary"],["type","number","id","salary","formControlName","salary","max","15000","placeholder",f,1,"form-control",3,"min"],["for","emergencyContact"],["type","text","id","emergencyContact","formControlName","emergencyContact","placeholder",b,1,"form-control"],["for","emergencyPhone"],["type","tel","id","emergencyPhone","formControlName","emergencyPhone","placeholder",D,1,"form-control"],["for","notes"],["id","notes","formControlName","notes","rows","4","placeholder",S,1,"form-control","textarea"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"]]},template:function(e,i){e&1&&(a(0,"div",44)(1,"div",45)(2,"div",46)(3,"h1"),E(4,0),o(),a(5,"p"),E(6,1),o()(),a(7,"div",47)(8,"button",48),h("click",function(){return i.onCancel()}),a(9,"span"),E(10,2),o()()()(),a(11,"div",49)(12,"form",50),h("ngSubmit",function(){return i.onSubmit()}),a(13,"div",51)(14,"h2"),E(15,3),o(),a(16,"div",52)(17,"div",53)(18,"label",54),E(19,4),o(),P(20,"input",55),a(21,"small",56),E(22,5),o(),v(23,s8,2,1,"div",57),o(),a(24,"div",53)(25,"label",58),E(26,6),o(),P(27,"input",59),v(28,l8,2,1,"div",57),o(),a(29,"div",53)(30,"label",60),E(31,7),o(),P(32,"input",61),v(33,c8,2,1,"div",57),o()(),a(34,"div",52)(35,"div",53)(36,"label",62),E(37,8),o(),P(38,"input",63),a(39,"small",56),E(40,9),o(),v(41,d8,2,1,"div",57),o(),a(42,"div",53)(43,"label",64),E(44,10),o(),P(45,"input",65),a(46,"small",56),E(47,11),o(),v(48,u8,2,1,"div",57),o(),a(49,"div",53)(50,"label",66),E(51,12),o(),P(52,"input",67),v(53,p8,2,1,"div",57),o()(),a(54,"div",52)(55,"div",68)(56,"label",69),E(57,13),o(),P(58,"textarea",70),v(59,m8,2,1,"div",57),o()()(),a(60,"div",51)(61,"h2"),E(62,14),o(),a(63,"div",52)(64,"div",53)(65,"label",71),E(66,15),o(),a(67,"div",72),P(68,"input",73),a(69,"button",74),h("click",function(){return i.generateLicenseNumber()}),a(70,"span"),E(71,16),o()()(),a(72,"small",56),E(73,17),o(),v(74,g8,2,1,"div",57),o(),a(75,"div",53)(76,"label",75),E(77,18),o(),a(78,"select",76),h("change",function(){return i.onLicenseTypeChange()}),a(79,"option",77),E(80,19),o(),a(81,"option",78),E(82,20),o(),a(83,"option",79),E(84,21),o()(),v(85,f8,2,1,"div",57),o(),a(86,"div",53)(87,"label",80),E(88,22),o(),P(89,"input",81),v(90,_8,2,1,"div",57),o()(),a(91,"div",52)(92,"div",53)(93,"label",82),E(94,23),o(),a(95,"input",83),h("change",function(){return i.calculateMinimumSalary()}),o(),a(96,"small",56),E(97,24),o(),v(98,h8,2,1,"div",57),o()()(),a(99,"div",51)(100,"h2"),E(101,25),o(),a(102,"div",52)(103,"div",53)(104,"label",84),E(105,26),o(),a(106,"input",85),h("change",function(){return i.setLicenseExpiry()}),o(),v(107,v8,2,1,"div",57),o(),a(108,"div",53)(109,"label",86),E(110,27),o(),a(111,"select",87)(112,"option",88),E(113,28),o(),a(114,"option",89),E(115,29),o(),a(116,"option",90),E(117,30),o(),a(118,"option",91),E(119,31),o()(),v(120,x8,2,1,"div",57),o(),a(121,"div",53)(122,"label",92),E(123,32),o(),P(124,"input",93),a(125,"small",56)(126,"span"),E(127,33),o(),l(128),o(),v(129,C8,2,1,"div",57),o()()(),a(130,"div",51)(131,"h2"),E(132,34),o(),a(133,"div",52)(134,"div",53)(135,"label",94),E(136,35),o(),P(137,"input",95),v(138,y8,2,1,"div",57),o(),a(139,"div",53)(140,"label",96),E(141,36),o(),P(142,"input",97),a(143,"small",56),E(144,37),o(),v(145,b8,2,1,"div",57),o()()(),a(146,"div",51)(147,"h2"),E(148,38),o(),a(149,"div",53)(150,"label",98),E(151,39),o(),P(152,"textarea",99),a(153,"small",56),E(154,40),o()()(),a(155,"div",100)(156,"button",101),h("click",function(){return i.onCancel()}),a(157,"span"),E(158,41),o()(),a(159,"button",102),v(160,E8,2,0,"span",103)(161,D8,2,0,"span",103),o()()()()()),e&2&&(c(12),m("formGroup",i.driverForm),c(8),I("error",i.isFieldInvalid("employeeId")),c(3),m("ngIf",i.isFieldInvalid("employeeId")),c(4),I("error",i.isFieldInvalid("firstName")),c(),m("ngIf",i.isFieldInvalid("firstName")),c(4),I("error",i.isFieldInvalid("lastName")),c(),m("ngIf",i.isFieldInvalid("lastName")),c(5),I("error",i.isFieldInvalid("dateOfBirth")),m("min",i.minBirthDate)("max",i.maxBirthDate),c(3),m("ngIf",i.isFieldInvalid("dateOfBirth")),c(4),I("error",i.isFieldInvalid("phoneNumber")),c(3),m("ngIf",i.isFieldInvalid("phoneNumber")),c(4),I("error",i.isFieldInvalid("email")),c(),m("ngIf",i.isFieldInvalid("email")),c(5),I("error",i.isFieldInvalid("address")),c(),m("ngIf",i.isFieldInvalid("address")),c(9),I("error",i.isFieldInvalid("licenseNumber")),c(6),m("ngIf",i.isFieldInvalid("licenseNumber")),c(4),I("error",i.isFieldInvalid("licenseType")),c(7),m("ngIf",i.isFieldInvalid("licenseType")),c(4),I("error",i.isFieldInvalid("licenseExpiry")),m("min",i.minDate),c(),m("ngIf",i.isFieldInvalid("licenseExpiry")),c(5),I("error",i.isFieldInvalid("experience")),c(3),m("ngIf",i.isFieldInvalid("experience")),c(8),I("error",i.isFieldInvalid("hireDate")),m("max",i.minDate),c(),m("ngIf",i.isFieldInvalid("hireDate")),c(4),I("error",i.isFieldInvalid("status")),c(9),m("ngIf",i.isFieldInvalid("status")),c(4),I("error",i.isFieldInvalid("salary")),m("min",i.getMinSalary()),c(4),x(" ",i.getSalaryRange()," "),c(),m("ngIf",i.isFieldInvalid("salary")),c(8),I("error",i.isFieldInvalid("emergencyContact")),c(),m("ngIf",i.isFieldInvalid("emergencyContact")),c(4),I("error",i.isFieldInvalid("emergencyPhone")),c(3),m("ngIf",i.isFieldInvalid("emergencyPhone")),c(11),m("disabled",i.isSubmitting),c(3),I("loading",i.isSubmitting),m("disabled",i.driverForm.invalid||i.isSubmitting),c(),m("ngIf",!i.isSubmitting),c(),m("ngIf",i.isSubmitting))},dependencies:[K,ee,Mt,ct,Re,Oe,Se,vt,Pe,Ie,lt,xt,wt,Dt,Ot],styles:[`.driver-add-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;border-color:#cbd5e0}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0;padding:8px 16px;font-size:12px}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn.loading[_ngcontent-%COMP%]{position:relative}.form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.driver-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000000d}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:20px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease;outline:none;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.input-with-button[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.input-with-button[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.input-with-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{align-self:stretch;white-space:nowrap}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.form-control[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>') no-repeat center center;background-size:16px 16px;cursor:pointer}[dir=rtl][_ngcontent-%COMP%]   .driver-add-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .input-with-button[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 768px){.driver-add-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.input-with-button[_ngcontent-%COMP%]{flex-direction:column}.input-with-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{align-self:stretch}}@media (max-width: 480px){.driver-add-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-section[_ngcontent-%COMP%]{padding:15px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}}.form-group[_ngcontent-%COMP%]:has(.form-control.error)   label[_ngcontent-%COMP%]{color:#e53e3e}.form-group[_ngcontent-%COMP%]:has(.form-control:focus)   label[_ngcontent-%COMP%]{color:#667eea}.form-section[_ngcontent-%COMP%]:nth-child(1){border-left:4px solid #4299e1}.form-section[_ngcontent-%COMP%]:nth-child(2){border-left:4px solid #48bb78}.form-section[_ngcontent-%COMP%]:nth-child(3){border-left:4px solid #ed8936}.form-section[_ngcontent-%COMP%]:nth-child(4){border-left:4px solid #e53e3e}.form-section[_ngcontent-%COMP%]:nth-child(5){border-left:4px solid #9f7aea}.form-control[_ngcontent-%COMP%]:focus{transform:translateY(-1px);box-shadow:0 4px 12px #667eea26}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 8px #0000001a}.form-progress[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;padding:10px 0;border-bottom:1px solid #e2e8f0;margin-bottom:20px;z-index:10}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .3s ease}`]})};function M8(n,t){if(n&1&&P(0,"img",136),n&2){let e=g(2);m("src",e.driver.profileImage,qp)("alt",e.getFullName())}}function S8(n,t){n&1&&(a(0,"span",137),l(1,"\u{1F468}\u200D\u2708\uFE0F"),o())}function I8(n,t){n&1&&(a(0,"span"),E(1,19),o())}function P8(n,t){n&1&&(a(0,"span"),E(1,20),o())}function T8(n,t){n&1&&(a(0,"span"),E(1,21),o())}function R8(n,t){n&1&&(a(0,"span"),E(1,22),o())}function O8(n,t){n&1&&(a(0,"span"),E(1,23),o())}function w8(n,t){n&1&&(a(0,"span"),E(1,24),o())}function A8(n,t){n&1&&(a(0,"span"),E(1,25),o())}function N8(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g(3);c(),x(" ",e.driver.currentAssignment," ")}}function k8(n,t){n&1&&(a(0,"span",149),E(1,50),o())}function V8(n,t){n&1&&(a(0,"span"),E(1,51),o())}function F8(n,t){n&1&&(a(0,"span"),E(1,52),o())}function L8(n,t){n&1&&(a(0,"span"),E(1,53),o())}function $8(n,t){n&1&&(a(0,"span",150),l(1," \u26A0\uFE0F "),a(2,"span"),E(3,54),o()())}function B8(n,t){if(n&1&&(a(0,"span",151),l(1," \u{1F514} "),a(2,"span"),E(3,55),o(),l(4),a(5,"span"),E(6,56),o()()),n&2){let e=g(3);c(4),x(" ",e.getDaysUntilLicenseExpiry()," ")}}function z8(n,t){if(n&1&&(a(0,"div",152)(1,"h3"),E(2,57),o(),a(3,"p",153),l(4),o()()),n&2){let e=g(3);c(4),_(e.driver.notes)}}function j8(n,t){if(n&1&&(a(0,"div",138)(1,"div",139)(2,"div",140)(3,"h3"),E(4,26),o(),a(5,"div",141)(6,"div",142)(7,"span",143),E(8,27),o(),a(9,"span",144),l(10),o()(),a(11,"div",142)(12,"span",143),E(13,28),o(),a(14,"span",144),l(15),j(16,"date"),o()(),a(17,"div",142)(18,"span",143),E(19,29),o(),a(20,"span",144),l(21),a(22,"span"),E(23,30),o()()(),a(24,"div",142)(25,"span",143),E(26,31),o(),a(27,"span",144),l(28),o()(),a(29,"div",142)(30,"span",143),E(31,32),o(),a(32,"span",144),l(33),o()(),a(34,"div",142)(35,"span",143),E(36,33),o(),a(37,"span",144),l(38),o()()()(),a(39,"div",140)(40,"h3"),E(41,34),o(),a(42,"div",141)(43,"div",142)(44,"span",143),E(45,35),o(),a(46,"span",144),l(47),o()(),a(48,"div",142)(49,"span",143),E(50,36),o(),a(51,"span",144),l(52),j(53,"date"),o()(),a(54,"div",142)(55,"span",143),E(56,37),o(),a(57,"span",144),l(58),a(59,"span"),E(60,38),o()()(),a(61,"div",142)(62,"span",143),E(63,39),o(),a(64,"span",144),l(65),a(66,"span"),E(67,40),o()()(),a(68,"div",142)(69,"span",143),E(70,41),o(),a(71,"span",144),l(72),o()(),a(73,"div",142)(74,"span",143),E(75,42),o(),a(76,"span",144),v(77,N8,2,1,"span",145)(78,k8,2,0,"ng-template",null,1,Bi),o()()()(),a(80,"div",140)(81,"h3"),E(82,43),o(),a(83,"div",141)(84,"div",142)(85,"span",143),E(86,44),o(),a(87,"span",144),l(88),o()(),a(89,"div",142)(90,"span",143),E(91,45),o(),a(92,"span",144)(93,"span",114),v(94,V8,2,0,"span",115)(95,F8,2,0,"span",115)(96,L8,2,0,"span",115),o()()(),a(97,"div",142)(98,"span",143),E(99,46),o(),a(100,"span",144)(101,"span"),l(102),j(103,"date"),v(104,$8,4,0,"span",146)(105,B8,7,1,"span",147),o()()()()(),a(106,"div",140)(107,"h3"),E(108,47),o(),a(109,"div",141)(110,"div",142)(111,"span",143),E(112,48),o(),a(113,"span",144),l(114),o()(),a(115,"div",142)(116,"span",143),E(117,49),o(),a(118,"span",144),l(119),o()()()()(),v(120,z8,5,1,"div",148),o()),n&2){let e=ai(79),i=g(2);c(10),_(i.getFullName()),c(5),_(ie(16,28,i.driver.dateOfBirth,"mediumDate")),c(6),x("",i.getDriverAge()," "),c(7),_(i.driver.phoneNumber),c(5),_(i.driver.email),c(5),_(i.driver.address),c(9),_(i.driver.employeeId),c(5),_(ie(53,31,i.driver.hireDate,"mediumDate")),c(6),x("",i.getYearsOfService()," "),c(7),x("",i.driver.experience," "),c(7),_(i.formatCurrency(i.driver.salary)),c(5),m("ngIf",i.driver.currentAssignment)("ngIfElse",e),c(11),_(i.driver.licenseNumber),c(5),m("ngSwitch",i.driver.licenseType),c(),m("ngSwitchCase","light"),c(),m("ngSwitchCase","heavy"),c(),m("ngSwitchCase","public"),c(5),I("expiring",i.isLicenseExpiringSoon())("expired",i.isLicenseExpired()),c(),x(" ",ie(103,34,i.driver.licenseExpiry,"mediumDate")," "),c(2),m("ngIf",i.isLicenseExpired()),c(),m("ngIf",i.isLicenseExpiringSoon()&&!i.isLicenseExpired()),c(9),_(i.driver.emergencyContact),c(5),_(i.driver.emergencyPhone),c(),m("ngIf",i.driver.notes)}}function U8(n,t){if(n&1&&(a(0,"div",155)(1,"div",156)(2,"div",157)(3,"h3"),E(4,58),o(),a(5,"div",158)(6,"span",159),E(7,59),o(),a(8,"span",160),l(9),o()(),a(10,"div",158)(11,"span",159),E(12,60),o(),a(13,"span",160),l(14),o()()(),a(15,"div",157)(16,"h3"),E(17,61),o(),a(18,"div",158)(19,"span",159),E(20,62),o(),a(21,"span",160),l(22),o()(),a(23,"div",158)(24,"span",159),E(25,63),o(),a(26,"span",160),l(27),o()()(),a(28,"div",157)(29,"h3"),E(30,64),o(),a(31,"div",158)(32,"span",159),E(33,65),o(),a(34,"span",160),l(35),o()(),a(36,"div",158)(37,"span",159),E(38,66),o(),a(39,"span",160),l(40),o()()(),a(41,"div",157)(42,"h3"),E(43,67),o(),a(44,"div",158)(45,"span",159),E(46,68),o(),a(47,"span",160),l(48),o()(),a(49,"div",158)(50,"span",159),E(51,69),o(),a(52,"span",160),l(53),o()()()()()),n&2){let e=g(3);c(9),x("",e.performanceMetrics.onTimePercentage,"%"),c(5),_(e.performanceMetrics.accidentFree),c(8),Y("",e.performanceMetrics.averageRating,"/5 ",e.getRatingStars(e.performanceMetrics.averageRating),""),c(5),_(e.performanceMetrics.customerComplaints),c(8),x("",e.performanceMetrics.totalDistanceDriven.toLocaleString()," km"),c(5),_(e.performanceMetrics.thisMonthTrips),c(8),x("",e.performanceMetrics.fuelEfficiency," km/L"),c(5),_(e.formatCurrency(e.performanceMetrics.thisMonthRevenue))}}function G8(n,t){if(n&1&&(a(0,"div",138),v(1,U8,54,9,"div",154),o()),n&2){let e=g(2);c(),m("ngIf",e.performanceMetrics)}}function H8(n,t){n&1&&(a(0,"span"),E(1,76),o())}function X8(n,t){n&1&&(a(0,"span"),E(1,77),o())}function W8(n,t){if(n&1&&(a(0,"span",173),l(1),a(2,"span"),E(3,78),o()()),n&2){let e=g().$implicit;c(),x("\u23F1\uFE0F ",e.duration," ")}}function q8(n,t){if(n&1&&(a(0,"span",173),l(1),o()),n&2){let e=g().$implicit;c(),x("\u2B50 ",e.rating,"/5")}}function Y8(n,t){if(n&1){let e=O();a(0,"div",166)(1,"div",167)(2,"div",168)(3,"h4"),l(4),o(),a(5,"p",169),l(6),j(7,"date"),o()(),a(8,"div",170)(9,"span",113)(10,"span",114),v(11,H8,2,0,"span",115)(12,X8,2,0,"span",115),o()()()(),a(13,"div",171)(14,"div",172)(15,"span",173),l(16),o(),a(17,"span",173),l(18),a(19,"span"),E(20,74),o()(),a(21,"span",173),l(22),o(),v(23,W8,4,1,"span",174)(24,q8,2,1,"span",174),o(),a(25,"button",175),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.viewTrip(r.id))}),l(26," \u{1F441}\uFE0F "),a(27,"span"),E(28,75),o()()()()}if(n&2){let e=t.$implicit;q(e.status),c(4),_(e.route),c(2),_(ie(7,14,e.date,"fullDate")),c(3),q(e.status),c(),m("ngSwitch",e.status),c(),m("ngSwitchCase","completed"),c(),m("ngSwitchCase","cancelled"),c(4),x("\u{1F68C} ",e.busNumber,""),c(2),x("\u{1F465} ",e.passengers," "),c(4),x("\u{1F6E3}\uFE0F ",e.distance," km"),c(),m("ngIf",e.duration>0),c(),m("ngIf",e.rating)}}function Z8(n,t){if(n&1&&(a(0,"div",138)(1,"div",161)(2,"div",162)(3,"h3"),E(4,70),o(),a(5,"div",163)(6,"span"),l(7),a(8,"span"),E(9,71),o()(),a(10,"span"),l(11),a(12,"span"),E(13,72),o()(),a(14,"span"),l(15),a(16,"span"),E(17,73),o()()()(),a(18,"div",164),v(19,Y8,29,17,"div",165),o()()()),n&2){let e=g(2);c(7),x("",e.getCompletedTripsCount()," "),c(4),x("",e.getTotalDistance().toLocaleString()," km "),c(4),x("",e.getAveragePassengers()," "),c(4),m("ngForOf",e.tripHistory)}}function J8(n,t){n&1&&(a(0,"span",185),l(1," \u26A0\uFE0F "),a(2,"span"),E(3,95),o()())}function K8(n,t){n&1&&(a(0,"span",185),l(1," \u{1F514} "),a(2,"span"),E(3,96),o()())}function Q8(n,t){n&1&&(a(0,"span",185),l(1," \u2705 "),a(2,"span"),E(3,97),o()())}function e3(n,t){if(n&1&&(a(0,"div",138)(1,"div",176)(2,"h3"),E(3,79),o(),a(4,"div",177)(5,"div",178)(6,"div",179)(7,"span",180),l(8,"\u{1F4C4}"),o(),a(9,"h4"),E(10,80),o()(),a(11,"div",181)(12,"div",182),v(13,J8,4,0,"span",183)(14,K8,4,0,"span",183)(15,Q8,4,0,"span",183),o(),a(16,"p",184)(17,"span"),E(18,81),o(),l(19),P(20,"br"),a(21,"span"),E(22,82),o(),l(23),j(24,"date"),o()()(),a(25,"div",178)(26,"div",179)(27,"span",180),l(28,"\u{1F194}"),o(),a(29,"h4"),E(30,83),o()(),a(31,"div",181)(32,"div",182)(33,"span",185),l(34,"\u2705 "),a(35,"span"),E(36,84),o()()(),a(37,"p",184)(38,"span"),E(39,85),o()()()(),a(40,"div",178)(41,"div",179)(42,"span",180),l(43,"\u{1F3E5}"),o(),a(44,"h4"),E(45,86),o()(),a(46,"div",181)(47,"div",182)(48,"span",185),l(49,"\u2705 "),a(50,"span"),E(51,87),o()()(),a(52,"p",184)(53,"span"),E(54,88),o(),l(55),j(56,"date"),P(57,"br"),a(58,"span"),E(59,89),o(),a(60,"span"),E(61,90),o()()()(),a(62,"div",178)(63,"div",179)(64,"span",180),l(65,"\u{1F4BC}"),o(),a(66,"h4"),E(67,91),o()(),a(68,"div",181)(69,"div",182)(70,"span",185),l(71,"\u2705 "),a(72,"span"),E(73,92),o()()(),a(74,"p",184)(75,"span"),E(76,93),o(),l(77),j(78,"date"),P(79,"br"),a(80,"span"),E(81,94),o(),l(82),o()()()()()()),n&2){let e=g(2);c(12),I("expiring",e.isLicenseExpiringSoon())("expired",e.isLicenseExpired()),c(),m("ngIf",e.isLicenseExpired()),c(),m("ngIf",e.isLicenseExpiringSoon()&&!e.isLicenseExpired()),c(),m("ngIf",!e.isLicenseExpiringSoon()&&!e.isLicenseExpired()),c(4),x(" ",e.driver.licenseNumber,""),c(4),x(" ",ie(24,12,e.driver.licenseExpiry,"mediumDate")," "),c(32),x(" ",ie(56,15,e.driver.hireDate,"mediumDate"),""),c(22),x(" ",ie(78,18,e.driver.hireDate,"mediumDate"),""),c(5),x(" ",e.formatCurrency(e.driver.salary)," ")}}function t3(n,t){if(n&1){let e=O();a(0,"div",105)(1,"div",106)(2,"div",107)(3,"div",108)(4,"div",109),v(5,M8,1,2,"img",110)(6,S8,2,0,"ng-template",null,0,Bi),o(),a(8,"div",111)(9,"h1"),l(10),o(),a(11,"p"),l(12),a(13,"span"),E(14,2),o(),l(15),a(16,"span"),E(17,3),o()()()(),a(18,"div",112)(19,"span",113)(20,"span",114),v(21,I8,2,0,"span",115)(22,P8,2,0,"span",115)(23,T8,2,0,"span",115)(24,R8,2,0,"span",115),o()(),a(25,"span",116)(26,"span",114),v(27,O8,2,0,"span",115)(28,w8,2,0,"span",115)(29,A8,2,0,"span",115),o()()()(),a(30,"div",117)(31,"button",118),h("click",function(){C(e);let r=g();return y(r.goBack())}),a(32,"span"),E(33,4),o()(),a(34,"button",119),h("click",function(){C(e);let r=g();return y(r.editDriver())}),a(35,"span"),E(36,5),o()(),a(37,"div",120)(38,"button",121),l(39,"\u2699\uFE0F "),a(40,"span"),E(41,6),o()(),a(42,"div",122)(43,"a",123),h("click",function(){C(e);let r=g();return y(r.assignTrip())}),E(44,7),o(),a(45,"a",123),h("click",function(){C(e);let r=g();return y(r.changeStatus())}),E(46,8),o(),a(47,"a",123),h("click",function(){C(e);let r=g();return y(r.sendMessage())}),E(48,9),o(),P(49,"div",124),a(50,"a",125),h("click",function(){C(e);let r=g();return y(r.deleteDriver())}),E(51,10),o()()()()(),a(52,"div",126)(53,"div",127)(54,"span",128),l(55,"\u{1F6E3}\uFE0F"),o(),a(56,"div",129)(57,"span",130),l(58),o(),a(59,"span",131),E(60,11),o()()(),a(61,"div",127)(62,"span",128),l(63,"\u{1F68C}"),o(),a(64,"div",129)(65,"span",130),l(66),o(),a(67,"span",131),E(68,12),o()()(),a(69,"div",127)(70,"span",128),l(71,"\u2B50"),o(),a(72,"div",129)(73,"span",130),l(74),o(),a(75,"span",131),E(76,13),o()()(),a(77,"div",127)(78,"span",128),l(79,"\u{1F4B0}"),o(),a(80,"div",129)(81,"span",130),l(82),o(),a(83,"span",131),E(84,14),o()()()(),a(85,"div",132)(86,"button",133),h("click",function(){C(e);let r=g();return y(r.setActiveTab("overview"))}),E(87,15),o(),a(88,"button",133),h("click",function(){C(e);let r=g();return y(r.setActiveTab("performance"))}),E(89,16),o(),a(90,"button",133),h("click",function(){C(e);let r=g();return y(r.setActiveTab("trips"))}),E(91,17),o(),a(92,"button",133),h("click",function(){C(e);let r=g();return y(r.setActiveTab("documents"))}),E(93,18),o()(),a(94,"div",134),v(95,j8,121,37,"div",135)(96,G8,2,1,"div",135)(97,Z8,20,4,"div",135)(98,e3,83,21,"div",135),o()()}if(n&2){let e=ai(7),i=g();c(5),m("ngIf",i.driver.profileImage)("ngIfElse",e),c(5),_(i.getFullName()),c(2),x("",i.driver.employeeId," \u2022 "),c(3),x(" ",i.getDriverAge()," \u2022 "),c(2),_a(i.driver.experience),Xl(17),c(2),q(i.getStatusClass(i.driver.status)),c(),m("ngSwitch",i.driver.status),c(),m("ngSwitchCase","available"),c(),m("ngSwitchCase","on-duty"),c(),m("ngSwitchCase","on-leave"),c(),m("ngSwitchCase","inactive"),c(),q(i.getLicenseTypeClass(i.driver.licenseType)),c(),m("ngSwitch",i.driver.licenseType),c(),m("ngSwitchCase","light"),c(),m("ngSwitchCase","heavy"),c(),m("ngSwitchCase","public"),c(29),x("",i.getTotalDistance().toLocaleString()," km"),c(8),_(i.getCompletedTripsCount()),c(8),x("",i.driver.rating,"/5"),c(8),_(i.formatCurrency(i.driver.salary)),c(4),I("active",i.activeTab==="overview"),c(2),I("active",i.activeTab==="performance"),c(2),I("active",i.activeTab==="trips"),c(2),I("active",i.activeTab==="documents"),c(3),m("ngIf",i.activeTab==="overview"),c(),m("ngIf",i.activeTab==="performance"),c(),m("ngIf",i.activeTab==="trips"),c(),m("ngIf",i.activeTab==="documents")}}function n3(n,t){n&1&&(a(0,"div",186),P(1,"div",187),a(2,"p"),E(3,98),o()())}function i3(n,t){if(n&1){let e=O();a(0,"div",188)(1,"div",189),l(2,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(3,"h2"),E(4,99),o(),a(5,"p"),E(6,100),o(),a(7,"button",119),h("click",function(){C(e);let r=g();return y(r.goBack())}),a(8,"span"),E(9,101),o()()()}}var Cd=class n{constructor(t,e){this.router=t;this.route=e}driver=null;driverId="";isLoading=!0;activeTab="overview";tripHistory=[];performanceMetrics=null;ngOnInit(){this.driverId=this.route.snapshot.params.id,this.loadDriverDetails()}loadDriverDetails(){setTimeout(()=>{this.driver=this.getMockDriverData(this.driverId),this.loadTripHistory(),this.loadPerformanceMetrics(),this.isLoading=!1},500)}getMockDriverData(t){let e={D001:{id:"D001",employeeId:"EMP-001",firstName:"Ahmed",lastName:"Al-Rashid",phoneNumber:"+966501234567",email:"ahmed.rashid@relaybus.com",licenseNumber:"DL-RYD-001234",licenseType:"heavy",licenseExpiry:new Date("2025-12-31"),experience:8,status:"on-duty",currentAssignment:"RB-IC-001 (Riyadh \u2192 Jeddah)",address:"Al-Malaz District, Riyadh",emergencyContact:"Fatima Al-Rashid",emergencyPhone:"+966501234568",dateOfBirth:new Date("1985-03-15"),hireDate:new Date("2020-01-15"),salary:4500,rating:4.8,totalTrips:342,notes:"Excellent safety record, preferred for long-distance routes",profileImage:"assets/images/driver-placeholder.jpg"}};return e[t]||e.D001}loadTripHistory(){this.tripHistory=[{id:"T001",date:new Date("2025-01-24"),route:"Riyadh \u2192 Jeddah",busNumber:"RB-IC-001",passengers:42,distance:950,status:"completed",duration:10.5,rating:4.9},{id:"T002",date:new Date("2025-01-22"),route:"Jeddah \u2192 Riyadh",busNumber:"RB-IC-001",passengers:38,distance:950,status:"completed",duration:10.2,rating:4.7},{id:"T003",date:new Date("2025-01-20"),route:"Riyadh \u2192 Dammam",busNumber:"RB-IC-003",passengers:35,distance:400,status:"completed",duration:4.5,rating:4.8},{id:"T004",date:new Date("2025-01-18"),route:"Riyadh \u2192 Jeddah",busNumber:"RB-IC-001",passengers:0,distance:0,status:"cancelled",duration:0}]}loadPerformanceMetrics(){this.performanceMetrics={onTimePercentage:96.5,averageRating:4.8,totalDistanceDriven:125e3,fuelEfficiency:8.2,accidentFree:1247,customerComplaints:2,thisMonthTrips:24,thisMonthRevenue:18600}}setActiveTab(t){this.activeTab=t}getStatusClass(t){switch(t){case"available":return"status-available";case"on-duty":return"status-on-duty";case"on-leave":return"status-on-leave";case"inactive":return"status-inactive";default:return""}}getLicenseTypeClass(t){switch(t){case"light":return"license-light";case"heavy":return"license-heavy";case"public":return"license-public";default:return""}}isLicenseExpiringSoon(){if(!this.driver)return!1;let t=new Date,e=new Date(this.driver.licenseExpiry),i=Math.ceil((e.getTime()-t.getTime())/(1e3*3600*24));return i<=90&&i>0}isLicenseExpired(){if(!this.driver)return!1;let t=new Date,e=new Date(this.driver.licenseExpiry);return t>e}getDaysUntilLicenseExpiry(){if(!this.driver)return 0;let t=new Date,e=new Date(this.driver.licenseExpiry);return Math.ceil((e.getTime()-t.getTime())/(1e3*3600*24))}getDriverAge(){if(!this.driver)return 0;let t=new Date,e=new Date(this.driver.dateOfBirth);return Math.floor((t.getTime()-e.getTime())/(1e3*3600*24*365.25))}getYearsOfService(){if(!this.driver)return 0;let t=new Date,e=new Date(this.driver.hireDate);return Math.floor((t.getTime()-e.getTime())/(1e3*3600*24*365.25))}getFullName(){return this.driver?`${this.driver.firstName} ${this.driver.lastName}`:""}getRatingStars(t){let e=Math.floor(t),i=t%1>=.5,r="\u2605".repeat(e);return i&&(r+="\u2606"),r}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(t)}getCompletedTripsCount(){return this.tripHistory.filter(t=>t.status==="completed").length}getTotalDistance(){return this.tripHistory.filter(t=>t.status==="completed").reduce((t,e)=>t+e.distance,0)}getAveragePassengers(){let t=this.tripHistory.filter(i=>i.status==="completed");if(t.length===0)return 0;let e=t.reduce((i,r)=>i+r.passengers,0);return Math.round(e/t.length)}editDriver(){this.router.navigate(["/drivers",this.driverId,"edit"])}deleteDriver(){confirm(`Are you sure you want to delete driver ${this.getFullName()}?`)&&(alert("Driver deleted successfully!"),this.router.navigate(["/drivers"]))}goBack(){this.router.navigate(["/drivers"])}assignTrip(){let t=["Riyadh \u2192 Jeddah (Tomorrow 6:00 AM)","Dammam \u2192 Riyadh (Tomorrow 2:00 PM)","Riyadh \u2192 Makkah (Tomorrow 8:00 PM)"],e=t.map((r,s)=>`${s+1}. ${r}`).join(`
`),i=prompt(`Available Trips:
${e}

Enter number (1-${t.length}):`);if(i&&!isNaN(Number(i))){let r=Number(i)-1;r>=0&&r<t.length&&this.driver&&(this.driver.status="on-duty",this.driver.currentAssignment=t[r],alert(`\u2705 Trip assigned successfully!

Trip: ${t[r]}
Driver: ${this.getFullName()}

Driver has been notified.`))}}changeStatus(){let t=[{value:"available",label:"Available"},{value:"on-duty",label:"On Duty"},{value:"on-leave",label:"On Leave"},{value:"inactive",label:"Inactive"}],e=t.map((r,s)=>`${s+1}. ${r.label}`).join(`
`),i=prompt(`Change Driver Status:
${e}

Enter number (1-${t.length}):`);if(i&&!isNaN(Number(i))){let r=Number(i)-1;if(r>=0&&r<t.length){let s=t[r];this.driver&&confirm(`Change status to ${s.label}?`)&&(this.driver.status=s.value,s.value!=="on-duty"&&(this.driver.currentAssignment=void 0),alert(`\u2705 Driver status changed to ${s.label}`))}}}sendMessage(){let t=["Trip Assignment Notification","Schedule Change Alert","Performance Feedback","General Message"],e=t.map((r,s)=>`${s+1}. ${r}`).join(`
`),i=prompt(`Message Type:
${e}

Enter number (1-${t.length}):`);if(i&&!isNaN(Number(i))){let r=Number(i)-1;if(r>=0&&r<t.length){let s=prompt("Enter your message:");s&&alert(`\u2705 Message sent to ${this.getFullName()}!

Type: ${t[r]}
Message: ${s}

\u{1F4F1} SMS and email notification sent.`)}}}viewTrip(t){let e=this.tripHistory.find(i=>i.id===t);if(e){let i=`
\u{1F68C} Trip Details: ${t}

\u{1F4CD} Route: ${e.route}
\u{1F4C5} Date: ${e.date.toLocaleDateString()}
\u{1F68C} Bus: ${e.busNumber}
\u{1F465} Passengers: ${e.passengers}
\u{1F6E3}\uFE0F Distance: ${e.distance} km
\u23F1\uFE0F Duration: ${e.duration} hours
\u2705 Status: ${e.status}
${e.rating?`\u2B50 Rating: ${e.rating}/5`:""}

${e.status==="completed"?"\u2705 Trip completed successfully":"\u274C Trip was cancelled"}
      `;alert(i)}}static \u0275fac=function(e){return new(e||n)(w(ne),w(Te))};static \u0275cmp=J({type:n,selectors:[["app-driver-detail"]],decls:3,vars:3,consts:()=>{let t;t=$localize`:@@driver.detail.age:Age`;let e;e=$localize`:@@driver.detail.experience:${"\uFFFD0\uFFFD"}:INTERPOLATION: years experience`;let i;i=$localize`:@@driver.detail.back-to-list: Back to List`;let r;r=$localize`:@@driver.detail.edit: Edit Driver`;let s;s=$localize`:@@common.actions:Actions`;let d;d=$localize`:@@driver.detail.assign-trip: Assign Trip`;let u;u=$localize`:@@driver.detail.change-status: Change Status`;let p;p=$localize`:@@driver.detail.send-message: Send Message`;let f;f=$localize`:@@driver.detail.delete: Delete Driver`;let b;b=$localize`:@@driver.detail.total-distance:Total Distance`;let D;D=$localize`:@@driver.detail.completed-trips:Completed Trips`;let S;S=$localize`:@@driver.detail.rating:Average Rating`;let M;M=$localize`:@@driver.detail.monthly-salary:Monthly Salary`;let R;R=$localize`:@@driver.detail.tab.overview:  Overview `;let A;A=$localize`:@@driver.detail.tab.performance:  Performance `;let z;z=$localize`:@@driver.detail.tab.trips:  Trip History `;let U;U=$localize`:@@driver.detail.tab.documents:  Documents `;let ue;ue=$localize`:@@driver.status.available:Available`;let oe;oe=$localize`:@@driver.status.on-duty:On Duty`;let re;re=$localize`:@@driver.status.on-leave:On Leave`;let ke;ke=$localize`:@@driver.status.inactive:Inactive`;let We;We=$localize`:@@driver.license.light:Light`;let Ue;Ue=$localize`:@@driver.license.heavy:Heavy`;let rt;rt=$localize`:@@driver.license.public:Public`;let pt;pt=$localize`:@@driver.detail.personal-info: Personal Information`;let _e;_e=$localize`:@@driver.detail.full-name:Full Name:`;let At;At=$localize`:@@driver.detail.date-of-birth:Date of Birth:`;let Nt;Nt=$localize`:@@driver.detail.age:Age:`;let kt;kt=$localize`:@@common.years:years`;let Vt;Vt=$localize`:@@driver.detail.phone:Phone:`;let Ft;Ft=$localize`:@@driver.detail.email:Email:`;let pe;pe=$localize`:@@driver.detail.address:Address:`;let mn;mn=$localize`:@@driver.detail.employment-info: Employment Information`;let gn;gn=$localize`:@@driver.detail.employee-id:Employee ID:`;let fn;fn=$localize`:@@driver.detail.hire-date:Hire Date:`;let _n;_n=$localize`:@@driver.detail.years-of-service:Years of Service:`;let hn;hn=$localize`:@@common.years:years`;let vn;vn=$localize`:@@driver.detail.experience:Experience:`;let xn;xn=$localize`:@@common.years:years`;let Cn;Cn=$localize`:@@driver.detail.salary:Monthly Salary:`;let yn;yn=$localize`:@@driver.detail.current-assignment:Current Assignment:`;let bn;bn=$localize`:@@driver.detail.license-info: License Information`;let En;En=$localize`:@@driver.detail.license-number:License Number:`;let Dn;Dn=$localize`:@@driver.detail.license-type:License Type:`;let Mn;Mn=$localize`:@@driver.detail.license-expiry:License Expiry:`;let Sn;Sn=$localize`:@@driver.detail.emergency-contact: Emergency Contact`;let In;In=$localize`:@@driver.detail.contact-name:Contact Name:`;let Pn;Pn=$localize`:@@driver.detail.contact-phone:Contact Phone:`;let Tn;Tn=$localize`:@@driver.detail.no-assignment:Not assigned`;let Rn;Rn=$localize`:@@driver.license.light:Light Vehicle`;let On;On=$localize`:@@driver.license.heavy:Heavy Vehicle`;let wn;wn=$localize`:@@driver.license.public:Public Transport`;let An;An=$localize`:@@driver.license.expired:EXPIRED`;let Nn;Nn=$localize`:@@driver.license.expires-in:Expires in`;let N;N=$localize`:@@common.days:days`;let ko;ko=$localize`:@@driver.detail.notes: Additional Notes`;let Z;Z=$localize`:@@driver.performance.reliability: Reliability`;let Ng;Ng=$localize`:@@driver.performance.on-time:On-Time Performance:`;let kg;kg=$localize`:@@driver.performance.accident-free:Accident-Free Days:`;let Vg;Vg=$localize`:@@driver.performance.customer-satisfaction: Customer Satisfaction`;let Fg;Fg=$localize`:@@driver.performance.average-rating:Average Rating:`;let Lg;Lg=$localize`:@@driver.performance.complaints:Customer Complaints:`;let $g;$g=$localize`:@@driver.performance.productivity: Productivity`;let Bg;Bg=$localize`:@@driver.performance.total-distance:Total Distance:`;let zg;zg=$localize`:@@driver.performance.this-month-trips:This Month Trips:`;let jg;jg=$localize`:@@driver.performance.efficiency: Efficiency`;let Ug;Ug=$localize`:@@driver.performance.fuel-efficiency:Fuel Efficiency:`;let Gg;Gg=$localize`:@@driver.performance.this-month-revenue:This Month Revenue:`;let Hg;Hg=$localize`:@@driver.detail.recent-trips: Recent Trip History`;let Xg;Xg=$localize`:@@driver.detail.completed-trips:completed trips`;let Wg;Wg=$localize`:@@driver.detail.total-driven:total driven`;let qg;qg=$localize`:@@driver.detail.avg-passengers:avg passengers`;let Yg;Yg=$localize`:@@common.passengers:passengers`;let Zg;Zg=$localize`:@@driver.detail.view-details:View Details`;let Jg;Jg=$localize`:@@trip.status.completed:Completed`;let Kg;Kg=$localize`:@@trip.status.cancelled:Cancelled`;let Qg;Qg=$localize`:@@common.hours:hours`;let e0;e0=$localize`:@@driver.detail.documents: Driver Documents`;let t0;t0=$localize`:@@driver.detail.driving-license:Driving License`;let n0;n0=$localize`:@@driver.detail.license-number:License:`;let i0;i0=$localize`:@@driver.detail.expires:Expires:`;let r0;r0=$localize`:@@driver.detail.national-id:National ID`;let o0;o0=$localize`:@@driver.document.on-file:On File`;let a0;a0=$localize`:@@driver.detail.verified:Verified and on file`;let s0;s0=$localize`:@@driver.detail.medical-certificate:Medical Certificate`;let l0;l0=$localize`:@@driver.document.valid:Valid`;let c0;c0=$localize`:@@driver.detail.last-medical:Last medical:`;let d0;d0=$localize`:@@driver.detail.next-medical:Next due:`;let u0;u0=$localize`:@@driver.detail.annual-renewal:Annual renewal`;let p0;p0=$localize`:@@driver.detail.employment-contract:Employment Contract`;let m0;m0=$localize`:@@driver.document.signed:Signed`;let g0;g0=$localize`:@@driver.detail.contract-date:Contract date:`;let f0;f0=$localize`:@@driver.detail.salary-amount:Salary:`;let _0;_0=$localize`:@@driver.license.expired:Expired`;let h0;h0=$localize`:@@driver.license.expiring-soon:Expiring Soon`;let v0;v0=$localize`:@@driver.license.valid:Valid`;let x0;x0=$localize`:@@driver.detail.loading:Loading driver details...`;let C0;C0=$localize`:@@driver.detail.not-found:Driver Not Found`;let y0;y0=$localize`:@@driver.detail.not-found-message:The requested driver could not be found.`;let b0;return b0=$localize`:@@driver.detail.back-to-list: Back to Driver List`,[["defaultAvatar",""],["noAssignment",""],t,e,i,r,s,d,u,p,f,b,D,S,M,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,_e,At,Nt,kt,Vt,Ft,pe,mn,gn,fn,_n,hn,vn,xn,Cn,yn,bn,En,Dn,Mn,Sn,In,Pn,Tn,Rn,On,wn,An,Nn,N,ko,Z,Ng,kg,Vg,Fg,Lg,$g,Bg,zg,jg,Ug,Gg,Hg,Xg,Wg,qg,Yg,Zg,Jg,Kg,Qg,e0,t0,n0,i0,r0,o0,a0,s0,l0,c0,d0,u0,p0,m0,g0,f0,_0,h0,v0,x0,C0,y0,b0,["class","driver-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"driver-detail-container"],[1,"page-header"],[1,"header-content"],[1,"driver-title"],[1,"driver-avatar"],[3,"src","alt",4,"ngIf","ngIfElse"],[1,"title-info"],[1,"driver-status"],[1,"status-badge"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"license-badge"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"dropdown"],[1,"btn","btn-outline"],[1,"dropdown-content"],[3,"click"],[1,"dropdown-divider"],[1,"danger",3,"click"],[1,"quick-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],[1,"tab-content"],["class","tab-panel",4,"ngIf"],[3,"src","alt"],[1,"avatar-placeholder"],[1,"tab-panel"],[1,"overview-grid"],[1,"info-card"],[1,"info-list"],[1,"info-item"],[1,"label"],[1,"value"],[4,"ngIf","ngIfElse"],["class","expired-badge",4,"ngIf"],["class","expiring-badge",4,"ngIf"],["class","notes-section",4,"ngIf"],[1,"text-muted"],[1,"expired-badge"],[1,"expiring-badge"],[1,"notes-section"],[1,"notes-content"],["class","performance-content",4,"ngIf"],[1,"performance-content"],[1,"performance-grid"],[1,"performance-card"],[1,"metric-item"],[1,"metric-label"],[1,"metric-value"],[1,"trips-content"],[1,"trips-header"],[1,"trips-summary"],[1,"trips-list"],["class","trip-record",3,"class",4,"ngFor","ngForOf"],[1,"trip-record"],[1,"trip-header"],[1,"trip-info"],[1,"trip-date"],[1,"trip-status"],[1,"trip-details"],[1,"trip-meta"],[1,"meta-item"],["class","meta-item",4,"ngIf"],[1,"view-trip-btn",3,"click"],[1,"documents-content"],[1,"documents-grid"],[1,"document-card"],[1,"document-header"],[1,"document-icon"],[1,"document-info"],[1,"document-status"],["class","status-text",4,"ngIf"],[1,"document-details"],[1,"status-text"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"]]},template:function(e,i){e&1&&v(0,t3,99,35,"div",102)(1,n3,4,0,"div",103)(2,i3,10,0,"div",104),e&2&&(m("ngIf",!i.isLoading&&i.driver),c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&!i.driver))},dependencies:[K,ae,ee,Ii,xr,He],styles:[".driver-detail-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding:25px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%], .driver-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.driver-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;overflow:hidden;background:#f7fafc;display:flex;align-items:center;justify-content:center;border:3px solid #e2e8f0}.driver-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[_ngcontent-%COMP%]{font-size:36px}.title-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.title-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.driver-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;right:0;background:#fff;min-width:200px;box-shadow:0 8px 16px #0000001a;border-radius:8px;z-index:1;border:1px solid #e2e8f0}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2d3748;padding:12px 16px;text-decoration:none;display:block;font-size:14px;cursor:pointer;transition:all .2s ease}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f7fafc}.dropdown-content[_ngcontent-%COMP%]   a.danger[_ngcontent-%COMP%]{color:#e53e3e}.dropdown-content[_ngcontent-%COMP%]   a.danger[_ngcontent-%COMP%]:hover{background:#fed7d7}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e2e8f0;margin:8px 0}.status-badge[_ngcontent-%COMP%], .license-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-available[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-on-duty[_ngcontent-%COMP%]{background:#fbb6ce;color:#97266d}.status-on-leave[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.license-light[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.license-heavy[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.license-public[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.quick-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-item[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;background:#f7fafc;border-radius:10px;display:flex;align-items:center;justify-content:center}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2d3748}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;text-transform:uppercase;letter-spacing:.5px}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:20px;box-shadow:0 4px 6px #0000000d;overflow-x:auto}.tab-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;background:transparent;color:#718096;font-size:14px;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s ease;white-space:nowrap}.tab-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#2d3748}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff}.tab-content[_ngcontent-%COMP%]{min-height:400px}.tab-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.overview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.info-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:8px 0}.label[_ngcontent-%COMP%]{color:#718096;font-weight:500;font-size:14px;min-width:120px}.value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:14px;text-align:right;flex:1}.text-muted[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic}.expiring[_ngcontent-%COMP%]{color:#d69e2e;font-weight:600}.expired[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600}.expired-badge[_ngcontent-%COMP%], .expiring-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:8px;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:700}.expired-badge[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.expiring-badge[_ngcontent-%COMP%]{background:#faf089;color:#744210}.notes-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.notes-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:18px;font-weight:600}.notes-content[_ngcontent-%COMP%]{color:#4a5568;line-height:1.6;margin:0}.performance-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.performance-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.performance-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;background:#f7fafc}.performance-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:16px;font-weight:600}.metric-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #e2e8f0}.metric-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.metric-label[_ngcontent-%COMP%]{color:#718096;font-size:14px}.metric-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:600;font-size:14px}.trips-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.trips-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.trips-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.trips-summary[_ngcontent-%COMP%]{display:flex;gap:20px;font-size:14px;color:#718096}.trips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.trip-record[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.trip-record[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.trip-record.cancelled[_ngcontent-%COMP%]{background:#fef5e7;border-color:#f6ad55}.trip-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.trip-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:16px;font-weight:600}.trip-date[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.trip-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.trip-meta[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:14px;color:#718096;flex-wrap:wrap}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.view-trip-btn[_ngcontent-%COMP%]{background:#f7fafc;border:1px solid #e2e8f0;padding:8px 16px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.view-trip-btn[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.documents-content[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.documents-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 25px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.document-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:20px;transition:all .2s ease}.document-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.document-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:15px}.document-icon[_ngcontent-%COMP%]{font-size:24px}.document-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.document-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.document-status[_ngcontent-%COMP%]{padding:8px 12px;border-radius:6px;text-align:center;font-weight:600;font-size:14px}.document-status[_ngcontent-%COMP%]:not(.expiring):not(.expired){background:#c6f6d5;color:#22543d}.document-status.expiring[_ngcontent-%COMP%]{background:#faf089;color:#744210}.document-status.expired[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.document-details[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px;line-height:1.5}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}[dir=rtl][_ngcontent-%COMP%]   .driver-detail-container[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .driver-title[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}[dir=rtl][_ngcontent-%COMP%]   .trip-details[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .trip-meta[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .document-header[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 1200px){.driver-detail-container[_ngcontent-%COMP%]{padding:20px}.overview-grid[_ngcontent-%COMP%], .performance-grid[_ngcontent-%COMP%], .documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.driver-title[_ngcontent-%COMP%]{justify-content:center;text-align:center}.driver-status[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.tab-navigation[_ngcontent-%COMP%]{overflow-x:auto}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.trips-summary[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.trip-details[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.trip-meta[_ngcontent-%COMP%]{justify-content:space-between}.info-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:4px}.value[_ngcontent-%COMP%]{text-align:left}}@media (max-width: 480px){.driver-detail-container[_ngcontent-%COMP%]{padding:15px}.info-card[_ngcontent-%COMP%], .performance-card[_ngcontent-%COMP%], .trips-content[_ngcontent-%COMP%], .documents-content[_ngcontent-%COMP%]{padding:20px}.trip-meta[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.driver-avatar[_ngcontent-%COMP%]{width:60px;height:60px}.avatar-placeholder[_ngcontent-%COMP%], .title-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}"]})};function r3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("employeeId")," ")}}function o3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("firstName")," ")}}function a3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("lastName")," ")}}function s3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("dateOfBirth")," ")}}function l3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("phoneNumber")," ")}}function c3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("email")," ")}}function d3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("address")," ")}}function u3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("licenseNumber")," ")}}function p3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("licenseType")," ")}}function m3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("licenseExpiry")," ")}}function g3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("experience")," ")}}function f3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("hireDate")," ")}}function _3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("status")," ")}}function h3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("salary")," ")}}function v3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("emergencyContact")," ")}}function x3(n,t){if(n&1&&(a(0,"div",111),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getFieldError("emergencyPhone")," ")}}function C3(n,t){n&1&&(a(0,"span"),E(1,37),o())}function y3(n,t){n&1&&(a(0,"span"),E(1,38),o())}function b3(n,t){if(n&1){let e=O();a(0,"div",112)(1,"div",113)(2,"span",114),l(3,"\u26A0\uFE0F"),o(),a(4,"span"),E(5,39),o(),a(6,"button",115),h("click",function(){C(e);let r=g(2);return y(r.onSubmit())}),a(7,"span"),E(8,40),o()()()()}if(n&2){let e=g(2);c(6),m("disabled",e.driverForm.invalid)}}function E3(n,t){if(n&1){let e=O();a(0,"div",50)(1,"div",51)(2,"div",52)(3,"h1"),E(4,0),o(),a(5,"p"),E(6,1),o()(),a(7,"div",53)(8,"button",54),h("click",function(){C(e);let r=g();return y(r.goToDriverDetails())}),a(9,"span"),E(10,2),o()(),a(11,"button",55),h("click",function(){C(e);let r=g();return y(r.goToDriverList())}),a(12,"span"),E(13,3),o()()()(),a(14,"div",56)(15,"form",57),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),a(16,"div",58)(17,"h2"),E(18,4),o(),a(19,"div",59)(20,"div",60)(21,"label",61),E(22,5),o(),P(23,"input",62),a(24,"small",63),E(25,6),o(),v(26,r3,2,1,"div",64),o(),a(27,"div",60)(28,"label",65),E(29,7),o(),P(30,"input",66),v(31,o3,2,1,"div",64),o(),a(32,"div",60)(33,"label",67),E(34,8),o(),P(35,"input",68),v(36,a3,2,1,"div",64),o()(),a(37,"div",59)(38,"div",60)(39,"label",69),E(40,9),o(),P(41,"input",70),v(42,s3,2,1,"div",64),o(),a(43,"div",60)(44,"label",71),E(45,10),o(),P(46,"input",72),v(47,l3,2,1,"div",64),o(),a(48,"div",60)(49,"label",73),E(50,11),o(),P(51,"input",74),v(52,c3,2,1,"div",64),o()(),a(53,"div",59)(54,"div",75)(55,"label",76),E(56,12),o(),P(57,"textarea",77),v(58,d3,2,1,"div",64),o()()(),a(59,"div",58)(60,"h2"),E(61,13),o(),a(62,"div",59)(63,"div",60)(64,"label",78),E(65,14),o(),P(66,"input",79),v(67,u3,2,1,"div",64),o(),a(68,"div",60)(69,"label",80),E(70,15),o(),a(71,"select",81)(72,"option",82),E(73,16),o(),a(74,"option",83),E(75,17),o(),a(76,"option",84),E(77,18),o()(),v(78,p3,2,1,"div",64),o(),a(79,"div",60)(80,"label",85),E(81,19),o(),P(82,"input",86),v(83,m3,2,1,"div",64),o()(),a(84,"div",59)(85,"div",60)(86,"label",87),E(87,20),o(),a(88,"input",88),h("change",function(){C(e);let r=g();return y(r.calculateMinimumSalary())}),o(),v(89,g3,2,1,"div",64),o()()(),a(90,"div",58)(91,"h2"),E(92,21),o(),a(93,"div",59)(94,"div",60)(95,"label",89),E(96,22),o(),P(97,"input",90),v(98,f3,2,1,"div",64),o(),a(99,"div",60)(100,"label",91),E(101,23),o(),a(102,"select",92)(103,"option",93),E(104,24),o(),a(105,"option",94),E(106,25),o(),a(107,"option",95),E(108,26),o(),a(109,"option",96),E(110,27),o()(),v(111,_3,2,1,"div",64),o(),a(112,"div",60)(113,"label",97),E(114,28),o(),P(115,"input",98),a(116,"small",63)(117,"span"),E(118,29),o(),l(119),o(),v(120,h3,2,1,"div",64),o()()(),a(121,"div",58)(122,"h2"),E(123,30),o(),a(124,"div",59)(125,"div",60)(126,"label",99),E(127,31),o(),P(128,"input",100),v(129,v3,2,1,"div",64),o(),a(130,"div",60)(131,"label",101),E(132,32),o(),P(133,"input",102),v(134,x3,2,1,"div",64),o()()(),a(135,"div",58)(136,"h2"),E(137,33),o(),a(138,"div",60)(139,"label",103),E(140,34),o(),P(141,"textarea",104),o()(),a(142,"div",105)(143,"button",106),h("click",function(){C(e);let r=g();return y(r.onCancel())}),a(144,"span"),E(145,35),o()(),a(146,"button",107),h("click",function(){C(e);let r=g();return y(r.resetForm())}),a(147,"span"),E(148,36),o()(),a(149,"button",108),v(150,C3,2,0,"span",109)(151,y3,2,0,"span",109),o()()()(),v(152,b3,9,1,"div",110),o()}if(n&2){let e=g();c(4),_a(e.getFullName()),Xl(4),c(11),m("formGroup",e.driverForm),c(8),I("error",e.isFieldInvalid("employeeId")),c(3),m("ngIf",e.isFieldInvalid("employeeId")),c(4),I("error",e.isFieldInvalid("firstName")),c(),m("ngIf",e.isFieldInvalid("firstName")),c(4),I("error",e.isFieldInvalid("lastName")),c(),m("ngIf",e.isFieldInvalid("lastName")),c(5),I("error",e.isFieldInvalid("dateOfBirth")),m("min",e.minBirthDate)("max",e.maxBirthDate),c(),m("ngIf",e.isFieldInvalid("dateOfBirth")),c(4),I("error",e.isFieldInvalid("phoneNumber")),c(),m("ngIf",e.isFieldInvalid("phoneNumber")),c(4),I("error",e.isFieldInvalid("email")),c(),m("ngIf",e.isFieldInvalid("email")),c(5),I("error",e.isFieldInvalid("address")),c(),m("ngIf",e.isFieldInvalid("address")),c(8),I("error",e.isFieldInvalid("licenseNumber")),c(),m("ngIf",e.isFieldInvalid("licenseNumber")),c(4),I("error",e.isFieldInvalid("licenseType")),c(7),m("ngIf",e.isFieldInvalid("licenseType")),c(4),I("error",e.isFieldInvalid("licenseExpiry")),m("min",e.minDate),c(),m("ngIf",e.isFieldInvalid("licenseExpiry")),c(5),I("error",e.isFieldInvalid("experience")),c(),m("ngIf",e.isFieldInvalid("experience")),c(8),I("error",e.isFieldInvalid("hireDate")),m("max",e.minDate),c(),m("ngIf",e.isFieldInvalid("hireDate")),c(4),I("error",e.isFieldInvalid("status")),c(9),m("ngIf",e.isFieldInvalid("status")),c(4),I("error",e.isFieldInvalid("salary")),m("min",e.getMinSalary()),c(4),x(" ",e.getSalaryRange()," "),c(),m("ngIf",e.isFieldInvalid("salary")),c(8),I("error",e.isFieldInvalid("emergencyContact")),c(),m("ngIf",e.isFieldInvalid("emergencyContact")),c(4),I("error",e.isFieldInvalid("emergencyPhone")),c(),m("ngIf",e.isFieldInvalid("emergencyPhone")),c(9),m("disabled",e.isSubmitting),c(3),m("disabled",e.isSubmitting),c(3),I("loading",e.isSubmitting),m("disabled",e.driverForm.invalid||e.isSubmitting),c(),m("ngIf",!e.isSubmitting),c(),m("ngIf",e.isSubmitting),c(),m("ngIf",e.hasUnsavedChanges())}}function D3(n,t){n&1&&(a(0,"div",116),P(1,"div",117),a(2,"p"),E(3,41),o()())}function M3(n,t){if(n&1){let e=O();a(0,"div",118)(1,"div",119),l(2,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(3,"h2"),E(4,42),o(),a(5,"p"),E(6,43),o(),a(7,"button",120),h("click",function(){C(e);let r=g();return y(r.goToDriverList())}),a(8,"span"),E(9,44),o()()()}}function S3(n,t){n&1&&(a(0,"div",121)(1,"div",122)(2,"span",123),l(3,"\u2705"),o(),a(4,"span"),E(5,45),o()()())}var yd=class n{constructor(t,e,i){this.formBuilder=t;this.router=e;this.route=i;this.driverForm=this.createForm()}driverForm;isSubmitting=!1;isLoading=!0;driverId="";originalDriver=null;currentYear=new Date().getFullYear();minDate=new Date().toISOString().split("T")[0];minBirthDate=new Date(1950,0,1).toISOString().split("T")[0];maxBirthDate=new Date(this.currentYear-18,11,31).toISOString().split("T")[0];ngOnInit(){this.driverId=this.route.snapshot.params.id,this.loadDriverData()}createForm(){return this.formBuilder.group({employeeId:["",[T.required,T.pattern(/^EMP-\d{3}$/)]],firstName:["",[T.required,T.minLength(2),T.maxLength(50)]],lastName:["",[T.required,T.minLength(2),T.maxLength(50)]],phoneNumber:["",[T.required,T.pattern(/^\+966[5][0-9]{8}$/)]],email:["",[T.required,T.email]],licenseNumber:["",[T.required,T.pattern(/^DL-[A-Z]{3}-\d{6}$/)]],licenseType:["",T.required],licenseExpiry:["",T.required],experience:["",[T.required,T.min(0),T.max(50)]],status:["",T.required],address:["",[T.required,T.minLength(10)]],emergencyContact:["",[T.required,T.minLength(2)]],emergencyPhone:["",[T.required,T.pattern(/^\+966[5][0-9]{8}$/)]],dateOfBirth:["",T.required],hireDate:["",T.required],salary:["",[T.required,T.min(2e3),T.max(15e3)]],notes:[""]})}loadDriverData(){setTimeout(()=>{this.originalDriver=this.getMockDriverData(this.driverId),this.originalDriver&&this.populateForm(this.originalDriver),this.isLoading=!1},500)}getMockDriverData(t){return{D001:{id:"D001",employeeId:"EMP-001",firstName:"Ahmed",lastName:"Al-Rashid",phoneNumber:"+966501234567",email:"ahmed.rashid@relaybus.com",licenseNumber:"DL-RYD-001234",licenseType:"heavy",licenseExpiry:"2025-12-31",experience:8,status:"on-duty",address:"Al-Malaz District, Riyadh",emergencyContact:"Fatima Al-Rashid",emergencyPhone:"+966501234568",dateOfBirth:"1985-03-15",hireDate:"2020-01-15",salary:4500,notes:"Excellent safety record, preferred for long-distance routes"}}[t]||null}populateForm(t){this.driverForm.patchValue({employeeId:t.employeeId,firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,email:t.email,licenseNumber:t.licenseNumber,licenseType:t.licenseType,licenseExpiry:t.licenseExpiry,experience:t.experience,status:t.status,address:t.address,emergencyContact:t.emergencyContact,emergencyPhone:t.emergencyPhone,dateOfBirth:t.dateOfBirth,hireDate:t.hireDate,salary:t.salary,notes:t.notes||""})}calculateMinimumSalary(){let t=this.driverForm.get("experience")?.value;if(t!=null){let e=3e3;t>=10?e=5e3:t>=5?e=4e3:t>=2&&(e=3500),this.driverForm.get("salary")?.setValidators([T.required,T.min(e),T.max(15e3)]),this.driverForm.get("salary")?.updateValueAndValidity()}}onSubmit(){if(this.driverForm.valid){this.isSubmitting=!0;let t=k({},this.driverForm.value);setTimeout(()=>{console.log("Updated driver data:",t),this.showSuccessMessageTemporarily(),this.originalDriver&&Object.assign(this.originalDriver,t),this.isSubmitting=!1,setTimeout(()=>{this.router.navigate(["/drivers",this.driverId])},2e3)},1500)}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.driverForm.controls).forEach(t=>{this.driverForm.get(t)?.markAsTouched()})}onCancel(){this.hasChanges()?confirm("You have unsaved changes. Are you sure you want to cancel?")&&this.router.navigate(["/drivers",this.driverId]):this.router.navigate(["/drivers",this.driverId])}hasChanges(){if(!this.originalDriver)return!1;let t=this.driverForm.value,e={employeeId:this.originalDriver.employeeId,firstName:this.originalDriver.firstName,lastName:this.originalDriver.lastName,phoneNumber:this.originalDriver.phoneNumber,email:this.originalDriver.email,licenseNumber:this.originalDriver.licenseNumber,licenseType:this.originalDriver.licenseType,licenseExpiry:this.originalDriver.licenseExpiry,experience:this.originalDriver.experience,status:this.originalDriver.status,address:this.originalDriver.address,emergencyContact:this.originalDriver.emergencyContact,emergencyPhone:this.originalDriver.emergencyPhone,dateOfBirth:this.originalDriver.dateOfBirth,hireDate:this.originalDriver.hireDate,salary:this.originalDriver.salary,notes:this.originalDriver.notes||""};for(let i in e)if(t[i]!==e[i])return!0;return!1}resetForm(){confirm("Are you sure you want to reset all changes?")&&this.originalDriver&&this.populateForm(this.originalDriver)}goToDriverDetails(){this.router.navigate(["/drivers",this.driverId])}goToDriverList(){this.router.navigate(["/drivers"])}get employeeId(){return this.driverForm.get("employeeId")}get firstName(){return this.driverForm.get("firstName")}get lastName(){return this.driverForm.get("lastName")}get phoneNumber(){return this.driverForm.get("phoneNumber")}get email(){return this.driverForm.get("email")}get licenseNumber(){return this.driverForm.get("licenseNumber")}get licenseType(){return this.driverForm.get("licenseType")}get licenseExpiry(){return this.driverForm.get("licenseExpiry")}get experience(){return this.driverForm.get("experience")}get status(){return this.driverForm.get("status")}get address(){return this.driverForm.get("address")}get emergencyContact(){return this.driverForm.get("emergencyContact")}get emergencyPhone(){return this.driverForm.get("emergencyPhone")}get dateOfBirth(){return this.driverForm.get("dateOfBirth")}get hireDate(){return this.driverForm.get("hireDate")}get salary(){return this.driverForm.get("salary")}get notes(){return this.driverForm.get("notes")}isFieldInvalid(t){let e=this.driverForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.driverForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${this.getFieldDisplayName(t)} is required`;if(e.errors.pattern)return`Invalid ${this.getFieldDisplayName(t)} format`;if(e.errors.email)return"Invalid email format";if(e.errors.min)return`${this.getFieldDisplayName(t)} is too low`;if(e.errors.max)return`${this.getFieldDisplayName(t)} is too high`;if(e.errors.minlength)return`${this.getFieldDisplayName(t)} is too short`;if(e.errors.maxlength)return`${this.getFieldDisplayName(t)} is too long`}return""}getFieldDisplayName(t){return{employeeId:"Employee ID",firstName:"First Name",lastName:"Last Name",phoneNumber:"Phone Number",email:"Email",licenseNumber:"License Number",licenseType:"License Type",licenseExpiry:"License Expiry",experience:"Experience",status:"Status",address:"Address",emergencyContact:"Emergency Contact",emergencyPhone:"Emergency Phone",dateOfBirth:"Date of Birth",hireDate:"Hire Date",salary:"Salary",notes:"Notes"}[t]||t}getMinSalary(){let t=this.driverForm.get("experience")?.value||0,e=3e3;return t>=10?e=5e3:t>=5?e=4e3:t>=2&&(e=3500),e}getSalaryRange(){return`${this.getMinSalary().toLocaleString()} - 15,000 SAR`}getFullName(){return this.originalDriver?`${this.originalDriver.firstName} ${this.originalDriver.lastName}`:""}showSuccessMessage=!1;hasUnsavedChanges(){return this.hasChanges()}showSuccessMessageTemporarily(){this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},3e3)}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne),w(Te))};static \u0275cmp=J({type:n,selectors:[["app-driver-edit"]],decls:4,vars:4,consts:()=>{let t;t=$localize`:@@driver.form.first-name-placeholder:Ahmed`;let e;e=$localize`:@@driver.form.last-name-placeholder:Al-Rashid`;let i;i=$localize`:@@driver.form.phone-placeholder:+966501234567`;let r;r=$localize`:@@driver.form.email-placeholder:driver@relaybus.com`;let s;s=$localize`:@@driver.form.address-placeholder:Enter full address including district and city`;let d;d=$localize`:@@driver.form.license-number-placeholder:DL-RYD-123456`;let u;u=$localize`:@@driver.form.emergency-phone-placeholder:+966501234568`;let p;p=$localize`:@@driver.form.notes-placeholder:Any additional information about this driver...`;let f;f=$localize`:@@driver.edit.title: Edit Driver: ${"\uFFFD0\uFFFD"}:INTERPOLATION:`;let b;b=$localize`:@@driver.edit.subtitle:Update driver information and settings`;let D;D=$localize`:@@driver.edit.view-details: View Details`;let S;S=$localize`:@@driver.edit.back-to-list: Back to List`;let M;M=$localize`:@@driver.form.personal-info: Personal Information`;let R;R=$localize`:@@driver.form.employee-id:Employee ID *`;let A;A=$localize`:@@driver.form.employee-id-readonly:Employee ID cannot be changed`;let z;z=$localize`:@@driver.form.first-name:First Name *`;let U;U=$localize`:@@driver.form.last-name:Last Name *`;let ue;ue=$localize`:@@driver.form.date-of-birth:Date of Birth *`;let oe;oe=$localize`:@@driver.form.phone:Phone Number *`;let re;re=$localize`:@@driver.form.email:Email Address *`;let ke;ke=$localize`:@@driver.form.address:Address *`;let We;We=$localize`:@@driver.form.license-info: License Information`;let Ue;Ue=$localize`:@@driver.form.license-number:License Number *`;let rt;rt=$localize`:@@driver.form.license-type:License Type *`;let pt;pt=$localize`:@@driver.license.light:Light Vehicle License`;let _e;_e=$localize`:@@driver.license.heavy:Heavy Vehicle License`;let At;At=$localize`:@@driver.license.public:Public Transport License`;let Nt;Nt=$localize`:@@driver.form.license-expiry:License Expiry *`;let kt;kt=$localize`:@@driver.form.experience:Years of Experience *`;let Vt;Vt=$localize`:@@driver.form.employment-info: Employment Information`;let Ft;Ft=$localize`:@@driver.form.hire-date:Hire Date *`;let pe;pe=$localize`:@@driver.form.status:Employment Status *`;let mn;mn=$localize`:@@driver.status.available:Available`;let gn;gn=$localize`:@@driver.status.on-duty:On Duty`;let fn;fn=$localize`:@@driver.status.on-leave:On Leave`;let _n;_n=$localize`:@@driver.status.inactive:Inactive`;let hn;hn=$localize`:@@driver.form.salary:Monthly Salary (SAR) *`;let vn;vn=$localize`:@@driver.form.salary-help:Recommended range:`;let xn;xn=$localize`:@@driver.form.emergency-contact: Emergency Contact`;let Cn;Cn=$localize`:@@driver.form.emergency-contact-name:Emergency Contact Name *`;let yn;yn=$localize`:@@driver.form.emergency-phone:Emergency Contact Phone *`;let bn;bn=$localize`:@@driver.form.additional-notes: Additional Notes`;let En;En=$localize`:@@driver.form.notes:Notes (Optional)`;let Dn;Dn=$localize`:@@common.cancel:Cancel`;let Mn;Mn=$localize`:@@driver.edit.reset: Reset Changes`;let Sn;Sn=$localize`:@@driver.edit.save: Save Changes`;let In;In=$localize`:@@driver.edit.saving: Saving...`;let Pn;Pn=$localize`:@@driver.edit.unsaved-changes:You have unsaved changes`;let Tn;Tn=$localize`:@@driver.edit.save-now:Save Now`;let Rn;Rn=$localize`:@@driver.edit.loading:Loading driver information...`;let On;On=$localize`:@@driver.edit.not-found:Driver Not Found`;let wn;wn=$localize`:@@driver.edit.not-found-message:The requested driver could not be found or loaded.`;let An;An=$localize`:@@driver.edit.back-to-list: Back to Driver List`;let Nn;return Nn=$localize`:@@driver.edit.success:Driver information updated successfully!`,[f,b,D,S,M,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,_e,At,Nt,kt,Vt,Ft,pe,mn,gn,fn,_n,hn,vn,xn,Cn,yn,bn,En,Dn,Mn,Sn,In,Pn,Tn,Rn,On,wn,An,Nn,["class","driver-edit-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"driver-edit-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-container"],[1,"driver-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","employeeId"],["type","text","id","employeeId","formControlName","employeeId","readonly","",1,"form-control"],[1,"help-text"],["class","error-message",4,"ngIf"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder",t,1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder",e,1,"form-control"],["for","dateOfBirth"],["type","date","id","dateOfBirth","formControlName","dateOfBirth",1,"form-control",3,"min","max"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder",i,1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","placeholder",r,1,"form-control"],[1,"form-group","full-width"],["for","address"],["id","address","formControlName","address","rows","3","placeholder",s,1,"form-control","textarea"],["for","licenseNumber"],["type","text","id","licenseNumber","formControlName","licenseNumber","placeholder",d,1,"form-control"],["for","licenseType"],["id","licenseType","formControlName","licenseType",1,"form-control"],["value","light"],["value","heavy"],["value","public"],["for","licenseExpiry"],["type","date","id","licenseExpiry","formControlName","licenseExpiry",1,"form-control",3,"min"],["for","experience"],["type","number","id","experience","formControlName","experience","min","0","max","50",1,"form-control",3,"change"],["for","hireDate"],["type","date","id","hireDate","formControlName","hireDate",1,"form-control",3,"max"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","available"],["value","on-duty"],["value","on-leave"],["value","inactive"],["for","salary"],["type","number","id","salary","formControlName","salary","max","15000",1,"form-control",3,"min"],["for","emergencyContact"],["type","text","id","emergencyContact","formControlName","emergencyContact",1,"form-control"],["for","emergencyPhone"],["type","tel","id","emergencyPhone","formControlName","emergencyPhone","placeholder",u,1,"form-control"],["for","notes"],["id","notes","formControlName","notes","rows","4","placeholder",p,1,"form-control","textarea"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-outline",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","warning-banner",4,"ngIf"],[1,"error-message"],[1,"warning-banner"],[1,"warning-content"],[1,"warning-icon"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"],[1,"btn","btn-primary",3,"click"],[1,"success-message"],[1,"success-content"],[1,"success-icon"]]},template:function(e,i){e&1&&v(0,E3,153,64,"div",46)(1,D3,4,0,"div",47)(2,M3,10,0,"div",48)(3,S3,6,0,"div",49),e&2&&(m("ngIf",!i.isLoading&&i.originalDriver),c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&!i.originalDriver),c(),m("ngIf",i.showSuccessMessage))},dependencies:[K,ee,Mt,ct,Re,Oe,Se,vt,Pe,Ie,lt,xt,wt,Dt,Ot],styles:['.driver-edit-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;border-color:#cbd5e0}.btn-outline[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn.loading[_ngcontent-%COMP%]{position:relative}.form-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.driver-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000000d}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:20px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease;outline:none;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e}.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.form-section[_ngcontent-%COMP%]:nth-child(1){border-left:4px solid #4299e1}.form-section[_ngcontent-%COMP%]:nth-child(2){border-left:4px solid #48bb78}.form-section[_ngcontent-%COMP%]:nth-child(3){border-left:4px solid #ed8936}.form-section[_ngcontent-%COMP%]:nth-child(4){border-left:4px solid #e53e3e}.form-section[_ngcontent-%COMP%]:nth-child(5){border-left:4px solid #9f7aea}[dir=rtl][_ngcontent-%COMP%]   .driver-edit-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 768px){.driver-edit-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.form-section[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.driver-edit-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-section[_ngcontent-%COMP%]{padding:15px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}}']})};function I3(n,t){n&1&&(a(0,"div",34),P(1,"div",35),a(2,"p"),l(3,"Loading driver assignment details..."),o()())}function P3(n,t){if(n&1){let e=O();a(0,"div",71),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.selectResource(r.id))}),a(1,"div",72)(2,"div",73),l(3),o(),a(4,"div"),l(5),j(6,"titlecase"),o()(),a(7,"div",74)(8,"h4"),l(9),o(),a(10,"div",75)(11,"span"),l(12),o(),a(13,"span",76),l(14,"\u2192"),o(),a(15,"span"),l(16),o()(),a(17,"div",77)(18,"div",78)(19,"span",79),l(20,"\u{1F4C5}"),o(),a(21,"span"),l(22),j(23,"date"),o()(),a(24,"div",78)(25,"span",79),l(26,"\u{1F555}"),o(),a(27,"span"),l(28),o()(),a(29,"div",78)(30,"span",79),l(31,"\u{1F465}"),o(),a(32,"span"),l(33),o()()()()()}if(n&2){let e,i=t.$implicit,r=g(3);I("selected",((e=r.assignmentForm.get("resourceId"))==null?null:e.value)===i.id),c(3),_(i.tripCode),c(),Ul("trip-status status-",i.status,""),c(),_(se(6,15,i.status)),c(4),_(i.routeName),c(3),_(i.origin),c(4),_(i.destination),c(6),_(ie(23,17,i.departureDate,"mediumDate")),c(6),Y("",i.departureTime," - ",i.arrivalTime,""),c(5),Y("",i.passengers,"/",i.capacity," passengers")}}function T3(n,t){n&1&&(a(0,"div",80)(1,"div",81),l(2,"\u{1F68C}"),o(),a(3,"h3"),l(4,"No trips found"),o(),a(5,"p"),l(6,"No trips match your search criteria."),o()())}function R3(n,t){if(n&1){let e=O();a(0,"div",65)(1,"div",66)(2,"input",67),h("input",function(r){C(e);let s=g(2);return s.tripSearchTerm=r.target.value,y(s.applyFilters())}),o()(),a(3,"div",68),v(4,P3,34,20,"div",69),o(),v(5,T3,7,0,"div",70),o()}if(n&2){let e=g(2);c(2),m("value",e.tripSearchTerm),c(2),m("ngForOf",e.filteredTrips),c(),m("ngIf",e.filteredTrips.length===0)}}function O3(n,t){if(n&1){let e=O();a(0,"div",84),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.selectResource(r.id))}),a(1,"div",72)(2,"div",85),l(3),o(),a(4,"div"),l(5),j(6,"titlecase"),o()(),a(7,"div",74)(8,"h4"),l(9),o(),a(10,"div",86)(11,"div",78)(12,"span",79),l(13,"\u{1F465}"),o(),a(14,"span"),l(15),o()(),a(16,"div",78)(17,"span",79),l(18,"\u{1F4CD}"),o(),a(19,"span"),l(20),o()(),a(21,"div",78)(22,"span",79),l(23,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(24,"span"),l(25),o()()()()()}if(n&2){let e,i=t.$implicit,r=g(3);I("selected",((e=r.assignmentForm.get("resourceId"))==null?null:e.value)===i.id),c(3),_(i.busNumber),c(),Ul("bus-status status-",i.status,""),c(),_(se(6,11,i.status)),c(4),_(i.model),c(6),x("",i.capacity," seats"),c(5),_(i.currentLocation||"Location not set"),c(5),_(i.driverAssigned||"No driver assigned")}}function w3(n,t){n&1&&(a(0,"div",80)(1,"div",81),l(2,"\u{1F690}"),o(),a(3,"h3"),l(4,"No buses found"),o(),a(5,"p"),l(6,"No buses match your search criteria."),o()())}function A3(n,t){if(n&1){let e=O();a(0,"div",65)(1,"div",66)(2,"input",82),h("input",function(r){C(e);let s=g(2);return s.busSearchTerm=r.target.value,y(s.applyFilters())}),o()(),a(3,"div",68),v(4,O3,26,13,"div",83),o(),v(5,w3,7,0,"div",70),o()}if(n&2){let e=g(2);c(2),m("value",e.busSearchTerm),c(2),m("ngForOf",e.filteredBuses),c(),m("ngIf",e.filteredBuses.length===0)}}function N3(n,t){if(n&1){let e=O();a(0,"div",89),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.selectResource(r.id))}),a(1,"div",72)(2,"div",90),l(3),o(),a(4,"div"),l(5),j(6,"titlecase"),o()(),a(7,"div",74)(8,"h4"),l(9),o(),a(10,"div",75)(11,"span"),l(12),o(),a(13,"span",76),l(14,"\u2192"),o(),a(15,"span"),l(16),o()(),a(17,"div",91)(18,"div",78)(19,"span",79),l(20,"\u{1F6E3}\uFE0F"),o(),a(21,"span"),l(22),o()(),a(23,"div",78)(24,"span",79),l(25,"\u23F1\uFE0F"),o(),a(26,"span"),l(27),o()()()()()}if(n&2){let e,i=t.$implicit,r=g(3);I("selected",((e=r.assignmentForm.get("resourceId"))==null?null:e.value)===i.id),c(3),_(i.routeCode),c(),Ul("route-status status-",i.status,""),c(),_(se(6,12,i.status)),c(4),_(i.name),c(3),_(i.origin),c(4),_(i.destination),c(6),x("",i.distance," km"),c(5),_(r.formatDuration(i.estimatedDuration))}}function k3(n,t){n&1&&(a(0,"div",80)(1,"div",81),l(2,"\u{1F5FA}\uFE0F"),o(),a(3,"h3"),l(4,"No routes found"),o(),a(5,"p"),l(6,"No routes match your search criteria."),o()())}function V3(n,t){if(n&1){let e=O();a(0,"div",65)(1,"div",66)(2,"input",87),h("input",function(r){C(e);let s=g(2);return s.routeSearchTerm=r.target.value,y(s.applyFilters())}),o()(),a(3,"div",68),v(4,N3,28,14,"div",88),o(),v(5,k3,7,0,"div",70),o()}if(n&2){let e=g(2);c(2),m("value",e.routeSearchTerm),c(2),m("ngForOf",e.filteredRoutes),c(),m("ngIf",e.filteredRoutes.length===0)}}function F3(n,t){if(n&1&&(a(0,"div",114),l(1),o()),n&2){let e=g(3);c(),x(" ",e.getFieldError("startDate")," ")}}function L3(n,t){if(n&1&&(a(0,"div",114),l(1),o()),n&2){let e=g(3);c(),x(" ",e.getFieldError("startTime")," ")}}function $3(n,t){n&1&&(a(0,"div",93)(1,"label",115),E(2,21),o(),P(3,"input",116),o())}function B3(n,t){n&1&&(a(0,"div",93)(1,"label",117),E(2,22),o(),P(3,"input",118),o())}function z3(n,t){if(n&1&&(a(0,"div",53)(1,"h3"),E(2,10),o(),a(3,"div",92)(4,"div",93)(5,"label",94),E(6,11),o(),P(7,"input",95),v(8,F3,2,1,"div",96),o(),a(9,"div",93)(10,"label",97),E(11,12),o(),P(12,"input",98),v(13,L3,2,1,"div",96),o(),v(14,$3,4,0,"div",99)(15,B3,4,0,"div",99),a(16,"div",93)(17,"label",100),E(18,13),o(),a(19,"select",101)(20,"option",102),E(21,14),o(),a(22,"option",103),E(23,15),o(),a(24,"option",104),E(25,16),o(),a(26,"option",105),E(27,17),o()()(),a(28,"div",106)(29,"label",107),P(30,"input",108)(31,"span",109),a(32,"span"),E(33,18),o()()()(),a(34,"div",110)(35,"label",111),E(36,19),o(),P(37,"textarea",112),a(38,"small",113),E(39,20),o()()()),n&2){let e,i=g(2);c(7),I("invalid",i.isFieldInvalid("startDate")),c(),m("ngIf",i.isFieldInvalid("startDate")),c(4),I("invalid",i.isFieldInvalid("startTime")),c(),m("ngIf",i.isFieldInvalid("startTime")),c(),m("ngIf",i.activeTab!=="trip"),c(),m("ngIf",i.activeTab!=="trip"&&((e=i.assignmentForm.get("endDate"))==null?null:e.value))}}function j3(n,t){n&1&&(a(0,"span"),E(1,23),o())}function U3(n,t){n&1&&(a(0,"span"),E(1,24),o())}function G3(n,t){if(n&1&&(a(0,"div",121)(1,"span",122),E(2,28),o(),a(3,"span",123),l(4),j(5,"date"),o()()),n&2){let e,i=g(3);c(4),Y("",ie(5,2,(e=i.assignmentForm.get("startDate"))==null?null:e.value,"mediumDate")," at ",(e=i.assignmentForm.get("startTime"))==null?null:e.value,"")}}function H3(n,t){if(n&1&&(a(0,"div",121)(1,"span",122),E(2,29),o(),a(3,"span",123),l(4),j(5,"date"),o()()),n&2){let e,i=g(3);c(4),Y("",ie(5,2,(e=i.assignmentForm.get("endDate"))==null?null:e.value,"mediumDate")," at ",((e=i.assignmentForm.get("endTime"))==null?null:e.value)||"23:59","")}}function X3(n,t){if(n&1&&(a(0,"div",121)(1,"span",122),E(2,30),o(),a(3,"span",123),l(4),o()()),n&2){let e,i=g(3);c(4),_((e=i.assignmentForm.get("notes"))==null?null:e.value)}}function W3(n,t){if(n&1&&(a(0,"div",119)(1,"h3"),E(2,25),o(),a(3,"div",120)(4,"div",121)(5,"span",122),E(6,26),o(),a(7,"span",123),l(8),o()(),a(9,"div",121)(10,"span",122),E(11,27),o(),a(12,"span",123),l(13),j(14,"titlecase"),o()(),v(15,G3,6,5,"div",124)(16,H3,6,5,"div",124)(17,X3,5,1,"div",124),o()()),n&2){let e,i,r,s=g(2);c(8),Y("",s.getFullName()," (",s.driver.employeeId,")"),c(5),_(se(14,6,s.activeTab)),c(2),m("ngIf",(e=s.assignmentForm.get("startDate"))==null?null:e.value),c(),m("ngIf",(i=s.assignmentForm.get("endDate"))==null?null:i.value),c(),m("ngIf",(r=s.assignmentForm.get("notes"))==null?null:r.value)}}function q3(n,t){if(n&1){let e=O();a(0,"div",36)(1,"div",37)(2,"div",38)(3,"button",39),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(4," \u2190 Back to Driver Details "),o(),a(5,"div",40)(6,"h1"),E(7,0),o(),a(8,"p"),E(9,1),o()()()(),a(10,"div",41)(11,"div",42)(12,"div",43),l(13),o()(),a(14,"div",44)(15,"h3"),l(16),o(),a(17,"div",45)(18,"span",46),l(19),o(),a(20,"span",47),l(21),o(),a(22,"span",48),l(23),o(),a(24,"span",49),l(25),o()()(),a(26,"div",50)(27,"div",51)(28,"span"),E(29,2),o()()()(),a(30,"form",52),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),a(31,"div",53)(32,"h3"),E(33,3),o(),a(34,"p"),E(35,4),o(),a(36,"div",54)(37,"button",55),h("click",function(){C(e);let r=g();return y(r.setActiveTab("trip"))}),a(38,"span",56),l(39,"\u{1F68C}"),o(),a(40,"span"),E(41,5),o()(),a(42,"button",55),h("click",function(){C(e);let r=g();return y(r.setActiveTab("bus"))}),a(43,"span",56),l(44,"\u{1F690}"),o(),a(45,"span"),E(46,6),o()(),a(47,"button",55),h("click",function(){C(e);let r=g();return y(r.setActiveTab("route"))}),a(48,"span",56),l(49,"\u{1F5FA}\uFE0F"),o(),a(50,"span"),E(51,7),o()()()(),a(52,"div",53)(53,"h3"),E(54,8),o(),a(55,"div",57),v(56,R3,6,3,"div",58)(57,A3,6,3,"div",58)(58,V3,6,3,"div",58),o()(),v(59,z3,40,8,"div",59),a(60,"div",60)(61,"button",61),h("click",function(){C(e);let r=g();return y(r.onCancel())}),a(62,"span"),E(63,9),o()(),a(64,"button",62),v(65,j3,2,0,"span",63)(66,U3,2,0,"span",63),o()()(),v(67,W3,18,8,"div",64),o()}if(n&2){let e,i,r,s=g();c(13),Y(" ",s.driver.firstName.charAt(0),"",s.driver.lastName.charAt(0)," "),c(3),_(s.getFullName()),c(3),_(s.driver.employeeId),c(2),x("",s.driver.experience," years experience"),c(2),Y("",s.getRatingStars(s.driver.rating)," (",s.driver.rating,")"),c(2),x("",s.driver.totalTrips," trips completed"),c(5),m("formGroup",s.assignmentForm),c(7),I("active",s.activeTab==="trip"),c(5),I("active",s.activeTab==="bus"),c(5),I("active",s.activeTab==="route"),c(9),m("ngIf",s.activeTab==="trip"),c(),m("ngIf",s.activeTab==="bus"),c(),m("ngIf",s.activeTab==="route"),c(),m("ngIf",(e=s.assignmentForm.get("resourceId"))==null?null:e.value),c(2),m("disabled",s.isSubmitting),c(3),I("loading",s.isSubmitting),m("disabled",s.assignmentForm.invalid||!((i=s.assignmentForm.get("resourceId"))!=null&&i.value)||s.isSubmitting),c(),m("ngIf",!s.isSubmitting),c(),m("ngIf",s.isSubmitting),c(),m("ngIf",(r=s.assignmentForm.get("resourceId"))==null?null:r.value)}}var bd=class n{constructor(t,e,i){this.router=t;this.route=e;this.formBuilder=i;this.assignmentForm=this.createAssignmentForm()}driver=null;driverId="";isLoading=!0;isSubmitting=!1;assignmentForm;activeTab="trip";availableTrips=[];availableBuses=[];availableRoutes=[];filteredTrips=[];filteredBuses=[];filteredRoutes=[];tripSearchTerm="";busSearchTerm="";routeSearchTerm="";ngOnInit(){this.driverId=this.route.snapshot.params.id,this.loadDriverDetails(),this.loadAvailableResources()}createAssignmentForm(){return this.formBuilder.group({assignmentType:["trip",T.required],resourceId:["",T.required],startDate:["",T.required],startTime:["06:00",T.required],endDate:[""],endTime:[""],notes:[""],notifyDriver:[!0],priority:["normal"]})}loadDriverDetails(){setTimeout(()=>{this.driver=this.getMockDriverData(this.driverId),this.isLoading=!1},500)}getMockDriverData(t){let e={D001:{id:"D001",employeeId:"EMP-001",firstName:"Ahmed",lastName:"Al-Rashid",phoneNumber:"+966501234567",email:"ahmed.rashid@relaybus.com",licenseType:"heavy",experience:8,status:"available",currentAssignment:void 0,rating:4.8,totalTrips:342},D002:{id:"D002",employeeId:"EMP-002",firstName:"Mohammad",lastName:"Al-Fahad",phoneNumber:"+966501234568",email:"mohammad.fahad@relaybus.com",licenseType:"heavy",experience:12,status:"available",currentAssignment:void 0,rating:4.6,totalTrips:567}};return e[t]||e.D001}loadAvailableResources(){this.availableTrips=[{id:"T001",tripCode:"RB-IC-001",routeId:"R001",routeName:"Riyadh \u2192 Jeddah Express",origin:"Riyadh",destination:"Jeddah",departureDate:new Date(Date.now()+864e5),departureTime:"06:00",arrivalTime:"16:00",status:"scheduled",passengers:0,capacity:45},{id:"T002",tripCode:"RB-IC-002",routeId:"R002",routeName:"Dammam \u2192 Riyadh Express",origin:"Dammam",destination:"Riyadh",departureDate:new Date(Date.now()+1728e5),departureTime:"14:00",arrivalTime:"20:00",status:"scheduled",passengers:12,capacity:40},{id:"T003",tripCode:"RB-IC-003",routeId:"R003",routeName:"Riyadh \u2192 Makkah Holy Express",origin:"Riyadh",destination:"Makkah",departureDate:new Date(Date.now()+2592e5),departureTime:"20:00",arrivalTime:"08:00",status:"scheduled",passengers:5,capacity:50}],this.availableBuses=[{id:"B001",busNumber:"RB-001",model:"Mercedes Travego",capacity:45,status:"active",currentLocation:"Riyadh Central Station"},{id:"B002",busNumber:"RB-002",model:"Volvo 9700",capacity:40,status:"active",currentLocation:"Jeddah Terminal"},{id:"B003",busNumber:"RB-003",model:"Scania Touring",capacity:50,status:"active",currentLocation:"Dammam Station"}],this.availableRoutes=[{id:"R001",routeCode:"RYD-JED",name:"Riyadh \u2192 Jeddah Express",origin:"Riyadh",destination:"Jeddah",distance:950,estimatedDuration:10,status:"active"},{id:"R002",routeCode:"DAM-RYD",name:"Dammam \u2192 Riyadh Express",origin:"Dammam",destination:"Riyadh",distance:395,estimatedDuration:6,status:"active"}],this.applyFilters()}applyFilters(){this.filteredTrips=this.availableTrips.filter(t=>t.tripCode.toLowerCase().includes(this.tripSearchTerm.toLowerCase())||t.routeName.toLowerCase().includes(this.tripSearchTerm.toLowerCase())||t.origin.toLowerCase().includes(this.tripSearchTerm.toLowerCase())||t.destination.toLowerCase().includes(this.tripSearchTerm.toLowerCase())),this.filteredBuses=this.availableBuses.filter(t=>t.busNumber.toLowerCase().includes(this.busSearchTerm.toLowerCase())||t.model.toLowerCase().includes(this.busSearchTerm.toLowerCase())||(t.currentLocation||"").toLowerCase().includes(this.busSearchTerm.toLowerCase())),this.filteredRoutes=this.availableRoutes.filter(t=>t.routeCode.toLowerCase().includes(this.routeSearchTerm.toLowerCase())||t.name.toLowerCase().includes(this.routeSearchTerm.toLowerCase())||t.origin.toLowerCase().includes(this.routeSearchTerm.toLowerCase())||t.destination.toLowerCase().includes(this.routeSearchTerm.toLowerCase()))}setActiveTab(t){this.activeTab=t,this.assignmentForm.patchValue({assignmentType:t}),this.assignmentForm.patchValue({resourceId:""})}selectResource(t){this.assignmentForm.patchValue({resourceId:t})}onAssignmentTypeChange(){let t=this.assignmentForm.get("assignmentType")?.value;this.activeTab=t,this.assignmentForm.patchValue({resourceId:""})}onSubmit(){if(this.assignmentForm.valid&&this.driver){this.isSubmitting=!0;let t=this.assignmentForm.value,e={driverId:this.driver.id,assignmentType:t.assignmentType,resourceId:t.resourceId,startDate:new Date(t.startDate+"T"+t.startTime),endDate:t.endDate?new Date(t.endDate+"T"+(t.endTime||"23:59")):void 0,notes:t.notes};setTimeout(()=>{let i="",r="";if(e.assignmentType==="trip"){let s=this.availableTrips.find(d=>d.id===e.resourceId);s&&(i=`${s.tripCode} (${s.origin} \u2192 ${s.destination})`,r=`Trip: ${i} on ${s.departureDate.toLocaleDateString()} at ${s.departureTime}`)}else if(e.assignmentType==="bus"){let s=this.availableBuses.find(d=>d.id===e.resourceId);s&&(i=`${s.busNumber} (${s.model})`,r=`Bus: ${i}`)}else if(e.assignmentType==="route"){let s=this.availableRoutes.find(d=>d.id===e.resourceId);s&&(i=`${s.routeCode} (${s.name})`,r=`Route: ${i}`)}this.driver&&(this.driver.status="on-duty",this.driver.currentAssignment=i),alert(`\u2705 Assignment Successful!

Driver: ${this.getFullName()}
${r}
Start: ${e.startDate.toLocaleString()}

\u{1F4F1} Driver has been notified via SMS and email.`),this.isSubmitting=!1,this.router.navigate(["/drivers",this.driverId])},1500)}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.assignmentForm.controls).forEach(t=>{this.assignmentForm.get(t)?.markAsTouched()})}onCancel(){confirm("Are you sure you want to cancel? All assignment details will be lost.")&&this.router.navigate(["/drivers",this.driverId])}goBack(){this.router.navigate(["/drivers",this.driverId])}getFullName(){return this.driver?`${this.driver.firstName} ${this.driver.lastName}`:""}getRatingStars(t){let e=Math.floor(t),i=t%1>=.5,r="\u2605".repeat(e);return i&&(r+="\u2606"),r}formatDuration(t){return`${t}h ${t%1*60}m`}isFieldInvalid(t){let e=this.assignmentForm.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched))}getFieldError(t){let e=this.assignmentForm.get(t);if(e&&e.errors){if(e.errors.required)return`${t} is required`;if(e.errors.email)return"Please enter a valid email address";if(e.errors.pattern)return`${t} format is invalid`}return""}static \u0275fac=function(e){return new(e||n)(w(ne),w(Te),w(Kt))};static \u0275cmp=J({type:n,selectors:[["app-driver-assignment"]],decls:3,vars:2,consts:()=>{let t;t=$localize`:@@driver.assignment.title: Assign Driver to Resource`;let e;e=$localize`:@@driver.assignment.subtitle:Create a new assignment for this driver`;let i;i=$localize`:@@driver.status.available:Available for Assignment`;let r;r=$localize`:@@driver.assignment.type-title: Assignment Type`;let s;s=$localize`:@@driver.assignment.type-subtitle:Choose what type of resource to assign this driver to`;let d;d=$localize`:@@driver.assignment.trip:Specific Trip`;let u;u=$localize`:@@driver.assignment.bus:Bus Assignment`;let p;p=$localize`:@@driver.assignment.route:Route Assignment`;let f;f=$localize`:@@driver.assignment.resource-title: Select Resource`;let b;b=$localize`:@@common.cancel:Cancel`;let D;D=$localize`:@@driver.assignment.details-title: Assignment Details`;let S;S=$localize`:@@driver.assignment.start-date:Start Date *`;let M;M=$localize`:@@driver.assignment.start-time:Start Time *`;let R;R=$localize`:@@driver.assignment.priority:Assignment Priority`;let A;A=$localize`:@@driver.assignment.priority.low:Low Priority`;let z;z=$localize`:@@driver.assignment.priority.normal:Normal Priority`;let U;U=$localize`:@@driver.assignment.priority.high:High Priority`;let ue;ue=$localize`:@@driver.assignment.priority.urgent:Urgent`;let oe;oe=$localize`:@@driver.assignment.notify:Notify driver via SMS and email`;let re;re=$localize`:@@driver.assignment.notes:Assignment Notes (Optional)`;let ke;ke=$localize`:@@driver.assignment.notes-help: Include any special instructions, route preferences, or important information for the driver `;let We;We=$localize`:@@driver.assignment.end-date:End Date (Optional)`;let Ue;Ue=$localize`:@@driver.assignment.end-time:End Time`;let rt;rt=$localize`:@@driver.assignment.create: Create Assignment`;let pt;pt=$localize`:@@driver.assignment.creating: Creating Assignment...`;let _e;_e=$localize`:@@driver.assignment.preview-title: Assignment Preview`;let At;At=$localize`:@@driver.assignment.preview.driver:Driver:`;let Nt;Nt=$localize`:@@driver.assignment.preview.type:Assignment Type:`;let kt;kt=$localize`:@@driver.assignment.preview.start:Start:`;let Vt;Vt=$localize`:@@driver.assignment.preview.end:End:`;let Ft;return Ft=$localize`:@@driver.assignment.preview.notes:Notes:`,[t,e,i,r,s,d,u,p,f,b,D,S,M,R,A,z,U,ue,oe,re,ke,We,Ue,rt,pt,_e,At,Nt,kt,Vt,Ft,[1,"driver-assignment-container"],["class","loading-container",4,"ngIf"],["class","assignment-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"assignment-content"],[1,"page-header"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"header-info"],[1,"driver-summary-card"],[1,"driver-avatar"],[1,"avatar-circle"],[1,"driver-info"],[1,"driver-meta"],[1,"employee-id"],[1,"experience"],[1,"rating"],[1,"total-trips"],[1,"driver-status"],[1,"status-badge","status-available"],[1,"assignment-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"tab-navigation"],["type","button",1,"tab-btn",3,"click"],[1,"tab-icon"],[1,"tab-content"],["class","tab-panel",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","assignment-preview",4,"ngIf"],[1,"tab-panel"],[1,"search-box"],["type","text","placeholder","Search trips by code, route, or destination...",1,"search-input",3,"input","value"],[1,"resource-grid"],["class","resource-card trip-card",3,"selected","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"resource-card","trip-card",3,"click"],[1,"card-header"],[1,"trip-code"],[1,"card-body"],[1,"route-path"],[1,"arrow"],[1,"trip-details"],[1,"detail-item"],[1,"icon"],[1,"empty-state"],[1,"empty-icon"],["type","text","placeholder","Search buses by number, model, or location...",1,"search-input",3,"input","value"],["class","resource-card bus-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"resource-card","bus-card",3,"click"],[1,"bus-number"],[1,"bus-details"],["type","text","placeholder","Search routes by code, name, or destinations...",1,"search-input",3,"input","value"],["class","resource-card route-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"resource-card","route-card",3,"click"],[1,"route-code"],[1,"route-details"],[1,"form-grid"],[1,"form-group"],["for","startDate"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["class","error-message",4,"ngIf"],["for","startTime"],["type","time","id","startTime","formControlName","startTime",1,"form-control"],["class","form-group",4,"ngIf"],["for","priority"],["id","priority","formControlName","priority",1,"form-control"],["value","low"],["value","normal"],["value","high"],["value","urgent"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","notifyDriver",1,"checkbox-input"],[1,"checkbox-custom"],[1,"form-group","full-width"],["for","notes"],["id","notes","formControlName","notes","rows","3","placeholder","Add any special instructions or notes for this assignment...",1,"form-control"],[1,"help-text"],[1,"error-message"],["for","endDate"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],["for","endTime"],["type","time","id","endTime","formControlName","endTime",1,"form-control"],[1,"assignment-preview"],[1,"preview-content"],[1,"preview-item"],[1,"label"],[1,"value"],["class","preview-item",4,"ngIf"]]},template:function(e,i){e&1&&(a(0,"div",31),v(1,I3,4,0,"div",32)(2,q3,68,26,"div",33),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&i.driver))},dependencies:[K,ae,ee,Ge,He,Mt,ct,Re,Oe,Se,Yn,Pe,Ie,lt,Dt,Ot],styles:['.driver-assignment-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.back-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;color:#4a5568;text-decoration:none;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0;color:#2d3748}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.driver-summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;margin-bottom:30px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:20px}.driver-avatar[_ngcontent-%COMP%]{flex-shrink:0}.avatar-circle[_ngcontent-%COMP%]{width:70px;height:70px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:600}.driver-info[_ngcontent-%COMP%]{flex:1}.driver-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:20px;font-weight:600}.driver-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;color:#718096;font-size:14px}.driver-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.driver-status[_ngcontent-%COMP%]{flex-shrink:0}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.status-available[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d;border:1px solid #9ae6b4}.assignment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;max-width:1200px;margin:0 auto}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000000d}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:20px;font-weight:600}.form-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#718096;font-size:14px}.tab-navigation[_ngcontent-%COMP%]{display:flex;gap:4px;background:#f7fafc;padding:4px;border-radius:10px;margin-bottom:25px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:8px;background:transparent;color:#718096;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover{background:#667eea1a;color:#667eea}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;box-shadow:0 2px 4px #667eea4d}.tab-icon[_ngcontent-%COMP%]{font-size:16px}.search-box[_ngcontent-%COMP%]{margin-bottom:20px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.resource-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:20px}.resource-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e2e8f0;border-radius:12px;padding:20px;cursor:pointer;transition:all .2s ease;position:relative}.resource-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.resource-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;box-shadow:0 0 0 3px #667eea1a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.trip-code[_ngcontent-%COMP%], .bus-number[_ngcontent-%COMP%], .route-code[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:16px}.trip-status[_ngcontent-%COMP%], .bus-status[_ngcontent-%COMP%], .route-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.status-scheduled[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282}.status-active[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:16px;font-weight:600}.route-path[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:15px;color:#718096;font-size:14px}.arrow[_ngcontent-%COMP%]{color:#a0aec0;font-weight:700}.trip-details[_ngcontent-%COMP%], .bus-details[_ngcontent-%COMP%], .route-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#718096;font-size:13px}.detail-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:14px;width:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#4a5568;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.invalid[_ngcontent-%COMP%]{border-color:#e53e3e}.form-control.invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e53e3e1a}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.checkbox-group[_ngcontent-%COMP%]{margin-top:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:14px;color:#4a5568}.checkbox-input[_ngcontent-%COMP%]{display:none}.checkbox-custom[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid #e2e8f0;border-radius:4px;position:relative;transition:all .2s ease}.checkbox-input[_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]{background:#667eea;border-color:#667eea}.checkbox-input[_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:600}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;margin-top:4px}.help-text[_ngcontent-%COMP%]{color:#718096;font-size:12px;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;border-color:#cbd5e0}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn.loading[_ngcontent-%COMP%]{position:relative}.assignment-preview[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 4px 6px #0000000d;border-left:4px solid #667eea}.assignment-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600}.preview-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.preview-item[_ngcontent-%COMP%]{display:flex;gap:15px}.preview-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#718096;min-width:120px}.preview-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500}@media (max-width: 768px){.driver-assignment-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.header-left[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.driver-summary-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.driver-meta[_ngcontent-%COMP%]{justify-content:center}.tab-navigation[_ngcontent-%COMP%]{flex-direction:column}.resource-grid[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%], .assignment-preview[_ngcontent-%COMP%]{padding:20px}.preview-item[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.preview-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{min-width:auto;font-size:13px}}']})};var Y3=()=>[];function Z3(n,t){n&1&&(a(0,"span",65),l(1,"\u{1F31F} Popular"),o())}function J3(n,t){n&1&&(a(0,"span"),l(1," \u2192 "),o())}function K3(n,t){if(n&1&&(a(0,"span"),l(1),v(2,J3,2,0,"span",53),o()),n&2){let e=t.$implicit,i=t.index,r=g().$implicit;c(),x(" ",e.city,""),c(),m("ngIf",i<2&&i<r.stops.length-1)}}function Q3(n,t){n&1&&(a(0,"span"),l(1,"..."),o())}function eA(n,t){if(n&1){let e=O();a(0,"tr")(1,"td")(2,"div",40)(3,"span",41),l(4),o(),v(5,Z3,2,0,"span",42),o()(),a(6,"td")(7,"div",43)(8,"strong"),l(9),o(),a(10,"div",44),l(11),o()()(),a(12,"td")(13,"div",45)(14,"span",46),l(15),o()()(),a(16,"td")(17,"div",45)(18,"span",46),l(19),o()()(),a(20,"td")(21,"span",47),l(22),o()(),a(23,"td")(24,"span",48),l(25),o()(),a(26,"td")(27,"div",49)(28,"span",50),l(29),o(),a(30,"div",51),v(31,K3,3,2,"span",52)(32,Q3,2,0,"span",53),o()()(),a(33,"td")(34,"span",54),l(35),j(36,"titlecase"),o()(),a(37,"td")(38,"span",55),l(39),j(40,"titlecase"),o()(),a(41,"td")(42,"div",56)(43,"div",57),P(44,"div",58),o(),a(45,"span",59),l(46),o()()(),a(47,"td")(48,"div",60)(49,"button",61),h("click",function(){let r=C(e).$implicit,s=g();return y(s.viewRouteDetails(r.id))}),l(50," \u{1F441}\uFE0F "),o(),a(51,"button",62),h("click",function(){let r=C(e).$implicit,s=g();return y(s.editRoute(r.id))}),l(52," \u270F\uFE0F "),o(),a(53,"button",63),h("click",function(){let r=C(e).$implicit,s=g();return y(s.duplicateRoute(r.id))}),l(54," \u{1F4CB} "),o(),a(55,"button",64),h("click",function(){let r=C(e).$implicit,s=g();return y(s.deleteRoute(r.id))}),l(56," \u{1F5D1}\uFE0F "),o()()()()}if(n&2){let e=t.$implicit,i=g();c(4),_(e.routeCode),c(),m("ngIf",e.isPopular),c(4),_(e.name),c(2),Y(" ",e.stops.length," stops \u2022 ",e.dailyTrips," daily trips "),c(4),_(e.origin),c(4),_(e.destination),c(3),_(i.formatDistance(e.totalDistance)),c(3),_(i.formatDuration(e.estimatedDuration)),c(4),_(e.stops.length),c(2),m("ngForOf",e.stops.slice(0,3)),c(),m("ngIf",e.stops.length>3),c(2),m("ngClass",i.getStatusClass(e.status)),c(),x(" ",se(36,19,e.status)," "),c(3),m("ngClass",i.getRouteTypeClass(e.routeType)),c(),x(" ",se(40,21,e.routeType)," "),c(5),Be("width",e.averageOccupancy,"%"),c(2),x("",e.averageOccupancy,"%")}}function tA(n,t){if(n&1){let e=O();a(0,"div",66)(1,"div",67),l(2,"\u{1F5FA}\uFE0F"),o(),a(3,"h3"),l(4,"No Routes Found"),o(),a(5,"p"),l(6),o(),a(7,"button",3),h("click",function(){C(e);let r=g();return y(r.addNewRoute())}),a(8,"span"),l(9,"\u2795"),o(),l(10," Create First Route "),o()()}if(n&2){let e=g();c(6),_(e.searchTerm||e.statusFilter!=="all"||e.routeTypeFilter!=="all"?"No routes match your current filters. Try adjusting your search criteria.":"You haven't created any routes yet. Start by adding your first route.")}}function nA(n,t){if(n&1){let e=O();a(0,"button",73),h("click",function(){let r=C(e).index,s=g(2);return y(s.changePage(r+1))}),l(1),o()}if(n&2){let e=t.index,i=g(2);I("active",i.currentPage===e+1),c(),x(" ",e+1," ")}}function iA(n,t){if(n&1){let e=O();a(0,"div",68)(1,"div",69),l(2),o(),a(3,"div",70)(4,"button",71),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage-1))}),l(5," \u2190 Previous "),o(),v(6,nA,2,3,"button",72),a(7,"button",71),h("click",function(){C(e);let r=g();return y(r.changePage(r.currentPage+1))}),l(8," Next \u2192 "),o()()()}if(n&2){let e=g();c(2),Ke(" Showing ",(e.currentPage-1)*e.itemsPerPage+1," to ",e.Math.min(e.currentPage*e.itemsPerPage,e.filteredRoutes.length)," of ",e.filteredRoutes.length," routes "),c(2),m("disabled",e.currentPage===1),c(2),m("ngForOf",si(6,Y3).constructor(e.totalPages)),c(),m("disabled",e.currentPage===e.totalPages)}}var Ed=class n{constructor(t){this.router=t}routes=[];filteredRoutes=[];stats={total:0,active:0,inactive:0,maintenance:0,suspended:0,totalDistance:0,averageDistance:0};Math=Math;searchTerm="";statusFilter="all";routeTypeFilter="all";sortBy="name";sortDirection="asc";currentPage=1;itemsPerPage=10;totalPages=1;ngOnInit(){this.loadMockData(),this.calculateStats(),this.applyFilters()}loadMockData(){this.routes=[{id:"R001",routeCode:"RYD-JED-001",name:"Riyadh to Jeddah Express",origin:"Riyadh",destination:"Jeddah",totalDistance:950,estimatedDuration:480,stops:[{id:"S001",name:"Riyadh Central Terminal",city:"Riyadh",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S002",name:"Taif Rest Stop",city:"Taif",type:"intermediate",distanceFromPrevious:350,durationFromPrevious:240},{id:"S003",name:"Jeddah Main Terminal",city:"Jeddah",type:"destination",distanceFromPrevious:600,durationFromPrevious:240}],status:"active",routeType:"intercity",operatingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],dailyTrips:4,averageOccupancy:85,baseFare:150,farePerKm:.35,createdDate:new Date("2024-01-15"),lastModified:new Date("2024-07-20"),isPopular:!0},{id:"R002",routeCode:"DAM-RYD-002",name:"Dammam to Riyadh Business",origin:"Dammam",destination:"Riyadh",totalDistance:395,estimatedDuration:300,stops:[{id:"S004",name:"Dammam Bus Station",city:"Dammam",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S005",name:"Al Khobar Junction",city:"Al Khobar",type:"intermediate",distanceFromPrevious:25,durationFromPrevious:30},{id:"S006",name:"Riyadh Eastern Terminal",city:"Riyadh",type:"destination",distanceFromPrevious:370,durationFromPrevious:270}],status:"active",routeType:"intercity",operatingDays:["monday","tuesday","wednesday","thursday","friday"],dailyTrips:3,averageOccupancy:72,baseFare:120,farePerKm:.4,createdDate:new Date("2024-02-10"),lastModified:new Date("2024-07-18"),isPopular:!1},{id:"R003",routeCode:"MEC-MED-003",name:"Mecca to Medina Umrah Special",origin:"Mecca",destination:"Medina",totalDistance:450,estimatedDuration:270,stops:[{id:"S007",name:"Mecca Haram Terminal",city:"Mecca",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S008",name:"Medina Prophet's Mosque Terminal",city:"Medina",type:"destination",distanceFromPrevious:450,durationFromPrevious:270}],status:"active",routeType:"express",operatingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],dailyTrips:6,averageOccupancy:95,baseFare:80,farePerKm:.25,createdDate:new Date("2024-01-05"),lastModified:new Date("2024-07-22"),isPopular:!0},{id:"R004",routeCode:"ABH-KMS-004",name:"Abha Mountain Circuit",origin:"Abha",destination:"Khamis Mushait",totalDistance:55,estimatedDuration:90,stops:[{id:"S009",name:"Abha Central",city:"Abha",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S010",name:"Al Souda Viewpoint",city:"Al Souda",type:"intermediate",distanceFromPrevious:20,durationFromPrevious:35},{id:"S011",name:"Khamis Mushait Terminal",city:"Khamis Mushait",type:"destination",distanceFromPrevious:35,durationFromPrevious:55}],status:"maintenance",routeType:"local",operatingDays:["friday","saturday","sunday"],dailyTrips:2,averageOccupancy:60,baseFare:25,farePerKm:.8,createdDate:new Date("2024-03-08"),lastModified:new Date("2024-07-15"),isPopular:!1},{id:"R005",routeCode:"RYD-NAJ-005",name:"Riyadh to Najran Express",origin:"Riyadh",destination:"Najran",totalDistance:950,estimatedDuration:600,stops:[{id:"S012",name:"Riyadh Southern Terminal",city:"Riyadh",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S013",name:"Wadi Al-Dawasir Stop",city:"Wadi Al-Dawasir",type:"intermediate",distanceFromPrevious:450,durationFromPrevious:300},{id:"S014",name:"Najran Main Terminal",city:"Najran",type:"destination",distanceFromPrevious:500,durationFromPrevious:300}],status:"inactive",routeType:"intercity",operatingDays:["tuesday","thursday","saturday"],dailyTrips:1,averageOccupancy:45,baseFare:200,farePerKm:.3,createdDate:new Date("2024-01-20"),lastModified:new Date("2024-06-10"),isPopular:!1},{id:"R006",routeCode:"JED-TIF-006",name:"Jeddah to Taif Mountain Route",origin:"Jeddah",destination:"Taif",totalDistance:165,estimatedDuration:120,stops:[{id:"S015",name:"Jeddah Airport Terminal",city:"Jeddah",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S016",name:"Taif Central Station",city:"Taif",type:"destination",distanceFromPrevious:165,durationFromPrevious:120}],status:"active",routeType:"express",operatingDays:["friday","saturday","sunday"],dailyTrips:3,averageOccupancy:78,baseFare:45,farePerKm:.5,createdDate:new Date("2024-04-12"),lastModified:new Date("2024-07-25"),isPopular:!1},{id:"R007",routeCode:"RYD-HAL-007",name:"Riyadh to Hail Northern Express",origin:"Riyadh",destination:"Hail",totalDistance:650,estimatedDuration:420,stops:[{id:"S017",name:"Riyadh Northern Terminal",city:"Riyadh",type:"origin",distanceFromPrevious:0,durationFromPrevious:0},{id:"S018",name:"Buraydah Junction",city:"Buraydah",type:"intermediate",distanceFromPrevious:330,durationFromPrevious:210},{id:"S019",name:"Hail Central Station",city:"Hail",type:"destination",distanceFromPrevious:320,durationFromPrevious:210}],status:"suspended",routeType:"intercity",operatingDays:["monday","wednesday","friday"],dailyTrips:2,averageOccupancy:55,baseFare:180,farePerKm:.42,createdDate:new Date("2024-02-28"),lastModified:new Date("2024-07-01"),isPopular:!1}]}calculateStats(){this.stats={total:this.routes.length,active:this.routes.filter(t=>t.status==="active").length,inactive:this.routes.filter(t=>t.status==="inactive").length,maintenance:this.routes.filter(t=>t.status==="maintenance").length,suspended:this.routes.filter(t=>t.status==="suspended").length,totalDistance:this.routes.reduce((t,e)=>t+e.totalDistance,0),averageDistance:this.routes.length>0?this.routes.reduce((t,e)=>t+e.totalDistance,0)/this.routes.length:0}}applyFilters(){let t=[...this.routes];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.routeCode.toLowerCase().includes(e)||i.origin.toLowerCase().includes(e)||i.destination.toLowerCase().includes(e))}this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.routeTypeFilter!=="all"&&(t=t.filter(e=>e.routeType===this.routeTypeFilter)),t.sort((e,i)=>{let r=e[this.sortBy],s=i[this.sortBy];return typeof r=="string"&&(r=r.toLowerCase(),s=s.toLowerCase()),r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0}),this.filteredRoutes=t,this.totalPages=Math.ceil(t.length/this.itemsPerPage),this.currentPage=1}getPaginatedRoutes(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredRoutes.slice(t,e)}changePage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t)}getStatusClass(t){switch(t){case"active":return"status-active";case"inactive":return"status-inactive";case"maintenance":return"status-maintenance";case"suspended":return"status-suspended";default:return""}}getRouteTypeClass(t){switch(t){case"intercity":return"route-type-intercity";case"intracity":return"route-type-intracity";case"express":return"route-type-express";case"local":return"route-type-local";default:return""}}toggleSort(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc"),this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}formatDuration(t){let e=Math.floor(t/60),i=t%60;return e>0?i>0?`${e}h ${i}m`:`${e}h`:`${i}m`}formatDistance(t){return`${t} km`}formatCurrency(t){return`SAR ${t.toLocaleString()}`}viewRouteDetails(t){this.router.navigate(["/routes",t])}editRoute(t){this.router.navigate(["/routes",t,"edit"])}addNewRoute(){this.router.navigate(["/routes/add"])}deleteRoute(t){confirm("Are you sure you want to delete this route?")&&(this.routes=this.routes.filter(e=>e.id!==t),this.calculateStats(),this.applyFilters())}duplicateRoute(t){this.router.navigate(["/routes/add"],{queryParams:{duplicate:t}})}trackByRouteId(t,e){return e.id}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-route-list"]],decls:136,vars:21,consts:[[1,"route-management-container"],[1,"page-header"],[1,"header-content"],[1,"btn","btn-primary",3,"click"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","active"],[1,"stat-card","maintenance"],[1,"stat-card","suspended"],[1,"stat-card","distance"],[1,"stat-card","average"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder","Search routes by name, code, origin, or destination...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],["value","maintenance"],["value","suspended"],["value","intercity"],["value","intracity"],["value","express"],["value","local"],["value","5"],["value","10"],["value","25"],["value","50"],[1,"table-container"],[1,"route-table"],[1,"sortable",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"route-code"],[1,"code-text"],["class","popular-badge",4,"ngIf"],[1,"route-name"],[1,"route-meta"],[1,"location-info"],[1,"location-name"],[1,"distance-badge"],[1,"duration-badge"],[1,"stops-info"],[1,"stops-count"],[1,"stops-preview"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"route-type-badge",3,"ngClass"],[1,"occupancy-info"],[1,"occupancy-bar"],[1,"occupancy-fill"],[1,"occupancy-text"],[1,"action-buttons"],["title","View Details",1,"action-btn","view-btn",3,"click"],["title","Edit Route",1,"action-btn","edit-btn",3,"click"],["title","Duplicate Route",1,"action-btn","duplicate-btn",3,"click"],["title","Delete Route",1,"action-btn","delete-btn",3,"click"],[1,"popular-badge"],[1,"empty-state"],[1,"empty-icon"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],["class","pagination-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-btn",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Route Management"),o(),a(5,"p"),l(6,"Manage your bus routes and transportation networks"),o()(),a(7,"button",3),h("click",function(){return i.addNewRoute()}),a(8,"span"),l(9,"\u2795"),o(),l(10," Add New Route "),o()(),a(11,"div",4)(12,"div",5)(13,"div",6),l(14,"\u{1F5FA}\uFE0F"),o(),a(15,"div",7)(16,"h3"),l(17,"Total Routes"),o(),a(18,"p",8),l(19),o()()(),a(20,"div",9)(21,"div",6),l(22,"\u2705"),o(),a(23,"div",7)(24,"h3"),l(25,"Active Routes"),o(),a(26,"p",8),l(27),o()()(),a(28,"div",10)(29,"div",6),l(30,"\u{1F527}"),o(),a(31,"div",7)(32,"h3"),l(33,"Under Maintenance"),o(),a(34,"p",8),l(35),o()()(),a(36,"div",11)(37,"div",6),l(38,"\u23F8\uFE0F"),o(),a(39,"div",7)(40,"h3"),l(41,"Suspended"),o(),a(42,"p",8),l(43),o()()(),a(44,"div",12)(45,"div",6),l(46,"\u{1F4CF}"),o(),a(47,"div",7)(48,"h3"),l(49,"Total Distance"),o(),a(50,"p",8),l(51),o()()(),a(52,"div",13)(53,"div",6),l(54,"\u{1F4CA}"),o(),a(55,"div",7)(56,"h3"),l(57,"Average Distance"),o(),a(58,"p",8),l(59),o()()()(),a(60,"div",14)(61,"div",15)(62,"input",16),L("ngModelChange",function(s){return $(i.searchTerm,s)||(i.searchTerm=s),s}),h("input",function(){return i.applyFilters()}),o(),a(63,"span",17),l(64,"\u{1F50D}"),o()(),a(65,"div",18)(66,"div",19)(67,"label"),l(68,"Status"),o(),a(69,"select",20),L("ngModelChange",function(s){return $(i.statusFilter,s)||(i.statusFilter=s),s}),h("change",function(){return i.applyFilters()}),a(70,"option",21),l(71,"All Status"),o(),a(72,"option",22),l(73,"Active"),o(),a(74,"option",23),l(75,"Inactive"),o(),a(76,"option",24),l(77,"Maintenance"),o(),a(78,"option",25),l(79,"Suspended"),o()()(),a(80,"div",19)(81,"label"),l(82,"Route Type"),o(),a(83,"select",20),L("ngModelChange",function(s){return $(i.routeTypeFilter,s)||(i.routeTypeFilter=s),s}),h("change",function(){return i.applyFilters()}),a(84,"option",21),l(85,"All Types"),o(),a(86,"option",26),l(87,"Inter-City"),o(),a(88,"option",27),l(89,"Intra-City"),o(),a(90,"option",28),l(91,"Express"),o(),a(92,"option",29),l(93,"Local"),o()()(),a(94,"div",19)(95,"label"),l(96,"Items per page"),o(),a(97,"select",20),L("ngModelChange",function(s){return $(i.itemsPerPage,s)||(i.itemsPerPage=s),s}),h("change",function(){return i.applyFilters()}),a(98,"option",30),l(99,"5 per page"),o(),a(100,"option",31),l(101,"10 per page"),o(),a(102,"option",32),l(103,"25 per page"),o(),a(104,"option",33),l(105,"50 per page"),o()()()()(),a(106,"div",34)(107,"table",35)(108,"thead")(109,"tr")(110,"th",36),h("click",function(){return i.toggleSort("routeCode")}),l(111),o(),a(112,"th",36),h("click",function(){return i.toggleSort("name")}),l(113),o(),a(114,"th",36),h("click",function(){return i.toggleSort("origin")}),l(115),o(),a(116,"th",36),h("click",function(){return i.toggleSort("destination")}),l(117),o(),a(118,"th",36),h("click",function(){return i.toggleSort("totalDistance")}),l(119),o(),a(120,"th",36),h("click",function(){return i.toggleSort("estimatedDuration")}),l(121),o(),a(122,"th"),l(123,"Stops"),o(),a(124,"th",36),h("click",function(){return i.toggleSort("status")}),l(125),o(),a(126,"th"),l(127,"Route Type"),o(),a(128,"th"),l(129,"Avg. Occupancy"),o(),a(130,"th"),l(131,"Actions"),o()()(),a(132,"tbody"),v(133,eA,57,23,"tr",37),o()(),v(134,tA,11,1,"div",38),o(),v(135,iA,9,7,"div",39),o()),e&2&&(c(19),_(i.stats.total),c(8),_(i.stats.active),c(8),_(i.stats.maintenance),c(8),_(i.stats.suspended),c(8),_(i.formatDistance(i.stats.totalDistance)),c(8),_(i.formatDistance(i.Math.round(i.stats.averageDistance))),c(3),F("ngModel",i.searchTerm),c(7),F("ngModel",i.statusFilter),c(14),F("ngModel",i.routeTypeFilter),c(14),F("ngModel",i.itemsPerPage),c(14),x(" Route Code ",i.getSortIcon("routeCode")," "),c(2),x(" Route Name ",i.getSortIcon("name")," "),c(2),x(" Origin ",i.getSortIcon("origin")," "),c(2),x(" Destination ",i.getSortIcon("destination")," "),c(2),x(" Distance ",i.getSortIcon("totalDistance")," "),c(2),x(" Duration ",i.getSortIcon("estimatedDuration")," "),c(4),x(" Status ",i.getSortIcon("status")," "),c(8),m("ngForOf",i.getPaginatedRoutes())("ngForTrackBy",i.trackByRouteId),c(),m("ngIf",i.filteredRoutes.length===0),c(),m("ngIf",i.totalPages>1))},dependencies:[K,Da,ae,ee,Ge,et,Re,Oe,Se,Pe,Ie,it],styles:[".route-management-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:28px;font-weight:600}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px;transition:all .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#4299e1}.stat-card.active[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.maintenance[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.suspended[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-card.distance[_ngcontent-%COMP%]{border-left-color:#9f7aea}.stat-card.average[_ngcontent-%COMP%]{border-left-color:#38b2ac}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#f7fafc}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#2d3748}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 45px 12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.search-icon[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);font-size:16px;color:#718096}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#4a5568}.filter-select[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;margin-bottom:25px}.route-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.route-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f7fafc;padding:16px 12px;text-align:left;font-weight:600;color:#4a5568;font-size:14px;border-bottom:1px solid #e2e8f0}.route-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.route-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#edf2f7}.route-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #f1f5f9;vertical-align:middle}.route-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.route-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.route-code[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.code-text[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#2d3748;font-size:13px}.popular-badge[_ngcontent-%COMP%]{font-size:11px;color:#d69e2e;font-weight:500}.route-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;display:block;margin-bottom:2px}.route-meta[_ngcontent-%COMP%]{font-size:12px;color:#718096}.location-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.location-name[_ngcontent-%COMP%]{font-weight:500;color:#4a5568}.distance-badge[_ngcontent-%COMP%], .duration-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:500;background:#edf2f7;color:#4a5568}.stops-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.stops-count[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.stops-preview[_ngcontent-%COMP%]{font-size:11px;color:#718096;max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;text-transform:capitalize}.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.status-maintenance[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.status-suspended[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.route-type-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:16px;font-size:11px;font-weight:500;text-transform:capitalize}.route-type-intercity[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.route-type-intracity[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.route-type-express[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.route-type-local[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.occupancy-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;min-width:80px}.occupancy-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.occupancy-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#48bb78,#38a169);border-radius:3px;transition:width .3s ease}.occupancy-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#4a5568;text-align:center}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s ease}.view-btn[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.view-btn[_ngcontent-%COMP%]:hover{background:#90cdf4;transform:scale(1.05)}.edit-btn[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.edit-btn[_ngcontent-%COMP%]:hover{background:#fbd38d;transform:scale(1.05)}.duplicate-btn[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.duplicate-btn[_ngcontent-%COMP%]:hover{background:#d6bcfa;transform:scale(1.05)}.delete-btn[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.delete-btn[_ngcontent-%COMP%]:hover{background:#feb2b2;transform:scale(1.05)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568;font-size:20px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;max-width:400px;margin:0 auto 30px;line-height:1.5}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:20px 25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.pagination-info[_ngcontent-%COMP%]{color:#718096;font-size:14px}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.pagination-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;background:#fff;color:#4a5568;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s ease}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#667eea}.pagination-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.route-management-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.route-table[_ngcontent-%COMP%]{font-size:12px}.route-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .route-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.pagination-controls[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.route-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .route-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px;font-size:11px}.stops-preview[_ngcontent-%COMP%]{max-width:80px}.occupancy-info[_ngcontent-%COMP%]{min-width:60px}}@media (prefers-reduced-motion: reduce){.stat-card[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover, .pagination-btn[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{transform:none}}"]})};function rA(n,t){n&1&&(a(0,"div",4),P(1,"div",5),a(2,"p"),l(3,"Loading route details..."),o()())}function oA(n,t){n&1&&(a(0,"span",63),l(1,"\u{1F31F} Popular Route"),o())}function aA(n,t){if(n&1&&(a(0,"div",75)(1,"span",76)(2,"span",77),l(3,"\u{1F4CF}"),o(),l(4),o(),a(5,"span",76)(6,"span",77),l(7,"\u23F1\uFE0F"),o(),l(8),o()()),n&2){let e=g().$implicit,i=g(2);c(4),x(" ",i.formatDistance(e.distanceFromPrevious)," from previous "),c(4),x(" ",i.formatDuration(e.durationFromPrevious)," ")}}function sA(n,t){if(n&1&&(a(0,"span",81),l(1),o()),n&2){let e=t.$implicit,i=g(4);m("title",i.getFacilityName(e)),c(),Y(" ",i.getFacilityIcon(e)," ",i.getFacilityName(e)," ")}}function lA(n,t){if(n&1&&(a(0,"div",78)(1,"label"),l(2,"Available Facilities:"),o(),a(3,"div",79),v(4,sA,2,3,"span",80),o()()),n&2){let e=g().$implicit;c(4),m("ngForOf",e.facilities)}}function cA(n,t){if(n&1&&(a(0,"div",64)(1,"div",65)(2,"span",66),l(3),o()(),a(4,"div",67)(5,"div",68)(6,"h4"),l(7),o(),a(8,"span",69),l(9),j(10,"titlecase"),o()(),a(11,"div",70)(12,"div",71)(13,"span",72),l(14,"\u{1F4CD}"),o(),l(15),o(),v(16,aA,9,2,"div",73)(17,lA,5,1,"div",74),o()()()),n&2){let e=t.$implicit,i=t.last;I("is-last",i),c(),m("ngClass","marker-"+e.type),c(2),x(" ",e.type==="origin"?"\u{1F7E2}":e.type==="destination"?"\u{1F534}":"\u{1F535}"," "),c(4),_(e.name),c(2),_(se(10,9,e.type)),c(6),x(" ",e.address," "),c(),m("ngIf",e.distanceFromPrevious>0),c(),m("ngIf",e.facilities.length>0)}}function dA(n,t){if(n&1&&(a(0,"span",82),l(1),o()),n&2){let e=t.$implicit,i=g(2);c(),x(" ",i.getDayName(e)," ")}}function uA(n,t){if(n&1&&(a(0,"div",47)(1,"label"),l(2,"Seasonal Operation"),o(),a(3,"div",41),l(4),o()()),n&2){let e=g(2);c(4),Y(" ",e.formatDate(e.route.seasonStart)," - ",e.formatDate(e.route.seasonEnd)," ")}}function pA(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g().$implicit,i=g(2);c(),Y(" ",e.passengersBoarded,"/",i.route.maxCapacity," ")}}function mA(n,t){n&1&&(a(0,"span",87),l(1,"-"),o())}function gA(n,t){if(n&1&&(a(0,"tr")(1,"td"),l(2),o(),a(3,"td",83),l(4),o(),a(5,"td"),l(6),o(),a(7,"td"),l(8),o(),a(9,"td"),l(10),o(),a(11,"td"),v(12,pA,2,2,"span",84)(13,mA,2,0,"span",85),o(),a(14,"td",58),l(15),o(),a(16,"td")(17,"span",13),l(18),j(19,"titlecase"),o()(),a(20,"td",86),l(21),o()()),n&2){let e=t.$implicit,i=g(2);c(2),_(i.formatDate(e.date)),c(2),_(e.busNumber),c(2),_(e.driverName),c(2),_(e.departureTime),c(2),_(e.arrivalTime),c(2),m("ngIf",e.passengersBoarded>0),c(),m("ngIf",e.passengersBoarded===0),c(2),_(i.formatCurrency(e.revenue)),c(2),m("ngClass",i.getStatusClass(e.status)),c(),x(" ",se(19,11,e.status)," "),c(3),_(e.notes||"-")}}function fA(n,t){if(n&1){let e=O();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"button",9),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(4," \u2190 Back to Routes "),o(),a(5,"div",10)(6,"h1"),l(7),o(),a(8,"div",11)(9,"span",12),l(10),o(),a(11,"span",13),l(12),j(13,"titlecase"),o(),a(14,"span",14),l(15),j(16,"titlecase"),o(),v(17,oA,2,0,"span",15),o()()(),a(18,"div",16)(19,"button",17),h("click",function(){C(e);let r=g();return y(r.duplicateRoute())}),l(20," \u{1F4CB} Duplicate "),o(),a(21,"button",18),h("click",function(){C(e);let r=g();return y(r.editRoute())}),l(22," \u270F\uFE0F Edit Route "),o(),a(23,"div",19)(24,"button",20),l(25," \u2699\uFE0F More Actions "),o(),a(26,"div",21)(27,"button",22),h("click",function(){C(e);let r=g();return y(r.updateStatus("active"))}),l(28," Set Active "),o(),a(29,"button",22),h("click",function(){C(e);let r=g();return y(r.updateStatus("maintenance"))}),l(30," Set Maintenance "),o(),a(31,"button",22),h("click",function(){C(e);let r=g();return y(r.updateStatus("inactive"))}),l(32," Set Inactive "),o(),a(33,"button",23),h("click",function(){C(e);let r=g();return y(r.deleteRoute())}),l(34," Delete Route "),o()()()()(),a(35,"div",24)(36,"div",25)(37,"div",26),l(38,"\u{1F4CF}"),o(),a(39,"div",27)(40,"h3"),l(41,"Total Distance"),o(),a(42,"p",28),l(43),o()()(),a(44,"div",29)(45,"div",26),l(46,"\u23F1\uFE0F"),o(),a(47,"div",27)(48,"h3"),l(49,"Journey Time"),o(),a(50,"p",28),l(51),o()()(),a(52,"div",30)(53,"div",26),l(54,"\u{1F68F}"),o(),a(55,"div",27)(56,"h3"),l(57,"Total Stops"),o(),a(58,"p",28),l(59),o()()(),a(60,"div",31)(61,"div",26),l(62,"\u{1F68C}"),o(),a(63,"div",27)(64,"h3"),l(65,"Daily Trips"),o(),a(66,"p",28),l(67),o()()(),a(68,"div",32)(69,"div",26),l(70,"\u{1F465}"),o(),a(71,"div",27)(72,"h3"),l(73,"Avg. Occupancy"),o(),a(74,"p",28),l(75),o()()(),a(76,"div",33)(77,"div",26),l(78,"\u{1F4B0}"),o(),a(79,"div",27)(80,"h3"),l(81,"Base Fare"),o(),a(82,"p",28),l(83),o()()()(),a(84,"div",34)(85,"div",35)(86,"div",36)(87,"div",37)(88,"h2"),l(89,"Route Information"),o()(),a(90,"div",38)(91,"div",39)(92,"div",40)(93,"label"),l(94,"Route Name"),o(),a(95,"div",41),l(96),o()(),a(97,"div",40)(98,"label"),l(99,"Route Code"),o(),a(100,"div",41),l(101),o()(),a(102,"div",40)(103,"label"),l(104,"Origin"),o(),a(105,"div",41),l(106),o()(),a(107,"div",40)(108,"label"),l(109,"Destination"),o(),a(110,"div",41),l(111),o()(),a(112,"div",40)(113,"label"),l(114,"Route Type"),o(),a(115,"div",41)(116,"span",14),l(117),j(118,"titlecase"),o()()(),a(119,"div",40)(120,"label"),l(121,"Status"),o(),a(122,"div",41)(123,"span",13),l(124),j(125,"titlecase"),o()()(),a(126,"div",42)(127,"label"),l(128,"Description"),o(),a(129,"div",41),l(130),o()()()()(),a(131,"div",36)(132,"div",37)(133,"h2"),l(134),o()(),a(135,"div",38)(136,"div",43),v(137,cA,18,11,"div",44),o()()()(),a(138,"div",45)(139,"div",36)(140,"div",37)(141,"h2"),l(142,"Schedule & Operations"),o()(),a(143,"div",38)(144,"div",46)(145,"div",47)(146,"label"),l(147,"Operating Days"),o(),a(148,"div",48),v(149,dA,2,1,"span",49),o()(),a(150,"div",47)(151,"label"),l(152,"Daily Trips"),o(),a(153,"div",41),l(154),o()(),a(155,"div",47)(156,"label"),l(157,"Maximum Capacity"),o(),a(158,"div",41),l(159),o()(),a(160,"div",47)(161,"label"),l(162,"License Required"),o(),a(163,"div",41),l(164),o()(),a(165,"div",47)(166,"label"),l(167,"Hazardous Route"),o(),a(168,"div",41)(169,"span"),l(170),o()()(),v(171,uA,5,2,"div",50),o()()(),a(172,"div",36)(173,"div",37)(174,"h2"),l(175,"Pricing Information"),o()(),a(176,"div",38)(177,"div",51)(178,"div",52)(179,"label"),l(180,"Base Fare"),o(),a(181,"div",53),l(182),o()(),a(183,"div",52)(184,"label"),l(185,"Per Kilometer"),o(),a(186,"div",53),l(187),o()(),a(188,"div",54)(189,"label"),l(190,"Estimated Total Fare"),o(),a(191,"div",55),l(192),o()()()()(),a(193,"div",36)(194,"div",37)(195,"h2"),l(196,"Performance (Last 5 Trips)"),o()(),a(197,"div",38)(198,"div",56)(199,"div",57)(200,"label"),l(201,"Total Revenue"),o(),a(202,"div",58),l(203),o()(),a(204,"div",57)(205,"label"),l(206,"Completed Trips"),o(),a(207,"div",41),l(208),o()(),a(209,"div",57)(210,"label"),l(211,"Average Occupancy"),o(),a(212,"div",41),l(213),o()()()()(),a(214,"div",36)(215,"div",37)(216,"h2"),l(217,"Route Metadata"),o()(),a(218,"div",38)(219,"div",59)(220,"div",60)(221,"label"),l(222,"Created Date"),o(),a(223,"div",41),l(224),o()(),a(225,"div",60)(226,"label"),l(227,"Last Modified"),o(),a(228,"div",41),l(229),o()(),a(230,"div",60)(231,"label"),l(232,"Route ID"),o(),a(233,"div",41),l(234),o()()()()()()(),a(235,"div",36)(236,"div",37)(237,"h2"),l(238,"Recent Trips"),o()(),a(239,"div",38)(240,"div",61)(241,"table")(242,"thead")(243,"tr")(244,"th"),l(245,"Date"),o(),a(246,"th"),l(247,"Bus"),o(),a(248,"th"),l(249,"Driver"),o(),a(250,"th"),l(251,"Departure"),o(),a(252,"th"),l(253,"Arrival"),o(),a(254,"th"),l(255,"Passengers"),o(),a(256,"th"),l(257,"Revenue"),o(),a(258,"th"),l(259,"Status"),o(),a(260,"th"),l(261,"Notes"),o()()(),a(262,"tbody"),v(263,gA,22,13,"tr",62),o()()()()()()}if(n&2){let e=g();c(7),_(e.route.name),c(3),_(e.route.routeCode),c(),m("ngClass",e.getStatusClass(e.route.status)),c(),x(" ",se(13,46,e.route.status)," "),c(2),m("ngClass",e.getRouteTypeClass(e.route.routeType)),c(),x(" ",se(16,48,e.route.routeType)," "),c(2),m("ngIf",e.route.isPopular),c(10),m("disabled",e.route.status==="active"),c(2),m("disabled",e.route.status==="maintenance"),c(2),m("disabled",e.route.status==="inactive"),c(12),_(e.formatDistance(e.route.totalDistance)),c(8),_(e.formatDuration(e.route.estimatedDuration)),c(8),_(e.route.stops.length),c(8),_(e.route.dailyTrips),c(8),x("",e.route.averageOccupancy,"%"),c(8),_(e.formatCurrency(e.route.baseFare)),c(13),_(e.route.name),c(5),_(e.route.routeCode),c(5),_(e.route.origin),c(5),_(e.route.destination),c(5),m("ngClass",e.getRouteTypeClass(e.route.routeType)),c(),x(" ",se(118,50,e.route.routeType)," "),c(6),m("ngClass",e.getStatusClass(e.route.status)),c(),x(" ",se(125,52,e.route.status)," "),c(6),_(e.route.description),c(4),x("Route Stops (",e.route.stops.length,")"),c(3),m("ngForOf",e.route.stops),c(12),m("ngForOf",e.route.operatingDays),c(5),x("",e.route.dailyTrips," trips per day"),c(5),x("",e.route.maxCapacity," passengers"),c(5),_(e.route.licenseRequired),c(5),q(e.route.isHazardous?"text-warning":"text-success"),c(),x(" ",e.route.isHazardous?"\u26A0\uFE0F Yes":"\u2705 No"," "),c(),m("ngIf",e.route.seasonalRoute),c(11),_(e.formatCurrency(e.route.baseFare)),c(5),x("",e.formatCurrency(e.route.farePerKm),"/km"),c(5),x(" ",e.formatCurrency(e.route.baseFare+e.route.farePerKm*e.route.totalDistance)," "),c(11),_(e.formatCurrency(e.getTotalRevenue())),c(5),Y("",e.getCompletedTrips()," / ",e.recentTrips.length,""),c(5),x("",e.getAverageOccupancy(),"%"),c(11),_(e.formatDate(e.route.createdDate)),c(5),_(e.formatDate(e.route.lastModified)),c(5),_(e.route.id),c(29),m("ngForOf",e.recentTrips)}}function _A(n,t){if(n&1){let e=O();a(0,"div",88)(1,"div",89),l(2,"\u{1F5FA}\uFE0F"),o(),a(3,"h2"),l(4,"Route Not Found"),o(),a(5,"p"),l(6,"The requested route could not be found."),o(),a(7,"button",90),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(8," \u2190 Back to Route List "),o()()}}var Dd=class n{constructor(t,e){this.activatedRoute=t;this.router=e}route=null;recentTrips=[];isLoading=!0;Math=Math;ngOnInit(){this.activatedRoute.params.subscribe(t=>{let e=t.id;this.loadRouteDetails(e),this.loadRecentTrips(e)})}loadRouteDetails(t){setTimeout(()=>{this.route=this.getMockRouteData(t),this.isLoading=!1},800)}loadRecentTrips(t){this.recentTrips=[{id:"T001",date:new Date("2024-07-26"),busNumber:"RB-001",driverName:"Ahmed Al-Rashid",departureTime:"06:00",arrivalTime:"14:30",passengersBoarded:42,status:"completed",revenue:6300,notes:"On-time departure and arrival"},{id:"T002",date:new Date("2024-07-25"),busNumber:"RB-002",driverName:"Mohammed Al-Ghamdi",departureTime:"14:00",arrivalTime:"22:15",passengersBoarded:38,status:"delayed",revenue:5700,notes:"15 minutes delay due to traffic"},{id:"T003",date:new Date("2024-07-24"),busNumber:"RB-003",driverName:"Khalid Al-Otaibi",departureTime:"08:30",arrivalTime:"17:00",passengersBoarded:45,status:"completed",revenue:6750},{id:"T004",date:new Date("2024-07-23"),busNumber:"RB-001",driverName:"Omar Al-Zahrani",departureTime:"11:00",arrivalTime:"19:30",passengersBoarded:35,status:"completed",revenue:5250},{id:"T005",date:new Date("2024-07-22"),busNumber:"RB-004",driverName:"Ali Al-Mansouri",departureTime:"16:00",arrivalTime:"00:30",passengersBoarded:0,status:"cancelled",revenue:0,notes:"Cancelled due to mechanical issues"}]}getMockRouteData(t){return{id:t,routeCode:"RYD-JED-001",name:"Riyadh to Jeddah Express",description:"Premium express service connecting the capital city Riyadh to the coastal city of Jeddah. This route features comfortable seating, air conditioning, and Wi-Fi connectivity for business and leisure travelers.",origin:"Riyadh",destination:"Jeddah",totalDistance:950,estimatedDuration:480,stops:[{id:"S001",name:"Riyadh Central Bus Terminal",city:"Riyadh",address:"King Fahd Road, Al-Malaz District, Riyadh 12624",type:"origin",distanceFromPrevious:0,durationFromPrevious:0,facilities:["restroom","food-court","wifi","parking","atm","waiting-area"],coordinates:{lat:24.7136,lng:46.6753}},{id:"S002",name:"Taif Mountain Rest Stop",city:"Taif",address:"Taif-Riyadh Highway, Exit 15, Taif 26513",type:"intermediate",distanceFromPrevious:350,durationFromPrevious:240,facilities:["restroom","food-court","fuel-station","prayer-room"],coordinates:{lat:21.4858,lng:40.4154}},{id:"S003",name:"Jeddah Main Bus Terminal",city:"Jeddah",address:"King Abdulaziz Road, Al-Baghdadiya District, Jeddah 23322",type:"destination",distanceFromPrevious:600,durationFromPrevious:240,facilities:["restroom","food-court","wifi","parking","atm","waiting-area","taxi-service"],coordinates:{lat:21.4858,lng:39.1925}}],status:"active",routeType:"intercity",operatingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],dailyTrips:4,averageOccupancy:85,baseFare:150,farePerKm:.35,createdDate:new Date("2024-01-15"),lastModified:new Date("2024-07-20"),isPopular:!0,maxCapacity:50,licenseRequired:"Commercial Heavy Vehicle License",isHazardous:!1,seasonalRoute:!1}}formatDuration(t){let e=Math.floor(t/60),i=t%60;return e>0?i>0?`${e}h ${i}m`:`${e}h`:`${i}m`}formatDistance(t){return`${t.toLocaleString()} km`}formatCurrency(t){return`SAR ${t.toLocaleString()}`}formatDate(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getStatusClass(t){switch(t){case"active":return"status-active";case"inactive":return"status-inactive";case"maintenance":return"status-maintenance";case"suspended":return"status-suspended";case"completed":return"status-completed";case"cancelled":return"status-cancelled";case"delayed":return"status-delayed";default:return""}}getRouteTypeClass(t){switch(t){case"intercity":return"route-type-intercity";case"intracity":return"route-type-intracity";case"express":return"route-type-express";case"local":return"route-type-local";default:return""}}getFacilityIcon(t){return{restroom:"\u{1F6BB}","food-court":"\u{1F37D}\uFE0F",wifi:"\u{1F4F6}",parking:"\u{1F17F}\uFE0F",atm:"\u{1F3E7}","waiting-area":"\u{1FA91}","fuel-station":"\u26FD","prayer-room":"\u{1F54C}","taxi-service":"\u{1F696}"}[t]||"\u{1F4CD}"}getFacilityName(t){return{restroom:"Restroom","food-court":"Food Court",wifi:"WiFi",parking:"Parking",atm:"ATM","waiting-area":"Waiting Area","fuel-station":"Fuel Station","prayer-room":"Prayer Room","taxi-service":"Taxi Service"}[t]||t}getDayName(t){return{monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"}[t]||t}goBack(){this.router.navigate(["/routes"])}editRoute(){this.route&&this.router.navigate(["/routes",this.route.id,"edit"])}duplicateRoute(){this.route&&this.router.navigate(["/routes/add"],{queryParams:{duplicate:this.route.id}})}deleteRoute(){this.route&&confirm(`Are you sure you want to delete the route "${this.route.name}"?`)&&(alert("Route deleted successfully!"),this.router.navigate(["/routes"]))}updateStatus(t){this.route&&(this.route.status=t,this.route.lastModified=new Date,alert(`Route status updated to ${t}`))}getTotalRevenue(){return this.recentTrips.reduce((t,e)=>t+e.revenue,0)}getCompletedTrips(){return this.recentTrips.filter(t=>t.status==="completed").length}getAverageOccupancy(){let t=this.recentTrips.filter(i=>i.status==="completed");if(t.length===0)return 0;let e=t.reduce((i,r)=>i+r.passengersBoarded,0);return Math.round(e/(t.length*(this.route?.maxCapacity||50))*100)}static \u0275fac=function(e){return new(e||n)(w(Te),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-route-details"]],decls:4,vars:3,consts:[[1,"route-details-container"],["class","loading-container",4,"ngIf"],["class","route-content",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"route-content"],[1,"page-header"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"route-title"],[1,"route-meta"],[1,"route-code"],[1,"status-badge",3,"ngClass"],[1,"route-type-badge",3,"ngClass"],["class","popular-badge",4,"ngIf"],[1,"header-actions"],[1,"action-btn","secondary",3,"click"],[1,"action-btn","primary",3,"click"],[1,"dropdown"],[1,"action-btn","secondary","dropdown-toggle"],[1,"dropdown-menu"],[3,"click","disabled"],[1,"danger",3,"click"],[1,"stats-grid"],[1,"stat-card","distance"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","duration"],[1,"stat-card","stops"],[1,"stat-card","trips"],[1,"stat-card","occupancy"],[1,"stat-card","fare"],[1,"content-grid"],[1,"left-column"],[1,"info-card"],[1,"card-header"],[1,"card-content"],[1,"info-grid"],[1,"info-item"],[1,"value"],[1,"info-item","full-width"],[1,"stops-timeline"],["class","stop-item",3,"is-last",4,"ngFor","ngForOf"],[1,"right-column"],[1,"schedule-info"],[1,"schedule-item"],[1,"days-grid"],["class","day-badge active",4,"ngFor","ngForOf"],["class","schedule-item",4,"ngIf"],[1,"pricing-info"],[1,"pricing-item"],[1,"price"],[1,"pricing-item","total"],[1,"price","large"],[1,"performance-metrics"],[1,"metric-item"],[1,"revenue"],[1,"metadata-info"],[1,"metadata-item"],[1,"trips-table"],[4,"ngFor","ngForOf"],[1,"popular-badge"],[1,"stop-item"],[1,"stop-marker",3,"ngClass"],[1,"marker-icon"],[1,"stop-content"],[1,"stop-header"],[1,"stop-type"],[1,"stop-details"],[1,"stop-location"],[1,"location-icon"],["class","stop-metrics",4,"ngIf"],["class","stop-facilities",4,"ngIf"],[1,"stop-metrics"],[1,"metric"],[1,"metric-icon"],[1,"stop-facilities"],[1,"facilities-list"],["class","facility-tag",3,"title",4,"ngFor","ngForOf"],[1,"facility-tag",3,"title"],[1,"day-badge","active"],[1,"bus-number"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"notes"],[1,"text-muted"],[1,"error-container"],[1,"error-icon"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0),v(1,rA,4,0,"div",1)(2,fA,264,54,"div",2)(3,_A,9,0,"div",3),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&i.route),c(),m("ngIf",!i.isLoading&&!i.route))},dependencies:[K,Da,ae,ee,Ge],styles:['.route-details-container[_ngcontent-%COMP%]{padding:30px;background:#f8fafc;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 20px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #e2e8f0;border-left:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;border-bottom:1px solid #e2e8f0;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-size:14px;cursor:pointer;transition:color .2s ease;align-self:flex-start}.back-btn[_ngcontent-%COMP%]:hover{color:#5a67d8}.route-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:28px;font-weight:600}.route-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.route-code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#4a5568;background:#edf2f7;padding:4px 8px;border-radius:6px;font-size:12px}.popular-badge[_ngcontent-%COMP%]{font-size:12px;color:#d69e2e;font-weight:500;background:#fef5e7;padding:4px 8px;border-radius:12px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start}.action-btn[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:6px}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}.action-btn.secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:1px solid #e2e8f0}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 10px 25px #0000001a;min-width:150px;z-index:10;display:none}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px 15px;border:none;background:none;text-align:left;cursor:pointer;transition:background-color .2s ease;font-size:14px}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f7fafc}.dropdown-menu[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]{color:#e53e3e}.dropdown-menu[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]:hover{background:#fed7d7}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;gap:15px;transition:all .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #0000001a}.stat-card.distance[_ngcontent-%COMP%]{border-left-color:#9f7aea}.stat-card.duration[_ngcontent-%COMP%]{border-left-color:#38b2ac}.stat-card.stops[_ngcontent-%COMP%]{border-left-color:#4299e1}.stat-card.trips[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.occupancy[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.fare[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#f7fafc}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#2d3748}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:30px;margin-bottom:30px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:#f7fafc;padding:20px 25px;border-bottom:1px solid #e2e8f0}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.card-content[_ngcontent-%COMP%]{padding:25px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.info-item.full-width[_ngcontent-%COMP%]{grid-column:span 2}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .schedule-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:14px}.metric-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.metadata-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;font-size:13px}.status-badge[_ngcontent-%COMP%], .route-type-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;text-transform:capitalize;display:inline-block}.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-inactive[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.status-maintenance[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.status-suspended[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.status-completed[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.status-delayed[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.route-type-intercity[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.route-type-intracity[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.route-type-express[_ngcontent-%COMP%]{background:#feebc8;color:#c05621}.route-type-local[_ngcontent-%COMP%]{background:#e9d8fd;color:#553c9a}.stops-timeline[_ngcontent-%COMP%]{position:relative}.stop-item[_ngcontent-%COMP%]{display:flex;margin-bottom:30px;position:relative}.stop-item[_ngcontent-%COMP%]:not(.is-last):after{content:"";position:absolute;left:20px;top:40px;bottom:-30px;width:2px;background:#e2e8f0}.stop-marker[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:20px;z-index:2;position:relative}.marker-origin[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{font-size:20px}.marker-intermediate[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{font-size:16px}.marker-destination[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{font-size:20px}.stop-content[_ngcontent-%COMP%]{flex:1}.stop-header[_ngcontent-%COMP%]{display:flex;justify-content:between;align-items:center;margin-bottom:10px;gap:15px}.stop-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600;flex:1}.stop-type[_ngcontent-%COMP%]{padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:capitalize;background:#edf2f7;color:#4a5568}.stop-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.stop-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#718096;font-size:14px}.location-icon[_ngcontent-%COMP%]{font-size:12px}.stop-metrics[_ngcontent-%COMP%]{display:flex;gap:20px}.metric[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;font-size:12px;color:#4a5568}.metric-icon[_ngcontent-%COMP%]{font-size:11px}.stop-facilities[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;margin-bottom:8px;display:block}.facilities-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.facility-tag[_ngcontent-%COMP%]{padding:4px 8px;background:#f0fff4;color:#22543d;border-radius:6px;font-size:11px;font-weight:500;display:flex;align-items:center;gap:4px}.schedule-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.schedule-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.schedule-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.days-grid[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.day-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:500;background:#edf2f7;color:#4a5568}.day-badge.active[_ngcontent-%COMP%]{background:#667eea;color:#fff}.text-warning[_ngcontent-%COMP%]{color:#d69e2e}.text-success[_ngcontent-%COMP%]{color:#38a169}.pricing-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.pricing-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}.pricing-item.total[_ngcontent-%COMP%]{border-bottom:none;border-top:2px solid #e2e8f0;padding-top:15px;margin-top:10px}.pricing-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;font-weight:500}.price[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.price.large[_ngcontent-%COMP%]{font-size:18px;color:#38a169}.performance-metrics[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.metric-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #f1f5f9}.metric-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.metric-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;font-weight:500}.metric-item[_ngcontent-%COMP%]   .revenue[_ngcontent-%COMP%]{color:#38a169;font-size:16px}.metadata-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.metadata-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #f1f5f9}.metadata-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.metadata-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.trips-table[_ngcontent-%COMP%]{overflow-x:auto}.trips-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f7fafc;padding:12px 10px;text-align:left;font-weight:600;color:#4a5568;font-size:12px;border-bottom:1px solid #e2e8f0;text-transform:uppercase;letter-spacing:.5px}.trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;border-bottom:1px solid #f1f5f9;vertical-align:middle;font-size:13px}.trips-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.bus-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#4a5568}.revenue[_ngcontent-%COMP%]{font-weight:600;color:#38a169}.notes[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#718096;font-style:italic}.text-muted[_ngcontent-%COMP%]{color:#a0aec0}.error-container[_ngcontent-%COMP%]{text-align:center;padding:100px 20px;color:#718096}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.6}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#4a5568;font-size:24px;font-weight:600}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 30px;font-size:16px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 8px 20px #667eea4d}@media (max-width: 1024px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.route-details-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:20px}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.info-item.full-width[_ngcontent-%COMP%]{grid-column:span 1}.stop-metrics[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.pricing-item[_ngcontent-%COMP%], .metric-item[_ngcontent-%COMP%], .metadata-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}.trips-table[_ngcontent-%COMP%]{font-size:11px}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.notes[_ngcontent-%COMP%]{max-width:100px}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.route-meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.stop-item[_ngcontent-%COMP%]{margin-bottom:25px}.stop-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.facilities-list[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.days-grid[_ngcontent-%COMP%]{justify-content:center}}@media (prefers-reduced-motion: reduce){.stat-card[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{transform:none}.loading-spinner[_ngcontent-%COMP%]{animation:none}}@media print{.header-actions[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{display:none!important}.info-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none!important;border:1px solid #e2e8f0!important}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};function hA(n,t){n&1&&(a(0,"div",4),P(1,"div",5),a(2,"p"),l(3,"Loading route data..."),o()())}function vA(n,t){if(n&1&&(a(0,"option",55),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),x(" ",e.label," ")}}function xA(n,t){if(n&1&&(a(0,"option",55),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function CA(n,t){if(n&1&&(a(0,"option",55),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function yA(n,t){if(n&1){let e=O();a(0,"div",69)(1,"div",14)(2,"label"),l(3,"Distance from Previous (km)"),o(),a(4,"input",77),L("ngModelChange",function(r){C(e);let s=g().$implicit;return $(s.distanceFromPrevious,r)||(s.distanceFromPrevious=r),y(r)}),o()(),a(5,"div",14)(6,"label"),l(7,"Duration from Previous (minutes)"),o(),a(8,"input",78),L("ngModelChange",function(r){C(e);let s=g().$implicit;return $(s.durationFromPrevious,r)||(s.durationFromPrevious=r),y(r)}),o()()()}if(n&2){let e=g(),i=e.$implicit,r=e.index;c(4),F("ngModel",i.distanceFromPrevious),m("name","stopDistance_"+r),c(4),F("ngModel",i.durationFromPrevious),m("name","stopDuration_"+r)}}function bA(n,t){if(n&1){let e=O();a(0,"div",79),h("click",function(){let r=C(e).$implicit,s=g().index,d=g(2);return y(d.toggleFacility(s,r.value))}),a(1,"span",80),l(2),o(),a(3,"span",81),l(4),o()()}if(n&2){let e=t.$implicit,i=g().index,r=g(2);I("selected",r.isFacilitySelected(i,e.value)),c(2),_(e.icon),c(2),_(e.label)}}function EA(n,t){if(n&1){let e=O();a(0,"div",56)(1,"div",57)(2,"div",58)(3,"span",59),l(4),o(),a(5,"h4"),l(6),o(),a(7,"select",60),L("ngModelChange",function(r){let s=C(e).$implicit;return $(s.type,r)||(s.type=r),y(r)}),a(8,"option",61),l(9,"Origin"),o(),a(10,"option",62),l(11,"Intermediate"),o(),a(12,"option",63),l(13,"Destination"),o()()(),a(14,"div",64)(15,"button",65),h("click",function(){let r=C(e).index,s=g(2);return y(s.moveStopUp(r))}),l(16," \u2191 "),o(),a(17,"button",66),h("click",function(){let r=C(e).index,s=g(2);return y(s.moveStopDown(r))}),l(18," \u2193 "),o(),a(19,"button",67),h("click",function(){let r=C(e).index,s=g(2);return y(s.removeStop(r))}),l(20," \u{1F5D1}\uFE0F "),o()()(),a(21,"div",68)(22,"div",69)(23,"div",14)(24,"label"),l(25,"City "),a(26,"span",16),l(27,"*"),o()(),a(28,"select",70),L("ngModelChange",function(r){let s=C(e).$implicit;return $(s.city,r)||(s.city=r),y(r)}),h("change",function(){let r=C(e),s=r.$implicit,d=r.index,u=g(2);return y(u.onCityChange(d,s.city))}),a(29,"option",71),l(30,"Select City"),o(),v(31,CA,2,2,"option",27),o()(),a(32,"div",14)(33,"label"),l(34,"Stop Name "),a(35,"span",16),l(36,"*"),o()(),a(37,"input",72),L("ngModelChange",function(r){let s=C(e).$implicit;return $(s.name,r)||(s.name=r),y(r)}),o()()(),a(38,"div",14)(39,"label"),l(40,"Address "),a(41,"span",16),l(42,"*"),o()(),a(43,"input",73),L("ngModelChange",function(r){let s=C(e).$implicit;return $(s.address,r)||(s.address=r),y(r)}),o()(),v(44,yA,9,4,"div",74),a(45,"div",14)(46,"label"),l(47,"Available Facilities"),o(),a(48,"div",75),v(49,bA,5,4,"div",76),o()()()()}if(n&2){let e=t.$implicit,i=t.index,r=g(2);c(4),_(r.getStopTypeIcon(e.type)),c(2),x("Stop ",i+1,""),c(),F("ngModel",e.type),m("name","stopType_"+i),c(8),m("disabled",i===0),c(2),m("disabled",i===r.formData.stops.length-1),c(2),m("disabled",r.formData.stops.length<=2),c(9),F("ngModel",e.city),m("name","stopCity_"+i),c(3),m("ngForOf",r.availableCities),c(6),F("ngModel",e.name),m("name","stopName_"+i),c(6),F("ngModel",e.address),m("name","stopAddress_"+i),c(),m("ngIf",i>0),c(5),m("ngForOf",r.availableFacilities)}}function DA(n,t){if(n&1){let e=O();a(0,"div",82),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleDay(r.value))}),a(1,"span",83),l(2),o(),a(3,"span",84),l(4),o()()}if(n&2){let e=t.$implicit,i=g(2);I("selected",i.isDaySelected(e.value)),c(2),_(e.short),c(2),_(e.label)}}function MA(n,t){if(n&1){let e=O();a(0,"div",14)(1,"label",85),l(2,"Season Start"),o(),a(3,"input",86),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.formData.seasonStart,r)||(s.formData.seasonStart=r),y(r)}),o()()}if(n&2){let e=g(2);c(3),F("ngModel",e.formData.seasonStart)}}function SA(n,t){if(n&1){let e=O();a(0,"div",14)(1,"label",87),l(2,"Season End"),o(),a(3,"input",88),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.formData.seasonEnd,r)||(s.formData.seasonEnd=r),y(r)}),o()()}if(n&2){let e=g(2);c(3),F("ngModel",e.formData.seasonEnd)}}function IA(n,t){if(n&1&&(a(0,"div",89)(1,"h4"),l(2,"Estimated Total Fare"),o(),a(3,"p",90),l(4),o(),a(5,"small"),l(6,"Based on current route distance and pricing"),o()()),n&2){let e=g(2);c(4),_(e.formatCurrency(e.getEstimatedFare()))}}function PA(n,t){n&1&&(a(0,"span",91),l(1,"\u23F3"),o())}function TA(n,t){if(n&1){let e=O();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1"),l(4),o(),a(5,"p"),l(6),o()(),a(7,"button",9),h("click",function(){C(e);let r=g();return y(r.cancel())}),l(8," \u2715 Cancel "),o()(),a(9,"form",10,0),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),a(11,"div",11)(12,"div",12)(13,"h2"),l(14,"Basic Information"),o(),a(15,"p"),l(16,"Enter the basic details for your route"),o()(),a(17,"div",13)(18,"div",14)(19,"label",15),l(20,"Route Name "),a(21,"span",16),l(22,"*"),o()(),a(23,"input",17),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.name,r)||(s.formData.name=r),y(r)}),o()(),a(24,"div",14)(25,"label",18),l(26,"Route Code "),a(27,"span",16),l(28,"*"),o()(),a(29,"div",19)(30,"input",20),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.routeCode,r)||(s.formData.routeCode=r),y(r)}),o(),a(31,"button",21),h("click",function(){C(e);let r=g();return y(r.generateRouteCode())}),l(32," Generate "),o()()(),a(33,"div",22)(34,"label",23),l(35,"Description"),o(),a(36,"textarea",24),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.description,r)||(s.formData.description=r),y(r)}),o()(),a(37,"div",14)(38,"label",25),l(39,"Route Type "),a(40,"span",16),l(41,"*"),o()(),a(42,"select",26),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.routeType,r)||(s.formData.routeType=r),y(r)}),v(43,vA,2,2,"option",27),o()(),a(44,"div",14)(45,"label",28),l(46,"Maximum Capacity "),a(47,"span",16),l(48,"*"),o()(),a(49,"div",19)(50,"input",29),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.maxCapacity,r)||(s.formData.maxCapacity=r),y(r)}),o(),a(51,"span",30),l(52,"passengers"),o()()(),a(53,"div",14)(54,"label",31),l(55,"Daily Trips"),o(),a(56,"input",32),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.dailyTrips,r)||(s.formData.dailyTrips=r),y(r)}),o()(),a(57,"div",14)(58,"label",33),l(59,"Required License"),o(),a(60,"select",34),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.licenseRequired,r)||(s.formData.licenseRequired=r),y(r)}),v(61,xA,2,2,"option",27),o()(),a(62,"div",14)(63,"div",35)(64,"input",36),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.isHazardous,r)||(s.formData.isHazardous=r),y(r)}),o(),a(65,"label",37),l(66,"Hazardous Route"),o(),a(67,"small"),l(68,"Route passes through challenging conditions"),o()()()()(),a(69,"div",11)(70,"div",12)(71,"h2"),l(72),o(),a(73,"p"),l(74,"Add stops along your route"),o(),a(75,"button",38),h("click",function(){C(e);let r=g();return y(r.addStop())}),l(76," \u2795 Add Stop "),o()(),a(77,"div",39),v(78,EA,50,16,"div",40),o()(),a(79,"div",11)(80,"div",12)(81,"h2"),l(82,"Schedule & Pricing"),o(),a(83,"p"),l(84,"Set operating schedule and fare information"),o()(),a(85,"div",13)(86,"div",22)(87,"label"),l(88,"Operating Days "),a(89,"span",16),l(90,"*"),o()(),a(91,"div",41),v(92,DA,5,4,"div",42),o()(),a(93,"div",14)(94,"div",35)(95,"input",43),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.seasonalRoute,r)||(s.formData.seasonalRoute=r),y(r)}),o(),a(96,"label",44),l(97,"Seasonal Route"),o(),a(98,"small"),l(99,"This route operates only during specific seasons"),o()()(),v(100,MA,4,1,"div",45)(101,SA,4,1,"div",45),a(102,"div",14)(103,"label",46),l(104,"Base Fare (SAR)"),o(),a(105,"input",47),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.baseFare,r)||(s.formData.baseFare=r),y(r)}),o()(),a(106,"div",14)(107,"label",48),l(108,"Fare per Kilometer (SAR)"),o(),a(109,"input",49),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.farePerKm,r)||(s.formData.farePerKm=r),y(r)}),o()()(),v(110,IA,7,1,"div",50),o(),a(111,"div",51)(112,"button",52),h("click",function(){C(e);let r=g();return y(r.cancel())}),l(113," Cancel "),o(),a(114,"button",53),v(115,PA,2,0,"span",54),l(116),o()()()()}if(n&2){let e=g();c(4),x(" ",e.isEditMode?"Edit Route":e.isDuplicateMode?"Duplicate Route":"Create New Route"," "),c(2),x(" ",e.isEditMode?"Update route information and settings":"Create a new route with stops and schedule"," "),c(17),F("ngModel",e.formData.name),c(7),F("ngModel",e.formData.routeCode),c(6),F("ngModel",e.formData.description),c(6),F("ngModel",e.formData.routeType),c(),m("ngForOf",e.routeTypes),c(7),F("ngModel",e.formData.maxCapacity),c(6),F("ngModel",e.formData.dailyTrips),c(4),F("ngModel",e.formData.licenseRequired),c(),m("ngForOf",e.licenseTypes),c(3),F("ngModel",e.formData.isHazardous),c(8),x("Route Stops (",e.formData.stops.length,")"),c(6),m("ngForOf",e.formData.stops),c(14),m("ngForOf",e.daysOfWeek),c(3),F("ngModel",e.formData.seasonalRoute),c(5),m("ngIf",e.formData.seasonalRoute),c(),m("ngIf",e.formData.seasonalRoute),c(4),F("ngModel",e.formData.baseFare),c(4),F("ngModel",e.formData.farePerKm),c(),m("ngIf",e.formData.baseFare>0||e.formData.farePerKm>0),c(4),m("disabled",!e.isFormValid()||e.isSaving),c(),m("ngIf",e.isSaving),c(),x(" ",e.isEditMode?"Update Route":"Create Route"," ")}}var as=class n{constructor(t,e){this.activatedRoute=t;this.router=e}isEditMode=!1;isDuplicateMode=!1;routeId=null;isLoading=!1;isSaving=!1;formData={routeCode:"",name:"",description:"",routeType:"intercity",operatingDays:["monday","tuesday","wednesday","thursday","friday"],dailyTrips:2,maxCapacity:50,licenseRequired:"Commercial Heavy Vehicle License",isHazardous:!1,seasonalRoute:!1,seasonStart:"",seasonEnd:"",baseFare:100,farePerKm:.35,stops:[]};routeTypes=[{value:"intercity",label:"Inter-City"},{value:"intracity",label:"Intra-City"},{value:"express",label:"Express"},{value:"local",label:"Local"}];daysOfWeek=[{value:"monday",label:"Monday",short:"Mon"},{value:"tuesday",label:"Tuesday",short:"Tue"},{value:"wednesday",label:"Wednesday",short:"Wed"},{value:"thursday",label:"Thursday",short:"Thu"},{value:"friday",label:"Friday",short:"Fri"},{value:"saturday",label:"Saturday",short:"Sat"},{value:"sunday",label:"Sunday",short:"Sun"}];licenseTypes=["Commercial Heavy Vehicle License","Commercial Light Vehicle License","Public Transport License","Tourist Transport License"];availableCities=["Riyadh","Jeddah","Dammam","Mecca","Medina","Taif","Abha","Khamis Mushait","Najran","Al Khobar","Yanbu","Hail","Arar","Jazan","Al Jubail","Buraydah","Tabuk","Qassim"];availableFacilities=[{value:"restroom",label:"Restroom",icon:"\u{1F6BB}"},{value:"food-court",label:"Food Court",icon:"\u{1F37D}\uFE0F"},{value:"wifi",label:"WiFi",icon:"\u{1F4F6}"},{value:"parking",label:"Parking",icon:"\u{1F17F}\uFE0F"},{value:"atm",label:"ATM",icon:"\u{1F3E7}"},{value:"waiting-area",label:"Waiting Area",icon:"\u{1FA91}"},{value:"fuel-station",label:"Fuel Station",icon:"\u26FD"},{value:"prayer-room",label:"Prayer Room",icon:"\u{1F54C}"}];ngOnInit(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.routeId=t.id,this.loadRouteForEdit(t.id))}),this.activatedRoute.queryParams.subscribe(t=>{t.duplicate&&(this.isDuplicateMode=!0,this.loadRouteForDuplicate(t.duplicate))}),!this.isEditMode&&!this.isDuplicateMode&&this.initializeDefaultStops()}initializeDefaultStops(){this.formData.stops=[{id:this.generateId(),name:"",city:"",address:"",type:"origin",distanceFromPrevious:0,durationFromPrevious:0,facilities:[]},{id:this.generateId(),name:"",city:"",address:"",type:"destination",distanceFromPrevious:0,durationFromPrevious:0,facilities:[]}]}loadRouteForEdit(t){this.isLoading=!0,setTimeout(()=>{let e=this.getMockRoute(t);e&&this.populateForm(e),this.isLoading=!1},500)}loadRouteForDuplicate(t){this.isLoading=!0,setTimeout(()=>{let e=this.getMockRoute(t);e&&this.populateForm(e,!0),this.isLoading=!1},500)}getMockRoute(t){return{id:t,routeCode:"RYD-JED-001",name:"Riyadh to Jeddah Express",description:"Premium express service connecting Riyadh to Jeddah",origin:"Riyadh",destination:"Jeddah",totalDistance:950,estimatedDuration:480,stops:[{id:"stop1",name:"Riyadh Central Terminal",city:"Riyadh",address:"King Fahd Road, Riyadh",type:"origin",distanceFromPrevious:0,durationFromPrevious:0,facilities:["restroom","food-court","wifi","parking"]},{id:"stop2",name:"Taif Rest Stop",city:"Taif",address:"Highway Junction, Taif",type:"intermediate",distanceFromPrevious:350,durationFromPrevious:240,facilities:["restroom","fuel-station"]},{id:"stop3",name:"Jeddah Main Terminal",city:"Jeddah",address:"King Abdulaziz Road, Jeddah",type:"destination",distanceFromPrevious:600,durationFromPrevious:240,facilities:["restroom","food-court","wifi","parking","atm"]}],status:"active",routeType:"intercity",operatingDays:["monday","tuesday","wednesday","thursday","friday"],dailyTrips:4,averageOccupancy:85,baseFare:150,farePerKm:.35,createdDate:new Date("2024-01-15"),lastModified:new Date,isPopular:!0,maxCapacity:50,licenseRequired:"Commercial Heavy Vehicle License",isHazardous:!1,seasonalRoute:!1}}populateForm(t,e=!1){this.formData={routeCode:e?"":t.routeCode,name:e?`Copy of ${t.name}`:t.name,description:t.description,routeType:t.routeType,operatingDays:[...t.operatingDays],dailyTrips:t.dailyTrips,maxCapacity:t.maxCapacity,licenseRequired:t.licenseRequired,isHazardous:t.isHazardous,seasonalRoute:t.seasonalRoute,seasonStart:t.seasonStart?this.formatDateForInput(t.seasonStart):"",seasonEnd:t.seasonEnd?this.formatDateForInput(t.seasonEnd):"",baseFare:t.baseFare,farePerKm:t.farePerKm,stops:t.stops.map(i=>k({},i))}}formatDateForInput(t){return t.toISOString().split("T")[0]}isFormValid(){if(!this.formData.name.trim()||!this.formData.routeCode.trim()||this.formData.stops.length<2)return!1;let t=this.formData.stops.some(i=>i.type==="origin"),e=this.formData.stops.some(i=>i.type==="destination");return!t||!e?!1:this.formData.stops.every(i=>i.name.trim()&&i.city.trim()&&i.address.trim())}addStop(){let t={id:this.generateId(),name:"",city:"",address:"",type:"intermediate",distanceFromPrevious:0,durationFromPrevious:0,facilities:[]};this.formData.stops.push(t)}removeStop(t){this.formData.stops.length>2&&this.formData.stops.splice(t,1)}moveStopUp(t){if(t>0){let e=this.formData.stops[t];this.formData.stops[t]=this.formData.stops[t-1],this.formData.stops[t-1]=e}}moveStopDown(t){if(t<this.formData.stops.length-1){let e=this.formData.stops[t];this.formData.stops[t]=this.formData.stops[t+1],this.formData.stops[t+1]=e}}onCityChange(t,e){this.formData.stops[t].city=e,this.formData.stops[t].name=`${e} Terminal`,this.formData.stops[t].address=`Main Terminal, ${e}`}isDaySelected(t){return this.formData.operatingDays.includes(t)}toggleDay(t){let e=this.formData.operatingDays.indexOf(t);e>-1?this.formData.operatingDays.splice(e,1):this.formData.operatingDays.push(t)}isFacilitySelected(t,e){return this.formData.stops[t].facilities.includes(e)}toggleFacility(t,e){let i=this.formData.stops[t].facilities,r=i.indexOf(e);r>-1?i.splice(r,1):i.push(e)}generateId(){return"stop_"+Math.random().toString(36).substr(2,9)}generateRouteCode(){if(this.formData.name){let e=this.formData.name.split(" ").slice(0,3).map(i=>i.substring(0,3).toUpperCase()).join("-");this.formData.routeCode=`${e}-${Date.now().toString().slice(-3)}`}}calculateTotals(){this.formData.stops.forEach((t,e)=>{e===0&&(t.distanceFromPrevious=0,t.durationFromPrevious=0)})}onSubmit(){if(!this.isFormValid()){alert("Please fill in all required fields and ensure you have origin and destination stops.");return}this.isSaving=!0,setTimeout(()=>{this.isEditMode?(console.log("Updating route:",this.formData),alert("Route updated successfully!")):(console.log("Creating route:",this.formData),alert("Route created successfully!")),this.isSaving=!1,this.router.navigate(["/routes"])},1e3)}cancel(){this.isEditMode?this.router.navigate(["/routes",this.routeId]):this.router.navigate(["/routes"])}getStopTypeIcon(t){switch(t){case"origin":return"\u{1F7E2}";case"destination":return"\u{1F534}";case"intermediate":return"\u{1F535}";default:return"\u26AB"}}getRouteTypeLabel(t){let e=this.routeTypes.find(i=>i.value===t);return e?e.label:t}getEstimatedFare(){let t=this.formData.stops.reduce((e,i)=>e+i.distanceFromPrevious,0);return this.formData.baseFare+this.formData.farePerKm*t}formatCurrency(t){return`SAR ${t.toLocaleString()}`}static \u0275fac=function(e){return new(e||n)(w(Te),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-route-form"]],decls:3,vars:2,consts:[["routeForm","ngForm"],[1,"route-form-container"],["class","loading-container",4,"ngIf"],["class","form-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"form-content"],[1,"page-header"],[1,"header-content"],[1,"btn","btn-secondary",3,"click"],[3,"ngSubmit"],[1,"form-section"],[1,"section-header"],[1,"form-grid"],[1,"form-group"],["for","routeName"],[1,"required"],["type","text","id","routeName","name","routeName","placeholder","e.g., Riyadh to Jeddah Express","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","routeCode"],[1,"input-group"],["type","text","id","routeCode","name","routeCode","placeholder","RYD-JED-001","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline",3,"click"],[1,"form-group","full-width"],["for","description"],["id","description","name","description","rows","3","placeholder","Brief description of the route",1,"form-control",3,"ngModelChange","ngModel"],["for","routeType"],["id","routeType","name","routeType","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","maxCapacity"],["type","number","id","maxCapacity","name","maxCapacity","min","10","max","100","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-suffix"],["for","dailyTrips"],["type","number","id","dailyTrips","name","dailyTrips","min","1","max","20",1,"form-control",3,"ngModelChange","ngModel"],["for","licenseRequired"],["id","licenseRequired","name","licenseRequired",1,"form-control",3,"ngModelChange","ngModel"],[1,"checkbox-group"],["type","checkbox","id","isHazardous","name","isHazardous",3,"ngModelChange","ngModel"],["for","isHazardous"],["type","button",1,"btn","btn-primary",3,"click"],[1,"stops-container"],["class","stop-item",4,"ngFor","ngForOf"],[1,"days-grid"],["class","day-item",3,"selected","click",4,"ngFor","ngForOf"],["type","checkbox","id","seasonalRoute","name","seasonalRoute",3,"ngModelChange","ngModel"],["for","seasonalRoute"],["class","form-group",4,"ngIf"],["for","baseFare"],["type","number","id","baseFare","name","baseFare","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["for","farePerKm"],["type","number","id","farePerKm","name","farePerKm","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["class","fare-estimate",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","loading-icon",4,"ngIf"],[3,"value"],[1,"stop-item"],[1,"stop-header"],[1,"stop-info"],[1,"stop-icon"],[1,"stop-type-select",3,"ngModelChange","ngModel","name"],["value","origin"],["value","intermediate"],["value","destination"],[1,"stop-actions"],["type","button","title","Move Up",1,"action-btn",3,"click","disabled"],["type","button","title","Move Down",1,"action-btn",3,"click","disabled"],["type","button","title","Remove Stop",1,"action-btn","danger",3,"click","disabled"],[1,"stop-form"],[1,"form-row"],["required","",1,"form-control",3,"ngModelChange","change","ngModel","name"],["value",""],["type","text","placeholder","Terminal or stop name","required","",1,"form-control",3,"ngModelChange","ngModel","name"],["type","text","placeholder","Full address of the stop","required","",1,"form-control",3,"ngModelChange","ngModel","name"],["class","form-row",4,"ngIf"],[1,"facilities-grid"],["class","facility-item",3,"selected","click",4,"ngFor","ngForOf"],["type","number","min","0","step","0.1",1,"form-control",3,"ngModelChange","ngModel","name"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","name"],[1,"facility-item",3,"click"],[1,"facility-icon"],[1,"facility-label"],[1,"day-item",3,"click"],[1,"day-short"],[1,"day-full"],["for","seasonStart"],["type","date","id","seasonStart","name","seasonStart",1,"form-control",3,"ngModelChange","ngModel"],["for","seasonEnd"],["type","date","id","seasonEnd","name","seasonEnd",1,"form-control",3,"ngModelChange","ngModel"],[1,"fare-estimate"],[1,"fare-amount"],[1,"loading-icon"]],template:function(e,i){e&1&&(a(0,"div",1),v(1,hA,4,0,"div",2)(2,TA,117,24,"div",3),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading))},dependencies:[K,ae,ee,et,ct,Re,Oe,Se,vt,Yn,Pe,Ie,lt,Ar,xt,wt,it,wr],styles:['.route-form-container[_ngcontent-%COMP%]{padding:30px;max-width:1200px;margin:0 auto;background:#f8fafc;min-height:100vh}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2d3748;margin-bottom:8px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.section-header[_ngcontent-%COMP%]{padding:25px 30px 20px;border-bottom:1px solid #e2e8f0;background:#f8fafc;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:15px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#2d3748;margin:0}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:5px 0 0;font-size:14px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;padding:30px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;margin-bottom:8px;font-size:14px}.required[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff;color:#2d3748}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-1px)}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.input-suffix[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f7fafc;border:2px solid #e2e8f0;border-left:none;padding:0 12px;border-radius:0 8px 8px 0;font-size:14px;color:#718096}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none;background:#fff;color:#4a5568;border:2px solid #e2e8f0}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border-color:#e2e8f0}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#667eea;border-color:#667eea}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;accent-color:#667eea}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;margin:0;display:flex;align-items:center;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px;margin-left:24px}.stops-container[_ngcontent-%COMP%]{padding:20px 30px 30px}.stop-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;margin-bottom:20px;overflow:hidden;transition:all .2s ease}.stop-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000000d}.stop-header[_ngcontent-%COMP%]{background:#f8fafc;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e2e8f0}.stop-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.stop-icon[_ngcontent-%COMP%]{font-size:18px}.stop-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#2d3748;margin:0}.stop-type-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #cbd5e0;border-radius:6px;background:#fff;font-size:12px;color:#4a5568}.stop-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;background:#fff;color:#4a5568;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s ease;border:1px solid #e2e8f0}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff;transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn.danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#e53e3e;color:#fff}.stop-form[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px}.facilities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:10px}.facility-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:12px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff;text-align:center}.facility-item[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-1px)}.facility-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;color:#667eea}.facility-icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:5px}.facility-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#4a5568}.days-grid[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}.day-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 12px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff;min-width:70px}.day-item[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-1px)}.day-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;color:#667eea}.day-short[_ngcontent-%COMP%]{font-weight:600;font-size:12px;color:#4a5568}.day-full[_ngcontent-%COMP%]{font-size:10px;color:#718096;margin-top:2px}.fare-estimate[_ngcontent-%COMP%]{background:#f0fff4;padding:20px;border-radius:12px;text-align:center;margin-top:25px;border:1px solid #c6f6d5}.fare-estimate[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;margin-bottom:10px}.fare-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#38a169;margin-bottom:5px}.fare-estimate[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#4a5568;font-size:12px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-top:30px}.loading-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}[dir=rtl][_ngcontent-%COMP%]   .route-form-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:0;margin-right:24px}[dir=rtl][_ngcontent-%COMP%]   .stop-actions[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 1024px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.facilities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}@media (max-width: 768px){.route-form-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;padding:20px}.form-grid[_ngcontent-%COMP%]{padding:20px;gap:15px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.stop-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}.stop-actions[_ngcontent-%COMP%], .days-grid[_ngcontent-%COMP%]{justify-content:center}.facilities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.route-form-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-section[_ngcontent-%COMP%]{margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{padding:15px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}.stop-item[_ngcontent-%COMP%]{margin-bottom:15px}.stop-form[_ngcontent-%COMP%]{padding:15px}.facilities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.facility-item[_ngcontent-%COMP%]{padding:10px}.days-grid[_ngcontent-%COMP%]{gap:5px}.day-item[_ngcontent-%COMP%]{min-width:60px;padding:8px 10px}}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e53e3e;box-shadow:0 0 0 3px #e53e3e1a}.form-control.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#48bb78}.form-group.has-error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#e53e3e}.form-group.has-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e53e3e}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.form-group.has-success[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#48bb78}.form-group.has-success[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#48bb78}.btn.loading[_ngcontent-%COMP%]{position:relative;color:transparent}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;color:#fff}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.facility-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.day-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000014}.stop-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media print{.route-form-container[_ngcontent-%COMP%]{background:#fff;padding:20px}.page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%], .stop-actions[_ngcontent-%COMP%]{display:none!important}.form-section[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none!important;border:1px solid #e2e8f0!important;margin-bottom:15px}.section-header[_ngcontent-%COMP%]{background:#f8fafc!important}.stop-item[_ngcontent-%COMP%]{break-inside:avoid}}@media (prefers-reduced-motion: reduce){.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .facility-item[_ngcontent-%COMP%], .day-item[_ngcontent-%COMP%], .stop-item[_ngcontent-%COMP%]{transition:none}.loading-spinner[_ngcontent-%COMP%], .loading-icon[_ngcontent-%COMP%], .btn.loading[_ngcontent-%COMP%]:before{animation:none}}.stops-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.stops-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.stops-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:3px}.stops-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}.form-section[_ngcontent-%COMP%]:nth-child(2){border-left:3px solid #667eea}.form-section[_ngcontent-%COMP%]:nth-child(3){border-left:3px solid #48bb78}.form-section[_ngcontent-%COMP%]:nth-child(4){border-left:3px solid #ed8936}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 12px #667eea33}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #0000001a}']})};function RA(n,t){n&1&&(a(0,"div",4),P(1,"div",5),a(2,"p"),l(3,"Loading cities and stops data..."),o()())}function OA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function wA(n,t){if(n&1){let e=O();a(0,"tr")(1,"td")(2,"div",43)(3,"div",44),l(4),o(),a(5,"div",45),l(6),o()()(),a(7,"td")(8,"span",46),l(9),o()(),a(10,"td"),l(11),o(),a(12,"td")(13,"span",47),l(14),o()(),a(15,"td")(16,"span",48),l(17),o()(),a(18,"td")(19,"div",49)(20,"small"),l(21),o()()(),a(22,"td")(23,"div",50)(24,"button",51),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.openCityForm(r))}),l(25," \u270F\uFE0F "),o(),a(26,"button",52),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.toggleCityStatus(r))}),l(27),o(),a(28,"button",53),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.deleteCity(r))}),l(29," \u{1F5D1}\uFE0F "),o()()()()}if(n&2){let e=t.$implicit;c(4),_(e.name),c(2),_(e.nameAr),c(3),_(e.code),c(2),_(e.region),c(3),_(e.totalStops),c(2),q(e.isActive?"active":"inactive"),c(),x(" ",e.isActive?"Active":"Inactive"," "),c(4),Y("",e.coordinates.lat.toFixed(4),", ",e.coordinates.lng.toFixed(4),""),c(5),m("title",e.isActive?"Deactivate":"Activate"),c(),x(" ",e.isActive?"\u23F8\uFE0F":"\u25B6\uFE0F"," ")}}function AA(n,t){if(n&1){let e=O();a(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25)(4,"input",26),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.citySearchTerm,r)||(s.citySearchTerm=r),y(r)}),h("input",function(){C(e);let r=g(2);return y(r.applyCityFilters())}),o()(),a(5,"div",27)(6,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.cityStatusFilter,r)||(s.cityStatusFilter=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyCityFilters())}),a(7,"option",29),l(8,"All Status"),o(),a(9,"option",30),l(10,"Active"),o(),a(11,"option",31),l(12,"Inactive"),o()()(),a(13,"div",27)(14,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.cityRegionFilter,r)||(s.cityRegionFilter=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyCityFilters())}),a(15,"option",29),l(16,"All Regions"),o(),v(17,OA,2,2,"option",32),o()(),a(18,"div",27)(19,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.itemsPerPage,r)||(s.itemsPerPage=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyCityFilters())}),a(20,"option",33),l(21,"5 per page"),o(),a(22,"option",34),l(23,"10 per page"),o(),a(24,"option",35),l(25,"25 per page"),o(),a(26,"option",36),l(27,"50 per page"),o()()()(),a(28,"button",37),h("click",function(){C(e);let r=g(2);return y(r.openCityForm())}),l(29," \u2795 Add New City "),o()(),a(30,"div",38)(31,"table",39)(32,"thead")(33,"tr")(34,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleCitySort("name"))}),l(35),o(),a(36,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleCitySort("code"))}),l(37),o(),a(38,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleCitySort("region"))}),l(39),o(),a(40,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleCitySort("totalStops"))}),l(41),o(),a(42,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleCitySort("isActive"))}),l(43),o(),a(44,"th"),l(45,"Coordinates"),o(),a(46,"th"),l(47,"Actions"),o()()(),a(48,"tbody"),v(49,wA,30,12,"tr",41),o()()()()}if(n&2){let e=g(2);c(4),F("ngModel",e.citySearchTerm),c(2),F("ngModel",e.cityStatusFilter),c(8),F("ngModel",e.cityRegionFilter),c(3),m("ngForOf",e.getRegions()),c(2),F("ngModel",e.itemsPerPage),c(16),x(" City Name ",e.getSortIcon("name",e.citySortBy,e.citySortDirection)," "),c(2),x(" Code ",e.getSortIcon("code",e.citySortBy,e.citySortDirection)," "),c(2),x(" Region ",e.getSortIcon("region",e.citySortBy,e.citySortDirection)," "),c(2),x(" Total Stops ",e.getSortIcon("totalStops",e.citySortBy,e.citySortDirection)," "),c(2),x(" Status ",e.getSortIcon("isActive",e.citySortBy,e.citySortDirection)," "),c(6),m("ngForOf",e.getPaginatedCities())}}function NA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),x(" ",e.name," ")}}function kA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),Y(" ",e.icon," ",e.label," ")}}function VA(n,t){if(n&1&&(a(0,"span",69),l(1),o()),n&2){let e=t.$implicit,i=g(4);m("title",i.getFacilityLabel(e)),c(),x(" ",i.getFacilityIcon(e)," ")}}function FA(n,t){if(n&1&&(a(0,"span",70),l(1),o()),n&2){let e=g().$implicit;c(),x(" +",e.facilities.length-3," ")}}function LA(n,t){if(n&1){let e=O();a(0,"tr")(1,"td")(2,"div",55)(3,"div",56),l(4),o(),a(5,"div",57),l(6),o(),a(7,"div",58),l(8),o()()(),a(9,"td"),l(10),o(),a(11,"td")(12,"div",59)(13,"span",60),l(14),o(),a(15,"span",61),l(16),o()()(),a(17,"td")(18,"span",62),l(19),o()(),a(20,"td")(21,"div",63),v(22,VA,2,2,"span",64)(23,FA,2,1,"span",65),o()(),a(24,"td")(25,"span",48),l(26),o()(),a(27,"td")(28,"div",66)(29,"small"),l(30),o()()(),a(31,"td")(32,"div",50)(33,"button",67),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.openStopForm(r))}),l(34," \u270F\uFE0F "),o(),a(35,"button",52),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.toggleStopStatus(r))}),l(36),o(),a(37,"button",68),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.deleteStop(r))}),l(38," \u{1F5D1}\uFE0F "),o()()()()}if(n&2){let e=t.$implicit,i=g(3);c(4),_(e.name),c(2),_(e.nameAr),c(2),_(e.address),c(2),_(e.cityName),c(4),_(i.getStopTypeIcon(e.type)),c(2),_(i.getStopTypeLabel(e.type)),c(3),_(e.capacity),c(3),m("ngForOf",e.facilities.slice(0,3)),c(),m("ngIf",e.facilities.length>3),c(2),q(e.isActive?"active":"inactive"),c(),x(" ",e.isActive?"Active":"Inactive"," "),c(4),Y("",e.operatingHours.open," - ",e.operatingHours.close,""),c(5),m("title",e.isActive?"Deactivate":"Activate"),c(),x(" ",e.isActive?"\u23F8\uFE0F":"\u25B6\uFE0F"," ")}}function $A(n,t){if(n&1){let e=O();a(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25)(4,"input",54),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.stopSearchTerm,r)||(s.stopSearchTerm=r),y(r)}),h("input",function(){C(e);let r=g(2);return y(r.applyStopFilters())}),o()(),a(5,"div",27)(6,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.stopStatusFilter,r)||(s.stopStatusFilter=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyStopFilters())}),a(7,"option",29),l(8,"All Status"),o(),a(9,"option",30),l(10,"Active"),o(),a(11,"option",31),l(12,"Inactive"),o()()(),a(13,"div",27)(14,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.stopCityFilter,r)||(s.stopCityFilter=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyStopFilters())}),a(15,"option",29),l(16,"All Cities"),o(),v(17,NA,2,2,"option",32),o()(),a(18,"div",27)(19,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.stopTypeFilter,r)||(s.stopTypeFilter=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyStopFilters())}),a(20,"option",29),l(21,"All Types"),o(),v(22,kA,2,3,"option",32),o()(),a(23,"div",27)(24,"select",28),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.itemsPerPage,r)||(s.itemsPerPage=r),y(r)}),h("change",function(){C(e);let r=g(2);return y(r.applyStopFilters())}),a(25,"option",33),l(26,"5 per page"),o(),a(27,"option",34),l(28,"10 per page"),o(),a(29,"option",35),l(30,"25 per page"),o(),a(31,"option",36),l(32,"50 per page"),o()()()(),a(33,"button",37),h("click",function(){C(e);let r=g(2);return y(r.openStopForm())}),l(34," \u2795 Add New Stop "),o()(),a(35,"div",38)(36,"table",39)(37,"thead")(38,"tr")(39,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleStopSort("name"))}),l(40),o(),a(41,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleStopSort("cityName"))}),l(42),o(),a(43,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleStopSort("type"))}),l(44),o(),a(45,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleStopSort("capacity"))}),l(46),o(),a(47,"th"),l(48,"Facilities"),o(),a(49,"th",40),h("click",function(){C(e);let r=g(2);return y(r.toggleStopSort("isActive"))}),l(50),o(),a(51,"th"),l(52,"Operating Hours"),o(),a(53,"th"),l(54,"Actions"),o()()(),a(55,"tbody"),v(56,LA,39,16,"tr",41),o()()()()}if(n&2){let e=g(2);c(4),F("ngModel",e.stopSearchTerm),c(2),F("ngModel",e.stopStatusFilter),c(8),F("ngModel",e.stopCityFilter),c(3),m("ngForOf",e.getActiveCities()),c(2),F("ngModel",e.stopTypeFilter),c(3),m("ngForOf",e.stopTypes),c(2),F("ngModel",e.itemsPerPage),c(16),x(" Stop Name ",e.getSortIcon("name",e.stopSortBy,e.stopSortDirection)," "),c(2),x(" City ",e.getSortIcon("cityName",e.stopSortBy,e.stopSortDirection)," "),c(2),x(" Type ",e.getSortIcon("type",e.stopSortBy,e.stopSortDirection)," "),c(2),x(" Capacity ",e.getSortIcon("capacity",e.stopSortBy,e.stopSortDirection)," "),c(4),x(" Status ",e.getSortIcon("isActive",e.stopSortBy,e.stopSortDirection)," "),c(6),m("ngForOf",e.getPaginatedStops())}}function BA(n,t){if(n&1){let e=O();a(0,"div",71)(1,"button",72),h("click",function(){C(e);let r=g(2);return y(r.changePage(r.currentPage-1))}),l(2," \u2190 Previous "),o(),a(3,"span",73),l(4),o(),a(5,"button",72),h("click",function(){C(e);let r=g(2);return y(r.changePage(r.currentPage+1))}),l(6," Next \u2192 "),o()()}if(n&2){let e=g(2);c(),m("disabled",e.currentPage===1),c(3),Y(" Page ",e.currentPage," of ",e.totalPages," "),c(),m("disabled",e.currentPage===e.totalPages)}}function zA(n,t){if(n&1){let e=O();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1"),l(4,"Cities & Stops Management"),o(),a(5,"p"),l(6,"Manage master data for cities and transportation stops"),o()()(),a(7,"div",9)(8,"div",10)(9,"div",11),l(10,"\u{1F310}"),o(),a(11,"div",12)(12,"h3"),l(13,"Total Cities"),o(),a(14,"p",13),l(15),o(),a(16,"small"),l(17),o()()(),a(18,"div",14)(19,"div",11),l(20,"\u{1F68F}"),o(),a(21,"div",12)(22,"h3"),l(23,"Total Stops"),o(),a(24,"p",13),l(25),o(),a(26,"small"),l(27),o()()(),a(28,"div",15)(29,"div",11),l(30,"\u{1F3E2}"),o(),a(31,"div",12)(32,"h3"),l(33,"Terminals"),o(),a(34,"p",13),l(35),o()()(),a(36,"div",16)(37,"div",11),l(38,"\u{1F689}"),o(),a(39,"div",12)(40,"h3"),l(41,"Stations"),o(),a(42,"p",13),l(43),o()()(),a(44,"div",17)(45,"div",11),l(46,"\u{1F4CD}"),o(),a(47,"div",12)(48,"h3"),l(49,"Pickup Points"),o(),a(50,"p",13),l(51),o()()()(),a(52,"div",18)(53,"button",19),h("click",function(){C(e);let r=g();return y(r.switchTab("cities"))}),l(54," \u{1F310} Cities Management "),o(),a(55,"button",19),h("click",function(){C(e);let r=g();return y(r.switchTab("stops"))}),l(56," \u{1F68F} Stops Management "),o()(),v(57,AA,50,11,"div",20)(58,$A,57,13,"div",20)(59,BA,7,4,"div",21),o()}if(n&2){let e=g();c(15),_(e.stats.totalCities),c(2),x("",e.stats.activeCities," active"),c(8),_(e.stats.totalStops),c(2),x("",e.stats.activeStops," active"),c(8),_(e.stats.terminals),c(8),_(e.stats.stations),c(8),_(e.stats.pickupPoints),c(2),I("active",e.activeTab==="cities"),c(2),I("active",e.activeTab==="stops"),c(2),m("ngIf",e.activeTab==="cities"),c(),m("ngIf",e.activeTab==="stops"),c(),m("ngIf",e.totalPages>1)}}function jA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function UA(n,t){if(n&1){let e=O();a(0,"div",74),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),a(1,"div",75),h("click",function(r){return C(e),y(r.stopPropagation())}),a(2,"div",76)(3,"h2"),l(4),o(),a(5,"button",77),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),l(6,"\u2715"),o()(),a(7,"div",78)(8,"form",79),h("ngSubmit",function(){C(e);let r=g();return y(r.saveCityForm())}),a(9,"div",80)(10,"div",81)(11,"label"),l(12,"City Name (English) "),a(13,"span",82),l(14,"*"),o()(),a(15,"input",83),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.name,r)||(s.cityFormData.name=r),y(r)}),o()(),a(16,"div",81)(17,"label"),l(18,"City Name (Arabic) "),a(19,"span",82),l(20,"*"),o()(),a(21,"input",84),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.nameAr,r)||(s.cityFormData.nameAr=r),y(r)}),o()(),a(22,"div",81)(23,"label"),l(24,"City Code "),a(25,"span",82),l(26,"*"),o()(),a(27,"div",85)(28,"input",86),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.code,r)||(s.cityFormData.code=r),y(r)}),o(),a(29,"button",87),h("click",function(){C(e);let r=g();return y(r.generateCityCode())}),l(30," Generate "),o()()(),a(31,"div",81)(32,"label"),l(33,"Region "),a(34,"span",82),l(35,"*"),o()(),a(36,"select",88),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.region,r)||(s.cityFormData.region=r),y(r)}),a(37,"option",89),l(38,"Select Region"),o(),v(39,jA,2,2,"option",32),o()(),a(40,"div",81)(41,"label"),l(42,"Latitude"),o(),a(43,"input",90),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.coordinates.lat,r)||(s.cityFormData.coordinates.lat=r),y(r)}),o()(),a(44,"div",81)(45,"label"),l(46,"Longitude"),o(),a(47,"input",91),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.coordinates.lng,r)||(s.cityFormData.coordinates.lng=r),y(r)}),o()(),a(48,"div",92)(49,"div",93)(50,"input",94),L("ngModelChange",function(r){C(e);let s=g();return $(s.cityFormData.isActive,r)||(s.cityFormData.isActive=r),y(r)}),o(),a(51,"label",95),l(52,"Active City"),o()()()(),a(53,"div",96)(54,"button",97),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),l(55," Cancel "),o(),a(56,"button",98),l(57),o()()()()()()}if(n&2){let e=g();c(4),_(e.editingCity?"Edit City":"Add New City"),c(11),F("ngModel",e.cityFormData.name),c(6),F("ngModel",e.cityFormData.nameAr),c(7),F("ngModel",e.cityFormData.code),c(8),F("ngModel",e.cityFormData.region),c(3),m("ngForOf",e.regions),c(4),F("ngModel",e.cityFormData.coordinates.lat),c(4),F("ngModel",e.cityFormData.coordinates.lng),c(3),F("ngModel",e.cityFormData.isActive),c(7),x(" ",e.editingCity?"Update City":"Add City"," ")}}function GA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),x(" ",e.name," ")}}function HA(n,t){if(n&1&&(a(0,"option",42),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),Y(" ",e.icon," ",e.label," ")}}function XA(n,t){if(n&1){let e=O();a(0,"div",119),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleFacility(r.value))}),a(1,"span",120),l(2),o(),a(3,"span",121),l(4),o()()}if(n&2){let e=t.$implicit,i=g(2);I("selected",i.isFacilitySelected(e.value)),c(2),_(e.icon),c(2),_(e.label)}}function WA(n,t){if(n&1){let e=O();a(0,"div",74),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),a(1,"div",99),h("click",function(r){return C(e),y(r.stopPropagation())}),a(2,"div",76)(3,"h2"),l(4),o(),a(5,"button",77),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),l(6,"\u2715"),o()(),a(7,"div",78)(8,"form",79),h("ngSubmit",function(){C(e);let r=g();return y(r.saveStopForm())}),a(9,"div",100)(10,"h3"),l(11,"Basic Information"),o(),a(12,"div",80)(13,"div",81)(14,"label"),l(15,"Stop Name (English) "),a(16,"span",82),l(17,"*"),o()(),a(18,"input",101),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.name,r)||(s.stopFormData.name=r),y(r)}),o()(),a(19,"div",81)(20,"label"),l(21,"Stop Name (Arabic) "),a(22,"span",82),l(23,"*"),o()(),a(24,"input",102),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.nameAr,r)||(s.stopFormData.nameAr=r),y(r)}),o()(),a(25,"div",81)(26,"label"),l(27,"City "),a(28,"span",82),l(29,"*"),o()(),a(30,"select",103),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.cityId,r)||(s.stopFormData.cityId=r),y(r)}),a(31,"option",89),l(32,"Select City"),o(),v(33,GA,2,2,"option",32),o()(),a(34,"div",81)(35,"label"),l(36,"Stop Type "),a(37,"span",82),l(38,"*"),o()(),a(39,"select",104),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.type,r)||(s.stopFormData.type=r),y(r)}),v(40,HA,2,3,"option",32),o()(),a(41,"div",92)(42,"label"),l(43,"Address (English) "),a(44,"span",82),l(45,"*"),o()(),a(46,"input",105),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.address,r)||(s.stopFormData.address=r),y(r)}),o()(),a(47,"div",92)(48,"label"),l(49,"Address (Arabic) "),a(50,"span",82),l(51,"*"),o()(),a(52,"input",106),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.addressAr,r)||(s.stopFormData.addressAr=r),y(r)}),o()(),a(53,"div",81)(54,"label"),l(55,"Capacity"),o(),a(56,"input",107),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.capacity,r)||(s.stopFormData.capacity=r),y(r)}),o()(),a(57,"div",81)(58,"div",93)(59,"input",108),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.isActive,r)||(s.stopFormData.isActive=r),y(r)}),o(),a(60,"label",109),l(61,"Active Stop"),o()()()()(),a(62,"div",100)(63,"h3"),l(64,"Location"),o(),a(65,"div",80)(66,"div",81)(67,"label"),l(68,"Latitude"),o(),a(69,"input",110),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.coordinates.lat,r)||(s.stopFormData.coordinates.lat=r),y(r)}),o()(),a(70,"div",81)(71,"label"),l(72,"Longitude"),o(),a(73,"input",111),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.coordinates.lng,r)||(s.stopFormData.coordinates.lng=r),y(r)}),o()()()(),a(74,"div",100)(75,"h3"),l(76,"Operating Hours"),o(),a(77,"div",80)(78,"div",81)(79,"label"),l(80,"Opening Time"),o(),a(81,"input",112),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.operatingHours.open,r)||(s.stopFormData.operatingHours.open=r),y(r)}),o()(),a(82,"div",81)(83,"label"),l(84,"Closing Time"),o(),a(85,"input",113),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.operatingHours.close,r)||(s.stopFormData.operatingHours.close=r),y(r)}),o()()()(),a(86,"div",100)(87,"h3"),l(88,"Contact Information"),o(),a(89,"div",80)(90,"div",81)(91,"label"),l(92,"Phone Number"),o(),a(93,"input",114),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.contactInfo.phone,r)||(s.stopFormData.contactInfo.phone=r),y(r)}),o()(),a(94,"div",81)(95,"label"),l(96,"Email"),o(),a(97,"input",115),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.contactInfo.email,r)||(s.stopFormData.contactInfo.email=r),y(r)}),o()(),a(98,"div",81)(99,"label"),l(100,"Manager Name"),o(),a(101,"input",116),L("ngModelChange",function(r){C(e);let s=g();return $(s.stopFormData.contactInfo.manager,r)||(s.stopFormData.contactInfo.manager=r),y(r)}),o()()()(),a(102,"div",100)(103,"h3"),l(104,"Available Facilities"),o(),a(105,"div",117),v(106,XA,5,4,"div",118),o()(),a(107,"div",96)(108,"button",97),h("click",function(){C(e);let r=g();return y(r.cancelForm())}),l(109," Cancel "),o(),a(110,"button",98),l(111),o()()()()()()}if(n&2){let e=g();c(4),_(e.editingStop?"Edit Stop":"Add New Stop"),c(14),F("ngModel",e.stopFormData.name),c(6),F("ngModel",e.stopFormData.nameAr),c(6),F("ngModel",e.stopFormData.cityId),c(3),m("ngForOf",e.getActiveCities()),c(6),F("ngModel",e.stopFormData.type),c(),m("ngForOf",e.stopTypes),c(6),F("ngModel",e.stopFormData.address),c(6),F("ngModel",e.stopFormData.addressAr),c(4),F("ngModel",e.stopFormData.capacity),c(3),F("ngModel",e.stopFormData.isActive),c(10),F("ngModel",e.stopFormData.coordinates.lat),c(4),F("ngModel",e.stopFormData.coordinates.lng),c(8),F("ngModel",e.stopFormData.operatingHours.open),c(4),F("ngModel",e.stopFormData.operatingHours.close),c(8),F("ngModel",e.stopFormData.contactInfo.phone),c(4),F("ngModel",e.stopFormData.contactInfo.email),c(4),F("ngModel",e.stopFormData.contactInfo.manager),c(5),m("ngForOf",e.availableFacilities),c(5),x(" ",e.editingStop?"Update Stop":"Add Stop"," ")}}var Md=class n{activeTab="cities";isLoading=!1;cities=[];stops=[];filteredCities=[];filteredStops=[];stats={totalCities:0,activeCities:0,totalStops:0,activeStops:0,terminals:0,stations:0,pickupPoints:0};citySearchTerm="";cityStatusFilter="all";cityRegionFilter="all";citySortBy="name";citySortDirection="asc";stopSearchTerm="";stopStatusFilter="all";stopCityFilter="all";stopTypeFilter="all";stopSortBy="name";stopSortDirection="asc";currentPage=1;itemsPerPage=10;showCityForm=!1;showStopForm=!1;editingCity=null;editingStop=null;cityFormData={name:"",nameAr:"",region:"",code:"",coordinates:{lat:0,lng:0},isActive:!0};stopFormData={name:"",nameAr:"",cityId:"",address:"",addressAr:"",coordinates:{lat:0,lng:0},type:"terminal",facilities:[],capacity:50,isActive:!0,operatingHours:{open:"06:00",close:"22:00"},contactInfo:{phone:"",email:"",manager:""}};regions=["Riyadh Region","Makkah Region","Eastern Province","Asir Region","Jazan Region","Medina Region","Qassim Region","Tabuk Region","Hail Region","Northern Borders","Najran Region","Al Bahah Region","Al Jouf Region"];stopTypes=[{value:"terminal",label:"Terminal",icon:"\u{1F3E2}"},{value:"station",label:"Station",icon:"\u{1F68F}"},{value:"pickup-point",label:"Pickup Point",icon:"\u{1F4CD}"}];availableFacilities=[{value:"restroom",label:"Restroom",icon:"\u{1F6BB}"},{value:"food-court",label:"Food Court",icon:"\u{1F37D}\uFE0F"},{value:"wifi",label:"WiFi",icon:"\u{1F4F6}"},{value:"parking",label:"Parking",icon:"\u{1F17F}\uFE0F"},{value:"atm",label:"ATM",icon:"\u{1F3E7}"},{value:"waiting-area",label:"Waiting Area",icon:"\u{1FA91}"},{value:"fuel-station",label:"Fuel Station",icon:"\u26FD"},{value:"prayer-room",label:"Prayer Room",icon:"\u{1F54C}"},{value:"shop",label:"Shop",icon:"\u{1F6D2}"},{value:"information",label:"Information Desk",icon:"\u2139\uFE0F"}];constructor(){}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,setTimeout(()=>{this.loadCities(),this.loadStops(),this.calculateStats(),this.applyFilters(),this.isLoading=!1},500)}loadCities(){this.cities=[{id:"C001",name:"Riyadh",nameAr:"\u0627\u0644\u0631\u064A\u0627\u0636",region:"Riyadh Region",code:"RYD",coordinates:{lat:24.7136,lng:46.6753},isActive:!0,totalStops:8,createdDate:new Date("2024-01-15"),lastModified:new Date},{id:"C002",name:"Jeddah",nameAr:"\u062C\u062F\u0629",region:"Makkah Region",code:"JED",coordinates:{lat:21.4858,lng:39.1925},isActive:!0,totalStops:6,createdDate:new Date("2024-01-15"),lastModified:new Date},{id:"C003",name:"Dammam",nameAr:"\u0627\u0644\u062F\u0645\u0627\u0645",region:"Eastern Province",code:"DMM",coordinates:{lat:26.4207,lng:50.0888},isActive:!0,totalStops:4,createdDate:new Date("2024-01-20"),lastModified:new Date},{id:"C004",name:"Mecca",nameAr:"\u0645\u0643\u0629 \u0627\u0644\u0645\u0643\u0631\u0645\u0629",region:"Makkah Region",code:"MKK",coordinates:{lat:21.3891,lng:39.8579},isActive:!0,totalStops:3,createdDate:new Date("2024-01-25"),lastModified:new Date},{id:"C005",name:"Medina",nameAr:"\u0627\u0644\u0645\u062F\u064A\u0646\u0629 \u0627\u0644\u0645\u0646\u0648\u0631\u0629",region:"Medina Region",code:"MED",coordinates:{lat:24.5247,lng:39.5692},isActive:!0,totalStops:2,createdDate:new Date("2024-02-01"),lastModified:new Date},{id:"C006",name:"Taif",nameAr:"\u0627\u0644\u0637\u0627\u0626\u0641",region:"Makkah Region",code:"TAF",coordinates:{lat:21.2703,lng:40.4158},isActive:!1,totalStops:1,createdDate:new Date("2024-02-10"),lastModified:new Date}]}loadStops(){this.stops=[{id:"S001",name:"Riyadh Central Terminal",nameAr:"\u0645\u062D\u0637\u0629 \u0627\u0644\u0631\u064A\u0627\u0636 \u0627\u0644\u0645\u0631\u0643\u0632\u064A\u0629",cityId:"C001",cityName:"Riyadh",address:"King Fahd Road, Al Olaya District",addressAr:"\u0637\u0631\u064A\u0642 \u0627\u0644\u0645\u0644\u0643 \u0641\u0647\u062F\u060C \u062D\u064A \u0627\u0644\u0639\u0644\u064A\u0627",coordinates:{lat:24.7136,lng:46.6753},type:"terminal",facilities:["restroom","food-court","wifi","parking","atm","waiting-area","prayer-room","shop"],capacity:200,isActive:!0,operatingHours:{open:"05:00",close:"23:00"},contactInfo:{phone:"+966-11-123-4567",email:"riyadh.central@relaybus.sa",manager:"Ahmed Al-Rashid"},createdDate:new Date("2024-01-15"),lastModified:new Date},{id:"S002",name:"Jeddah Main Terminal",nameAr:"\u0645\u062D\u0637\u0629 \u062C\u062F\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",cityId:"C002",cityName:"Jeddah",address:"King Abdulaziz Road, Al Balad",addressAr:"\u0637\u0631\u064A\u0642 \u0627\u0644\u0645\u0644\u0643 \u0639\u0628\u062F\u0627\u0644\u0639\u0632\u064A\u0632\u060C \u0627\u0644\u0628\u0644\u062F",coordinates:{lat:21.4858,lng:39.1925},type:"terminal",facilities:["restroom","food-court","wifi","parking","atm","waiting-area","prayer-room"],capacity:150,isActive:!0,operatingHours:{open:"06:00",close:"22:00"},contactInfo:{phone:"+966-12-234-5678",email:"jeddah.main@relaybus.sa",manager:"Omar Al-Ghamdi"},createdDate:new Date("2024-01-15"),lastModified:new Date},{id:"S003",name:"Dammam Bus Station",nameAr:"\u0645\u062D\u0637\u0629 \u0627\u0644\u062F\u0645\u0627\u0645 \u0644\u0644\u062D\u0627\u0641\u0644\u0627\u062A",cityId:"C003",cityName:"Dammam",address:"Prince Mohammad Bin Fahd Road",addressAr:"\u0637\u0631\u064A\u0642 \u0627\u0644\u0623\u0645\u064A\u0631 \u0645\u062D\u0645\u062F \u0628\u0646 \u0641\u0647\u062F",coordinates:{lat:26.4207,lng:50.0888},type:"station",facilities:["restroom","wifi","parking","waiting-area","atm"],capacity:100,isActive:!0,operatingHours:{open:"06:00",close:"21:00"},contactInfo:{phone:"+966-13-345-6789",email:"dammam.station@relaybus.sa",manager:"Khalid Al-Dosari"},createdDate:new Date("2024-01-20"),lastModified:new Date},{id:"S004",name:"King Khalid Airport Pickup",nameAr:"\u0646\u0642\u0637\u0629 \u0627\u0644\u062A\u0642\u0627\u0637 \u0645\u0637\u0627\u0631 \u0627\u0644\u0645\u0644\u0643 \u062E\u0627\u0644\u062F",cityId:"C001",cityName:"Riyadh",address:"King Khalid International Airport, Terminal 1",addressAr:"\u0645\u0637\u0627\u0631 \u0627\u0644\u0645\u0644\u0643 \u062E\u0627\u0644\u062F \u0627\u0644\u062F\u0648\u0644\u064A\u060C \u0627\u0644\u0645\u0628\u0646\u0649 \u0627\u0644\u0623\u0648\u0644",coordinates:{lat:24.9576,lng:46.6988},type:"pickup-point",facilities:["restroom","wifi","information"],capacity:30,isActive:!0,operatingHours:{open:"24/7",close:"24/7"},contactInfo:{phone:"+966-11-456-7890",email:"airport.pickup@relaybus.sa"},createdDate:new Date("2024-02-01"),lastModified:new Date},{id:"S005",name:"Mall of Arabia Pickup",nameAr:"\u0646\u0642\u0637\u0629 \u0627\u0644\u062A\u0642\u0627\u0637 \u0645\u0648\u0644 \u0627\u0644\u0639\u0631\u0628",cityId:"C002",cityName:"Jeddah",address:"Mall of Arabia, North Jeddah",addressAr:"\u0645\u0648\u0644 \u0627\u0644\u0639\u0631\u0628\u060C \u0634\u0645\u0627\u0644 \u062C\u062F\u0629",coordinates:{lat:21.626,lng:39.1138},type:"pickup-point",facilities:["parking","waiting-area"],capacity:25,isActive:!0,operatingHours:{open:"10:00",close:"22:00"},contactInfo:{phone:"+966-12-567-8901"},createdDate:new Date("2024-02-15"),lastModified:new Date}]}calculateStats(){this.stats={totalCities:this.cities.length,activeCities:this.cities.filter(t=>t.isActive).length,totalStops:this.stops.length,activeStops:this.stops.filter(t=>t.isActive).length,terminals:this.stops.filter(t=>t.type==="terminal").length,stations:this.stops.filter(t=>t.type==="station").length,pickupPoints:this.stops.filter(t=>t.type==="pickup-point").length}}switchTab(t){this.activeTab=t,this.applyFilters()}applyFilters(){this.activeTab==="cities"?this.applyCityFilters():this.applyStopFilters()}applyCityFilters(){let t=[...this.cities];if(this.citySearchTerm){let e=this.citySearchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.nameAr.includes(e)||i.code.toLowerCase().includes(e)||i.region.toLowerCase().includes(e))}this.cityStatusFilter!=="all"&&(t=t.filter(e=>this.cityStatusFilter==="active"?e.isActive:!e.isActive)),this.cityRegionFilter!=="all"&&(t=t.filter(e=>e.region===this.cityRegionFilter)),t.sort((e,i)=>{let r=e[this.citySortBy],s=i[this.citySortBy];return typeof r=="string"&&(r=r.toLowerCase()),typeof s=="string"&&(s=s.toLowerCase()),r<s?this.citySortDirection==="asc"?-1:1:r>s?this.citySortDirection==="asc"?1:-1:0}),this.filteredCities=t}applyStopFilters(){let t=[...this.stops];if(this.stopSearchTerm){let e=this.stopSearchTerm.toLowerCase();t=t.filter(i=>i.name.toLowerCase().includes(e)||i.nameAr.includes(e)||i.cityName.toLowerCase().includes(e)||i.address.toLowerCase().includes(e))}this.stopStatusFilter!=="all"&&(t=t.filter(e=>this.stopStatusFilter==="active"?e.isActive:!e.isActive)),this.stopCityFilter!=="all"&&(t=t.filter(e=>e.cityId===this.stopCityFilter)),this.stopTypeFilter!=="all"&&(t=t.filter(e=>e.type===this.stopTypeFilter)),t.sort((e,i)=>{let r=e[this.stopSortBy],s=i[this.stopSortBy];return typeof r=="string"&&(r=r.toLowerCase()),typeof s=="string"&&(s=s.toLowerCase()),r<s?this.stopSortDirection==="asc"?-1:1:r>s?this.stopSortDirection==="asc"?1:-1:0}),this.filteredStops=t}toggleCitySort(t){this.citySortBy===t?this.citySortDirection=this.citySortDirection==="asc"?"desc":"asc":(this.citySortBy=t,this.citySortDirection="asc"),this.applyCityFilters()}toggleStopSort(t){this.stopSortBy===t?this.stopSortDirection=this.stopSortDirection==="asc"?"desc":"asc":(this.stopSortBy=t,this.stopSortDirection="asc"),this.applyStopFilters()}getSortIcon(t,e,i){return e!==t?"\u2195\uFE0F":i==="asc"?"\u2191":"\u2193"}get totalPages(){let t=this.activeTab==="cities"?this.filteredCities.length:this.filteredStops.length;return Math.ceil(t/this.itemsPerPage)}getPaginatedItems(){let t=this.activeTab==="cities"?this.filteredCities:this.filteredStops,e=(this.currentPage-1)*this.itemsPerPage,i=e+this.itemsPerPage;return t.slice(e,i)}getPaginatedCities(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredCities.slice(t,e)}getPaginatedStops(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredStops.slice(t,e)}changePage(t){this.currentPage=t}openCityForm(t){t?(this.editingCity=t,this.cityFormData={name:t.name,nameAr:t.nameAr,region:t.region,code:t.code,coordinates:k({},t.coordinates),isActive:t.isActive}):(this.editingCity=null,this.resetCityForm()),this.showCityForm=!0}openStopForm(t){t?(this.editingStop=t,this.stopFormData={name:t.name,nameAr:t.nameAr,cityId:t.cityId,address:t.address,addressAr:t.addressAr,coordinates:k({},t.coordinates),type:t.type,facilities:[...t.facilities],capacity:t.capacity,isActive:t.isActive,operatingHours:k({},t.operatingHours),contactInfo:{phone:t.contactInfo?.phone||"",email:t.contactInfo?.email||"",manager:t.contactInfo?.manager||""}}):(this.editingStop=null,this.resetStopForm()),this.showStopForm=!0}resetCityForm(){this.cityFormData={name:"",nameAr:"",region:"",code:"",coordinates:{lat:0,lng:0},isActive:!0}}resetStopForm(){this.stopFormData={name:"",nameAr:"",cityId:"",address:"",addressAr:"",coordinates:{lat:0,lng:0},type:"terminal",facilities:[],capacity:50,isActive:!0,operatingHours:{open:"06:00",close:"22:00"},contactInfo:{phone:"",email:"",manager:""}}}saveCityForm(){if(this.editingCity){let t=this.cities.findIndex(e=>e.id===this.editingCity.id);t!==-1&&(this.cities[t]=le(k(k({},this.cities[t]),this.cityFormData),{lastModified:new Date}))}else{let t=le(k({id:"C"+(this.cities.length+1).toString().padStart(3,"0")},this.cityFormData),{totalStops:0,createdDate:new Date,lastModified:new Date});this.cities.push(t)}this.showCityForm=!1,this.calculateStats(),this.applyFilters()}saveStopForm(){let t=this.cities.find(e=>e.id===this.stopFormData.cityId);if(t){if(this.editingStop){let e=this.stops.findIndex(i=>i.id===this.editingStop.id);e!==-1&&(this.stops[e]=le(k(k({},this.stops[e]),this.stopFormData),{cityName:t.name,lastModified:new Date}))}else{let e=le(k({id:"S"+(this.stops.length+1).toString().padStart(3,"0")},this.stopFormData),{cityName:t.name,createdDate:new Date,lastModified:new Date});this.stops.push(e),t.totalStops++}this.showStopForm=!1,this.calculateStats(),this.applyFilters()}}cancelForm(){this.showCityForm=!1,this.showStopForm=!1,this.editingCity=null,this.editingStop=null}toggleFacility(t){let e=this.stopFormData.facilities.indexOf(t);e>-1?this.stopFormData.facilities.splice(e,1):this.stopFormData.facilities.push(t)}isFacilitySelected(t){return this.stopFormData.facilities.includes(t)}getRegions(){return[...new Set(this.cities.map(t=>t.region))]}getActiveRegions(){return[...new Set(this.cities.filter(t=>t.isActive).map(t=>t.region))]}getActiveCities(){return this.cities.filter(t=>t.isActive)}getStopTypeIcon(t){let e=this.stopTypes.find(i=>i.value===t);return e?e.icon:"\u{1F4CD}"}getStopTypeLabel(t){let e=this.stopTypes.find(i=>i.value===t);return e?e.label:t}getFacilityIcon(t){let e=this.availableFacilities.find(i=>i.value===t);return e?e.icon:""}getFacilityLabel(t){let e=this.availableFacilities.find(i=>i.value===t);return e?e.label:t}generateCityCode(){this.cityFormData.name&&(this.cityFormData.code=this.cityFormData.name.substring(0,3).toUpperCase())}deleteCity(t){if(confirm(`Are you sure you want to delete ${t.name}? This action cannot be undone.`)){let e=this.stops.filter(i=>i.cityId===t.id);if(e.length>0){alert(`Cannot delete ${t.name} because it has ${e.length} stops. Please delete all stops first.`);return}this.cities=this.cities.filter(i=>i.id!==t.id),this.calculateStats(),this.applyFilters()}}deleteStop(t){if(confirm(`Are you sure you want to delete ${t.name}? This action cannot be undone.`)){this.stops=this.stops.filter(i=>i.id!==t.id);let e=this.cities.find(i=>i.id===t.cityId);e&&e.totalStops--,this.calculateStats(),this.applyFilters()}}toggleCityStatus(t){t.isActive=!t.isActive,t.lastModified=new Date,this.calculateStats(),this.applyFilters()}toggleStopStatus(t){t.isActive=!t.isActive,t.lastModified=new Date,this.calculateStats(),this.applyFilters()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=J({type:n,selectors:[["app-cities-stops"]],decls:5,vars:4,consts:[[1,"cities-stops-container"],["class","loading-container",4,"ngIf"],["class","main-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"main-content"],[1,"page-header"],[1,"header-content"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","active"],[1,"stat-card","terminals"],[1,"stat-card","stations"],[1,"stat-card","pickup-points"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],["class","tab-content",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"tab-content"],[1,"controls-section"],[1,"search-filters"],[1,"search-group"],["type","text","placeholder","Search cities...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],[3,"value",4,"ngFor","ngForOf"],["value","5"],["value","10"],["value","25"],["value","50"],[1,"btn","btn-primary",3,"click"],[1,"table-container"],[1,"data-table"],[1,"sortable",3,"click"],[4,"ngFor","ngForOf"],[3,"value"],[1,"city-info"],[1,"city-name"],[1,"city-name-ar"],[1,"city-code"],[1,"stops-count"],[1,"status-badge"],[1,"coordinates"],[1,"action-buttons"],["title","Edit City",1,"action-btn","edit",3,"click"],[1,"action-btn","toggle",3,"click","title"],["title","Delete City",1,"action-btn","delete",3,"click"],["type","text","placeholder","Search stops...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"stop-info"],[1,"stop-name"],[1,"stop-name-ar"],[1,"stop-address"],[1,"stop-type"],[1,"type-icon"],[1,"type-label"],[1,"capacity-badge"],[1,"facilities-list"],["class","facility-icon",3,"title",4,"ngFor","ngForOf"],["class","more-facilities",4,"ngIf"],[1,"operating-hours"],["title","Edit Stop",1,"action-btn","edit",3,"click"],["title","Delete Stop",1,"action-btn","delete",3,"click"],[1,"facility-icon",3,"title"],[1,"more-facilities"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],[1,"page-info"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],[1,"required"],["type","text","name","cityName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","cityNameAr","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group"],["type","text","name","cityCode","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline",3,"click"],["name","cityRegion","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["type","number","name","cityLat","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","cityLng","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","full-width"],[1,"checkbox-group"],["type","checkbox","id","cityActive","name","cityActive",3,"ngModelChange","ngModel"],["for","cityActive"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"modal-content","large",3,"click"],[1,"form-section"],["type","text","name","stopName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","stopNameAr","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","stopCity","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","stopType","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","stopAddress","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","stopAddressAr","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","stopCapacity","min","1",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox","id","stopActive","name","stopActive",3,"ngModelChange","ngModel"],["for","stopActive"],["type","number","name","stopLat","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","stopLng","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],["type","time","name","stopOpen",1,"form-control",3,"ngModelChange","ngModel"],["type","time","name","stopClose",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","name","stopPhone",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","stopEmail",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","stopManager",1,"form-control",3,"ngModelChange","ngModel"],[1,"facilities-grid"],["class","facility-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"facility-item",3,"click"],[1,"facility-icon"],[1,"facility-label"]],template:function(e,i){e&1&&(a(0,"div",0),v(1,RA,4,0,"div",1)(2,zA,60,14,"div",2)(3,UA,58,10,"div",3)(4,WA,112,20,"div",3),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading),c(),m("ngIf",i.showCityForm),c(),m("ngIf",i.showStopForm))},dependencies:[K,ae,ee,et,ct,Re,Oe,Se,vt,Yn,Pe,Ie,lt,Ar,xt,it,wr],styles:['.cities-stops-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto;background:#f8fafc;min-height:100vh}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px 30px;margin-bottom:30px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2d3748;margin-bottom:8px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:32px;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px}.stat-card.total[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6fffa}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f0fff4}.stat-card.terminals[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6f3ff}.stat-card.stations[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fef5e7}.stat-card.pickup-points[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f0f4ff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;font-weight:500;margin-bottom:5px}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2d3748;margin-bottom:2px}.stat-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;gap:8px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:8px;background:transparent;color:#4a5568;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.tab-btn[_ngcontent-%COMP%]:hover{background:#f7fafc}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;box-shadow:0 2px 4px #667eea33}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.controls-section[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.search-filters[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap;align-items:center}.search-group[_ngcontent-%COMP%]{position:relative}.search-input[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;width:250px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:13px;background:#fff;color:#4a5568;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#667eea;border:2px solid #667eea}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;padding:15px 12px;text-align:left;font-weight:600;color:#4a5568;border-bottom:2px solid #e2e8f0;font-size:13px}.data-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.data-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#edf2f7}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;border-bottom:1px solid #e2e8f0;vertical-align:top}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.city-info[_ngcontent-%COMP%], .stop-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.city-name[_ngcontent-%COMP%], .stop-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.city-name-ar[_ngcontent-%COMP%], .stop-name-ar[_ngcontent-%COMP%]{color:#718096;font-size:12px;font-style:italic}.stop-address[_ngcontent-%COMP%]{color:#a0aec0;font-size:11px;margin-top:2px}.city-code[_ngcontent-%COMP%]{padding:4px 8px;background:#e6f3ff;color:#2c5282;border-radius:6px;font-weight:600;font-size:12px}.stops-count[_ngcontent-%COMP%]{padding:4px 8px;background:#f0fff4;color:#22543d;border-radius:6px;font-weight:600;font-size:12px}.stop-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.type-icon[_ngcontent-%COMP%]{font-size:16px}.type-label[_ngcontent-%COMP%]{font-size:13px;color:#4a5568;font-weight:500}.capacity-badge[_ngcontent-%COMP%]{padding:4px 8px;background:#fef5e7;color:#c05621;border-radius:6px;font-weight:600;font-size:12px}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-badge.inactive[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.facilities-list[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex-wrap:wrap}.facility-icon[_ngcontent-%COMP%]{font-size:14px;padding:2px}.more-facilities[_ngcontent-%COMP%]{font-size:11px;color:#718096;font-weight:500}.coordinates[_ngcontent-%COMP%]{font-family:monospace;color:#718096}.operating-hours[_ngcontent-%COMP%]{color:#4a5568;font-weight:500}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;background:#f7fafc;color:#4a5568;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s ease;border:1px solid #e2e8f0}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.action-btn.toggle[_ngcontent-%COMP%]:hover{background:#ed8936;color:#fff}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#e53e3e;color:#fff}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;padding:20px;background:#fff;border-radius:12px;margin-top:20px;box-shadow:0 4px 6px #0000000d}.page-btn[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;color:#4a5568;cursor:pointer;font-size:14px;transition:all .2s ease}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{color:#718096;font-size:14px;font-weight:500}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 40px #0000001a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.modal-content.large[_ngcontent-%COMP%]{max-width:800px}.modal-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;font-weight:600;margin:0}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:6px;background:#f7fafc;color:#4a5568;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#e53e3e;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:25px}.form-section[_ngcontent-%COMP%]{margin-bottom:25px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin-bottom:15px;padding-bottom:8px;border-bottom:2px solid #e2e8f0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;margin-bottom:6px;font-size:14px}.required[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600}.form-control[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;transition:all .2s ease;background:#fff;color:#2d3748}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:#667eea}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;cursor:pointer;font-weight:500}.form-section[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:10px}.form-section[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:12px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff;text-align:center}.form-section[_ngcontent-%COMP%]   .facility-item[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-1px)}.form-section[_ngcontent-%COMP%]   .facility-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;color:#667eea}.form-section[_ngcontent-%COMP%]   .facility-icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:5px}.form-section[_ngcontent-%COMP%]   .facility-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:inherit}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px;padding-top:20px;border-top:1px solid #e2e8f0}[dir=rtl][_ngcontent-%COMP%]   .cities-stops-container[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .search-filters[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.search-input[_ngcontent-%COMP%]{width:200px}}@media (max-width: 768px){.cities-stops-container[_ngcontent-%COMP%]{padding:20px 15px}.controls-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-filters[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.search-input[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.tab-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.data-table[_ngcontent-%COMP%]{font-size:12px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:3px}.action-btn[_ngcontent-%COMP%]{width:28px;height:28px;font-size:11px}.modal-content[_ngcontent-%COMP%]{margin:10px;max-height:85vh}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-section[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.cities-stops-container[_ngcontent-%COMP%]{padding:15px 10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-card[_ngcontent-%COMP%]{padding:15px}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.page-header[_ngcontent-%COMP%]{padding:20px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.modal-content[_ngcontent-%COMP%]{margin:5px}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-section[_ngcontent-%COMP%]   .facilities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (prefers-reduced-motion: reduce){.stat-card[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover, .tab-btn[_ngcontent-%COMP%]{transform:none}.loading-spinner[_ngcontent-%COMP%]{animation:none}}@media print{.controls-section[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%], .tab-navigation[_ngcontent-%COMP%]{display:none!important}.tab-content[_ngcontent-%COMP%]{box-shadow:none!important;border:1px solid #e2e8f0!important}.data-table[_ngcontent-%COMP%]{font-size:12px}.cities-stops-container[_ngcontent-%COMP%]{background:#fff}}.form-control[_ngcontent-%COMP%]:focus-visible, .btn[_ngcontent-%COMP%]:focus-visible, .action-btn[_ngcontent-%COMP%]:focus-visible, .tab-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.facility-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.btn.loading[_ngcontent-%COMP%]{position:relative;color:transparent}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;color:#fff}']})};var qA=()=>[];function YA(n,t){n&1&&(a(0,"div",3),P(1,"div",4),a(2,"p"),l(3,"Loading trips data..."),o()())}function ZA(n,t){n&1&&(a(0,"span"),l(1,"\u{1F504}"),o())}function JA(n,t){n&1&&(a(0,"span",51),l(1,"\u23F3"),o())}function KA(n,t){if(n&1&&(a(0,"option",52),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),x(" ",e.name," ")}}function QA(n,t){if(n&1&&(a(0,"div",103)(1,"div",104),P(2,"div",105),o(),a(3,"small",106),l(4),o()()),n&2){let e=g().$implicit,i=g(2);c(2),Be("width",e.trackingInfo.progress,"%")("background-color",i.getProgressColor(e.trackingInfo.progress||0)),c(2),_(e.trackingInfo.currentLocation)}}function eN(n,t){if(n&1&&(a(0,"div",107)(1,"span",108),l(2),o()()),n&2){let e=g().$implicit;c(2),x(" \u23F0 ",e.delays[e.delays.length-1].duration,"min delay ")}}function tN(n,t){if(n&1){let e=O();a(0,"button",109),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.startTrip(r))}),l(1," \u25B6\uFE0F "),o()}}function nN(n,t){if(n&1){let e=O();a(0,"button",110),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.completeTrip(r))}),l(1," \u2705 "),o()}}function iN(n,t){if(n&1){let e=O();a(0,"button",111),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.reportDelay(r))}),l(1," \u23F0 "),o()}}function rN(n,t){if(n&1){let e=O();a(0,"tr")(1,"td")(2,"div",53)(3,"span",54),l(4),o(),a(5,"div",55)(6,"span",56),l(7),o(),a(8,"span",57),l(9),o()()()(),a(10,"td")(11,"div",58)(12,"div",59),l(13),o(),a(14,"div",60)(15,"span",61),l(16),o(),a(17,"span",62),l(18,"\u2192"),o(),a(19,"span",63),l(20),o()()()(),a(21,"td")(22,"div",64)(23,"div",65),l(24),j(25,"date"),o(),a(26,"div",66),l(27),o()()(),a(28,"td")(29,"div",64)(30,"div",65),l(31),j(32,"date"),o(),a(33,"div",66),l(34),o()()(),a(35,"td")(36,"div",67)(37,"div",68)(38,"span",69),l(39,"\u{1F68C}"),o(),a(40,"span",70),l(41),o()(),a(42,"div",71)(43,"span",72),l(44,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(45,"span",73),l(46),o()()()(),a(47,"td")(48,"div",74)(49,"span",75)(50,"span",76),l(51),o(),a(52,"span",77),l(53),j(54,"titlecase"),o()(),v(55,QA,5,5,"div",78)(56,eN,3,1,"div",79),o()(),a(57,"td")(58,"div",80)(59,"div",81),P(60,"div",82),o(),a(61,"div",83)(62,"span",84),l(63),o(),a(64,"span",85),l(65,"/"),o(),a(66,"span",86),l(67),o(),a(68,"span",87),l(69),o()()()(),a(70,"td")(71,"div",88)(72,"div",89),l(73),o(),a(74,"div",90)(75,"span",91),l(76),o()()()(),a(77,"td")(78,"div",92)(79,"button",93),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.viewTripDetails(r))}),l(80," \u{1F441}\uFE0F "),o(),a(81,"button",94),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.editTrip(r))}),l(82," \u270F\uFE0F "),o(),v(83,tN,2,0,"button",95)(84,nN,2,0,"button",96)(85,iN,2,0,"button",97),a(86,"div",98)(87,"button",99),l(88," \u22EE "),o(),a(89,"div",100)(90,"button",101),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.duplicateTrip(r))}),l(91," \u{1F4CB} Duplicate Trip "),o(),a(92,"button",102),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.cancelTrip(r))}),l(93," \u274C Cancel Trip "),o()()()()()()}if(n&2){let e=t.$implicit,i=g(2);q("trip-row-"+e.status),c(4),_(e.tripCode),c(3),_(i.formatDistance(e.distance)),c(2),_(i.formatDuration(e.estimatedDuration)),c(4),_(e.routeName),c(3),_(e.origin),c(4),_(e.destination),c(4),_(ie(25,36,e.departureDate,"MMM dd, yyyy")),c(3),_(e.departureTime),c(4),_(ie(32,39,e.arrivalDate,"MMM dd, yyyy")),c(3),_(e.arrivalTime),c(7),_(e.busNumber),c(5),_(e.driverName),c(3),q(i.getStatusClass(e.status)),c(2),_(i.getStatusIcon(e.status)),c(2),_(se(54,42,e.status)),c(2),m("ngIf",e.status==="in-progress"&&e.trackingInfo),c(),m("ngIf",e.delays&&e.delays.length>0),c(4),Be("width",i.getOccupancyPercentage(e),"%")("background-color",i.getProgressColor(i.getOccupancyPercentage(e))),c(3),_(e.bookedSeats),c(4),_(e.totalSeats),c(2),x("(",i.getOccupancyPercentage(e),"%)"),c(4),_(i.formatCurrency(e.revenue)),c(2),I("negative",e.profit<0),c(),x(" ",i.formatCurrency(e.profit)," profit "),c(5),m("disabled",e.status==="completed"||e.status==="cancelled"),c(2),m("ngIf",e.status==="scheduled"),c(),m("ngIf",e.status==="in-progress"),c(),m("ngIf",e.status==="scheduled"||e.status==="in-progress"),c(7),m("disabled",e.status==="completed"||e.status==="cancelled")}}function oN(n,t){if(n&1){let e=O();a(0,"button",117),h("click",function(){let r=C(e).index,s=g(3);return y(s.changePage(r+1))}),l(1),o()}if(n&2){let e=t.index,i=g(3);I("active",i.currentPage===e+1),c(),x(" ",e+1," ")}}function aN(n,t){if(n&1){let e=O();a(0,"div",112)(1,"button",113),h("click",function(){C(e);let r=g(2);return y(r.changePage(r.currentPage-1))}),l(2," \u2190 Previous "),o(),a(3,"div",114),v(4,oN,2,3,"button",115),o(),a(5,"span",116),l(6),o(),a(7,"button",113),h("click",function(){C(e);let r=g(2);return y(r.changePage(r.currentPage+1))}),l(8," Next \u2192 "),o()()}if(n&2){let e=g(2);c(),m("disabled",e.currentPage===1),c(3),m("ngForOf",si(6,qA).constructor(e.totalPages)),c(2),Ke(" Page ",e.currentPage," of ",e.totalPages," (",e.filteredTrips.length," trips) "),c(),m("disabled",e.currentPage===e.totalPages)}}function sN(n,t){if(n&1){let e=O();a(0,"div",118)(1,"div",119),l(2,"\u{1F68C}"),o(),a(3,"h3"),l(4,"No trips found"),o(),a(5,"p"),l(6,"No trips match your current filters. Try adjusting your search criteria or schedule a new trip."),o(),a(7,"button",13),h("click",function(){C(e);let r=g(2);return y(r.scheduleNewTrip())}),l(8," \u2795 Schedule First Trip "),o()()}}function lN(n,t){if(n&1){let e=O();a(0,"div",5)(1,"div",6)(2,"div",7)(3,"h1"),l(4,"Trip Management"),o(),a(5,"p"),l(6,"Schedule, monitor, and manage all your bus trips"),o()(),a(7,"div",8)(8,"button",9),h("click",function(){C(e);let r=g();return y(r.refreshData())}),v(9,ZA,2,0,"span",10)(10,JA,2,0,"span",11),l(11," Refresh "),o(),a(12,"button",12),h("click",function(){C(e);let r=g();return y(r.switchView("calendar"))}),l(13," \u{1F4C5} Calendar View "),o(),a(14,"button",13),h("click",function(){C(e);let r=g();return y(r.scheduleNewTrip())}),l(15," \u2795 Schedule New Trip "),o()()(),a(16,"div",14)(17,"div",15)(18,"div",16),l(19,"\u{1F690}"),o(),a(20,"div",17)(21,"h3"),l(22,"Total Trips"),o(),a(23,"p",18),l(24),o(),a(25,"small"),l(26,"All time"),o()()(),a(27,"div",19)(28,"div",16),l(29,"\u{1F4C5}"),o(),a(30,"div",17)(31,"h3"),l(32,"Scheduled"),o(),a(33,"p",18),l(34),o(),a(35,"small"),l(36,"Upcoming trips"),o()()(),a(37,"div",20)(38,"div",16),l(39,"\u{1F68C}"),o(),a(40,"div",17)(41,"h3"),l(42,"In Progress"),o(),a(43,"p",18),l(44),o(),a(45,"small"),l(46,"Currently running"),o()()(),a(47,"div",21)(48,"div",16),l(49,"\u2705"),o(),a(50,"div",17)(51,"h3"),l(52,"Completed"),o(),a(53,"p",18),l(54),o(),a(55,"small"),l(56,"Successfully finished"),o()()(),a(57,"div",22)(58,"div",16),l(59,"\u{1F4B0}"),o(),a(60,"div",17)(61,"h3"),l(62,"Total Revenue"),o(),a(63,"p",18),l(64),o(),a(65,"small"),l(66,"All trips"),o()()(),a(67,"div",23)(68,"div",16),l(69,"\u{1F465}"),o(),a(70,"div",17)(71,"h3"),l(72,"Avg. Occupancy"),o(),a(73,"p",18),l(74),o(),a(75,"small"),l(76,"Seat utilization"),o()()()(),a(77,"div",24)(78,"div",25)(79,"div",26)(80,"input",27),L("ngModelChange",function(r){C(e);let s=g();return $(s.searchTerm,r)||(s.searchTerm=r),y(r)}),h("input",function(){C(e);let r=g();return y(r.applyFilters())}),o()(),a(81,"div",28)(82,"label"),l(83,"Status"),o(),a(84,"select",29),L("ngModelChange",function(r){C(e);let s=g();return $(s.statusFilter,r)||(s.statusFilter=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.applyFilters())}),a(85,"option",30),l(86,"All Status"),o(),a(87,"option",31),l(88,"Scheduled"),o(),a(89,"option",32),l(90,"In Progress"),o(),a(91,"option",33),l(92,"Completed"),o(),a(93,"option",34),l(94,"Cancelled"),o(),a(95,"option",35),l(96,"Delayed"),o()()(),a(97,"div",28)(98,"label"),l(99,"Route"),o(),a(100,"select",29),L("ngModelChange",function(r){C(e);let s=g();return $(s.routeFilter,r)||(s.routeFilter=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.applyFilters())}),a(101,"option",30),l(102,"All Routes"),o(),v(103,KA,2,2,"option",36),o()(),a(104,"div",28)(105,"label"),l(106,"Date"),o(),a(107,"select",29),L("ngModelChange",function(r){C(e);let s=g();return $(s.dateFilter,r)||(s.dateFilter=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.applyFilters())}),a(108,"option",30),l(109,"All Dates"),o(),a(110,"option",37),l(111,"Today"),o(),a(112,"option",38),l(113,"Tomorrow"),o(),a(114,"option",39),l(115,"This Week"),o(),a(116,"option",40),l(117,"This Month"),o()()(),a(118,"div",28)(119,"label"),l(120,"Per Page"),o(),a(121,"select",29),L("ngModelChange",function(r){C(e);let s=g();return $(s.itemsPerPage,r)||(s.itemsPerPage=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.applyFilters())}),a(122,"option",41),l(123,"10 trips"),o(),a(124,"option",42),l(125,"25 trips"),o(),a(126,"option",43),l(127,"50 trips"),o(),a(128,"option",44),l(129,"100 trips"),o()()()()(),a(130,"div",45)(131,"table",46)(132,"thead")(133,"tr")(134,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("tripCode"))}),l(135),o(),a(136,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("routeName"))}),l(137),o(),a(138,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("departureDate"))}),l(139),o(),a(140,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("arrivalDate"))}),l(141),o(),a(142,"th"),l(143,"Bus & Driver"),o(),a(144,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("status"))}),l(145),o(),a(146,"th"),l(147,"Occupancy"),o(),a(148,"th",47),h("click",function(){C(e);let r=g();return y(r.toggleSort("revenue"))}),l(149),o(),a(150,"th"),l(151,"Actions"),o()()(),a(152,"tbody"),v(153,rN,94,44,"tr",48),o()()(),v(154,aN,9,7,"div",49)(155,sN,9,0,"div",50),o()}if(n&2){let e=g();c(8),m("disabled",e.isRefreshing),c(),m("ngIf",!e.isRefreshing),c(),m("ngIf",e.isRefreshing),c(14),_(e.stats.totalTrips),c(10),_(e.stats.scheduledTrips),c(10),_(e.stats.inProgressTrips),c(10),_(e.stats.completedTrips),c(10),_(e.formatCurrency(e.stats.totalRevenue)),c(10),x("",e.stats.averageOccupancy.toFixed(1),"%"),c(6),F("ngModel",e.searchTerm),c(4),F("ngModel",e.statusFilter),c(16),F("ngModel",e.routeFilter),c(3),m("ngForOf",e.getUniqueRoutes()),c(4),F("ngModel",e.dateFilter),c(14),F("ngModel",e.itemsPerPage),c(14),x(" Trip Code ",e.getSortIcon("tripCode")," "),c(2),x(" Route ",e.getSortIcon("routeName")," "),c(2),x(" Departure ",e.getSortIcon("departureDate")," "),c(2),x(" Arrival ",e.getSortIcon("arrivalDate")," "),c(4),x(" Status ",e.getSortIcon("status")," "),c(4),x(" Revenue ",e.getSortIcon("revenue")," "),c(4),m("ngForOf",e.getPaginatedTrips())("ngForTrackBy",e.trackByTripId),c(),m("ngIf",e.totalPages>1),c(),m("ngIf",e.filteredTrips.length===0&&!e.isLoading)}}var Sd=class n{constructor(t){this.router=t}trips=[];filteredTrips=[];stats={totalTrips:0,scheduledTrips:0,inProgressTrips:0,completedTrips:0,cancelledTrips:0,delayedTrips:0,totalRevenue:0,averageOccupancy:0,onTimePerformance:0};Math=Math;searchTerm="";statusFilter="all";routeFilter="all";dateFilter="all";sortBy="departureDate";sortDirection="desc";currentPage=1;itemsPerPage=10;totalPages=1;isLoading=!1;isRefreshing=!1;viewMode="list";ngOnInit(){this.loadTrips()}loadTrips(){this.isLoading=!0,setTimeout(()=>{this.trips=this.getMockTrips(),this.calculateStats(),this.applyFilters(),this.isLoading=!1},500)}getMockTrips(){return[{id:"T001",tripCode:"RB-RYD-JED-20250127-001",routeId:"R001",routeName:"Riyadh to Jeddah Express",origin:"Riyadh",destination:"Jeddah",departureDate:new Date("2025-01-27"),departureTime:"08:00",arrivalDate:new Date("2025-01-27"),arrivalTime:"16:00",busId:"B001",busNumber:"RB-001",driverId:"D001",driverName:"Ahmed Al-Rashid",status:"in-progress",totalSeats:50,bookedSeats:42,availableSeats:8,distance:950,estimatedDuration:480,fare:180,revenue:7560,expenses:2200,profit:5360,createdDate:new Date("2025-01-20"),lastModified:new Date,notes:"Premium service with refreshments",trackingInfo:{currentLocation:"Near Taif",lastUpdate:new Date,progress:65}},{id:"T002",tripCode:"RB-JED-RYD-20250127-002",routeId:"R002",routeName:"Jeddah to Riyadh Return",origin:"Jeddah",destination:"Riyadh",departureDate:new Date("2025-01-27"),departureTime:"20:00",arrivalDate:new Date("2025-01-28"),arrivalTime:"04:00",busId:"B002",busNumber:"RB-002",driverId:"D002",driverName:"Omar Al-Ghamdi",status:"scheduled",totalSeats:45,bookedSeats:38,availableSeats:7,distance:950,estimatedDuration:480,fare:180,revenue:6840,expenses:2100,profit:4740,createdDate:new Date("2025-01-21"),lastModified:new Date,notes:"Overnight service"},{id:"T003",tripCode:"RB-RYD-DMM-20250128-003",routeId:"R003",routeName:"Riyadh to Dammam Direct",origin:"Riyadh",destination:"Dammam",departureDate:new Date("2025-01-28"),departureTime:"10:00",arrivalDate:new Date("2025-01-28"),arrivalTime:"16:30",busId:"B003",busNumber:"RB-003",driverId:"D003",driverName:"Khalid Al-Dosari",status:"scheduled",totalSeats:40,bookedSeats:35,availableSeats:5,distance:400,estimatedDuration:390,fare:120,revenue:4200,expenses:1500,profit:2700,createdDate:new Date("2025-01-22"),lastModified:new Date},{id:"T004",tripCode:"RB-RYD-MKK-20250126-004",routeId:"R004",routeName:"Riyadh to Mecca Pilgrimage",origin:"Riyadh",destination:"Mecca",departureDate:new Date("2025-01-26"),departureTime:"06:00",arrivalDate:new Date("2025-01-26"),arrivalTime:"14:00",busId:"B004",busNumber:"RB-004",driverId:"D004",driverName:"Hassan Al-Maliki",status:"completed",totalSeats:50,bookedSeats:50,availableSeats:0,distance:870,estimatedDuration:480,actualDuration:495,fare:200,revenue:1e4,expenses:2800,profit:7200,createdDate:new Date("2025-01-15"),lastModified:new Date("2025-01-26"),delays:[{reason:"Traffic congestion",duration:15,reportedAt:new Date("2025-01-26T10:30:00")}]},{id:"T005",tripCode:"RB-MED-RYD-20250125-005",routeId:"R005",routeName:"Medina to Riyadh Express",origin:"Medina",destination:"Riyadh",departureDate:new Date("2025-01-25"),departureTime:"16:00",arrivalDate:new Date("2025-01-26"),arrivalTime:"00:00",busId:"B005",busNumber:"RB-005",driverId:"D005",driverName:"Mohammed Al-Zahrani",status:"completed",totalSeats:45,bookedSeats:41,availableSeats:4,distance:450,estimatedDuration:480,actualDuration:470,fare:150,revenue:6150,expenses:1800,profit:4350,createdDate:new Date("2025-01-18"),lastModified:new Date("2025-01-26")},{id:"T006",tripCode:"RB-TAF-JED-20250124-006",routeId:"R006",routeName:"Taif to Jeddah Local",origin:"Taif",destination:"Jeddah",departureDate:new Date("2025-01-24"),departureTime:"14:00",arrivalDate:new Date("2025-01-24"),arrivalTime:"16:30",busId:"B006",busNumber:"RB-006",driverId:"D006",driverName:"Abdullah Al-Qurashi",status:"cancelled",totalSeats:35,bookedSeats:20,availableSeats:15,distance:88,estimatedDuration:150,fare:60,revenue:0,expenses:500,profit:-500,createdDate:new Date("2025-01-20"),lastModified:new Date("2025-01-24"),notes:"Cancelled due to mechanical issues"}]}calculateStats(){this.stats={totalTrips:this.trips.length,scheduledTrips:this.trips.filter(t=>t.status==="scheduled").length,inProgressTrips:this.trips.filter(t=>t.status==="in-progress").length,completedTrips:this.trips.filter(t=>t.status==="completed").length,cancelledTrips:this.trips.filter(t=>t.status==="cancelled").length,delayedTrips:this.trips.filter(t=>t.delays&&t.delays.length>0).length,totalRevenue:this.trips.reduce((t,e)=>t+e.revenue,0),averageOccupancy:this.trips.length>0?this.trips.reduce((t,e)=>t+e.bookedSeats/e.totalSeats*100,0)/this.trips.length:0,onTimePerformance:this.getOnTimePerformance()}}getOnTimePerformance(){let t=this.trips.filter(i=>i.status==="completed");return t.length===0?0:t.filter(i=>!i.delays||i.delays.length===0).length/t.length*100}applyFilters(){let t=[...this.trips];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.tripCode.toLowerCase().includes(e)||i.routeName.toLowerCase().includes(e)||i.origin.toLowerCase().includes(e)||i.destination.toLowerCase().includes(e)||i.busNumber.toLowerCase().includes(e)||i.driverName.toLowerCase().includes(e))}if(this.statusFilter!=="all"&&(t=t.filter(e=>e.status===this.statusFilter)),this.routeFilter!=="all"&&(t=t.filter(e=>e.routeId===this.routeFilter)),this.dateFilter!=="all"){let e=new Date,i=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(this.dateFilter){case"today":t=t.filter(f=>f.departureDate>=i&&f.departureDate<new Date(i.getTime()+24*60*60*1e3));break;case"tomorrow":let r=new Date(i.getTime()+24*60*60*1e3);t=t.filter(f=>f.departureDate>=r&&f.departureDate<new Date(r.getTime()+24*60*60*1e3));break;case"this-week":let s=new Date(i.getTime()-i.getDay()*24*60*60*1e3),d=new Date(s.getTime()+7*24*60*60*1e3);t=t.filter(f=>f.departureDate>=s&&f.departureDate<d);break;case"this-month":let u=new Date(e.getFullYear(),e.getMonth(),1),p=new Date(e.getFullYear(),e.getMonth()+1,1);t=t.filter(f=>f.departureDate>=u&&f.departureDate<p);break}}t.sort((e,i)=>{let r=e[this.sortBy],s=i[this.sortBy];return r===void 0&&s===void 0?0:r===void 0?this.sortDirection==="asc"?1:-1:s===void 0?this.sortDirection==="asc"?-1:1:(r instanceof Date&&s instanceof Date&&(r=r.getTime(),s=s.getTime()),typeof r=="string"&&typeof s=="string"&&(r=r.toLowerCase(),s=s.toLowerCase()),r===null&&s===null?0:r===null?this.sortDirection==="asc"?1:-1:s===null?this.sortDirection==="asc"?-1:1:r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0)}),this.filteredTrips=t,this.totalPages=Math.ceil(t.length/this.itemsPerPage),this.currentPage=1}toggleSort(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc"),this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}getPaginatedTrips(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredTrips.slice(t,e)}changePage(t){this.currentPage=t}scheduleNewTrip(){this.router.navigate(["/trips/schedule"])}viewTripDetails(t){this.router.navigate(["/trips",t.id])}editTrip(t){this.router.navigate(["/trips",t.id,"edit"])}duplicateTrip(t){this.router.navigate(["/trips/schedule"],{queryParams:{duplicate:t.id}})}cancelTrip(t){(t.status==="scheduled"||t.status==="delayed")&&confirm(`Are you sure you want to cancel trip ${t.tripCode}?`)&&(t.status="cancelled",t.lastModified=new Date,this.calculateStats(),alert("Trip cancelled successfully"))}startTrip(t){t.status==="scheduled"&&(t.status="in-progress",t.lastModified=new Date,this.calculateStats(),alert("Trip started successfully"))}completeTrip(t){t.status==="in-progress"&&(t.status="completed",t.lastModified=new Date,t.actualDuration=t.estimatedDuration,this.calculateStats(),alert("Trip completed successfully"))}reportDelay(t){let e=prompt("Please enter the reason for delay:"),i=prompt("Please enter delay duration in minutes:");if(e&&i){let r=parseInt(i);isNaN(r)||(t.delays||(t.delays=[]),t.delays.push({reason:e,duration:r,reportedAt:new Date}),t.status="delayed",t.lastModified=new Date,this.calculateStats(),alert("Delay reported successfully"))}}refreshData(){this.isRefreshing=!0,setTimeout(()=>{this.loadTrips(),this.isRefreshing=!1},1e3)}switchView(t){this.viewMode=t,t==="calendar"&&this.router.navigate(["/trips/calendar"])}getUniqueRoutes(){let t=new Map;return this.trips.forEach(e=>{t.has(e.routeId)||t.set(e.routeId,{id:e.routeId,name:e.routeName})}),Array.from(t.values())}getStatusClass(t){switch(t){case"scheduled":return"status-scheduled";case"in-progress":return"status-in-progress";case"completed":return"status-completed";case"cancelled":return"status-cancelled";case"delayed":return"status-delayed";default:return"status-unknown"}}getStatusIcon(t){switch(t){case"scheduled":return"\u{1F4C5}";case"in-progress":return"\u{1F68C}";case"completed":return"\u2705";case"cancelled":return"\u274C";case"delayed":return"\u23F0";default:return"\u2753"}}formatCurrency(t){return`SAR ${t.toLocaleString()}`}formatDuration(t){let e=Math.floor(t/60),i=t%60;return`${e}h ${i}m`}formatDistance(t){return`${t.toLocaleString()} km`}getOccupancyPercentage(t){return Math.round(t.bookedSeats/t.totalSeats*100)}getProgressColor(t){return t>=90?"#22c55e":t>=70?"#eab308":t>=50?"#f97316":"#ef4444"}trackByTripId(t,e){return e.id}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-trip-list"]],decls:3,vars:2,consts:[[1,"trip-management-container"],["class","loading-container",4,"ngIf"],["class","main-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"main-content"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click","disabled"],[4,"ngIf"],["class","loading-icon",4,"ngIf"],[1,"btn","btn-outline",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","scheduled"],[1,"stat-card","in-progress"],[1,"stat-card","completed"],[1,"stat-card","revenue"],[1,"stat-card","occupancy"],[1,"controls-section"],[1,"search-filters"],[1,"search-group"],["type","text","placeholder","Search trips...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","scheduled"],["value","in-progress"],["value","completed"],["value","cancelled"],["value","delayed"],[3,"value",4,"ngFor","ngForOf"],["value","today"],["value","tomorrow"],["value","this-week"],["value","this-month"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-container"],[1,"trips-table"],[1,"sortable",3,"click"],[3,"class",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-icon"],[3,"value"],[1,"trip-code"],[1,"code-text"],[1,"trip-meta"],[1,"distance"],[1,"duration"],[1,"route-info"],[1,"route-name"],[1,"route-path"],[1,"origin"],[1,"arrow"],[1,"destination"],[1,"datetime-info"],[1,"date"],[1,"time"],[1,"assignment-info"],[1,"bus-info"],[1,"bus-icon"],[1,"bus-number"],[1,"driver-info"],[1,"driver-icon"],[1,"driver-name"],[1,"status-container"],[1,"status-badge"],[1,"status-icon"],[1,"status-text"],["class","progress-info",4,"ngIf"],["class","delay-info",4,"ngIf"],[1,"occupancy-info"],[1,"occupancy-bar"],[1,"occupancy-fill"],[1,"occupancy-text"],[1,"booked"],[1,"separator"],[1,"total"],[1,"percentage"],[1,"revenue-info"],[1,"revenue-amount"],[1,"profit-info"],[1,"profit"],[1,"action-buttons"],["title","View Details",1,"action-btn","view",3,"click"],["title","Edit Trip",1,"action-btn","edit",3,"click","disabled"],["class","action-btn start","title","Start Trip",3,"click",4,"ngIf"],["class","action-btn complete","title","Complete Trip",3,"click",4,"ngIf"],["class","action-btn delay","title","Report Delay",3,"click",4,"ngIf"],[1,"dropdown"],["title","More Actions",1,"action-btn","more"],[1,"dropdown-menu"],[3,"click"],[1,"danger",3,"click","disabled"],[1,"progress-info"],[1,"progress-bar"],[1,"progress-fill"],[1,"location-info"],[1,"delay-info"],[1,"delay-badge"],["title","Start Trip",1,"action-btn","start",3,"click"],["title","Complete Trip",1,"action-btn","complete",3,"click"],["title","Report Delay",1,"action-btn","delay",3,"click"],[1,"pagination"],[1,"page-btn",3,"click","disabled"],[1,"page-numbers"],["class","page-number",3,"active","click",4,"ngFor","ngForOf"],[1,"page-info"],[1,"page-number",3,"click"],[1,"empty-state"],[1,"empty-icon"]],template:function(e,i){e&1&&(a(0,"div",0),v(1,YA,4,0,"div",1)(2,lN,156,25,"div",2),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading))},dependencies:[K,ae,ee,Ge,He,et,Re,Oe,Se,Pe,Ie,it],styles:['.trip-management-container[_ngcontent-%COMP%]{padding:30px;max-width:1600px;margin:0 auto;background:#f8fafc;min-height:100vh}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2d3748;margin-bottom:8px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:32px;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px}.stat-card.total[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6fffa}.stat-card.scheduled[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#e6f3ff}.stat-card.in-progress[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fff5e6}.stat-card.completed[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f0fff4}.stat-card.revenue[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#fef5e7}.stat-card.occupancy[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#f0f4ff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;font-weight:500;margin-bottom:5px}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2d3748;margin-bottom:2px}.stat-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px}.controls-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px 25px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d}.search-filters[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap;align-items:end}.search-group[_ngcontent-%COMP%]{flex:2;min-width:250px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;min-width:140px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#4a5568;font-weight:500}.search-input[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;width:100%;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:13px;background:#fff;color:#4a5568;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#667eea;border:2px solid #667eea}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff}.loading-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;margin-bottom:25px}.trips-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;padding:15px 12px;text-align:left;font-weight:600;color:#4a5568;border-bottom:2px solid #e2e8f0;font-size:13px}.trips-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.trips-table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#edf2f7}.trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;border-bottom:1px solid #e2e8f0;vertical-align:top}.trips-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.trip-row-scheduled[_ngcontent-%COMP%]{border-left:4px solid #667eea}.trip-row-in-progress[_ngcontent-%COMP%]{border-left:4px solid #ed8936}.trip-row-completed[_ngcontent-%COMP%]{border-left:4px solid #48bb78}.trip-row-cancelled[_ngcontent-%COMP%]{border-left:4px solid #e53e3e}.trip-row-delayed[_ngcontent-%COMP%]{border-left:4px solid #ecc94b}.trip-code[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.code-text[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:13px}.trip-meta[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:11px;color:#718096}.route-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.route-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:13px}.route-path[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#718096}.arrow[_ngcontent-%COMP%]{color:#a0aec0;font-weight:700}.datetime-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.datetime-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:13px}.datetime-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#718096;font-size:12px}.assignment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.bus-info[_ngcontent-%COMP%], .driver-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px}.bus-icon[_ngcontent-%COMP%], .driver-icon[_ngcontent-%COMP%]{font-size:14px}.bus-number[_ngcontent-%COMP%], .driver-name[_ngcontent-%COMP%]{color:#4a5568;font-weight:500}.status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.status-scheduled[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282}.status-in-progress[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621}.status-completed[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-delayed[_ngcontent-%COMP%]{background:#fefcbf;color:#744210}.progress-info[_ngcontent-%COMP%]{margin-top:6px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden;margin-bottom:4px}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.location-info[_ngcontent-%COMP%]{font-size:10px;color:#718096}.delay-badge[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:600}.occupancy-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.occupancy-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.occupancy-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.occupancy-text[_ngcontent-%COMP%]{font-size:12px;color:#4a5568}.booked[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.separator[_ngcontent-%COMP%]{color:#a0aec0;margin:0 2px}.total[_ngcontent-%COMP%]{color:#718096}.percentage[_ngcontent-%COMP%]{color:#718096;font-size:11px}.revenue-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.revenue-amount[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:13px}.profit[_ngcontent-%COMP%]{font-size:11px;color:#22543d;font-weight:500}.profit.negative[_ngcontent-%COMP%]{color:#e53e3e}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;position:relative}.action-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:6px;background:#f7fafc;color:#4a5568;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:11px;transition:all .2s ease;border:1px solid #e2e8f0}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn.view[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#ed8936;color:#fff}.action-btn.start[_ngcontent-%COMP%]:hover{background:#48bb78;color:#fff}.action-btn.complete[_ngcontent-%COMP%]:hover{background:#38a169;color:#fff}.action-btn.delay[_ngcontent-%COMP%]:hover{background:#ecc94b;color:#fff}.action-btn.more[_ngcontent-%COMP%]:hover{background:#4a5568;color:#fff}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 8px 20px #0000001a;min-width:150px;z-index:10;display:none}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:none;background:transparent;text-align:left;font-size:12px;color:#4a5568;cursor:pointer;transition:background-color .2s ease}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f7fafc}.dropdown-menu[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]:hover{background:#fed7d7;color:#742a2a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.page-btn[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;color:#4a5568;cursor:pointer;font-size:14px;transition:all .2s ease}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-numbers[_ngcontent-%COMP%]{display:flex;gap:4px}.page-number[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e2e8f0;border-radius:6px;background:#fff;color:#4a5568;cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.page-number[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea}.page-number.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.page-info[_ngcontent-%COMP%]{color:#718096;font-size:14px;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin-bottom:30px}@media (max-width: 1200px){@media (max-width: 360px){.trip-management-container[_ngcontent-%COMP%]{padding:10px 5px}.page-header[_ngcontent-%COMP%]{padding:15px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.stat-card[_ngcontent-%COMP%]{padding:12px}.stat-icon[_ngcontent-%COMP%]{font-size:20px;width:40px;height:40px}.stat-number[_ngcontent-%COMP%]{font-size:18px}.trips-table[_ngcontent-%COMP%]{font-size:10px}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.action-btn[_ngcontent-%COMP%]{width:20px;height:20px;font-size:9px}}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.d-none[_ngcontent-%COMP%]{display:none}.d-block[_ngcontent-%COMP%]{display:block}.d-inline-block[_ngcontent-%COMP%]{display:inline-block}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.trips-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafa}.trips-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f7ff!important}.status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{margin-right:2px}[dir=rtl][_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:2px}.progress-bar[_ngcontent-%COMP%], .occupancy-bar[_ngcontent-%COMP%]{position:relative;overflow:hidden}.progress-fill[_ngcontent-%COMP%], .occupancy-fill[_ngcontent-%COMP%]{border-radius:inherit;position:relative}.action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:not(:last-child){margin-right:2px}[dir=rtl][_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:not(:last-child){margin-right:0;margin-left:2px}.dropdown-menu[_ngcontent-%COMP%]{transform:translateY(2px)}.dropdown-menu[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-4px;right:8px;width:8px;height:8px;background:#fff;border:1px solid #e2e8f0;border-bottom:none;border-right:none;transform:rotate(45deg)}[dir=rtl][_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]:before{right:auto;left:8px}.empty-state[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:10px}.table-loading[_ngcontent-%COMP%]{position:relative}.table-loading[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:#fffc;display:flex;align-items:center;justify-content:center}.trips-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:focus-within{background-color:#e6f3ff;outline:2px solid #667eea;outline-offset:-2px}@media (max-width: 640px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.trips-table[_ngcontent-%COMP%]{min-width:800px}}@media print{.trip-row-scheduled[_ngcontent-%COMP%]{border-left-color:#000!important}.trip-row-in-progress[_ngcontent-%COMP%]{border-left-color:#666!important}.trip-row-completed[_ngcontent-%COMP%]{border-left-color:#000!important}.trip-row-cancelled[_ngcontent-%COMP%]{border-left-color:#999!important}.trip-row-delayed[_ngcontent-%COMP%]{border-left-color:#333!important}.status-badge[_ngcontent-%COMP%]{border:1px solid #000!important;background:#fff!important;color:#000!important}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-contrast: high){.trips-table[_ngcontent-%COMP%]{border:2px solid #000}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000}.btn[_ngcontent-%COMP%]{border:2px solid #000}.status-badge[_ngcontent-%COMP%]{border:2px solid #000;background:#fff;color:#000}}stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.search-filters[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.search-group[_ngcontent-%COMP%]{min-width:auto}}@media (max-width: 768px){.trip-management-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.header-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.trips-table[_ngcontent-%COMP%]{font-size:12px}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.action-btn[_ngcontent-%COMP%]{width:24px;height:24px;font-size:10px}.pagination[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.page-numbers[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-card[_ngcontent-%COMP%]{padding:15px}.stat-icon[_ngcontent-%COMP%]{font-size:24px;width:50px;height:50px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.trips-table[_ngcontent-%COMP%]{font-size:11px}.trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.code-text[_ngcontent-%COMP%], .route-name[_ngcontent-%COMP%]{font-size:11px}.trip-meta[_ngcontent-%COMP%], .route-path[_ngcontent-%COMP%]{font-size:10px}.empty-state[_ngcontent-%COMP%]{padding:40px 15px}.empty-icon[_ngcontent-%COMP%]{font-size:48px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}[dir=rtl][_ngcontent-%COMP%]   .trip-management-container[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .search-filters[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .trips-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .trips-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{left:0;right:auto}[dir=rtl][_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .route-path[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{transform:scaleX(-1)}@media (prefers-reduced-motion: reduce){.stat-card[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:hover{transform:none}.loading-spinner[_ngcontent-%COMP%], .loading-icon[_ngcontent-%COMP%]{animation:none}.progress-fill[_ngcontent-%COMP%], .occupancy-fill[_ngcontent-%COMP%]{transition:none}}@media print{.header-actions[_ngcontent-%COMP%], .controls-section[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%], .pagination[_ngcontent-%COMP%]{display:none!important}.trip-management-container[_ngcontent-%COMP%]{background:#fff;padding:20px}.trips-table[_ngcontent-%COMP%]{font-size:10px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);margin-bottom:20px}.stat-card[_ngcontent-%COMP%]{box-shadow:none!important;border:1px solid #e2e8f0!important}}.btn[_ngcontent-%COMP%]:focus-visible, .action-btn[_ngcontent-%COMP%]:focus-visible, .filter-select[_ngcontent-%COMP%]:focus-visible, .search-input[_ngcontent-%COMP%]:focus-visible, .page-btn[_ngcontent-%COMP%]:focus-visible, .page-number[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}@media (prefers-contrast: high){.status-badge[_ngcontent-%COMP%]{border:2px solid currentColor}.progress-bar[_ngcontent-%COMP%], .occupancy-bar[_ngcontent-%COMP%]{border:1px solid #000}.action-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}']})};function cN(n,t){n&1&&(a(0,"div",4),P(1,"div",5),a(2,"p"),l(3,"Loading form data..."),o()())}function dN(n,t){if(n&1&&(a(0,"li",61)(1,"strong"),l(2),j(3,"titlecase"),o(),l(4),o()),n&2){let e=t.$implicit;c(2),x("",se(3,4,e.type)," Conflict:"),c(2),Ke(" ",e.resource," is already assigned to ",e.conflictingTrip," during ",e.timeRange," ")}}function uN(n,t){if(n&1&&(a(0,"div",56)(1,"div",57),l(2,"\u26A0\uFE0F"),o(),a(3,"div",58)(4,"h3"),l(5,"Scheduling Conflicts Detected"),o(),a(6,"ul",59),v(7,dN,5,6,"li",60),o(),a(8,"p"),l(9,"Please resolve these conflicts before scheduling the trip."),o()()()),n&2){let e=g(2);c(7),m("ngForOf",e.conflicts)}}function pN(n,t){if(n&1&&(a(0,"option",62),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),Ke(" ",e.name," (",e.origin," \u2192 ",e.destination,") ")}}function mN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("routeId")," ")}}function gN(n,t){if(n&1&&(a(0,"div",15)(1,"label"),l(2,"Route Details"),o(),a(3,"div",64)(4,"div",65)(5,"div",66)(6,"span",67),l(7),o(),a(8,"span",68),l(9,"\u2192"),o(),a(10,"span",69),l(11),o()(),a(12,"div",70)(13,"span",71),l(14),o(),a(15,"span",72),l(16),o(),a(17,"span",73),l(18),o()()()()()),n&2){let e=g(2);c(7),_(e.selectedRoute.origin),c(4),_(e.selectedRoute.destination),c(3),_(e.formatDistance(e.selectedRoute.distance)),c(2),_(e.formatDuration(e.selectedRoute.estimatedDuration)),c(2),_(e.formatCurrency(e.selectedRoute.baseFare))}}function fN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("departureDate")," ")}}function _N(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("departureTime")," ")}}function hN(n,t){if(n&1&&(a(0,"div",15)(1,"label"),l(2,"Estimated Arrival"),o(),a(3,"div",74)(4,"div",75),l(5),j(6,"date"),o(),a(7,"div",76),l(8),o()()()),n&2){let e=g(2);c(5),_(ie(6,2,e.calculateArrivalDate(),"MMM dd, yyyy")),c(3),_(e.calculateArrivalTime())}}function vN(n,t){if(n&1&&(a(0,"option",62),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),Ke(" ",e.number," - ",e.model," (",e.capacity," seats) ")}}function xN(n,t){if(n&1&&(a(0,"span"),l(1),j(2,"titlecase"),o()),n&2){let e=g().$implicit;c(),x("- ",se(2,1,e.status),"")}}function CN(n,t){if(n&1&&(a(0,"option",79),l(1),v(2,xN,3,3,"span",80),o()),n&2){let e=t.$implicit;m("value",e.id)("disabled",e.status!=="available"),c(),Ke(" ",e.number," - ",e.model," (",e.capacity," seats) "),c(),m("ngIf",e.status!=="available")}}function yN(n,t){if(n&1&&(a(0,"optgroup",77),v(1,CN,3,6,"option",78),o()),n&2){let e=g(2);c(),m("ngForOf",e.buses)}}function bN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("busId")," ")}}function EN(n,t){if(n&1&&(a(0,"option",62),l(1),o()),n&2){let e=t.$implicit;m("value",e.id),c(),Ke(" ",e.name," - ",e.experience,"yr exp (",e.rating,"\u2605) ")}}function DN(n,t){if(n&1&&(a(0,"span"),l(1),j(2,"titlecase"),o()),n&2){let e=g().$implicit;c(),x("- ",se(2,1,e.status),"")}}function MN(n,t){if(n&1&&(a(0,"option",79),l(1),v(2,DN,3,3,"span",80),o()),n&2){let e=t.$implicit;m("value",e.id)("disabled",e.status!=="available"),c(),Ke(" ",e.name," - ",e.experience,"yr exp (",e.rating,"\u2605) "),c(),m("ngIf",e.status!=="available")}}function SN(n,t){if(n&1&&(a(0,"optgroup",81),v(1,MN,3,6,"option",78),o()),n&2){let e=g(2);c(),m("ngForOf",e.drivers)}}function IN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("driverId")," ")}}function PN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("maxSeats")," ")}}function TN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(2);c(),x(" ",e.getValidationError("fare")," ")}}function RN(n,t){if(n&1){let e=O();a(0,"div",82),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleAmenity(r.value))}),a(1,"span",83),l(2),o(),a(3,"span",84),l(4),o()()}if(n&2){let e=t.$implicit,i=g(2);I("selected",i.isAmenitySelected(e.value)),c(2),_(e.icon),c(2),_(e.label)}}function ON(n,t){if(n&1){let e=O();a(0,"div",82),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.toggleSpecialRequirement(r.value))}),a(1,"span",83),l(2),o(),a(3,"span",84),l(4),o()()}if(n&2){let e=t.$implicit,i=g(2);I("selected",i.isSpecialRequirementSelected(e.value)),c(2),_(e.icon),c(2),_(e.label)}}function wN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(3);c(),x(" ",e.getValidationError("recurringFrequency")," ")}}function AN(n,t){if(n&1){let e=O();a(0,"div",97),h("click",function(){let r=C(e).$implicit,s=g(4);return y(s.toggleRecurringDay(r.value))}),a(1,"span",98),l(2),o()()}if(n&2){let e=t.$implicit,i=g(4);I("selected",i.isRecurringDaySelected(e.value)),c(2),_(e.label)}}function NN(n,t){if(n&1&&(a(0,"div",63),l(1),o()),n&2){let e=g(4);c(),x(" ",e.getValidationError("recurringDays")," ")}}function kN(n,t){if(n&1&&(a(0,"div",15)(1,"label"),l(2,"Recurring Days"),o(),a(3,"div",95),v(4,AN,3,3,"div",96),o(),v(5,NN,2,1,"div",21),o()),n&2){let e=g(3);c(4),m("ngForOf",e.daysOfWeek),c(),m("ngIf",e.hasValidationError("recurringDays"))}}function VN(n,t){if(n&1){let e=O();a(0,"div",85)(1,"div",14)(2,"div",15)(3,"label",86),l(4,"Frequency"),o(),a(5,"select",87),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.formData.recurringPattern.frequency,r)||(s.formData.recurringPattern.frequency=r),y(r)}),a(6,"option",88),l(7,"Daily"),o(),a(8,"option",89),l(9,"Weekly"),o(),a(10,"option",90),l(11,"Monthly"),o()(),v(12,wN,2,1,"div",21),o(),v(13,kN,6,2,"div",22),a(14,"div",15)(15,"label",91),l(16,"End Date"),o(),a(17,"input",92),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.formData.recurringPattern.endDate,r)||(s.formData.recurringPattern.endDate=r),y(r)}),o()(),a(18,"div",15)(19,"label",93),l(20,"Number of Occurrences"),o(),a(21,"input",94),L("ngModelChange",function(r){C(e);let s=g(2);return $(s.formData.recurringPattern.occurrences,r)||(s.formData.recurringPattern.occurrences=r),y(r)}),o(),a(22,"small",37),l(23,"Leave blank to use end date instead"),o()()()()}if(n&2){let e=g(2);c(5),I("error",e.hasValidationError("recurringFrequency")),F("ngModel",e.formData.recurringPattern.frequency),c(7),m("ngIf",e.hasValidationError("recurringFrequency")),c(),m("ngIf",(e.formData.recurringPattern==null?null:e.formData.recurringPattern.frequency)==="weekly"),c(4),F("ngModel",e.formData.recurringPattern.endDate),c(4),F("ngModel",e.formData.recurringPattern.occurrences)}}function FN(n,t){n&1&&(a(0,"span",99),l(1,"\u23F3"),o())}function LN(n,t){if(n&1&&(a(0,"div",102)(1,"span",103),l(2,"Amenities:"),o(),a(3,"span",104),l(4),o()()),n&2){let e=g(3);c(4),x("",e.formData.amenities.length," selected")}}function $N(n,t){if(n&1&&(a(0,"div",100)(1,"h3"),l(2,"Trip Summary"),o(),a(3,"div",101)(4,"div",102)(5,"span",103),l(6,"Route:"),o(),a(7,"span",104),l(8),o()(),a(9,"div",102)(10,"span",103),l(11,"Departure:"),o(),a(12,"span",104),l(13),j(14,"date"),o()(),a(15,"div",102)(16,"span",103),l(17,"Estimated Arrival:"),o(),a(18,"span",104),l(19),j(20,"date"),o()(),a(21,"div",102)(22,"span",103),l(23,"Distance:"),o(),a(24,"span",104),l(25),o()(),a(26,"div",102)(27,"span",103),l(28,"Duration:"),o(),a(29,"span",104),l(30),o()(),a(31,"div",102)(32,"span",103),l(33,"Fare:"),o(),a(34,"span",104),l(35),o()(),a(36,"div",102)(37,"span",103),l(38,"Capacity:"),o(),a(39,"span",104),l(40),o()(),v(41,LN,5,1,"div",105),o()()),n&2){let e=g(2);c(8),_(e.selectedRoute.name),c(5),Y("",ie(14,10,e.formData.departureDate,"MMM dd, yyyy")," at ",e.formData.departureTime,""),c(6),Y("",ie(20,13,e.calculateArrivalDate(),"MMM dd, yyyy")," at ",e.calculateArrivalTime(),""),c(6),_(e.formatDistance(e.selectedRoute.distance)),c(5),_(e.formatDuration(e.selectedRoute.estimatedDuration)),c(5),_(e.formatCurrency(e.formData.fare)),c(5),x("",e.formData.maxSeats," passengers"),c(),m("ngIf",e.formData.amenities.length>0)}}function BN(n,t){if(n&1){let e=O();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1"),l(4),o(),a(5,"p"),l(6),o()(),a(7,"button",9),h("click",function(){C(e);let r=g();return y(r.cancel())}),l(8," \u2715 Cancel "),o()(),v(9,uN,10,1,"div",10),a(10,"form",11,0),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),a(12,"div",12)(13,"div",13)(14,"h2"),l(15,"Trip Information"),o(),a(16,"p"),l(17,"Select route and schedule details"),o()(),a(18,"div",14)(19,"div",15)(20,"label",16),l(21,"Route "),a(22,"span",17),l(23,"*"),o()(),a(24,"select",18),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.routeId,r)||(s.formData.routeId=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.onRouteChange())}),a(25,"option",19),l(26,"Select Route"),o(),v(27,pN,2,4,"option",20),o(),v(28,mN,2,1,"div",21),o(),v(29,gN,19,5,"div",22),a(30,"div",15)(31,"label",23),l(32,"Departure Date "),a(33,"span",17),l(34,"*"),o()(),a(35,"input",24),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.departureDate,r)||(s.formData.departureDate=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.onDateTimeChange())}),o(),v(36,fN,2,1,"div",21),o(),a(37,"div",15)(38,"label",25),l(39,"Departure Time "),a(40,"span",17),l(41,"*"),o()(),a(42,"input",26),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.departureTime,r)||(s.formData.departureTime=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.onDateTimeChange())}),o(),v(43,_N,2,1,"div",21),o(),v(44,hN,9,5,"div",22),o()(),a(45,"div",12)(46,"div",13)(47,"h2"),l(48,"Resource Assignment"),o(),a(49,"p"),l(50,"Assign bus and driver for this trip"),o()(),a(51,"div",14)(52,"div",15)(53,"label",27),l(54,"Bus Assignment "),a(55,"span",17),l(56,"*"),o()(),a(57,"select",28),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.busId,r)||(s.formData.busId=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.onBusChange())}),a(58,"option",19),l(59,"Select Bus"),o(),a(60,"optgroup",29),v(61,vN,2,4,"option",20),o(),v(62,yN,2,1,"optgroup",30),o(),v(63,bN,2,1,"div",21),o(),a(64,"div",15)(65,"label",31),l(66,"Driver Assignment "),a(67,"span",17),l(68,"*"),o()(),a(69,"select",32),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.driverId,r)||(s.formData.driverId=r),y(r)}),h("change",function(){C(e);let r=g();return y(r.onDriverChange())}),a(70,"option",19),l(71,"Select Driver"),o(),a(72,"optgroup",33),v(73,EN,2,4,"option",20),o(),v(74,SN,2,1,"optgroup",34),o(),v(75,IN,2,1,"div",21),o(),a(76,"div",15)(77,"label",35),l(78,"Maximum Seats"),o(),a(79,"input",36),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.maxSeats,r)||(s.formData.maxSeats=r),y(r)}),o(),a(80,"small",37),l(81,"Automatically set based on selected bus capacity"),o(),v(82,PN,2,1,"div",21),o(),a(83,"div",15)(84,"label",38),l(85,"Trip Fare (SAR) "),a(86,"span",17),l(87,"*"),o()(),a(88,"input",39),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.fare,r)||(s.formData.fare=r),y(r)}),o(),a(89,"small",37),l(90,"Calculated based on route, can be adjusted"),o(),v(91,TN,2,1,"div",21),o()()(),a(92,"div",12)(93,"div",13)(94,"h2"),l(95,"Trip Features & Requirements"),o(),a(96,"p"),l(97,"Select amenities and special requirements"),o()(),a(98,"div",40)(99,"div",41)(100,"h3"),l(101,"Available Amenities"),o(),a(102,"div",42),v(103,RN,5,4,"div",43),o()(),a(104,"div",41)(105,"h3"),l(106,"Special Requirements"),o(),a(107,"div",42),v(108,ON,5,4,"div",43),o()()()(),a(109,"div",12)(110,"div",13)(111,"h2"),l(112,"Schedule Options"),o(),a(113,"p"),l(114,"Configure recurring trips or one-time schedule"),o()(),a(115,"div",14)(116,"div",44)(117,"div",45)(118,"input",46),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.isRecurring,r)||(s.formData.isRecurring=r),y(r)}),o(),a(119,"label",47),l(120,"Create Recurring Trip"),o(),a(121,"small"),l(122,"Schedule this trip to repeat on specific days"),o()()(),v(123,VN,24,7,"div",48),o()(),a(124,"div",12)(125,"div",13)(126,"h2"),l(127,"Additional Information"),o(),a(128,"p"),l(129,"Optional notes and special instructions"),o()(),a(130,"div",14)(131,"div",44)(132,"label",49),l(133,"Trip Notes"),o(),a(134,"textarea",50),L("ngModelChange",function(r){C(e);let s=g();return $(s.formData.notes,r)||(s.formData.notes=r),y(r)}),o()()()(),a(135,"div",51)(136,"button",52),h("click",function(){C(e);let r=g();return y(r.cancel())}),l(137," Cancel "),o(),a(138,"button",53),v(139,FN,2,0,"span",54),l(140),o()()(),v(141,$N,42,16,"div",55),o()}if(n&2){let e=ai(11),i=g();c(4),x(" ",i.isEditMode?"Edit Trip":i.isDuplicateMode?"Duplicate Trip":"Schedule New Trip"," "),c(2),x(" ",i.isEditMode?"Update trip information and schedule":"Create a new trip schedule with route, bus, and driver assignment"," "),c(3),m("ngIf",i.conflicts.length>0),c(15),I("error",i.hasValidationError("routeId")),F("ngModel",i.formData.routeId),c(3),m("ngForOf",i.routes),c(),m("ngIf",i.hasValidationError("routeId")),c(),m("ngIf",i.selectedRoute),c(6),I("error",i.hasValidationError("departureDate")),F("ngModel",i.formData.departureDate),c(),m("ngIf",i.hasValidationError("departureDate")),c(6),I("error",i.hasValidationError("departureTime")),F("ngModel",i.formData.departureTime),c(),m("ngIf",i.hasValidationError("departureTime")),c(),m("ngIf",i.selectedRoute&&i.formData.departureDate&&i.formData.departureTime),c(13),I("error",i.hasValidationError("busId")),F("ngModel",i.formData.busId),c(4),m("ngForOf",i.availableBuses),c(),m("ngIf",i.buses.length>i.availableBuses.length),c(),m("ngIf",i.hasValidationError("busId")),c(6),I("error",i.hasValidationError("driverId")),F("ngModel",i.formData.driverId),c(4),m("ngForOf",i.availableDrivers),c(),m("ngIf",i.drivers.length>i.availableDrivers.length),c(),m("ngIf",i.hasValidationError("driverId")),c(4),I("error",i.hasValidationError("maxSeats")),F("ngModel",i.formData.maxSeats),c(3),m("ngIf",i.hasValidationError("maxSeats")),c(6),I("error",i.hasValidationError("fare")),F("ngModel",i.formData.fare),c(3),m("ngIf",i.hasValidationError("fare")),c(12),m("ngForOf",i.amenityOptions),c(5),m("ngForOf",i.specialRequirementOptions),c(10),F("ngModel",i.formData.isRecurring),c(5),m("ngIf",i.formData.isRecurring),c(11),F("ngModel",i.formData.notes),c(4),m("disabled",!e.valid||i.conflicts.length>0||i.isSaving),c(),m("ngIf",i.isSaving),c(),x(" ",i.isEditMode?"Update Trip":"Schedule Trip"," "),c(),m("ngIf",i.selectedRoute&&i.formData.busId&&i.formData.driverId)}}var ss=class n{constructor(t,e){this.activatedRoute=t;this.router=e}isEditMode=!1;isDuplicateMode=!1;tripId=null;isLoading=!1;isSaving=!1;formData={routeId:"",departureDate:"",departureTime:"",busId:"",driverId:"",fare:0,maxSeats:0,notes:"",isRecurring:!1,amenities:[],specialRequirements:[]};routes=[];buses=[];drivers=[];availableBuses=[];availableDrivers=[];conflicts=[];selectedRoute=null;validationErrors={};daysOfWeek=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];amenityOptions=[{value:"wifi",label:"WiFi",icon:"\u{1F4F6}"},{value:"ac",label:"Air Conditioning",icon:"\u2744\uFE0F"},{value:"refreshments",label:"Refreshments",icon:"\u{1F964}"},{value:"charging",label:"Phone Charging",icon:"\u{1F50C}"},{value:"entertainment",label:"Entertainment System",icon:"\u{1F4FA}"},{value:"blankets",label:"Blankets",icon:"\u{1F6CF}\uFE0F"},{value:"reading-lights",label:"Reading Lights",icon:"\u{1F4A1}"}];specialRequirementOptions=[{value:"wheelchair-accessible",label:"Wheelchair Accessible",icon:"\u267F"},{value:"extra-luggage",label:"Extra Luggage Space",icon:"\u{1F9F3}"},{value:"pet-friendly",label:"Pet Friendly",icon:"\u{1F415}"},{value:"child-seats",label:"Child Seats Available",icon:"\u{1F476}"},{value:"medical-assistance",label:"Medical Assistance",icon:"\u{1F3E5}"}];ngOnInit(){this.loadInitialData(),this.checkRouteParameters()}loadInitialData(){this.isLoading=!0,setTimeout(()=>{this.loadRoutes(),this.loadBuses(),this.loadDrivers(),this.setDefaultValues(),this.isLoading=!1},500)}checkRouteParameters(){this.activatedRoute.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.tripId=t.id,this.loadTripForEdit(t.id))}),this.activatedRoute.queryParams.subscribe(t=>{t.duplicate&&(this.isDuplicateMode=!0,this.loadTripForDuplicate(t.duplicate))})}loadRoutes(){this.routes=[{id:"R001",routeCode:"RYD-JED-001",name:"Riyadh to Jeddah Express",origin:"Riyadh",destination:"Jeddah",distance:950,estimatedDuration:480,baseFare:150,farePerKm:.35},{id:"R002",routeCode:"JED-RYD-002",name:"Jeddah to Riyadh Return",origin:"Jeddah",destination:"Riyadh",distance:950,estimatedDuration:480,baseFare:150,farePerKm:.35},{id:"R003",routeCode:"RYD-DMM-003",name:"Riyadh to Dammam Direct",origin:"Riyadh",destination:"Dammam",distance:400,estimatedDuration:390,baseFare:100,farePerKm:.3},{id:"R004",routeCode:"RYD-MKK-004",name:"Riyadh to Mecca Pilgrimage",origin:"Riyadh",destination:"Mecca",distance:870,estimatedDuration:480,baseFare:180,farePerKm:.4}]}loadBuses(){this.buses=[{id:"B001",number:"RB-001",model:"Mercedes Sprinter",capacity:50,status:"available",fuelType:"Diesel",amenities:["wifi","ac","charging"]},{id:"B002",number:"RB-002",model:"Volvo 9700",capacity:45,status:"available",fuelType:"Diesel",amenities:["wifi","ac","entertainment","refreshments"]},{id:"B003",number:"RB-003",model:"King Long XMQ6127",capacity:40,status:"available",fuelType:"Diesel",amenities:["ac","charging"]},{id:"B004",number:"RB-004",model:"Mercedes Tourismo",capacity:50,status:"in-use",fuelType:"Diesel",amenities:["wifi","ac","entertainment","refreshments","blankets"]},{id:"B005",number:"RB-005",model:"Scania Touring",capacity:45,status:"maintenance",fuelType:"Diesel",amenities:["wifi","ac","charging","reading-lights"]}]}loadDrivers(){this.drivers=[{id:"D001",name:"Ahmed Al-Rashid",licenseNumber:"LIC-001-2024",phone:"+966-50-123-4567",status:"available",experience:8,rating:4.8},{id:"D002",name:"Omar Al-Ghamdi",licenseNumber:"LIC-002-2024",phone:"+966-50-234-5678",status:"available",experience:12,rating:4.9},{id:"D003",name:"Khalid Al-Dosari",licenseNumber:"LIC-003-2024",phone:"+966-50-345-6789",status:"assigned",experience:6,rating:4.7},{id:"D004",name:"Hassan Al-Maliki",licenseNumber:"LIC-004-2024",phone:"+966-50-456-7890",status:"available",experience:10,rating:4.6}]}setDefaultValues(){let t=new Date,e=new Date(t.getTime()+24*60*60*1e3);this.formData.departureDate=e.toISOString().split("T")[0],this.formData.departureTime="08:00"}loadTripForEdit(t){console.log("Loading trip for edit:",t)}loadTripForDuplicate(t){console.log("Loading trip for duplicate:",t)}onRouteChange(){this.selectedRoute=this.routes.find(t=>t.id===this.formData.routeId)||null,this.selectedRoute&&(this.formData.fare=this.calculateFare(),this.checkAvailability()),this.clearValidationError("routeId")}calculateFare(){return this.selectedRoute?this.selectedRoute.baseFare+this.selectedRoute.farePerKm*this.selectedRoute.distance:0}onBusChange(){let t=this.buses.find(e=>e.id===this.formData.busId);t&&(this.formData.maxSeats=t.capacity,this.formData.amenities=[...t.amenities],this.checkConflicts()),this.clearValidationError("busId")}onDriverChange(){this.checkConflicts(),this.clearValidationError("driverId")}onDateTimeChange(){this.checkAvailability(),this.checkConflicts(),this.clearValidationError("departureDate"),this.clearValidationError("departureTime")}checkAvailability(){if(!this.formData.departureDate||!this.formData.departureTime){this.availableBuses=[],this.availableDrivers=[];return}this.availableBuses=this.buses.filter(t=>t.status==="available"&&this.isBusAvailable(t.id)),this.availableDrivers=this.drivers.filter(t=>t.status==="available"&&this.isDriverAvailable(t.id))}isBusAvailable(t){return!0}isDriverAvailable(t){return!0}checkConflicts(){if(this.conflicts=[],this.formData.busId&&this.formData.departureDate&&this.formData.departureTime){let t=this.checkBusConflicts(),e=this.checkDriverConflicts();this.conflicts=[...t,...e]}}checkBusConflicts(){return[]}checkDriverConflicts(){return[]}toggleAmenity(t){let e=this.formData.amenities.indexOf(t);e>-1?this.formData.amenities.splice(e,1):this.formData.amenities.push(t)}isAmenitySelected(t){return this.formData.amenities.includes(t)}toggleSpecialRequirement(t){let e=this.formData.specialRequirements.indexOf(t);e>-1?this.formData.specialRequirements.splice(e,1):this.formData.specialRequirements.push(t)}isSpecialRequirementSelected(t){return this.formData.specialRequirements.includes(t)}toggleRecurringDay(t){this.formData.recurringPattern||(this.formData.recurringPattern={frequency:"weekly",days:[]}),this.formData.recurringPattern.days||(this.formData.recurringPattern.days=[]);let e=this.formData.recurringPattern.days.indexOf(t);e>-1?this.formData.recurringPattern.days.splice(e,1):this.formData.recurringPattern.days.push(t)}isRecurringDaySelected(t){return this.formData.recurringPattern?.days?.includes(t)||!1}validateForm(){this.validationErrors={};let t=!0;return this.formData.routeId||(this.validationErrors.routeId="Please select a route",t=!1),this.formData.departureDate||(this.validationErrors.departureDate="Please select departure date",t=!1),this.formData.departureTime||(this.validationErrors.departureTime="Please select departure time",t=!1),this.formData.busId||(this.validationErrors.busId="Please select a bus",t=!1),this.formData.driverId||(this.validationErrors.driverId="Please select a driver",t=!1),this.formData.fare<=0&&(this.validationErrors.fare="Fare must be greater than 0",t=!1),this.formData.maxSeats<=0&&(this.validationErrors.maxSeats="Max seats must be greater than 0",t=!1),this.conflicts.length>0&&(this.validationErrors.conflicts="Please resolve all conflicts before scheduling",t=!1),this.formData.isRecurring&&(this.formData.recurringPattern?.frequency||(this.validationErrors.recurringFrequency="Please select recurring frequency",t=!1),this.formData.recurringPattern?.frequency==="weekly"&&(!this.formData.recurringPattern.days||this.formData.recurringPattern.days.length===0)&&(this.validationErrors.recurringDays="Please select at least one day for weekly recurrence",t=!1)),t}clearValidationError(t){delete this.validationErrors[t]}hasValidationError(t){return!!this.validationErrors[t]}getValidationError(t){return this.validationErrors[t]||""}onSubmit(){if(!this.validateForm()){alert("Please fix all validation errors before submitting");return}this.isSaving=!0,setTimeout(()=>{console.log("Trip form data:",this.formData),this.isEditMode?alert("Trip updated successfully!"):alert("Trip scheduled successfully!"),this.isSaving=!1,this.router.navigate(["/trips"])},1e3)}cancel(){this.router.navigate(["/trips"])}formatDuration(t){let e=Math.floor(t/60),i=t%60;return`${e}h ${i}m`}formatCurrency(t){return`SAR ${t.toLocaleString()}`}formatDistance(t){return`${t.toLocaleString()} km`}getAmenityIcon(t){let e=this.amenityOptions.find(i=>i.value===t);return e?e.icon:""}getSpecialRequirementIcon(t){let e=this.specialRequirementOptions.find(i=>i.value===t);return e?e.icon:""}calculateArrivalTime(){if(!this.selectedRoute||!this.formData.departureTime)return"";let[t,e]=this.formData.departureTime.split(":").map(Number),r=t*60+e+this.selectedRoute.estimatedDuration,s=Math.floor(r/60)%24,d=r%60;return`${s.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}calculateArrivalDate(){if(!this.selectedRoute||!this.formData.departureDate||!this.formData.departureTime)return"";let t=new Date(`${this.formData.departureDate}T${this.formData.departureTime}`);return new Date(t.getTime()+this.selectedRoute.estimatedDuration*60*1e3).toISOString().split("T")[0]}static \u0275fac=function(e){return new(e||n)(w(Te),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-trip-form"]],decls:3,vars:2,consts:[["tripForm","ngForm"],[1,"trip-form-container"],["class","loading-container",4,"ngIf"],["class","form-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"form-content"],[1,"page-header"],[1,"header-content"],[1,"btn","btn-secondary",3,"click"],["class","conflicts-alert",4,"ngIf"],[3,"ngSubmit"],[1,"form-section"],[1,"section-header"],[1,"form-grid"],[1,"form-group"],["for","routeId"],[1,"required"],["id","routeId","name","routeId","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["class","form-group",4,"ngIf"],["for","departureDate"],["type","date","id","departureDate","name","departureDate","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["for","departureTime"],["type","time","id","departureTime","name","departureTime","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["for","busId"],["id","busId","name","busId","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["label","Available Buses"],["label","All Buses",4,"ngIf"],["for","driverId"],["id","driverId","name","driverId","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["label","Available Drivers"],["label","All Drivers",4,"ngIf"],["for","maxSeats"],["type","number","id","maxSeats","name","maxSeats","min","1","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-text"],["for","fare"],["type","number","id","fare","name","fare","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"features-grid"],[1,"feature-group"],[1,"options-grid"],["class","option-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"form-group","full-width"],[1,"checkbox-group"],["type","checkbox","id","isRecurring","name","isRecurring",3,"ngModelChange","ngModel"],["for","isRecurring"],["class","recurring-options full-width",4,"ngIf"],["for","notes"],["id","notes","name","notes","rows","4","placeholder","Add any special instructions, passenger information, or notes for the driver...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","loading-icon",4,"ngIf"],["class","trip-summary",4,"ngIf"],[1,"conflicts-alert"],[1,"alert-icon"],[1,"alert-content"],[1,"conflicts-list"],["class","conflict-item",4,"ngFor","ngForOf"],[1,"conflict-item"],[3,"value"],[1,"error-message"],[1,"route-details-card"],[1,"route-info"],[1,"route-path"],[1,"origin"],[1,"arrow"],[1,"destination"],[1,"route-stats"],[1,"distance"],[1,"duration"],[1,"base-fare"],[1,"arrival-info"],[1,"arrival-date"],[1,"arrival-time"],["label","All Buses"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[4,"ngIf"],["label","All Drivers"],[1,"option-item",3,"click"],[1,"option-icon"],[1,"option-label"],[1,"recurring-options","full-width"],["for","recurringFrequency"],["id","recurringFrequency","name","recurringFrequency",1,"form-control",3,"ngModelChange","ngModel"],["value","daily"],["value","weekly"],["value","monthly"],["for","recurringEndDate"],["type","date","id","recurringEndDate","name","recurringEndDate",1,"form-control",3,"ngModelChange","ngModel"],["for","recurringOccurrences"],["type","number","id","recurringOccurrences","name","recurringOccurrences","min","1","max","365",1,"form-control",3,"ngModelChange","ngModel"],[1,"days-grid"],["class","day-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"day-item",3,"click"],[1,"day-label"],[1,"loading-icon"],[1,"trip-summary"],[1,"summary-grid"],[1,"summary-item"],[1,"label"],[1,"value"],["class","summary-item",4,"ngIf"]],template:function(e,i){e&1&&(a(0,"div",1),v(1,cN,4,0,"div",2)(2,BN,142,47,"div",3),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading))},dependencies:[K,ae,ee,Ge,He,et,ct,Re,Oe,Se,vt,Yn,Pe,Ie,lt,Ar,xt,wt,it,wr],styles:[`.trip-form-container[_ngcontent-%COMP%]{padding:30px;max-width:1200px;margin:0 auto;background:#f8fafc;min-height:100vh}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2d3748;margin-bottom:8px}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin:0}.conflicts-alert[_ngcontent-%COMP%]{display:flex;gap:15px;padding:20px;background:#fef5e7;border:2px solid #f6ad55;border-radius:12px;margin-bottom:25px}.alert-icon[_ngcontent-%COMP%]{font-size:24px;color:#c05621}.alert-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#c05621;font-size:18px;margin-bottom:10px}.conflicts-list[_ngcontent-%COMP%]{margin:10px 0;padding-left:20px}.conflict-item[_ngcontent-%COMP%]{color:#744210;margin-bottom:5px}.alert-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#744210;margin:10px 0 0;font-weight:500}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.section-header[_ngcontent-%COMP%]{padding:25px 30px 20px;border-bottom:1px solid #e2e8f0;background:#f8fafc}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#2d3748;margin-bottom:5px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:0;font-size:14px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;padding:30px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;margin-bottom:8px;font-size:14px}.required[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff;color:#2d3748}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-1px)}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.form-control.error[_ngcontent-%COMP%]{border-color:#e53e3e;box-shadow:0 0 0 3px #e53e3e1a}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:12px;font-weight:500;margin-top:4px}.route-details-card[_ngcontent-%COMP%]{background:#f0f4ff;border:2px solid #c6d2fd;border-radius:8px;padding:15px}.route-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.route-path[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:600;color:#2d3748}.route-path[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{color:#667eea;font-size:18px}.route-stats[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:12px;color:#4a5568}.route-stats[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:4px 8px;background:#fff;border-radius:6px;font-weight:500}.arrival-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:12px 16px;background:#f0fff4;border:2px solid #c6f6d5;border-radius:8px}.arrival-date[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.arrival-time[_ngcontent-%COMP%]{color:#22543d;font-size:16px;font-weight:500}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:30px;padding:30px}.feature-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin-bottom:15px}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}.option-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:15px 10px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff;text-align:center}.option-item[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.option-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;color:#667eea}.option-icon[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}.option-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;line-height:1.3}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px;accent-color:#667eea}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;margin:0;display:flex;align-items:center;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px;margin-left:24px}.recurring-options[_ngcontent-%COMP%]{background:#f0f4ff;border:2px solid #c6d2fd;border-radius:8px;padding:20px;margin-top:15px}.days-grid[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}.day-item[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;cursor:pointer;transition:all .2s ease;background:#fff;font-size:12px;font-weight:500}.day-item[_ngcontent-%COMP%]:hover{border-color:#667eea}.day-item.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea;color:#fff}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.loading-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-top:30px}.trip-summary[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px 30px;box-shadow:0 4px 6px #0000000d;margin-top:30px}.trip-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #e2e8f0}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;font-size:14px}.summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px;text-align:right}[dir=rtl][_ngcontent-%COMP%]   .trip-form-container[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:0;margin-right:24px}[dir=rtl][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .route-path[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{transform:scaleX(-1)}[dir=rtl][_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}@media (max-width: 1024px){.form-grid[_ngcontent-%COMP%], .features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.options-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}@media (max-width: 768px){.trip-form-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.conflicts-alert[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.section-header[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{padding:20px;gap:15px}.features-grid[_ngcontent-%COMP%]{padding:20px;gap:20px}.options-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.option-item[_ngcontent-%COMP%]{padding:12px 8px}.option-icon[_ngcontent-%COMP%]{font-size:20px;margin-bottom:6px}.option-label[_ngcontent-%COMP%]{font-size:11px}.days-grid[_ngcontent-%COMP%]{gap:6px}.day-item[_ngcontent-%COMP%]{padding:6px 10px;font-size:11px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;padding:20px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.route-stats[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}@media (max-width: 480px){.trip-form-container[_ngcontent-%COMP%]{padding:15px 10px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px}.form-section[_ngcontent-%COMP%]{margin-bottom:20px}.form-grid[_ngcontent-%COMP%]{padding:15px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:13px}.features-grid[_ngcontent-%COMP%]{padding:15px}.options-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.option-item[_ngcontent-%COMP%]{padding:10px}.conflicts-alert[_ngcontent-%COMP%]{padding:15px}.alert-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.trip-summary[_ngcontent-%COMP%]{padding:20px}.trip-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e53e3e;box-shadow:0 0 0 3px #e53e3e1a}.form-control.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#48bb78}.form-group.has-error[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#e53e3e}.form-group.has-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e53e3e}.form-group.has-success[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#48bb78}.form-group.has-success[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#48bb78}.btn.loading[_ngcontent-%COMP%]{position:relative;color:transparent}.btn.loading[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:50%;width:16px;height:16px;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;color:#fff}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}.option-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.day-item[_ngcontent-%COMP%]:focus{outline:2px solid #667eea;outline-offset:2px}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000014}.route-details-card[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-1px)}.arrival-info[_ngcontent-%COMP%]:hover{border-color:#48bb78;transform:translateY(-1px)}@media print{.trip-form-container[_ngcontent-%COMP%]{background:#fff;padding:20px}.page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%], .conflicts-alert[_ngcontent-%COMP%]{display:none!important}.form-section[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none!important;border:1px solid #e2e8f0!important;margin-bottom:15px}.section-header[_ngcontent-%COMP%]{background:#f8fafc!important}.trip-summary[_ngcontent-%COMP%]{break-inside:avoid}}@media (prefers-reduced-motion: reduce){.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .option-item[_ngcontent-%COMP%], .day-item[_ngcontent-%COMP%]{transition:none}.loading-spinner[_ngcontent-%COMP%], .loading-icon[_ngcontent-%COMP%], .btn.loading[_ngcontent-%COMP%]:before{animation:none}}.form-section[_ngcontent-%COMP%]:nth-child(2){border-left:3px solid #667eea}.form-section[_ngcontent-%COMP%]:nth-child(3){border-left:3px solid #48bb78}.form-section[_ngcontent-%COMP%]:nth-child(4){border-left:3px solid #ed8936}.form-section[_ngcontent-%COMP%]:nth-child(5){border-left:3px solid #9f7aea}.form-section[_ngcontent-%COMP%]:nth-child(6){border-left:3px solid #38b2ac}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 12px #667eea33}.btn-secondary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #0000001a}.form-control[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, .form-control[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>') no-repeat center center;background-size:16px 16px;cursor:pointer}.form-progress[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;padding:10px 0;border-bottom:1px solid #e2e8f0;margin-bottom:20px;z-index:10}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:#667eea;transition:width .3s ease}.form-section.completed[_ngcontent-%COMP%]{border-left-color:#48bb78}.form-section.has-errors[_ngcontent-%COMP%]{border-left-color:#e53e3e}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f  ";margin-right:4px}.help-text[_ngcontent-%COMP%]:before{content:"\\2139\\fe0f  ";margin-right:4px}`]})};function zN(n,t){n&1&&(a(0,"div",4),P(1,"div",5),a(2,"p"),l(3,"Loading trip details..."),o()())}function jN(n,t){if(n&1){let e=O();a(0,"button",24),h("click",function(){C(e);let r=g(2);return y(r.startTrip())}),l(1," \u25B6\uFE0F Start Trip "),o()}if(n&2){let e=g(2);m("disabled",e.trip.status!=="scheduled")}}function UN(n,t){if(n&1){let e=O();a(0,"button",24),h("click",function(){C(e);let r=g(2);return y(r.completeTrip())}),l(1," \u2705 Complete Trip "),o()}if(n&2){let e=g(2);m("disabled",e.trip.status!=="in-progress")}}function GN(n,t){if(n&1&&(a(0,"div",28)(1,"div",29),l(2,"\u{1F68C}"),o(),a(3,"div",30)(4,"h3"),l(5,"Progress"),o(),a(6,"p",31),l(7),o(),a(8,"small"),l(9),o()()()),n&2){let e=g(2);c(7),x("",e.trip.trackingInfo==null?null:e.trip.trackingInfo.progress,"%"),c(2),_(e.trip.trackingInfo==null?null:e.trip.trackingInfo.currentLocation)}}function HN(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g(3);c(),x(" (Actual: ",e.formatDuration(e.trip.actualDuration),") ")}}function XN(n,t){n&1&&(a(0,"span"),l(1,"\u2705"),o())}function WN(n,t){n&1&&(a(0,"span"),l(1,"\u{1F68C}"),o())}function qN(n,t){n&1&&(a(0,"span"),l(1,"\u23F3"),o())}function YN(n,t){if(n&1&&(a(0,"div",87)(1,"span",49),l(2,"Actual:"),o(),a(3,"span",85),l(4),o()()),n&2){let e=g().$implicit;c(4),_(e.actualTime)}}function ZN(n,t){if(n&1&&(a(0,"div",77)(1,"div",78)(2,"div",79),v(3,XN,2,0,"span",51)(4,WN,2,0,"span",51)(5,qN,2,0,"span",51),o()(),a(6,"div",80)(7,"div",81)(8,"h4"),l(9),o(),a(10,"span",82),l(11),j(12,"titlecase"),o()(),a(13,"div",83)(14,"div",84)(15,"span",49),l(16,"Scheduled:"),o(),a(17,"span",85),l(18),o()(),v(19,YN,5,1,"div",86),o()()()),n&2){let e=t.$implicit,i=t.last,r=g(3);I("is-last",i),c(),q(r.getStopStatusClass(e.status)),c(2),m("ngIf",e.status==="departed"),c(),m("ngIf",e.status==="arrived"),c(),m("ngIf",e.status==="pending"),c(4),_(e.name),c(),q(r.getStopStatusClass(e.status)),c(),x(" ",se(12,13,e.status)," "),c(7),_(e.scheduledTime),c(),m("ngIf",e.actualTime)}}function JN(n,t){if(n&1&&(a(0,"div",90)(1,"div",91)(2,"span",92),l(3),o(),a(4,"span",93),l(5),j(6,"date"),o()(),a(7,"div",94),l(8),o(),a(9,"div",95),l(10),o()()),n&2){let e=t.$implicit;c(3),x("",e.duration," minutes"),c(2),_(ie(6,4,e.reportedAt,"MMM dd, HH:mm")),c(3),_(e.reason),c(2),x("Reported by: ",e.reportedBy,"")}}function KN(n,t){if(n&1&&(a(0,"div",44)(1,"div",45)(2,"h2"),l(3,"Reported Delays"),o()(),a(4,"div",46)(5,"div",88),v(6,JN,11,7,"div",89),o()()()),n&2){let e=g(3);c(6),m("ngForOf",e.trip.delays)}}function QN(n,t){if(n&1&&(a(0,"span",99),l(1),o()),n&2){let e=t.$implicit,i=g(4);c(),Y(" ",i.getAmenityIcon(e)," ",i.getAmenityLabel(e)," ")}}function e4(n,t){if(n&1&&(a(0,"div",96)(1,"h4"),l(2,"Amenities"),o(),a(3,"div",97),v(4,QN,2,2,"span",98),o()()),n&2){let e=g(3);c(4),m("ngForOf",e.trip.amenities)}}function t4(n,t){if(n&1&&(a(0,"span",102),l(1),o()),n&2){let e=t.$implicit,i=g(4);c(),Y(" ",i.getSpecialRequirementIcon(e)," ",i.getSpecialRequirementLabel(e)," ")}}function n4(n,t){if(n&1&&(a(0,"div",100)(1,"h4"),l(2,"Special Requirements"),o(),a(3,"div",97),v(4,t4,2,2,"span",101),o()()),n&2){let e=g(3);c(4),m("ngForOf",e.trip.specialRequirements)}}function i4(n,t){if(n&1&&(a(0,"div",44)(1,"div",45)(2,"h2"),l(3,"Trip Notes"),o()(),a(4,"div",46)(5,"div",103),l(6),o()()()),n&2){let e=g(3);c(6),x(" ",e.trip.notes," ")}}function r4(n,t){if(n&1){let e=O();a(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45)(5,"h2"),l(6,"Schedule Information"),o()(),a(7,"div",46)(8,"div",47)(9,"div",48)(10,"span",49),l(11,"Departure:"),o(),a(12,"span",50),l(13),j(14,"date"),o()(),a(15,"div",48)(16,"span",49),l(17,"Arrival:"),o(),a(18,"span",50),l(19),j(20,"date"),o()(),a(21,"div",48)(22,"span",49),l(23,"Duration:"),o(),a(24,"span",50),l(25),v(26,HN,2,1,"span",51),o()(),a(27,"div",48)(28,"span",49),l(29,"Fare:"),o(),a(30,"span",50),l(31),o()()()()(),a(32,"div",44)(33,"div",45)(34,"h2"),l(35,"Route Stops"),o()(),a(36,"div",46)(37,"div",52),v(38,ZN,20,15,"div",53),o()()(),v(39,KN,7,1,"div",54),o(),a(40,"div",55)(41,"div",44)(42,"div",45)(43,"h2"),l(44,"Vehicle & Driver"),o()(),a(45,"div",46)(46,"div",56)(47,"div",57)(48,"div",58),l(49,"\u{1F68C}"),o(),a(50,"div",59)(51,"div",60),l(52),o(),a(53,"div",61),l(54),o(),a(55,"div",62),l(56),o()()(),a(57,"div",63)(58,"div",64),l(59,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(60,"div",65)(61,"div",66),l(62),o(),a(63,"div",67),l(64),o(),a(65,"button",68),h("click",function(){C(e);let r=g(2);return y(r.callDriver())}),l(66,"\u{1F4DE} Call Driver"),o()()()()()(),a(67,"div",44)(68,"div",45)(69,"h2"),l(70,"Trip Features"),o()(),a(71,"div",46)(72,"div",69),v(73,e4,5,1,"div",70)(74,n4,5,1,"div",71),o()()(),a(75,"div",44)(76,"div",45)(77,"h2"),l(78,"Financial Summary"),o()(),a(79,"div",46)(80,"div",72)(81,"div",73)(82,"span",49),l(83,"Total Revenue:"),o(),a(84,"span",74),l(85),o()(),a(86,"div",73)(87,"span",49),l(88,"Total Expenses:"),o(),a(89,"span",75),l(90),o()(),a(91,"div",73)(92,"span",49),l(93,"Net Profit:"),o(),a(94,"span",76),l(95),o()(),a(96,"div",73)(97,"span",49),l(98,"Average Fare:"),o(),a(99,"span",50),l(100),o()()()()(),v(101,i4,7,1,"div",54),o()()()}if(n&2){let e=g(2);c(13),Y(" ",ie(14,23,e.trip.departureDate,"EEEE, MMM dd, yyyy")," at ",e.trip.departureTime," "),c(6),Y(" ",ie(20,26,e.trip.arrivalDate,"EEEE, MMM dd, yyyy")," at ",e.trip.arrivalTime," "),c(6),x(" ",e.formatDuration(e.trip.estimatedDuration)," "),c(),m("ngIf",e.trip.actualDuration),c(5),_(e.formatCurrency(e.trip.fare)),c(7),m("ngForOf",e.trip.stops),c(),m("ngIf",e.trip.delays&&e.trip.delays.length>0),c(13),_(e.trip.busNumber),c(2),_(e.trip.busModel),c(2),x("",e.trip.totalSeats," seats"),c(6),_(e.trip.driverName),c(2),_(e.trip.driverPhone),c(9),m("ngIf",e.trip.amenities.length>0),c(),m("ngIf",e.trip.specialRequirements.length>0),c(11),_(e.formatCurrency(e.trip.revenue)),c(5),_(e.formatCurrency(e.trip.expenses)),c(4),I("negative",e.trip.profit<0),c(),x(" ",e.formatCurrency(e.trip.profit)," "),c(5),_(e.formatCurrency(e.trip.fare)),c(),m("ngIf",e.trip.notes)}}function o4(n,t){if(n&1){let e=O();a(0,"tr")(1,"td",113),l(2),o(),a(3,"td",114),l(4),o(),a(5,"td",115),l(6),o(),a(7,"td",116),l(8),o(),a(9,"td",117),l(10),o(),a(11,"td",118),l(12),o(),a(13,"td",119),l(14),o(),a(15,"td",120)(16,"span",13),l(17),j(18,"titlecase"),o()(),a(19,"td",121)(20,"button",122),h("click",function(){let r=C(e).$implicit,s=g(4);return y(s.callPassenger(r))}),l(21,"\u{1F4DE}"),o(),a(22,"button",123),h("click",function(){let r=C(e).$implicit,s=g(4);return y(s.viewPassengerDetails(r))}),l(23,"\u{1F441}\uFE0F"),o()()()}if(n&2){let e=t.$implicit,i=g(4);c(2),_(e.seatNumber),c(2),_(e.name),c(2),_(e.phone),c(2),_(e.ticketNumber),c(2),_(e.boardingStop),c(2),_(e.destinationStop),c(2),_(i.formatCurrency(e.fare)),c(2),q(i.getPassengerStatusClass(e.status)),c(),x(" ",se(18,10,e.status)," ")}}function a4(n,t){if(n&1&&(a(0,"div",110)(1,"table",111)(2,"thead")(3,"tr")(4,"th"),l(5,"Seat"),o(),a(6,"th"),l(7,"Passenger Name"),o(),a(8,"th"),l(9,"Phone"),o(),a(10,"th"),l(11,"Ticket #"),o(),a(12,"th"),l(13,"From"),o(),a(14,"th"),l(15,"To"),o(),a(16,"th"),l(17,"Fare"),o(),a(18,"th"),l(19,"Status"),o(),a(20,"th"),l(21,"Actions"),o()()(),a(22,"tbody"),v(23,o4,24,12,"tr",112),o()()()),n&2){let e=g(3);c(23),m("ngForOf",e.trip.passengers)}}function s4(n,t){n&1&&(a(0,"div",124)(1,"div",125),l(2,"\u{1F465}"),o(),a(3,"h3"),l(4,"No Passengers Booked"),o(),a(5,"p"),l(6,"This trip doesn't have any passengers booked yet."),o()())}function l4(n,t){if(n&1&&(a(0,"div",104)(1,"div",105)(2,"h2"),l(3,"Passenger Manifest"),o(),a(4,"div",106)(5,"span",107),l(6),o(),a(7,"span",107),l(8),o(),a(9,"span",107),l(10),o()()(),v(11,a4,24,1,"div",108)(12,s4,7,0,"div",109),o()),n&2){let e=g(2);c(6),x("Total: ",(e.trip.passengers==null?null:e.trip.passengers.length)||0,""),c(2),x("Boarded: ",e.getPassengersByStatus("boarded").length,""),c(2),x("Confirmed: ",e.getPassengersByStatus("confirmed").length,""),c(),m("ngIf",e.trip.passengers&&e.trip.passengers.length>0),c(),m("ngIf",!e.trip.passengers||e.trip.passengers.length===0)}}function c4(n,t){if(n&1&&(a(0,"small"),l(1),j(2,"date"),o()),n&2){let e=g(4);c(),x(" ETA: ",ie(2,1,e.trip.trackingInfo.estimatedArrival,"HH:mm")," ")}}function d4(n,t){if(n&1&&(a(0,"div",135)(1,"div",136)(2,"div",137),l(3,"\u{1F4CD}"),o(),a(4,"div",138)(5,"h3"),l(6,"Current Location"),o(),a(7,"p",139),l(8),o(),a(9,"small"),l(10),j(11,"date"),o()()(),a(12,"div",136)(13,"div",137),l(14,"\u{1F6A9}"),o(),a(15,"div",138)(16,"h3"),l(17,"Next Stop"),o(),a(18,"p",140),l(19),o(),v(20,c4,3,4,"small",51),o()(),a(21,"div",136)(22,"div",137),l(23,"\u{1F4CA}"),o(),a(24,"div",138)(25,"h3"),l(26,"Progress"),o(),a(27,"div",141),P(28,"div",142),o(),a(29,"p",143),l(30),o()()()()),n&2){let e=g(3);c(8),_(e.trip.trackingInfo.currentLocation||"Location not available"),c(2),x("Last updated: ",ie(11,7,e.trip.trackingInfo.lastUpdate,"MMM dd, HH:mm"),""),c(9),_(e.trip.trackingInfo.nextStop||"No upcoming stops"),c(),m("ngIf",e.trip.trackingInfo.estimatedArrival),c(8),Be("width",e.trip.trackingInfo.progress,"%"),c(2),x("",e.trip.trackingInfo.progress,"% completed")}}function u4(n,t){if(n&1){let e=O();a(0,"div",126)(1,"div",127)(2,"h2"),l(3,"Live Tracking"),o(),a(4,"div",128),P(5,"span",129),a(6,"span",130),l(7),o()()(),v(8,d4,31,10,"div",131),a(9,"div",132)(10,"div",133),l(11,"\u{1F5FA}\uFE0F"),o(),a(12,"h3"),l(13,"Map View"),o(),a(14,"p"),l(15,"Integration with mapping service will be available here"),o(),a(16,"button",134),h("click",function(){C(e);let r=g(2);return y(r.updateLocation())}),l(17,"Update Location"),o()()()}if(n&2){let e=g(2);c(5),I("active",e.trip.status==="in-progress"),c(2),_(e.trip.status==="in-progress"?"Live Tracking Active":"Tracking Inactive"),c(),m("ngIf",e.trip.trackingInfo)}}function p4(n,t){if(n&1&&(a(0,"p",157),l(1),o()),n&2){let e=g().$implicit;c(),_(e.details)}}function m4(n,t){if(n&1&&(a(0,"div",150)(1,"div",151),P(2,"div",152),o(),a(3,"div",144)(4,"div",153)(5,"h4"),l(6),o(),a(7,"span",154),l(8),j(9,"date"),o()(),a(10,"p",155),l(11),o(),v(12,p4,2,1,"p",156),o()()),n&2){let e=t.$implicit;c(6),_(e.action),c(2),_(ie(9,4,e.timestamp,"MMM dd, HH:mm")),c(3),x("By: ",e.performedBy,""),c(),m("ngIf",e.details)}}function g4(n,t){n&1&&(a(0,"div",158)(1,"div",125),l(2,"\u{1F4DC}"),o(),a(3,"h3"),l(4,"No History Available"),o(),a(5,"p"),l(6,"Trip history will appear here as actions are performed."),o()())}function f4(n,t){if(n&1&&(a(0,"div",144)(1,"div",145)(2,"h2"),l(3,"Trip History"),o(),a(4,"span",146),l(5),o()(),a(6,"div",147),v(7,m4,13,7,"div",148),o(),v(8,g4,7,0,"div",149),o()),n&2){let e=g(2);c(5),x("",e.tripActions.length," events"),c(2),m("ngForOf",e.tripActions),c(),m("ngIf",e.tripActions.length===0)}}function _4(n,t){if(n&1){let e=O();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"button",9),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(4," \u2190 Back to Trips "),o(),a(5,"div",10)(6,"h1"),l(7),o(),a(8,"div",11)(9,"span",12),l(10),o(),a(11,"span",13)(12,"span",14),l(13),o(),l(14),j(15,"titlecase"),o(),a(16,"span",15),l(17),o()()()(),a(18,"div",16)(19,"button",17),h("click",function(){C(e);let r=g();return y(r.callDriver())}),l(20," \u{1F4DE} Call Driver "),o(),a(21,"button",18),h("click",function(){C(e);let r=g();return y(r.duplicateTrip())}),l(22," \u{1F4CB} Duplicate "),o(),a(23,"button",19),h("click",function(){C(e);let r=g();return y(r.editTrip())}),l(24," \u270F\uFE0F Edit Trip "),o(),a(25,"div",20)(26,"button",21),l(27," \u2699\uFE0F More Actions "),o(),a(28,"div",22),v(29,jN,2,1,"button",23)(30,UN,2,1,"button",23),a(31,"button",24),h("click",function(){C(e);let r=g();return y(r.reportDelay())}),l(32," \u23F0 Report Delay "),o(),a(33,"button",24),h("click",function(){C(e);let r=g();return y(r.updateLocation())}),l(34," \u{1F4CD} Update Location "),o(),a(35,"button",25),h("click",function(){C(e);let r=g();return y(r.exportTripData())}),l(36," \u{1F4E4} Export Data "),o(),a(37,"button",26),h("click",function(){C(e);let r=g();return y(r.cancelTrip())}),l(38," \u274C Cancel Trip "),o()()()()(),a(39,"div",27)(40,"div",28)(41,"div",29),l(42,"\u{1F465}"),o(),a(43,"div",30)(44,"h3"),l(45,"Occupancy"),o(),a(46,"p",31),l(47),o(),a(48,"small"),l(49),o()()(),a(50,"div",28)(51,"div",29),l(52,"\u{1F4B0}"),o(),a(53,"div",30)(54,"h3"),l(55,"Revenue"),o(),a(56,"p",31),l(57),o(),a(58,"small"),l(59),o()()(),a(60,"div",28)(61,"div",29),l(62,"\u{1F4CF}"),o(),a(63,"div",30)(64,"h3"),l(65,"Distance"),o(),a(66,"p",31),l(67),o(),a(68,"small"),l(69),o()()(),v(70,GN,10,2,"div",32),o(),a(71,"div",33)(72,"button",34),h("click",function(){C(e);let r=g();return y(r.switchTab("overview"))}),l(73," \u{1F4CB} Overview "),o(),a(74,"button",34),h("click",function(){C(e);let r=g();return y(r.switchTab("passengers"))}),l(75),o(),a(76,"button",35),h("click",function(){C(e);let r=g();return y(r.switchTab("tracking"))}),l(77," \u{1F4CD} Live Tracking "),o(),a(78,"button",34),h("click",function(){C(e);let r=g();return y(r.switchTab("history"))}),l(79," \u{1F4DC} History "),o()(),a(80,"div",36),v(81,r4,102,29,"div",37)(82,l4,13,5,"div",38)(83,u4,18,4,"div",39)(84,f4,9,3,"div",40),o()()}if(n&2){let e=g();c(7),_(e.trip.tripCode),c(3),_(e.trip.routeName),c(),q(e.getStatusClass(e.trip.status)),c(2),_(e.getStatusIcon(e.trip.status)),c(),x(" ",se(15,36,e.trip.status)," "),c(3),Y("",e.trip.origin," \u2192 ",e.trip.destination,""),c(6),m("disabled",e.trip.status==="completed"||e.trip.status==="cancelled"),c(6),m("ngIf",e.trip.status==="scheduled"),c(),m("ngIf",e.trip.status==="in-progress"),c(),m("disabled",e.trip.status==="completed"||e.trip.status==="cancelled"),c(2),m("disabled",e.trip.status!=="in-progress"),c(4),m("disabled",e.trip.status==="completed"||e.trip.status==="cancelled"),c(10),x("",e.getOccupancyPercentage(),"%"),c(2),Y("",e.trip.bookedSeats,"/",e.trip.totalSeats," seats"),c(8),_(e.formatCurrency(e.trip.revenue)),c(2),x("",e.formatCurrency(e.trip.profit)," profit"),c(8),_(e.formatDistance(e.trip.distance)),c(2),x("",e.formatDuration(e.trip.estimatedDuration)," duration"),c(),m("ngIf",e.trip.trackingInfo==null?null:e.trip.trackingInfo.progress),c(2),I("active",e.activeTab==="overview"),c(2),I("active",e.activeTab==="passengers"),c(),x(" \u{1F465} Passengers (",(e.trip.passengers==null?null:e.trip.passengers.length)||0,") "),c(),I("active",e.activeTab==="tracking"),m("disabled",e.trip.status!=="in-progress"),c(2),I("active",e.activeTab==="history"),c(3),m("ngIf",e.activeTab==="overview"),c(),m("ngIf",e.activeTab==="passengers"),c(),m("ngIf",e.activeTab==="tracking"),c(),m("ngIf",e.activeTab==="history")}}function h4(n,t){if(n&1){let e=O();a(0,"div",159)(1,"div",160),l(2,"\u274C"),o(),a(3,"h2"),l(4,"Trip Not Found"),o(),a(5,"p"),l(6,"The requested trip could not be found or you don't have permission to view it."),o(),a(7,"button",134),h("click",function(){C(e);let r=g();return y(r.goBack())}),l(8,"\u2190 Back to Trips"),o()()}}var Id=class n{constructor(t,e){this.route=t;this.router=e}trip=null;tripId="";isLoading=!1;activeTab="overview";tripActions=[];amenityLabels={wifi:{label:"WiFi",icon:"\u{1F4F6}"},ac:{label:"Air Conditioning",icon:"\u2744\uFE0F"},refreshments:{label:"Refreshments",icon:"\u{1F964}"},charging:{label:"Phone Charging",icon:"\u{1F50C}"},entertainment:{label:"Entertainment System",icon:"\u{1F4FA}"},blankets:{label:"Blankets",icon:"\u{1F6CF}\uFE0F"},"reading-lights":{label:"Reading Lights",icon:"\u{1F4A1}"}};specialRequirementLabels={"wheelchair-accessible":{label:"Wheelchair Accessible",icon:"\u267F"},"extra-luggage":{label:"Extra Luggage Space",icon:"\u{1F9F3}"},"pet-friendly":{label:"Pet Friendly",icon:"\u{1F415}"},"child-seats":{label:"Child Seats Available",icon:"\u{1F476}"},"medical-assistance":{label:"Medical Assistance",icon:"\u{1F3E5}"}};ngOnInit(){this.route.params.subscribe(t=>{this.tripId=t.id,this.loadTripDetails()})}loadTripDetails(){this.isLoading=!0,setTimeout(()=>{this.trip=this.getMockTripDetails(),this.loadTripActions(),this.isLoading=!1},500)}getMockTripDetails(){return{id:this.tripId,tripCode:"RB-RYD-JED-20250127-001",routeId:"R001",routeName:"Riyadh to Jeddah Express",origin:"Riyadh",destination:"Jeddah",departureDate:new Date("2025-01-27"),departureTime:"08:00",arrivalDate:new Date("2025-01-27"),arrivalTime:"16:00",busId:"B001",busNumber:"RB-001",busModel:"Mercedes Sprinter",driverId:"D001",driverName:"Ahmed Al-Rashid",driverPhone:"+966-50-123-4567",status:"in-progress",totalSeats:50,bookedSeats:42,availableSeats:8,distance:950,estimatedDuration:480,fare:180,revenue:7560,expenses:2200,profit:5360,createdDate:new Date("2025-01-20"),lastModified:new Date,notes:"Premium service with refreshments. VIP passengers on board.",amenities:["wifi","ac","refreshments","charging","entertainment"],specialRequirements:["wheelchair-accessible"],trackingInfo:{currentLocation:"Near Taif",lastUpdate:new Date,progress:65,nextStop:"Taif Rest Stop",estimatedArrival:new Date(Date.now()+2*60*60*1e3)},stops:[{id:"S1",name:"Riyadh Central Terminal",scheduledTime:"08:00",actualTime:"08:05",status:"departed"},{id:"S2",name:"Taif Rest Stop",scheduledTime:"12:00",status:"pending"},{id:"S3",name:"Jeddah Main Terminal",scheduledTime:"16:00",status:"pending"}],passengers:[{id:"P001",name:"Mohammad Al-Fahad",phone:"+966-55-111-2222",seatNumber:"A1",ticketNumber:"TKT-001-2025",boardingStop:"Riyadh Central Terminal",destinationStop:"Jeddah Main Terminal",fare:180,status:"boarded"},{id:"P002",name:"Fatima Al-Zahrani",phone:"+966-55-333-4444",seatNumber:"A2",ticketNumber:"TKT-002-2025",boardingStop:"Riyadh Central Terminal",destinationStop:"Taif Rest Stop",fare:120,status:"boarded"},{id:"P003",name:"Salem Al-Qurashi",phone:"+966-55-555-6666",seatNumber:"B1",ticketNumber:"TKT-003-2025",boardingStop:"Taif Rest Stop",destinationStop:"Jeddah Main Terminal",fare:90,status:"confirmed"}]}}loadTripActions(){this.tripActions=[{id:"A001",timestamp:new Date("2025-01-27T08:05:00"),action:"Trip Started",performedBy:"Ahmed Al-Rashid",details:"Trip departed 5 minutes late due to passenger delay"},{id:"A002",timestamp:new Date("2025-01-27T08:00:00"),action:"Pre-trip Inspection Completed",performedBy:"Ahmed Al-Rashid",details:"All safety checks passed"},{id:"A003",timestamp:new Date("2025-01-26T15:30:00"),action:"Trip Scheduled",performedBy:"System",details:"Trip automatically scheduled"}]}switchTab(t){this.activeTab=t}editTrip(){this.router.navigate(["/trips",this.tripId,"edit"])}duplicateTrip(){this.router.navigate(["/trips/schedule"],{queryParams:{duplicate:this.tripId}})}cancelTrip(){this.trip&&(this.trip.status==="scheduled"||this.trip.status==="delayed")&&confirm(`Are you sure you want to cancel trip ${this.trip.tripCode}?`)&&(this.trip.status="cancelled",this.trip.lastModified=new Date,this.tripActions.unshift({id:"A"+(this.tripActions.length+1).toString().padStart(3,"0"),timestamp:new Date,action:"Trip Cancelled",performedBy:"Admin User",details:"Trip cancelled by administrator"}),alert("Trip cancelled successfully"))}startTrip(){this.trip&&this.trip.status==="scheduled"&&(this.trip.status="in-progress",this.trip.lastModified=new Date,this.tripActions.unshift({id:"A"+(this.tripActions.length+1).toString().padStart(3,"0"),timestamp:new Date,action:"Trip Started",performedBy:this.trip.driverName,details:"Trip started by driver"}),alert("Trip started successfully"))}completeTrip(){this.trip&&this.trip.status==="in-progress"&&(this.trip.status="completed",this.trip.actualDuration=this.trip.estimatedDuration+15,this.trip.lastModified=new Date,this.tripActions.unshift({id:"A"+(this.tripActions.length+1).toString().padStart(3,"0"),timestamp:new Date,action:"Trip Completed",performedBy:this.trip.driverName,details:"Trip completed successfully"}),alert("Trip completed successfully"))}reportDelay(){if(!this.trip)return;let t=prompt("Please enter the reason for delay:"),e=prompt("Please enter delay duration in minutes:");if(t&&e){let i=parseInt(e);isNaN(i)||(this.trip.delays||(this.trip.delays=[]),this.trip.delays.push({reason:t,duration:i,reportedAt:new Date,reportedBy:"Admin User"}),this.trip.status="delayed",this.trip.lastModified=new Date,this.tripActions.unshift({id:"A"+(this.tripActions.length+1).toString().padStart(3,"0"),timestamp:new Date,action:"Delay Reported",performedBy:"Admin User",details:`${i} minutes delay: ${t}`}),alert("Delay reported successfully"))}}goBack(){this.router.navigate(["/trips"])}getStatusClass(t){switch(t){case"scheduled":return"status-scheduled";case"in-progress":return"status-in-progress";case"completed":return"status-completed";case"cancelled":return"status-cancelled";case"delayed":return"status-delayed";default:return"status-unknown"}}getStatusIcon(t){switch(t){case"scheduled":return"\u{1F4C5}";case"in-progress":return"\u{1F68C}";case"completed":return"\u2705";case"cancelled":return"\u274C";case"delayed":return"\u23F0";default:return"\u2753"}}getPassengerStatusClass(t){switch(t){case"confirmed":return"passenger-confirmed";case"checked-in":return"passenger-checked-in";case"boarded":return"passenger-boarded";case"completed":return"passenger-completed";default:return"passenger-unknown"}}getStopStatusClass(t){switch(t){case"pending":return"stop-pending";case"arrived":return"stop-arrived";case"departed":return"stop-departed";default:return"stop-unknown"}}formatCurrency(t){return`SAR ${t.toLocaleString()}`}formatDuration(t){let e=Math.floor(t/60),i=t%60;return`${e}h ${i}m`}formatDistance(t){return`${t.toLocaleString()} km`}getOccupancyPercentage(){return this.trip?Math.round(this.trip.bookedSeats/this.trip.totalSeats*100):0}getProgressColor(t){return t>=90?"#22c55e":t>=70?"#eab308":t>=50?"#f97316":"#ef4444"}getAmenityLabel(t){return this.amenityLabels[t]?.label||t}getAmenityIcon(t){return this.amenityLabels[t]?.icon||""}getSpecialRequirementLabel(t){return this.specialRequirementLabels[t]?.label||t}getSpecialRequirementIcon(t){return this.specialRequirementLabels[t]?.icon||""}updateLocation(){if(!this.trip?.trackingInfo)return;let t=prompt("Enter current location:",this.trip.trackingInfo.currentLocation);t&&(this.trip.trackingInfo.currentLocation=t,this.trip.trackingInfo.lastUpdate=new Date,this.tripActions.unshift({id:"A"+(this.tripActions.length+1).toString().padStart(3,"0"),timestamp:new Date,action:"Location Updated",performedBy:this.trip.driverName,details:`Location updated to: ${t}`}),alert("Location updated successfully"))}callDriver(){this.trip?.driverPhone&&window.open(`tel:${this.trip.driverPhone}`)}exportTripData(){if(!this.trip)return;let t={trip:this.trip,actions:this.tripActions,exportedAt:new Date().toISOString(),exportedBy:"Admin User"},e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=`trip-${this.trip.tripCode}-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(r)}getPassengersByStatus(t){return this.trip?.passengers?this.trip.passengers.filter(e=>e.status===t):[]}callPassenger(t){t?.phone&&window.open(`tel:${t.phone}`)}viewPassengerDetails(t){alert(`Passenger Details:
Name: ${t.name}
Seat: ${t.seatNumber}
Ticket: ${t.ticketNumber}`)}static \u0275fac=function(e){return new(e||n)(w(Te),w(ne))};static \u0275cmp=J({type:n,selectors:[["app-trip-details"]],decls:4,vars:3,consts:[[1,"trip-details-container"],["class","loading-container",4,"ngIf"],["class","trip-content",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"trip-content"],[1,"page-header"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"trip-title"],[1,"trip-meta"],[1,"route-name"],[1,"status-badge"],[1,"status-icon"],[1,"route-path"],[1,"header-actions"],["title","Call Driver",1,"action-btn","secondary",3,"click"],[1,"action-btn","secondary",3,"click"],[1,"action-btn","primary",3,"click","disabled"],[1,"dropdown"],[1,"action-btn","secondary","dropdown-toggle"],[1,"dropdown-menu"],[3,"disabled","click",4,"ngIf"],[3,"click","disabled"],[3,"click"],[1,"danger",3,"click","disabled"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],["class","stat-card",4,"ngIf"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],[1,"tab-btn",3,"click","disabled"],[1,"tab-content"],["class","overview-content",4,"ngIf"],["class","passengers-content",4,"ngIf"],["class","tracking-content",4,"ngIf"],["class","history-content",4,"ngIf"],[1,"overview-content"],[1,"content-grid"],[1,"left-column"],[1,"info-card"],[1,"card-header"],[1,"card-content"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[4,"ngIf"],[1,"stops-timeline"],["class","stop-item",3,"is-last",4,"ngFor","ngForOf"],["class","info-card",4,"ngIf"],[1,"right-column"],[1,"assignment-details"],[1,"vehicle-info"],[1,"vehicle-icon"],[1,"vehicle-details"],[1,"vehicle-number"],[1,"vehicle-model"],[1,"vehicle-capacity"],[1,"driver-info"],[1,"driver-icon"],[1,"driver-details"],[1,"driver-name"],[1,"driver-phone"],[1,"btn-link",3,"click"],[1,"features-section"],["class","amenities",4,"ngIf"],["class","special-requirements",4,"ngIf"],[1,"financial-grid"],[1,"financial-item"],[1,"value","revenue"],[1,"value","expense"],[1,"value","profit"],[1,"stop-item"],[1,"stop-marker"],[1,"marker-icon"],[1,"stop-content"],[1,"stop-header"],[1,"stop-status"],[1,"stop-times"],[1,"scheduled-time"],[1,"time"],["class","actual-time",4,"ngIf"],[1,"actual-time"],[1,"delays-list"],["class","delay-item",4,"ngFor","ngForOf"],[1,"delay-item"],[1,"delay-header"],[1,"delay-duration"],[1,"delay-time"],[1,"delay-reason"],[1,"delay-reporter"],[1,"amenities"],[1,"feature-list"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"feature-tag"],[1,"special-requirements"],["class","feature-tag special",4,"ngFor","ngForOf"],[1,"feature-tag","special"],[1,"notes-content"],[1,"passengers-content"],[1,"passengers-header"],[1,"passenger-stats"],[1,"stat"],["class","passengers-table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"passengers-table-container"],[1,"passengers-table"],[4,"ngFor","ngForOf"],[1,"seat-number"],[1,"passenger-name"],[1,"passenger-phone"],[1,"ticket-number"],[1,"boarding-stop"],[1,"destination-stop"],[1,"passenger-fare"],[1,"passenger-status"],[1,"passenger-actions"],["title","Call",1,"btn-action",3,"click"],["title","Details",1,"btn-action",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"tracking-content"],[1,"tracking-header"],[1,"tracking-status"],[1,"status-indicator"],[1,"status-text"],["class","tracking-grid",4,"ngIf"],[1,"map-placeholder"],[1,"map-icon"],[1,"btn","btn-primary",3,"click"],[1,"tracking-grid"],[1,"tracking-card"],[1,"tracking-icon"],[1,"tracking-details"],[1,"location-name"],[1,"next-stop"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"history-content"],[1,"history-header"],[1,"history-count"],[1,"history-timeline"],["class","history-item",4,"ngFor","ngForOf"],["class","empty-history",4,"ngIf"],[1,"history-item"],[1,"history-marker"],[1,"marker-dot"],[1,"history-header-item"],[1,"history-time"],[1,"history-user"],["class","history-details",4,"ngIf"],[1,"history-details"],[1,"empty-history"],[1,"error-container"],[1,"error-icon"]],template:function(e,i){e&1&&(a(0,"div",0),v(1,zN,4,0,"div",1)(2,_4,85,38,"div",2)(3,h4,9,0,"div",3),o()),e&2&&(c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading&&i.trip),c(),m("ngIf",!i.isLoading&&!i.trip))},dependencies:[K,ae,ee,Ge,He],styles:['.trip-details-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto;background:#f8fafc;min-height:100vh}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.back-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#667eea;font-size:14px;cursor:pointer;padding:8px 0;transition:color .2s ease}.back-btn[_ngcontent-%COMP%]:hover{color:#5a67d8}.trip-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2d3748;margin-bottom:10px}.trip-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.route-name[_ngcontent-%COMP%]{color:#4a5568;font-weight:500;font-size:16px}.route-path[_ngcontent-%COMP%]{color:#718096;font-size:14px}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:12px;font-size:12px;font-weight:600;text-transform:uppercase}.status-scheduled[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282}.status-in-progress[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621}.status-completed[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-delayed[_ngcontent-%COMP%]{background:#fefcbf;color:#744210}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;position:relative}.action-btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:6px}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.action-btn.secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 8px 20px #0000001a;min-width:200px;z-index:10;display:none}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px 15px;border:none;background:transparent;text-align:left;font-size:13px;color:#4a5568;cursor:pointer;transition:background-color .2s ease}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f7fafc}.dropdown-menu[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]:hover{background:#fed7d7;color:#742a2a}.dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:32px;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:#f0f4ff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;font-weight:500;margin-bottom:5px}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2d3748;margin-bottom:2px}.stat-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;gap:8px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 20px;border:none;border-radius:8px;background:transparent;color:#4a5568;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.tab-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;box-shadow:0 2px 4px #667eea33}.tab-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;min-height:500px}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:30px;padding:30px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;margin-bottom:20px;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e2e8f0;background:#f8fafc}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:18px;font-weight:600;margin:0}.card-content[_ngcontent-%COMP%]{padding:25px}.info-grid[_ngcontent-%COMP%]{display:grid;gap:15px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;font-size:14px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px;text-align:right}.stops-timeline[_ngcontent-%COMP%]{position:relative}.stop-item[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;position:relative}.stop-item[_ngcontent-%COMP%]:not(.is-last):after{content:"";position:absolute;left:20px;top:40px;bottom:-25px;width:2px;background:#e2e8f0}.stop-marker[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:20px;z-index:2;position:relative}.stop-pending[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{background:#e2e8f0;color:#718096}.stop-arrived[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{background:#fef5e7;color:#c05621}.stop-departed[_ngcontent-%COMP%]   .marker-icon[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.marker-icon[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px}.stop-content[_ngcontent-%COMP%]{flex:1}.stop-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.stop-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin:0}.stop-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.stop-pending[_ngcontent-%COMP%]{background:#e2e8f0;color:#718096}.stop-arrived[_ngcontent-%COMP%]{background:#fef5e7;color:#c05621}.stop-departed[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.stop-times[_ngcontent-%COMP%]{display:flex;gap:20px}.scheduled-time[_ngcontent-%COMP%], .actual-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.stop-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.stop-times[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:600}.delays-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.delay-item[_ngcontent-%COMP%]{padding:15px;background:#fef5e7;border:1px solid #f6ad55;border-radius:8px}.delay-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.delay-duration[_ngcontent-%COMP%]{font-weight:600;color:#c05621;font-size:14px}.delay-time[_ngcontent-%COMP%]{font-size:12px;color:#744210}.delay-reason[_ngcontent-%COMP%]{color:#744210;font-size:14px;margin-bottom:5px}.delay-reporter[_ngcontent-%COMP%]{color:#a0aec0;font-size:12px}.assignment-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.vehicle-info[_ngcontent-%COMP%], .driver-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:#f8fafc;border-radius:8px}.vehicle-icon[_ngcontent-%COMP%], .driver-icon[_ngcontent-%COMP%]{font-size:32px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:10px}.vehicle-details[_ngcontent-%COMP%], .driver-details[_ngcontent-%COMP%]{flex:1}.vehicle-number[_ngcontent-%COMP%], .driver-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:16px;margin-bottom:4px}.vehicle-model[_ngcontent-%COMP%], .driver-phone[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin-bottom:2px}.vehicle-capacity[_ngcontent-%COMP%]{color:#4a5568;font-size:12px;font-weight:500}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-size:12px;cursor:pointer;padding:0;text-decoration:underline}.btn-link[_ngcontent-%COMP%]:hover{color:#5a67d8}.features-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.features-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:600;margin-bottom:10px}.feature-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.feature-tag[_ngcontent-%COMP%]{padding:6px 10px;background:#f0fff4;color:#22543d;border-radius:6px;font-size:12px;font-weight:500}.feature-tag.special[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282}.financial-grid[_ngcontent-%COMP%]{display:grid;gap:15px}.financial-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}.financial-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.financial-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568;font-size:14px}.financial-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.financial-item[_ngcontent-%COMP%]   .value.revenue[_ngcontent-%COMP%]{color:#22543d}.financial-item[_ngcontent-%COMP%]   .value.expense[_ngcontent-%COMP%]{color:#c05621}.financial-item[_ngcontent-%COMP%]   .value.profit[_ngcontent-%COMP%]{color:#22543d}.financial-item[_ngcontent-%COMP%]   .value.profit.negative[_ngcontent-%COMP%]{color:#e53e3e}.notes-content[_ngcontent-%COMP%]{color:#4a5568;line-height:1.6;font-size:14px;padding:15px;background:#f8fafc;border-radius:8px;border-left:4px solid #667eea}.passengers-content[_ngcontent-%COMP%]{padding:30px}.passengers-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid #e2e8f0}.passengers-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;font-weight:600;margin:0}.passenger-stats[_ngcontent-%COMP%]{display:flex;gap:20px}.passenger-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;font-weight:500}.passengers-table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e2e8f0}.passengers-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.passengers-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;padding:15px 12px;text-align:left;font-weight:600;color:#4a5568;border-bottom:2px solid #e2e8f0;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.passengers-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f1f5f9;color:#2d3748}.passengers-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.seat-number[_ngcontent-%COMP%]{font-weight:600;color:#667eea}.passenger-name[_ngcontent-%COMP%]{font-weight:500}.passenger-phone[_ngcontent-%COMP%]{font-family:monospace;color:#4a5568}.ticket-number[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#718096}.passenger-fare[_ngcontent-%COMP%]{font-weight:600;color:#22543d}.passenger-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:8px;font-size:10px;font-weight:600;text-transform:uppercase}.passenger-confirmed[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282}.passenger-checked-in[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621}.passenger-boarded[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d}.passenger-completed[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.passenger-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-action[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s ease;font-size:12px}.btn-action[_ngcontent-%COMP%]:hover{background:#f7fafc}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#718096;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:18px;font-weight:600;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin:0}.tracking-content[_ngcontent-%COMP%]{padding:30px}.tracking-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e2e8f0}.tracking-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;font-weight:600;margin:0}.tracking-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:#e2e8f0;position:relative}.status-indicator.active[_ngcontent-%COMP%]{background:#22543d}.status-indicator.active[_ngcontent-%COMP%]:after{content:"";position:absolute;width:20px;height:20px;border-radius:50%;background:#22543d;opacity:.3;top:-4px;left:-4px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:.3}50%{transform:scale(1.2);opacity:.1}to{transform:scale(1);opacity:.3}}.status-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#4a5568}.tracking-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.tracking-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 8px #0000000d;border:1px solid #e2e8f0}.tracking-icon[_ngcontent-%COMP%]{font-size:28px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#f0f4ff;border-radius:10px}.tracking-details[_ngcontent-%COMP%]{flex:1}.tracking-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:600;margin-bottom:5px}.location-name[_ngcontent-%COMP%], .next-stop[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#4a5568;margin-bottom:4px}.progress-text[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#4a5568;margin-top:8px}.tracking-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:12px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden;margin-bottom:8px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#48bb78);transition:width .3s ease}.map-placeholder[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;text-align:center;border:2px dashed #e2e8f0;color:#718096}.map-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;opacity:.6}.map-placeholder[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:18px;font-weight:600;margin-bottom:8px}.map-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin-bottom:20px}.btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.history-content[_ngcontent-%COMP%]{padding:30px}.history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e2e8f0}.history-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;font-weight:600;margin:0}.history-count[_ngcontent-%COMP%]{background:#f0f4ff;color:#667eea;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.history-timeline[_ngcontent-%COMP%]{position:relative}.history-item[_ngcontent-%COMP%]{display:flex;margin-bottom:25px;position:relative}.history-item[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;left:12px;top:30px;bottom:-25px;width:2px;background:#e2e8f0}.history-marker[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:20px;z-index:2;position:relative}.marker-dot[_ngcontent-%COMP%]{width:12px;height:12px;background:#667eea;border-radius:50%;border:3px solid white;box-shadow:0 0 0 2px #667eea;position:absolute;top:6px;left:6px}.history-content[_ngcontent-%COMP%]{flex:1}.history-header-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.history-header-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin:0}.history-time[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.history-user[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;margin-bottom:4px}.history-details[_ngcontent-%COMP%]{font-size:14px;color:#718096;line-height:1.4;margin:0}.empty-history[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#718096;text-align:center}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096;text-align:center}.error-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;opacity:.6}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4a5568;font-size:24px;font-weight:600;margin-bottom:8px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:16px;margin-bottom:20px}@media (max-width: 1024px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.tracking-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.trip-details-container[_ngcontent-%COMP%]{padding:20px 15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:stretch}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.trip-meta[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:flex-start}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.tab-navigation[_ngcontent-%COMP%]{padding:6px;gap:4px}.tab-btn[_ngcontent-%COMP%]{padding:10px 8px;font-size:12px}.content-grid[_ngcontent-%COMP%], .passengers-content[_ngcontent-%COMP%], .tracking-content[_ngcontent-%COMP%], .history-content[_ngcontent-%COMP%]{padding:20px}.passengers-table-container[_ngcontent-%COMP%]{overflow-x:auto}.passengers-table[_ngcontent-%COMP%]{min-width:600px}.passengers-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .passengers-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;font-size:12px}}@media (max-width: 480px){.trip-details-container[_ngcontent-%COMP%]{padding:15px 10px}.page-header[_ngcontent-%COMP%]{padding:15px}.trip-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%}.content-grid[_ngcontent-%COMP%], .passengers-content[_ngcontent-%COMP%], .tracking-content[_ngcontent-%COMP%], .history-content[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%]{padding:15px}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:24px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.card-header[_ngcontent-%COMP%]{padding:15px 20px}.card-content[_ngcontent-%COMP%]{padding:20px}.info-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}.tab-btn[_ngcontent-%COMP%]{padding:8px 6px;font-size:11px}.passengers-table[_ngcontent-%COMP%]{min-width:700px}.tracking-grid[_ngcontent-%COMP%]{gap:15px}.tracking-card[_ngcontent-%COMP%]{padding:15px}.map-placeholder[_ngcontent-%COMP%]{padding:30px 20px}.map-icon[_ngcontent-%COMP%]{font-size:36px}}']})};function v4(n,t){if(n&1&&(a(0,"option",33),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),x(" ",e.label," ")}}function x4(n,t){if(n&1&&(a(0,"option",33),l(1),o()),n&2){let e=t.$implicit;m("value",e.value),c(),x(" ",e.label," ")}}function C4(n,t){n&1&&(a(0,"div",34),P(1,"div",35),a(2,"p"),l(3,"Loading calendar..."),o()())}function y4(n,t){if(n&1&&(a(0,"div",43),l(1),o()),n&2){let e=t.$implicit;c(),x(" ",e," ")}}function b4(n,t){if(n&1&&(a(0,"span",52),l(1),o()),n&2){let e=g().$implicit;c(),x(" ",e.trips.length," ")}}function E4(n,t){if(n&1){let e=O();a(0,"div",56),h("click",function(r){let s=C(e).$implicit,d=g(5);return r.stopPropagation(),y(d.viewTripDetails(s))}),a(1,"span",57),l(2),o(),a(3,"span",58),l(4),o(),a(5,"span",59),l(6),o()()}if(n&2){let e=t.$implicit,i=g(5);q(i.getTripStatusClass(e.status)),m("title",e.tripCode+" - "+e.routeName),c(2),_(e.departureTime),c(2),Y("",e.origin.substring(0,3),"\u2192",e.destination.substring(0,3),""),c(2),_(i.getTripStatusIcon(e.status))}}function D4(n,t){if(n&1&&(a(0,"div",60),l(1),o()),n&2){let e=g(2).$implicit;c(),x(" +",e.trips.length-3," more ")}}function M4(n,t){if(n&1&&(a(0,"div",53),v(1,E4,7,7,"div",54)(2,D4,2,1,"div",55),o()),n&2){let e=g().$implicit;c(),m("ngForOf",e.trips.slice(0,3)),c(),m("ngIf",e.trips.length>3)}}function S4(n,t){if(n&1){let e=O();a(0,"div",61)(1,"button",62),h("click",function(r){C(e);let s=g().$implicit,d=g(3);return r.stopPropagation(),y(d.scheduleNewTrip(s.date))}),l(2," + "),o()()}}function I4(n,t){if(n&1){let e=O();a(0,"div",46),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.selectDay(r.date))}),a(1,"div",47)(2,"span",48),l(3),o(),v(4,b4,2,1,"span",49),o(),v(5,M4,3,2,"div",50)(6,S4,3,0,"div",51),o()}if(n&2){let e=t.$implicit;I("current-month",e.isCurrentMonth)("today",e.isToday)("selected",e.isSelected)("has-trips",e.trips.length>0),c(3),_(e.date.getDate()),c(),m("ngIf",e.trips.length>0),c(),m("ngIf",e.trips.length>0),c(),m("ngIf",e.trips.length===0&&e.isCurrentMonth)}}function P4(n,t){if(n&1&&(a(0,"div",44),v(1,I4,7,12,"div",45),o()),n&2){let e=t.$implicit;c(),m("ngForOf",e.days)}}function T4(n,t){if(n&1){let e=O();a(0,"div",69)(1,"div",70)(2,"div",71)(3,"h4"),l(4),o(),a(5,"span",72),l(6),j(7,"titlecase"),o()(),a(8,"div",73)(9,"button",74),h("click",function(){let r=C(e).$implicit,s=g(4);return y(s.viewTripDetails(r))}),l(10," \u{1F441}\uFE0F "),o(),a(11,"button",75),h("click",function(){let r=C(e).$implicit,s=g(4);return y(s.editTrip(r))}),l(12," \u270F\uFE0F "),o()()(),a(13,"div",76)(14,"div",77)(15,"div",78)(16,"strong"),l(17),o(),a(18,"span",79),l(19),o()(),a(20,"div",80)(21,"span",81),l(22),o(),a(23,"span",82),l(24),o()()(),a(25,"div",83)(26,"div",84)(27,"span",85),l(28,"Vehicle:"),o(),a(29,"span",86),l(30),o()(),a(31,"div",84)(32,"span",85),l(33,"Driver:"),o(),a(34,"span",86),l(35),o()(),a(36,"div",84)(37,"span",85),l(38,"Occupancy:"),o(),a(39,"span",86),l(40),o()(),a(41,"div",84)(42,"span",85),l(43,"Revenue:"),o(),a(44,"span",87),l(45),o()()()()()}if(n&2){let e=t.$implicit,i=g(4);c(4),_(e.tripCode),c(),q(i.getTripStatusClass(e.status)),c(),Y(" ",i.getTripStatusIcon(e.status)," ",se(7,18,e.status)," "),c(11),_(e.routeName),c(2),Y("",e.origin," \u2192 ",e.destination,""),c(3),_(e.departureTime),c(2),_(e.arrivalTime),c(6),_(e.busNumber),c(5),_(e.driverName),c(4),q(i.getOccupancyClass(i.getOccupancyPercentage(e))),c(),Ke(" ",e.bookedSeats,"/",e.totalSeats," (",i.getOccupancyPercentage(e),"%) "),c(5),_(i.formatCurrency(e.revenue))}}function R4(n,t){if(n&1&&(a(0,"div",67),v(1,T4,46,20,"div",68),o()),n&2){let e=g(3);c(),m("ngForOf",e.selectedDayTrips)}}function O4(n,t){if(n&1){let e=O();a(0,"div",88)(1,"div",89),l(2,"\u{1F4C5}"),o(),a(3,"h4"),l(4,"No trips scheduled"),o(),a(5,"p"),l(6),j(7,"date"),o(),a(8,"button",5),h("click",function(){C(e);let r=g(3);return y(r.scheduleNewTrip(r.selectedDate))}),l(9," \u2795 Schedule First Trip "),o()()}if(n&2){let e=g(3);c(6),x("No trips are scheduled for ",ie(7,1,e.selectedDate,"MMMM dd, yyyy"),"")}}function w4(n,t){if(n&1){let e=O();a(0,"div",63)(1,"div",64)(2,"h3"),l(3),j(4,"date"),o(),a(5,"button",5),h("click",function(){C(e);let r=g(2);return y(r.scheduleNewTrip(r.selectedDate))}),l(6," \u2795 Add Trip "),o()(),v(7,R4,2,1,"div",65)(8,O4,10,4,"div",66),o()}if(n&2){let e=g(2);c(3),_(ie(4,3,e.selectedDate,"EEEE, MMMM dd, yyyy")),c(4),m("ngIf",e.selectedDayTrips.length>0),c(),m("ngIf",e.selectedDayTrips.length===0)}}function A4(n,t){n&1&&(a(0,"div",90)(1,"div",91)(2,"div",92),l(3,"\u{1F446}"),o(),a(4,"h3"),l(5,"Select a date"),o(),a(6,"p"),l(7,"Click on any date in the calendar to view and manage trips for that day"),o()()())}function N4(n,t){if(n&1&&(a(0,"div",36)(1,"div",37)(2,"div",38),v(3,y4,2,1,"div",39),o(),v(4,P4,2,1,"div",40),o(),v(5,w4,9,6,"div",41)(6,A4,8,0,"div",42),o()),n&2){let e=g();c(3),m("ngForOf",e.dayNames),c(),m("ngForOf",e.calendarWeeks),c(),m("ngIf",e.selectedDate),c(),m("ngIf",!e.selectedDate)}}var Pd=class n{constructor(t){this.router=t}currentDate=new Date;selectedDate=null;viewMode="month";isLoading=!1;calendarWeeks=[];selectedDayTrips=[];filters={status:"all",route:"all",driver:"all"};routeOptions=[];driverOptions=[];monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];allTrips=[];ngOnInit(){this.initializeFilterOptions(),this.generateCalendar(),this.loadTrips()}initializeFilterOptions(){this.routeOptions=[{value:"all",label:"All Routes"},{value:"R001",label:"Riyadh to Jeddah Express"},{value:"R002",label:"Riyadh to Dammam Direct"},{value:"R003",label:"Jeddah to Mecca Premium"},{value:"R004",label:"Riyadh to Abha Scenic"}],this.driverOptions=[{value:"all",label:"All Drivers"},{value:"D001",label:"Ahmed Al-Rashid"},{value:"D002",label:"Mohammed Al-Fahad"},{value:"D003",label:"Abdullah Al-Zahrani"},{value:"D004",label:"Salem Al-Qurashi"}]}generateCalendar(){this.calendarWeeks=[];let t=this.currentDate.getFullYear(),e=this.currentDate.getMonth(),i=new Date(t,e,1),r=new Date(i);r.setDate(1-i.getDay());for(let s=0;s<6;s++){let d={days:[]};for(let u=0;u<7;u++){let p=new Date(r);p.setDate(r.getDate()+s*7+u);let f={date:p,isCurrentMonth:p.getMonth()===e,isToday:this.isToday(p),isSelected:this.selectedDate?this.isSameDay(p,this.selectedDate):!1,trips:[]};d.days.push(f)}this.calendarWeeks.push(d)}}loadTrips(){this.isLoading=!0,setTimeout(()=>{this.allTrips.length===0&&(this.allTrips=this.generateMockTrips()),this.assignTripsToCalendar(this.allTrips),this.isLoading=!1},500)}generateMockTrips(){let t=[],e=this.currentDate.getFullYear(),i=this.currentDate.getMonth();for(let r=1;r<=30;r++){let s=new Date(e,i,r);if(s<new Date&&!this.isToday(s))continue;let d=Math.floor(Math.random()*5);for(let u=0;u<d;u++){let p={id:`trip-${e}-${i}-${r}-${u}`,tripCode:`RB-${r.toString().padStart(2,"0")}${(i+1).toString().padStart(2,"0")}-${u+1}`,routeName:this.routeOptions[Math.floor(Math.random()*(this.routeOptions.length-1))+1].label,origin:this.getRandomCity(),destination:this.getRandomCity(),departureTime:this.getRandomTime(),arrivalTime:this.getRandomTime(!0),date:s,status:this.getRandomStatus(),busNumber:`RB-${String(Math.floor(Math.random()*999)).padStart(3,"0")}`,driverName:this.driverOptions[Math.floor(Math.random()*(this.driverOptions.length-1))+1].label,bookedSeats:Math.floor(Math.random()*45)+5,totalSeats:50,revenue:Math.floor(Math.random()*1e4)+2e3};t.push(p)}}return t}assignTripsToCalendar(t){this.calendarWeeks.forEach(i=>{i.days.forEach(r=>{r.trips=[]})}),this.filterTrips(t).forEach(i=>{this.calendarWeeks.forEach(r=>{r.days.forEach(s=>{this.isSameDay(s.date,i.date)&&s.trips.push(i)})})}),this.calendarWeeks.forEach(i=>{i.days.forEach(r=>{r.trips.sort((s,d)=>s.departureTime.localeCompare(d.departureTime))})})}filterTrips(t){return t.filter(e=>{if(this.filters.status!=="all"&&e.status!==this.filters.status)return!1;if(this.filters.route!=="all"){let i=this.routeOptions.find(r=>r.value===this.filters.route);if(i&&e.routeName!==i.label)return!1}if(this.filters.driver!=="all"){let i=this.driverOptions.find(r=>r.value===this.filters.driver);if(i&&e.driverName!==i.label)return!1}return!0})}previousMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.generateCalendar(),this.allTrips=[],this.loadTrips()}nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.generateCalendar(),this.allTrips=[],this.loadTrips()}goToToday(){this.currentDate=new Date,this.selectedDate=new Date,this.generateCalendar(),this.allTrips=[],this.loadTrips(),this.updateCalendarSelection(),this.selectDay(this.selectedDate)}selectDay(t){this.selectedDate=t,this.updateCalendarSelection(),this.selectedDayTrips=[],this.calendarWeeks.forEach(e=>{e.days.forEach(i=>{this.isSameDay(i.date,t)&&(this.selectedDayTrips=[...i.trips])})})}updateCalendarSelection(){this.calendarWeeks.forEach(t=>{t.days.forEach(e=>{e.isSelected=this.selectedDate?this.isSameDay(e.date,this.selectedDate):!1})})}viewTripDetails(t){this.router.navigate(["/trips",t.id])}editTrip(t){this.router.navigate(["/trips",t.id,"edit"])}scheduleNewTrip(t){let e=t?{date:t.toISOString().split("T")[0]}:{};this.router.navigate(["/trips/schedule"],{queryParams:e})}onFilterChange(){this.assignTripsToCalendar(this.allTrips)}clearFilters(){this.filters={status:"all",route:"all",driver:"all"},this.assignTripsToCalendar(this.allTrips)}isToday(t){let e=new Date;return this.isSameDay(t,e)}isSameDay(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}getMonthYear(){return`${this.monthNames[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`}getTripStatusClass(t){switch(t){case"scheduled":return"trip-scheduled";case"in-progress":return"trip-in-progress";case"completed":return"trip-completed";case"cancelled":return"trip-cancelled";case"delayed":return"trip-delayed";default:return"trip-unknown"}}getTripStatusIcon(t){switch(t){case"scheduled":return"\u{1F4C5}";case"in-progress":return"\u{1F68C}";case"completed":return"\u2705";case"cancelled":return"\u274C";case"delayed":return"\u23F0";default:return"\u2753"}}formatCurrency(t){return`SAR ${t.toLocaleString()}`}getOccupancyPercentage(t){return Math.round(t.bookedSeats/t.totalSeats*100)}getOccupancyClass(t){return t>=90?"occupancy-high":t>=70?"occupancy-medium":t>=50?"occupancy-low":"occupancy-very-low"}getRandomCity(){let t=["Riyadh","Jeddah","Dammam","Mecca","Medina","Abha","Taif","Qassim"];return t[Math.floor(Math.random()*t.length)]}getRandomTime(t=!1){let i=((t?12:6)+Math.floor(Math.random()*10))%24,r=Math.floor(Math.random()*4)*15;return`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}getRandomStatus(){let t=["scheduled","in-progress","completed","delayed"],e=[.6,.15,.2,.05],i=Math.random(),r=0;for(let s=0;s<t.length;s++)if(r+=e[s],i<=r)return t[s];return"scheduled"}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-trip-calendar"]],decls:75,vars:8,consts:[[1,"trip-calendar-container"],[1,"calendar-header"],[1,"header-left"],[1,"header-actions"],[1,"action-btn","secondary",3,"click"],[1,"action-btn","primary",3,"click"],[1,"calendar-controls"],[1,"navigation-controls"],["title","Previous Month",1,"nav-btn",3,"click"],[1,"month-year"],["title","Next Month",1,"nav-btn",3,"click"],[1,"filter-controls"],[1,"filter-group"],[1,"filter-select",3,"change","value"],["value","all"],["value","scheduled"],["value","in-progress"],["value","completed"],["value","delayed"],["value","cancelled"],[3,"value",4,"ngFor","ngForOf"],["title","Clear Filters",1,"filter-clear-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","calendar-content",4,"ngIf"],[1,"calendar-legend"],[1,"legend-items"],[1,"legend-item"],[1,"legend-color","trip-scheduled"],[1,"legend-label"],[1,"legend-color","trip-in-progress"],[1,"legend-color","trip-completed"],[1,"legend-color","trip-delayed"],[1,"legend-color","trip-cancelled"],[3,"value"],[1,"loading-container"],[1,"loading-spinner"],[1,"calendar-content"],[1,"calendar-grid"],[1,"calendar-header-row"],["class","calendar-header-cell",4,"ngFor","ngForOf"],["class","calendar-week",4,"ngFor","ngForOf"],["class","day-details",4,"ngIf"],["class","no-selection",4,"ngIf"],[1,"calendar-header-cell"],[1,"calendar-week"],["class","calendar-day",3,"current-month","today","selected","has-trips","click",4,"ngFor","ngForOf"],[1,"calendar-day",3,"click"],[1,"day-header"],[1,"day-number"],["class","trip-count",4,"ngIf"],["class","day-trips",4,"ngIf"],["class","day-empty",4,"ngIf"],[1,"trip-count"],[1,"day-trips"],["class","trip-item",3,"class","title","click",4,"ngFor","ngForOf"],["class","more-trips",4,"ngIf"],[1,"trip-item",3,"click","title"],[1,"trip-time"],[1,"trip-route"],[1,"trip-status-icon"],[1,"more-trips"],[1,"day-empty"],["title","Schedule trip for this day",1,"add-trip-btn",3,"click"],[1,"day-details"],[1,"day-details-header"],["class","selected-day-trips",4,"ngIf"],["class","no-trips-selected",4,"ngIf"],[1,"selected-day-trips"],["class","selected-trip-card",4,"ngFor","ngForOf"],[1,"selected-trip-card"],[1,"trip-card-header"],[1,"trip-basic-info"],[1,"trip-status-badge"],[1,"trip-actions"],["title","View Details",1,"trip-action-btn",3,"click"],["title","Edit Trip",1,"trip-action-btn",3,"click"],[1,"trip-card-content"],[1,"trip-route-info"],[1,"route-details"],[1,"route-path"],[1,"trip-timing"],[1,"departure-time"],[1,"arrival-time"],[1,"trip-card-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","revenue"],[1,"no-trips-selected"],[1,"empty-icon"],[1,"no-selection"],[1,"selection-prompt"],[1,"prompt-icon"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Trip Calendar"),o(),a(5,"p"),l(6,"Schedule overview and trip management"),o()(),a(7,"div",3)(8,"button",4),h("click",function(){return i.goToToday()}),l(9," \u{1F4C5} Today "),o(),a(10,"button",5),h("click",function(){return i.scheduleNewTrip()}),l(11," \u2795 Schedule Trip "),o()()(),a(12,"div",6)(13,"div",7)(14,"button",8),h("click",function(){return i.previousMonth()}),l(15," \u2190 "),o(),a(16,"h2",9),l(17),o(),a(18,"button",10),h("click",function(){return i.nextMonth()}),l(19," \u2192 "),o()(),a(20,"div",11)(21,"div",12)(22,"label"),l(23,"Status:"),o(),a(24,"select",13),h("change",function(s){return i.filters.status=s.target.value,i.onFilterChange()}),a(25,"option",14),l(26,"All Status"),o(),a(27,"option",15),l(28,"Scheduled"),o(),a(29,"option",16),l(30,"In Progress"),o(),a(31,"option",17),l(32,"Completed"),o(),a(33,"option",18),l(34,"Delayed"),o(),a(35,"option",19),l(36,"Cancelled"),o()()(),a(37,"div",12)(38,"label"),l(39,"Route:"),o(),a(40,"select",13),h("change",function(s){return i.filters.route=s.target.value,i.onFilterChange()}),v(41,v4,2,2,"option",20),o()(),a(42,"div",12)(43,"label"),l(44,"Driver:"),o(),a(45,"select",13),h("change",function(s){return i.filters.driver=s.target.value,i.onFilterChange()}),v(46,x4,2,2,"option",20),o()(),a(47,"button",21),h("click",function(){return i.clearFilters()}),l(48," \u{1F5D1}\uFE0F Clear "),o()()(),v(49,C4,4,0,"div",22)(50,N4,7,4,"div",23),a(51,"div",24)(52,"h4"),l(53,"Legend"),o(),a(54,"div",25)(55,"div",26),P(56,"span",27),a(57,"span",28),l(58,"Scheduled"),o()(),a(59,"div",26),P(60,"span",29),a(61,"span",28),l(62,"In Progress"),o()(),a(63,"div",26),P(64,"span",30),a(65,"span",28),l(66,"Completed"),o()(),a(67,"div",26),P(68,"span",31),a(69,"span",28),l(70,"Delayed"),o()(),a(71,"div",26),P(72,"span",32),a(73,"span",28),l(74,"Cancelled"),o()()()()()),e&2&&(c(17),_(i.getMonthYear()),c(7),m("value",i.filters.status),c(16),m("value",i.filters.route),c(),m("ngForOf",i.routeOptions),c(4),m("value",i.filters.driver),c(),m("ngForOf",i.driverOptions),c(3),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading))},dependencies:[K,ae,ee,Ge,He],styles:[".trip-calendar-container[_ngcontent-%COMP%]{padding:30px;max-width:1600px;margin:0 auto;background:#f8fafc;min-height:100vh}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2d3748;font-size:28px;font-weight:600;margin-bottom:5px}.header-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.action-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.action-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.action-btn.secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.calendar-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding:20px 25px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;flex-wrap:wrap;gap:20px}.navigation-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.nav-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:2px solid #e2e8f0;border-radius:8px;background:#fff;color:#4a5568;font-size:18px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.nav-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea;transform:translateY(-1px)}.month-year[_ngcontent-%COMP%]{color:#2d3748;font-size:20px;font-weight:600;margin:0;min-width:200px;text-align:center}.filter-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;min-width:120px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#4a5568;font-weight:500}.filter-select[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:13px;background:#fff;color:#4a5568;cursor:pointer;transition:all .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filter-clear-btn[_ngcontent-%COMP%]{padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;color:#718096;font-size:12px;cursor:pointer;transition:all .2s ease}.filter-clear-btn[_ngcontent-%COMP%]:hover{border-color:#f56565;color:#f56565}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.calendar-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:25px}.calendar-grid[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.calendar-header-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background:#f8fafc;border-bottom:2px solid #e2e8f0}.calendar-header-cell[_ngcontent-%COMP%]{padding:15px 10px;text-align:center;font-weight:600;color:#4a5568;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.calendar-week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);border-bottom:1px solid #f1f5f9}.calendar-week[_ngcontent-%COMP%]:last-child{border-bottom:none}.calendar-day[_ngcontent-%COMP%]{min-height:120px;border-right:1px solid #f1f5f9;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;position:relative}.calendar-day[_ngcontent-%COMP%]:last-child{border-right:none}.calendar-day[_ngcontent-%COMP%]:hover{background:#f8fafc}.calendar-day.current-month[_ngcontent-%COMP%]{background:#fff}.calendar-day[_ngcontent-%COMP%]:not(.current-month){background:#f8fafc;color:#a0aec0}.calendar-day.today[_ngcontent-%COMP%]{background:#f0f4ff;border:2px solid #667eea}.calendar-day.selected[_ngcontent-%COMP%]{background:#e6f3ff;border:2px solid #2c5282}.calendar-day.has-trips[_ngcontent-%COMP%]{border-left:4px solid #667eea}.day-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-bottom:1px solid #f1f5f9}.day-number[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;font-size:14px}.calendar-day[_ngcontent-%COMP%]:not(.current-month)   .day-number[_ngcontent-%COMP%]{color:#a0aec0}.trip-count[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-radius:10px;padding:2px 6px;font-size:10px;font-weight:600;min-width:16px;text-align:center}.day-trips[_ngcontent-%COMP%]{flex:1;padding:5px;display:flex;flex-direction:column;gap:2px;overflow:hidden}.trip-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:3px 6px;border-radius:4px;font-size:10px;cursor:pointer;transition:all .2s ease;border-left:3px solid transparent}.trip-item[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px #0000001a}.trip-time[_ngcontent-%COMP%]{font-weight:600;min-width:35px}.trip-route[_ngcontent-%COMP%]{flex:1;font-size:9px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trip-status-icon[_ngcontent-%COMP%]{font-size:10px}.trip-scheduled[_ngcontent-%COMP%]{background:#e6f3ff;color:#2c5282;border-left-color:#2c5282}.trip-in-progress[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621;border-left-color:#c05621}.trip-completed[_ngcontent-%COMP%]{background:#f0fff4;color:#22543d;border-left-color:#22543d}.trip-delayed[_ngcontent-%COMP%]{background:#fefcbf;color:#744210;border-left-color:#744210}.trip-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a;border-left-color:#742a2a}.more-trips[_ngcontent-%COMP%]{text-align:center;color:#718096;font-size:9px;font-style:italic;padding:2px}.day-empty[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:10px}.add-trip-btn[_ngcontent-%COMP%]{width:30px;height:30px;border:2px dashed #cbd5e0;border-radius:50%;background:transparent;color:#a0aec0;font-size:16px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.add-trip-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea;background:#f0f4ff}.day-details[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;height:fit-content;position:sticky;top:20px}.day-details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid #e2e8f0}.day-details-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:18px;font-weight:600;margin:0}.selected-day-trips[_ngcontent-%COMP%]{padding:20px 25px;max-height:600px;overflow-y:auto}.selected-trip-card[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;margin-bottom:15px;transition:all .2s ease}.selected-trip-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 8px #0000001a}.trip-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #f1f5f9;background:#f8fafc}.trip-basic-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.trip-basic-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin:0}.trip-status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;display:inline-flex;align-items:center;gap:4px;width:fit-content}.trip-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.trip-action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e2e8f0;border-radius:6px;background:#fff;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;font-size:12px}.trip-action-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f0f4ff}.trip-card-content[_ngcontent-%COMP%]{padding:20px}.trip-route-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #f1f5f9}.route-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.route-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748;font-size:14px}.route-path[_ngcontent-%COMP%]{color:#718096;font-size:12px}.trip-timing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;text-align:right}.departure-time[_ngcontent-%COMP%]{color:#2d3748;font-weight:600;font-size:14px}.arrival-time[_ngcontent-%COMP%]{color:#718096;font-size:12px}.trip-card-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:12px}.stat-label[_ngcontent-%COMP%]{color:#718096;font-weight:500}.stat-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:600}.stat-value.revenue[_ngcontent-%COMP%]{color:#22543d}.occupancy-very-low[_ngcontent-%COMP%]{color:#e53e3e}.occupancy-low[_ngcontent-%COMP%]{color:#dd6b20}.occupancy-medium[_ngcontent-%COMP%]{color:#d69e2e}.occupancy-high[_ngcontent-%COMP%]{color:#38a169}.no-trips-selected[_ngcontent-%COMP%]{padding:40px 25px;text-align:center;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;opacity:.6}.no-trips-selected[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#4a5568;font-size:16px;font-weight:600;margin-bottom:8px}.no-trips-selected[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin-bottom:20px}.no-selection[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;display:flex;align-items:center;justify-content:center;min-height:400px}.selection-prompt[_ngcontent-%COMP%]{text-align:center;color:#718096}.prompt-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;opacity:.6}.selection-prompt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:20px;font-weight:600;margin-bottom:8px}.selection-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin:0;max-width:300px}.calendar-legend[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;padding:20px 25px;margin-top:25px}.calendar-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin-bottom:15px}.legend-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;border:1px solid transparent}.legend-label[_ngcontent-%COMP%]{font-size:12px;color:#4a5568;font-weight:500}@media (max-width: 1200px){.calendar-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.day-details[_ngcontent-%COMP%]{position:static}}@media (max-width: 768px){.trip-calendar-container[_ngcontent-%COMP%]{padding:20px 15px}.calendar-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.header-actions[_ngcontent-%COMP%]{justify-content:stretch}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.calendar-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch;padding:15px 20px}.navigation-controls[_ngcontent-%COMP%]{justify-content:center}.filter-controls[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{min-width:100px}.calendar-day[_ngcontent-%COMP%]{min-height:80px}.day-details-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.trip-card-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.legend-items[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 480px){.trip-calendar-container[_ngcontent-%COMP%]{padding:15px 10px}.calendar-header[_ngcontent-%COMP%]{padding:15px}.calendar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.calendar-controls[_ngcontent-%COMP%]{padding:15px}.month-year[_ngcontent-%COMP%]{font-size:18px;min-width:150px}.nav-btn[_ngcontent-%COMP%]{width:35px;height:35px;font-size:16px}.calendar-day[_ngcontent-%COMP%]{min-height:60px}.day-header[_ngcontent-%COMP%]{padding:6px 8px}.day-trips[_ngcontent-%COMP%]{padding:3px}.trip-item[_ngcontent-%COMP%]{padding:2px 4px;font-size:9px}.trip-time[_ngcontent-%COMP%]{min-width:30px}.add-trip-btn[_ngcontent-%COMP%]{width:25px;height:25px;font-size:14px}.day-details-header[_ngcontent-%COMP%], .selected-day-trips[_ngcontent-%COMP%], .no-trips-selected[_ngcontent-%COMP%]{padding:15px 20px}.trip-card-header[_ngcontent-%COMP%], .trip-card-content[_ngcontent-%COMP%]{padding:15px}.calendar-legend[_ngcontent-%COMP%]{padding:15px 20px}}"]})};function k4(n,t){if(n&1){let e=O();a(0,"div",43)(1,"button",44),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.acknowledgeAlert(r))}),l(2," \u2713 "),o(),a(3,"button",45),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.dismissAlert(r.id))}),l(4," \u2715 "),o()()}}function V4(n,t){if(n&1&&(a(0,"div",35)(1,"div",36),l(2),o(),a(3,"div",37)(4,"div",38),l(5),o(),a(6,"div",39)(7,"span",40),l(8),o(),a(9,"span",41),l(10),o()()(),v(11,k4,5,0,"div",42),o()),n&2){let e,i=t.$implicit,r=g(2);q(r.getAlertSeverityClass(i.severity)),I("acknowledged",i.acknowledged),c(2),_(r.getAlertIcon(i.type)),c(3),_(i.message),c(3),_((e=r.getTripByAlertId(i.tripId))==null?null:e.tripCode),c(2),_(r.getTimeSinceUpdate(i.timestamp)),c(),m("ngIf",!i.acknowledged)}}function F4(n,t){if(n&1&&(a(0,"div",30)(1,"div",31)(2,"h3"),l(3,"Active Alerts"),o(),a(4,"span",32),l(5),o()(),a(6,"div",33),v(7,V4,12,9,"div",34),o()()),n&2){let e=g();c(5),x("",e.alerts.length," active"),c(2),m("ngForOf",e.alerts.slice(0,3))}}function L4(n,t){n&1&&(a(0,"div",46),P(1,"div",47),a(2,"p"),l(3,"Loading active trips..."),o()())}function $4(n,t){if(n&1&&(a(0,"div",76)(1,"div",77),l(2),o(),a(3,"div",78),l(4),o()()),n&2){let e=g().$implicit;c(2),x(" \u23F0 ",e.delays[e.delays.length-1].duration,"min delay "),c(2),_(e.delays[e.delays.length-1].reason)}}function B4(n,t){if(n&1){let e=O();a(0,"div",54)(1,"div",55)(2,"div",56)(3,"h4"),l(4),o(),a(5,"span",57),l(6),o()(),a(7,"div",58)(8,"span",59),l(9," \u{1F68C} In Progress "),o()()(),a(10,"div",60)(11,"div",61)(12,"span",62),l(13,"Progress"),o(),a(14,"span",63),l(15),o()(),a(16,"div",64),P(17,"div",65),o(),a(18,"div",66)(19,"span",67),l(20),o(),a(21,"span",3),l(22),o()()(),a(23,"div",68)(24,"div",69)(25,"span",70),l(26,"Vehicle:"),o(),a(27,"span",71),l(28),o()(),a(29,"div",69)(30,"span",70),l(31,"Driver:"),o(),a(32,"span",71),l(33),o()(),a(34,"div",69)(35,"span",70),l(36,"Next Stop:"),o(),a(37,"span",71),l(38),o()(),a(39,"div",69)(40,"span",70),l(41,"Occupancy:"),o(),a(42,"span",71),l(43),o()()(),v(44,$4,5,2,"div",72),a(45,"div",73)(46,"button",74),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.viewTripDetails(r))}),l(47," \u{1F441}\uFE0F Details "),o(),a(48,"button",74),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.callDriver(r))}),l(49," \u{1F4DE} Call "),o(),a(50,"button",74),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.updateTripLocation(r))}),l(51," \u{1F4CD} Update "),o(),a(52,"button",75),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.completeTrip(r))}),l(53," \u2705 Complete "),o()()()}if(n&2){let e=t.$implicit,i=g(3);c(4),_(e.tripCode),c(2),Y("",e.origin," \u2192 ",e.destination,""),c(9),x("",e.progress,"%"),c(2),Be("width",e.progress,"%")("background-color",i.getProgressColor(e.progress)),c(3),x("\u{1F4CD} ",e.currentLocation,""),c(2),_(i.getTimeSinceUpdate(e.lastLocationUpdate)),c(6),_(e.busNumber),c(5),_(e.driverName),c(5),_(e.nextStop),c(5),Y("",e.bookedSeats,"/",e.totalSeats,""),c(),m("ngIf",e.delays&&e.delays.length>0)}}function z4(n,t){if(n&1&&(a(0,"div",52),v(1,B4,54,16,"div",53),o()),n&2){let e=g(2);c(),m("ngForOf",e.activeTrips)}}function j4(n,t){if(n&1){let e=O();a(0,"div",88)(1,"div",81)(2,"div",89)(3,"strong"),l(4),o(),a(5,"small"),l(6),o()()(),a(7,"div",82)(8,"div",57)(9,"span",90),l(10),o(),a(11,"span",91),l(12),o()()(),a(13,"div",83)(14,"div",92)(15,"div",93),P(16,"div",65),o(),a(17,"span",94),l(18),o()()(),a(19,"div",84)(20,"div",95)(21,"span",96),l(22),o(),a(23,"small",97),l(24),o()()(),a(25,"div",85)(26,"div",98)(27,"div",99),l(28),o(),a(29,"div",100),l(30),o()()(),a(31,"div",86)(32,"div",101)(33,"button",102),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.viewTripDetails(r))}),l(34," \u{1F441}\uFE0F "),o(),a(35,"button",103),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.callDriver(r))}),l(36," \u{1F4DE} "),o(),a(37,"button",104),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.updateTripLocation(r))}),l(38," \u{1F4CD} "),o(),a(39,"button",105),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.reportIssue(r))}),l(40," \u{1F6A8} "),o(),a(41,"button",106),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.completeTrip(r))}),l(42," \u2705 "),o()()()()}if(n&2){let e=t.$implicit,i=g(3);c(4),_(e.tripCode),c(2),x("Started ",i.getTimeSinceUpdate(e.startedAt),""),c(4),_(e.routeName),c(2),Y("",e.origin," \u2192 ",e.destination,""),c(4),Be("width",e.progress,"%")("background-color",i.getProgressColor(e.progress)),c(2),x("",e.progress,"%"),c(4),_(e.currentLocation),c(2),_(i.getTimeSinceUpdate(e.lastLocationUpdate)),c(4),x("\u{1F68C} ",e.busNumber,""),c(2),x("\u{1F468}\u200D\u2708\uFE0F ",e.driverName,"")}}function U4(n,t){if(n&1&&(a(0,"div",79)(1,"div",80)(2,"div",81),l(3,"Trip"),o(),a(4,"div",82),l(5,"Route"),o(),a(6,"div",83),l(7,"Progress"),o(),a(8,"div",84),l(9,"Current Location"),o(),a(10,"div",85),l(11,"Vehicle & Driver"),o(),a(12,"div",86),l(13,"Actions"),o()(),v(14,j4,43,14,"div",87),o()),n&2){let e=g(2);c(14),m("ngForOf",e.activeTrips)}}function G4(n,t){if(n&1){let e=O();a(0,"div",107)(1,"div",108),l(2,"\u{1F68C}"),o(),a(3,"h3"),l(4,"No Active Trips"),o(),a(5,"p"),l(6,"There are currently no trips in progress."),o(),a(7,"button",7),h("click",function(){C(e);let r=g(2);return y(r.router.navigate(["/trips/schedule"]))}),l(8," \u2795 Schedule New Trip "),o()()}}function H4(n,t){if(n&1&&(a(0,"div",48),v(1,z4,2,1,"div",49)(2,U4,15,1,"div",50)(3,G4,9,0,"div",51),o()),n&2){let e=g();c(),m("ngIf",e.viewMode==="grid"),c(),m("ngIf",e.viewMode==="list"),c(),m("ngIf",e.activeTrips.length===0)}}var Td=class n{constructor(t){this.router=t}activeTrips=[];alerts=[];isLoading=!1;isRefreshing=!1;lastUpdateTime=new Date;updateInterval;UPDATE_INTERVAL_MS=3e4;stats={totalActive:0,onTime:0,delayed:0,averageProgress:0,criticalAlerts:0};viewMode="grid";sortBy="departure";sortDirection="asc";ngOnInit(){this.loadActiveTrips(),this.startRealTimeUpdates()}ngOnDestroy(){this.stopRealTimeUpdates()}loadActiveTrips(){this.isLoading=!0,setTimeout(()=>{this.activeTrips=this.generateMockActiveTrips(),this.alerts=this.generateMockAlerts(),this.calculateStats(),this.sortTrips(),this.isLoading=!1,this.lastUpdateTime=new Date},500)}generateMockActiveTrips(){let t=[],e=new Date,i=Math.floor(Math.random()*4)+5;for(let r=0;r<i;r++){let s=new Date(e.getTime()-Math.random()*4*60*60*1e3),d=240+Math.random()*360,u=Math.min(95,Math.max(5,(e.getTime()-s.getTime())/(d*60*1e3)*100)),p={id:`active-trip-${r+1}`,tripCode:`RB-ACT-${(r+1).toString().padStart(3,"0")}`,routeId:`R00${r+1}`,routeName:this.getRandomRouteName(),origin:this.getRandomCity(),destination:this.getRandomCity(),departureDate:s,departureTime:s.toTimeString().substring(0,5),arrivalTime:new Date(s.getTime()+d*60*1e3).toTimeString().substring(0,5),busId:`B00${r+1}`,busNumber:`RB-${String(100+r).padStart(3,"0")}`,busModel:this.getRandomBusModel(),driverId:`D00${r+1}`,driverName:this.getRandomDriverName(),driverPhone:`+966-50-${String(Math.floor(Math.random()*900)+100)}-${String(Math.floor(Math.random()*9e3)+1e3)}`,totalSeats:50,bookedSeats:Math.floor(Math.random()*45)+5,fare:150+Math.random()*100,revenue:0,startedAt:s,estimatedDuration:d,currentLocation:this.getRandomLocation(),progress:Math.round(u),nextStop:this.getRandomCity(),estimatedArrival:new Date(s.getTime()+d*60*1e3),lastLocationUpdate:new Date(e.getTime()-Math.random()*3e5),delays:Math.random()>.7?[{reason:this.getRandomDelayReason(),duration:Math.floor(Math.random()*60)+10,reportedAt:new Date(e.getTime()-Math.random()*36e5),reportedBy:"Driver"}]:void 0};p.revenue=p.bookedSeats*p.fare,t.push(p)}return t}generateMockAlerts(){let t=[],e=new Date;return this.activeTrips.forEach((i,r)=>{if(Math.random()>.6){let s={id:`alert-${r+1}`,tripId:i.id,type:this.getRandomAlertType(),message:this.getRandomAlertMessage(),timestamp:new Date(e.getTime()-Math.random()*18e5),severity:this.getRandomSeverity(),acknowledged:Math.random()>.5};t.push(s)}}),t}calculateStats(){this.stats.totalActive=this.activeTrips.length,this.stats.delayed=this.activeTrips.filter(t=>t.delays&&t.delays.length>0).length,this.stats.onTime=this.stats.totalActive-this.stats.delayed,this.stats.averageProgress=this.activeTrips.reduce((t,e)=>t+e.progress,0)/this.stats.totalActive||0,this.stats.criticalAlerts=this.alerts.filter(t=>t.severity==="critical"&&!t.acknowledged).length}startRealTimeUpdates(){this.updateInterval=setInterval(()=>{this.updateTripProgress()},this.UPDATE_INTERVAL_MS)}stopRealTimeUpdates(){this.updateInterval&&clearInterval(this.updateInterval)}updateTripProgress(){this.isRefreshing=!0,this.activeTrips.forEach(t=>{t.progress<95&&(t.progress=Math.min(95,t.progress+Math.random()*2),t.lastLocationUpdate=new Date,Math.random()>.7&&(t.currentLocation=this.getRandomLocation()))}),this.calculateStats(),this.lastUpdateTime=new Date,this.isRefreshing=!1}refreshData(){this.loadActiveTrips()}viewTripDetails(t){this.router.navigate(["/trips",t.id])}callDriver(t){window.open(`tel:${t.driverPhone}`)}updateTripLocation(t){let e=prompt("Enter current location:",t.currentLocation);e&&(t.currentLocation=e,t.lastLocationUpdate=new Date,alert("Location updated successfully"))}reportIssue(t){let e=prompt("Please describe the issue:");if(e){let i={id:`alert-${Date.now()}`,tripId:t.id,type:"emergency",message:e,timestamp:new Date,severity:"high",acknowledged:!1};this.alerts.unshift(i),this.calculateStats(),alert("Issue reported successfully")}}completeTrip(t){confirm(`Mark trip ${t.tripCode} as completed?`)&&(this.activeTrips=this.activeTrips.filter(e=>e.id!==t.id),this.calculateStats(),alert("Trip marked as completed"))}acknowledgeAlert(t){t.acknowledged=!0,this.calculateStats()}dismissAlert(t){this.alerts=this.alerts.filter(e=>e.id!==t),this.calculateStats()}getTripByAlertId(t){return this.activeTrips.find(e=>e.id===t)}sortTrips(){this.activeTrips.sort((t,e)=>{let i,r;switch(this.sortBy){case"departure":i=t.departureDate.getTime(),r=e.departureDate.getTime();break;case"progress":i=t.progress,r=e.progress;break;case"location":i=t.currentLocation,r=e.currentLocation;break;case"delay":i=t.delays?.length||0,r=e.delays?.length||0;break;default:return 0}return this.sortDirection==="asc"?i<r?-1:i>r?1:0:i>r?-1:i<r?1:0})}changeSortBy(t){this.sortBy===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=t,this.sortDirection="asc"),this.sortTrips()}switchView(t){this.viewMode=t}getProgressColor(t){return t>=80?"#22c55e":t>=60?"#eab308":t>=40?"#f97316":"#ef4444"}getProgressClass(t){return t>=80?"progress-high":t>=60?"progress-medium":t>=40?"progress-low":"progress-very-low"}getAlertSeverityClass(t){switch(t){case"low":return"alert-low";case"medium":return"alert-medium";case"high":return"alert-high";case"critical":return"alert-critical";default:return"alert-unknown"}}getAlertIcon(t){switch(t){case"delay":return"\u23F0";case"breakdown":return"\u{1F527}";case"emergency":return"\u{1F6A8}";case"route-change":return"\u{1F5FA}\uFE0F";default:return"\u26A0\uFE0F"}}formatDuration(t){let e=Math.floor(t/60),i=Math.round(t%60);return`${e}h ${i}m`}formatCurrency(t){return`SAR ${t.toLocaleString()}`}getTimeSinceUpdate(t){let e=new Date().getTime()-t.getTime(),i=Math.floor(e/6e4);return i<1?"Just now":i<60?`${i}m ago`:`${Math.floor(i/60)}h ago`}getRandomRouteName(){let t=["Riyadh to Jeddah Express","Riyadh to Dammam Direct","Jeddah to Mecca Premium","Riyadh to Abha Scenic","Dammam to Riyadh Business","Mecca to Medina Holy Route"];return t[Math.floor(Math.random()*t.length)]}getRandomCity(){let t=["Riyadh","Jeddah","Dammam","Mecca","Medina","Abha","Taif","Qassim"];return t[Math.floor(Math.random()*t.length)]}getRandomLocation(){let t=["Highway 40, near Taif","Rest Stop - Al Qassim","Approaching Dammam","Highway 50, Riyadh outskirts","Near Abha checkpoint","Mecca city limits","Highway 15, Medina route","Jeddah industrial area"];return t[Math.floor(Math.random()*t.length)]}getRandomBusModel(){let t=["Mercedes Sprinter","Volvo B11R","MAN Coach","Scania Touring","Mercedes Tourismo"];return t[Math.floor(Math.random()*t.length)]}getRandomDriverName(){let t=["Ahmed Al-Rashid","Mohammed Al-Fahad","Abdullah Al-Zahrani","Salem Al-Qurashi","Omar Al-Dosari","Khalid Al-Otaibi"];return t[Math.floor(Math.random()*t.length)]}getRandomDelayReason(){let t=["Heavy traffic congestion","Vehicle maintenance check","Weather conditions","Road construction","Passenger boarding delay","Rest stop extension"];return t[Math.floor(Math.random()*t.length)]}getRandomAlertType(){let t=["delay","breakdown","emergency","route-change"];return t[Math.floor(Math.random()*t.length)]}getRandomAlertMessage(){let t=["Vehicle experiencing minor technical issues","Driver reported heavy traffic ahead","Passenger medical emergency resolved","Alternative route taken due to road closure","Extended rest stop due to weather","Vehicle inspection completed successfully"];return t[Math.floor(Math.random()*t.length)]}getRandomSeverity(){let t=["low","medium","high"];return Math.random()>.9&&t.push("critical"),t[Math.floor(Math.random()*t.length)]}static \u0275fac=function(e){return new(e||n)(w(ne))};static \u0275cmp=J({type:n,selectors:[["app-active-trips"]],decls:94,vars:37,consts:[[1,"active-trips-container"],[1,"active-trips-header"],[1,"header-left"],[1,"last-update"],[1,"update-indicator"],[1,"header-actions"],[1,"action-btn","secondary",3,"click","disabled"],[1,"action-btn","primary",3,"click"],[1,"stats-overview"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-number"],[1,"stat-card","on-time"],[1,"stat-card","delayed"],[1,"stat-card","progress"],[1,"stat-card","alerts"],["class","alerts-panel",4,"ngIf"],[1,"controls-section"],[1,"view-controls"],[1,"view-btn",3,"click"],[1,"sort-controls"],[1,"sort-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","trips-content",4,"ngIf"],[1,"realtime-status"],[1,"status-indicator"],[1,"indicator-dot"],[1,"indicator-text"],[1,"auto-refresh-info"],[1,"alerts-panel"],[1,"alerts-header"],[1,"alerts-count"],[1,"alerts-list"],["class","alert-item",3,"class","acknowledged",4,"ngFor","ngForOf"],[1,"alert-item"],[1,"alert-icon"],[1,"alert-content"],[1,"alert-message"],[1,"alert-meta"],[1,"alert-trip"],[1,"alert-time"],["class","alert-actions",4,"ngIf"],[1,"alert-actions"],["title","Acknowledge",1,"alert-action-btn",3,"click"],["title","Dismiss",1,"alert-action-btn","danger",3,"click"],[1,"loading-container"],[1,"loading-spinner"],[1,"trips-content"],["class","trips-grid",4,"ngIf"],["class","trips-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"trips-grid"],["class","trip-card",4,"ngFor","ngForOf"],[1,"trip-card"],[1,"card-header"],[1,"trip-basic-info"],[1,"route-info"],[1,"trip-status"],[1,"status-badge","in-progress"],[1,"progress-section"],[1,"progress-header"],[1,"progress-label"],[1,"progress-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"location-info"],[1,"current-location"],[1,"trip-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","delays-section",4,"ngIf"],[1,"card-actions"],[1,"action-btn-small","secondary",3,"click"],[1,"action-btn-small","primary",3,"click"],[1,"delays-section"],[1,"delay-indicator"],[1,"delay-reason"],[1,"trips-list"],[1,"list-header"],[1,"list-column","trip-col"],[1,"list-column","route-col"],[1,"list-column","progress-col"],[1,"list-column","location-col"],[1,"list-column","assignment-col"],[1,"list-column","actions-col"],["class","list-row",4,"ngFor","ngForOf"],[1,"list-row"],[1,"trip-info"],[1,"route-name"],[1,"route-path"],[1,"progress-container"],[1,"progress-bar","small"],[1,"progress-text"],[1,"location-container"],[1,"location-text"],[1,"update-time"],[1,"assignment-info"],[1,"vehicle-info"],[1,"driver-info"],[1,"action-buttons"],["title","View Details",1,"action-btn-small","secondary",3,"click"],["title","Call Driver",1,"action-btn-small","secondary",3,"click"],["title","Update Location",1,"action-btn-small","secondary",3,"click"],["title","Report Issue",1,"action-btn-small","danger",3,"click"],["title","Complete Trip",1,"action-btn-small","primary",3,"click"],[1,"empty-state"],[1,"empty-icon"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Active Trips"),o(),a(5,"p"),l(6,"Real-time monitoring and management of trips in progress"),o(),a(7,"div",3)(8,"span",4),l(9,"\u{1F504}"),o(),l(10),j(11,"date"),o()(),a(12,"div",5)(13,"button",6),h("click",function(){return i.refreshData()}),l(14," \u{1F504} Refresh "),o(),a(15,"button",7),h("click",function(){return i.router.navigate(["/trips/schedule"])}),l(16," \u2795 Schedule Trip "),o()()(),a(17,"div",8)(18,"div",9)(19,"div",10),l(20,"\u{1F68C}"),o(),a(21,"div",11)(22,"h3"),l(23,"Total Active"),o(),a(24,"p",12),l(25),o(),a(26,"small"),l(27,"Trips in progress"),o()()(),a(28,"div",13)(29,"div",10),l(30,"\u2705"),o(),a(31,"div",11)(32,"h3"),l(33,"On Time"),o(),a(34,"p",12),l(35),o(),a(36,"small"),l(37,"Running on schedule"),o()()(),a(38,"div",14)(39,"div",10),l(40,"\u23F0"),o(),a(41,"div",11)(42,"h3"),l(43,"Delayed"),o(),a(44,"p",12),l(45),o(),a(46,"small"),l(47,"Behind schedule"),o()()(),a(48,"div",15)(49,"div",10),l(50,"\u{1F4CA}"),o(),a(51,"div",11)(52,"h3"),l(53,"Avg Progress"),o(),a(54,"p",12),l(55),j(56,"number"),o(),a(57,"small"),l(58,"Overall completion"),o()()(),a(59,"div",16)(60,"div",10),l(61,"\u{1F6A8}"),o(),a(62,"div",11)(63,"h3"),l(64,"Critical Alerts"),o(),a(65,"p",12),l(66),o(),a(67,"small"),l(68,"Requiring attention"),o()()()(),v(69,F4,8,2,"div",17),a(70,"div",18)(71,"div",19)(72,"button",20),h("click",function(){return i.switchView("grid")}),l(73," \u229E Grid "),o(),a(74,"button",20),h("click",function(){return i.switchView("list")}),l(75," \u2630 List "),o()(),a(76,"div",21)(77,"label"),l(78,"Sort by:"),o(),a(79,"button",22),h("click",function(){return i.changeSortBy("departure")}),l(80),o(),a(81,"button",22),h("click",function(){return i.changeSortBy("progress")}),l(82),o(),a(83,"button",22),h("click",function(){return i.changeSortBy("delay")}),l(84),o()()(),v(85,L4,4,0,"div",23)(86,H4,4,3,"div",24),a(87,"div",25)(88,"div",26),P(89,"span",27),a(90,"span",28),l(91),o()(),a(92,"div",29),l(93),o()()()),e&2&&(c(8),I("refreshing",i.isRefreshing),c(2),x(" Last updated: ",ie(11,31,i.lastUpdateTime,"HH:mm:ss")," "),c(3),m("disabled",i.isLoading),c(12),_(i.stats.totalActive),c(10),_(i.stats.onTime),c(10),_(i.stats.delayed),c(10),x("",ie(56,34,i.stats.averageProgress,"1.0-0"),"%"),c(4),I("critical",i.stats.criticalAlerts>0),c(7),_(i.stats.criticalAlerts),c(3),m("ngIf",i.alerts.length>0),c(3),I("active",i.viewMode==="grid"),c(2),I("active",i.viewMode==="list"),c(5),I("active",i.sortBy==="departure"),c(),x(" Departure ",i.sortBy==="departure"?i.sortDirection==="asc"?"\u2191":"\u2193":""," "),c(),I("active",i.sortBy==="progress"),c(),x(" Progress ",i.sortBy==="progress"?i.sortDirection==="asc"?"\u2191":"\u2193":""," "),c(),I("active",i.sortBy==="delay"),c(),x(" Delays ",i.sortBy==="delay"?i.sortDirection==="asc"?"\u2191":"\u2193":""," "),c(),m("ngIf",i.isLoading),c(),m("ngIf",!i.isLoading),c(2),I("active",!i.isLoading),c(3),x(" ",i.isLoading?"Loading...":i.isRefreshing?"Updating...":"Live"," "),c(2),x(" Auto-refresh every ",i.UPDATE_INTERVAL_MS/1e3,"s "))},dependencies:[K,ae,ee,Rm,He],styles:[".active-trips-container[_ngcontent-%COMP%]{padding:30px;max-width:1600px;margin:0 auto;background:#f8fafc;min-height:100vh}.active-trips-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding:25px 30px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2d3748;font-size:28px;font-weight:600;margin-bottom:5px}.header-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin-bottom:10px}.last-update[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#4a5568;font-size:13px}.update-indicator[_ngcontent-%COMP%]{font-size:12px;transition:transform .3s ease}.update-indicator.refreshing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.action-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:2px solid #667eea}.action-btn.secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.action-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 8px 20px #667eea4d}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:15px;box-shadow:0 4px 6px #0000000d;transition:all .2s ease;border-left:4px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001a}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#667eea}.stat-card.on-time[_ngcontent-%COMP%]{border-left-color:#22c55e}.stat-card.delayed[_ngcontent-%COMP%]{border-left-color:#f59e0b}.stat-card.progress[_ngcontent-%COMP%]{border-left-color:#8b5cf6}.stat-card.alerts[_ngcontent-%COMP%]{border-left-color:#ef4444}.stat-card.critical[_ngcontent-%COMP%]{border-left-color:#dc2626;background:#fef2f2}.stat-icon[_ngcontent-%COMP%]{font-size:28px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#f0f4ff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:13px;font-weight:500;margin-bottom:5px}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2d3748;margin-bottom:2px}.stat-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:11px}.alerts-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px;border-left:4px solid #f59e0b}.alerts-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid #e2e8f0}.alerts-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin:0}.alerts-count[_ngcontent-%COMP%]{background:#f59e0b;color:#fff;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600}.alerts-list[_ngcontent-%COMP%]{padding:0 25px 20px}.alert-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;border-radius:8px;margin-bottom:10px;border:1px solid #e2e8f0;transition:all .2s ease}.alert-item[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translate(2px)}.alert-item.acknowledged[_ngcontent-%COMP%]{opacity:.6;background:#f8fafc}.alert-item.alert-low[_ngcontent-%COMP%]{border-left:4px solid #10b981}.alert-item.alert-medium[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.alert-item.alert-high[_ngcontent-%COMP%]{border-left:4px solid #ef4444}.alert-item.alert-critical[_ngcontent-%COMP%]{border-left:4px solid #dc2626;background:#fef2f2}.alert-icon[_ngcontent-%COMP%]{font-size:20px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#f8fafc;border-radius:8px}.alert-content[_ngcontent-%COMP%]{flex:1}.alert-message[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:500;margin-bottom:4px}.alert-meta[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:12px;color:#718096}.alert-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.alert-action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e2e8f0;border-radius:6px;background:#fff;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;font-size:14px}.alert-action-btn[_ngcontent-%COMP%]:hover{background:#f7fafc}.alert-action-btn.danger[_ngcontent-%COMP%]:hover{background:#fed7d7;border-color:#f56565;color:#e53e3e}.controls-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding:20px 25px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;flex-wrap:wrap;gap:20px}.view-controls[_ngcontent-%COMP%]{display:flex;gap:8px;background:#f8fafc;padding:4px;border-radius:8px}.view-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;background:transparent;color:#4a5568;font-size:13px;cursor:pointer;transition:all .2s ease}.view-btn.active[_ngcontent-%COMP%], .view-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#667eea;box-shadow:0 2px 4px #0000001a}.sort-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sort-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;font-weight:500}.sort-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:6px;background:#fff;color:#4a5568;font-size:12px;cursor:pointer;transition:all .2s ease}.sort-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea}.sort-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.trips-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:25px;margin-bottom:30px}.trip-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;transition:all .2s ease;border:1px solid #e2e8f0}.trip-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001a;border-color:#667eea}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid #f1f5f9;background:#f8fafc}.trip-basic-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600;margin-bottom:4px}.route-info[_ngcontent-%COMP%]{color:#718096;font-size:13px}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;display:inline-flex;align-items:center;gap:4px}.status-badge.in-progress[_ngcontent-%COMP%]{background:#fff5e6;color:#c05621}.progress-section[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #f1f5f9}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.progress-label[_ngcontent-%COMP%]{color:#4a5568;font-size:13px;font-weight:500}.progress-percentage[_ngcontent-%COMP%]{color:#2d3748;font-size:16px;font-weight:600}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden;margin-bottom:12px}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.location-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.current-location[_ngcontent-%COMP%]{color:#4a5568;font-size:13px;font-weight:500}.last-update[_ngcontent-%COMP%]{color:#718096;font-size:11px}.trip-details[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-label[_ngcontent-%COMP%]{color:#718096;font-size:12px;font-weight:500}.detail-value[_ngcontent-%COMP%]{color:#2d3748;font-size:12px;font-weight:600}.delays-section[_ngcontent-%COMP%]{padding:15px 25px;background:#fef5e7;border-bottom:1px solid #f1f5f9}.delay-indicator[_ngcontent-%COMP%]{color:#c05621;font-size:12px;font-weight:600;margin-bottom:4px}.delay-reason[_ngcontent-%COMP%]{color:#744210;font-size:11px}.card-actions[_ngcontent-%COMP%]{padding:15px 25px;display:flex;gap:8px;flex-wrap:wrap}.action-btn-small[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:6px;font-size:11px;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:4px;flex:1;justify-content:center;min-width:70px}.action-btn-small[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.action-btn-small.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:1px solid #667eea}.action-btn-small.secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.action-btn-small.danger[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a;border:1px solid #f56565}.trips-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;margin-bottom:30px}.list-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr 1fr 1.5fr 1.5fr 1fr;gap:15px;padding:15px 20px;background:#f8fafc;border-bottom:2px solid #e2e8f0;font-weight:600;color:#4a5568;font-size:13px}.list-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr 1fr 1.5fr 1.5fr 1fr;gap:15px;padding:20px;border-bottom:1px solid #f1f5f9;transition:all .2s ease}.list-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.list-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.trip-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;margin-bottom:2px}.trip-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#718096;font-size:11px}.route-name[_ngcontent-%COMP%]{color:#2d3748;font-size:13px;font-weight:500;margin-bottom:2px}.route-path[_ngcontent-%COMP%]{color:#718096;font-size:11px}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.progress-bar.small[_ngcontent-%COMP%]{height:6px;flex:1}.progress-text[_ngcontent-%COMP%]{color:#2d3748;font-size:12px;font-weight:600;min-width:30px}.location-text[_ngcontent-%COMP%]{color:#2d3748;font-size:13px;font-weight:500;margin-bottom:2px}.update-time[_ngcontent-%COMP%]{color:#718096;font-size:10px}.vehicle-info[_ngcontent-%COMP%], .driver-info[_ngcontent-%COMP%]{color:#4a5568;font-size:12px;margin-bottom:2px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.action-buttons[_ngcontent-%COMP%]   .action-btn-small[_ngcontent-%COMP%]{flex:none;min-width:auto;padding:4px 6px;font-size:10px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#718096;text-align:center;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4a5568;font-size:18px;font-weight:600;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin-bottom:20px}.realtime-status[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#fff;border-radius:8px;padding:10px 15px;box-shadow:0 4px 12px #00000026;border:1px solid #e2e8f0;z-index:100}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.indicator-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#e2e8f0;transition:all .3s ease}.status-indicator.active[_ngcontent-%COMP%]   .indicator-dot[_ngcontent-%COMP%]{background:#22c55e;box-shadow:0 0 0 2px #22c55e33;animation:_ngcontent-%COMP%_pulse 2s infinite}.indicator-text[_ngcontent-%COMP%]{color:#4a5568;font-size:12px;font-weight:500}.auto-refresh-info[_ngcontent-%COMP%]{color:#718096;font-size:10px;text-align:center}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #22c55e66}70%{box-shadow:0 0 0 6px #22c55e00}to{box-shadow:0 0 #22c55e00}}@media (max-width: 1200px){.trips-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}.list-header[_ngcontent-%COMP%], .list-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr;gap:10px}.assignment-col[_ngcontent-%COMP%], .location-col[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){.active-trips-container[_ngcontent-%COMP%]{padding:20px 15px}.active-trips-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}.header-actions[_ngcontent-%COMP%]{justify-content:stretch}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.stats-overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:15px}.controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch}.view-controls[_ngcontent-%COMP%], .sort-controls[_ngcontent-%COMP%]{justify-content:center}.trips-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.list-header[_ngcontent-%COMP%], .list-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:8px}.route-col[_ngcontent-%COMP%], .progress-col[_ngcontent-%COMP%]{display:none}.card-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.card-actions[_ngcontent-%COMP%]   .action-btn-small[_ngcontent-%COMP%]{flex:none}.realtime-status[_ngcontent-%COMP%]{bottom:10px;right:10px;left:10px;text-align:center}}@media (max-width: 480px){.active-trips-container[_ngcontent-%COMP%]{padding:15px 10px}.active-trips-header[_ngcontent-%COMP%]{padding:15px}.active-trips-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.stats-overview[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.stat-card[_ngcontent-%COMP%]{padding:15px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.trips-grid[_ngcontent-%COMP%]{gap:15px}.trip-card[_ngcontent-%COMP%]{border-radius:8px}.card-header[_ngcontent-%COMP%], .progress-section[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]{padding:15px 20px}.list-header[_ngcontent-%COMP%], .list-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px;padding:15px}.list-header[_ngcontent-%COMP%]{display:none}.list-column[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9;padding-bottom:10px}.list-column[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}}"]})};var X4=n=>["/umrah",n],W4=n=>["/umrah",n,"edit"];function q4(n,t){if(n&1&&(a(0,"option",25),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),x(" ",e," ")}}function Y4(n,t){n&1&&(a(0,"div",26),P(1,"div",27),a(2,"p"),l(3,"Loading Umrah packages..."),o()())}function Z4(n,t){n&1&&(a(0,"span"),l(1,", "),o())}function J4(n,t){if(n&1&&(a(0,"span",55),l(1),v(2,Z4,2,0,"span",56),o()),n&2){let e=t.$implicit,i=t.last;c(),x(" ",e,""),c(),m("ngIf",!i)}}function K4(n,t){if(n&1){let e=O();a(0,"div",33)(1,"div",34)(2,"div",35)(3,"h3"),l(4),o(),a(5,"p",36),l(6),o()(),a(7,"div",37)(8,"span",38),l(9),j(10,"titlecase"),o()()(),a(11,"div",39)(12,"div",40)(13,"div",41)(14,"span",42),l(15,"\u{1F4C5} Duration:"),o(),a(16,"span",43),l(17),o()(),a(18,"div",41)(19,"span",42),l(20,"\u{1F5D3}\uFE0F Start Date:"),o(),a(21,"span",43),l(22),o()(),a(23,"div",41)(24,"span",42),l(25,"\u{1F465} Pilgrims:"),o(),a(26,"span",43),l(27),o()(),a(28,"div",41)(29,"span",42),l(30,"\u{1F68C} Buses:"),o(),a(31,"span",43),l(32),o()(),a(33,"div",41)(34,"span",42),l(35,"\u{1F4B0} Price:"),o(),a(36,"span",43),l(37),o()()(),a(38,"div",44)(39,"div",45),l(40),o(),a(41,"div",46),P(42,"div",47),o()(),a(43,"div",48)(44,"div",49),l(45,"\u{1F3E8} Hotels:"),o(),a(46,"div",50),v(47,J4,3,2,"span",51),o()()(),a(48,"div",52),h("click",function(r){return C(e),y(r.stopPropagation())}),a(49,"button",53),l(50," \u270F\uFE0F Edit "),o(),a(51,"button",54),h("click",function(r){let s=C(e).$implicit,d=g(2);return y(d.onDeletePackage(s.id,r))}),l(52," \u{1F5D1}\uFE0F Delete "),o()()()}if(n&2){let e=t.$implicit,i=g(2);q(i.getStatusClass(e.status)),m("routerLink",$i(23,X4,e.id)),c(4),_(e.packageName),c(2),x(" \u{1F4CD} From: ",e.departureCity," "),c(2),q(i.getStatusClass(e.status)),c(),x(" ",se(10,21,e.status)," "),c(8),_(i.getDurationText(e.duration)),c(5),_(i.formatDate(e.startDate)),c(5),Y("",e.pilgrims,"/",e.maxCapacity,""),c(5),_(e.busesAssigned),c(5),_(i.formatCurrency(e.pricePerPilgrim)),c(3),x(" Capacity: ",i.getCapacityPercentage(e.pilgrims,e.maxCapacity),"% "),c(2),q(i.getCapacityClass(i.getCapacityPercentage(e.pilgrims,e.maxCapacity))),Be("width",i.getCapacityPercentage(e.pilgrims,e.maxCapacity),"%"),c(5),m("ngForOf",e.hotelBookings),c(2),m("routerLink",$i(25,W4,e.id))}}function Q4(n,t){n&1&&(a(0,"p"),l(1," Try adjusting your filters or search terms. "),o())}function e5(n,t){n&1&&(a(0,"p"),l(1," Create your first Umrah package to get started. "),o())}function t5(n,t){if(n&1&&(a(0,"div",57)(1,"div",58),l(2,"\u{1F54C}"),o(),a(3,"h3"),l(4,"No Umrah packages found"),o(),v(5,Q4,2,0,"p",56)(6,e5,2,0,"p",56),a(7,"button",4),l(8," Create New Package "),o()()),n&2){let e=g(2);c(5),m("ngIf",e.searchTerm||e.statusFilter||e.cityFilter),c(),m("ngIf",!e.searchTerm&&!e.statusFilter&&!e.cityFilter)}}function n5(n,t){if(n&1){let e=O();a(0,"button",64),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.goToPage(r))}),l(1),o()}if(n&2){let e=t.$implicit,i=g(3);I("active",e===i.currentPage),c(),x(" ",e," ")}}function i5(n,t){if(n&1){let e=O();a(0,"div",59)(1,"div",60),l(2),o(),a(3,"div",61)(4,"button",62),h("click",function(){C(e);let r=g(2);return y(r.goToPage(r.currentPage-1))}),l(5," \u2190 Previous "),o(),v(6,n5,2,3,"button",63),a(7,"button",62),h("click",function(){C(e);let r=g(2);return y(r.goToPage(r.currentPage+1))}),l(8," Next \u2192 "),o()()()}if(n&2){let e=g(2);c(2),Ke(" Showing ",(e.currentPage-1)*e.itemsPerPage+1,"-",e.Math.min(e.currentPage*e.itemsPerPage,e.totalItems)," of ",e.totalItems," packages "),c(2),m("disabled",e.currentPage===1),c(2),m("ngForOf",e.getPageNumbers()),c(),m("disabled",e.currentPage===e.getTotalPages())}}function r5(n,t){if(n&1&&(a(0,"div",28)(1,"div",29),v(2,K4,53,27,"div",30),o(),v(3,t5,9,2,"div",31)(4,i5,9,6,"div",32),o()),n&2){let e=g();c(2),m("ngForOf",e.getPaginatedPackages()),c(),m("ngIf",e.filteredPackages.length===0),c(),m("ngIf",e.getTotalPages()>1)}}var Tg=class n{API_URL="/api/umrah";getUmrahPackages(t){return G([{id:"UP001",packageName:"Premium Umrah Package - Ramadan",departureCity:"Riyadh",duration:10,startDate:new Date("2025-03-15T06:00:00"),endDate:new Date("2025-03-25T20:00:00"),pilgrims:185,maxCapacity:200,status:"upcoming",busesAssigned:4,driversAssigned:["DR001","DR002","DR003","DR004"],hotelBookings:["Hilton Makkah Convention","Marriott Madinah"],totalCost:25e5,pricePerPilgrim:12500,createdAt:new Date("2025-01-15T10:00:00"),updatedAt:new Date("2025-01-20T14:30:00")},{id:"UP002",packageName:"Economy Umrah Package - February",departureCity:"Jeddah",duration:7,startDate:new Date("2025-02-10T08:00:00"),endDate:new Date("2025-02-17T18:00:00"),pilgrims:145,maxCapacity:150,status:"active",busesAssigned:3,driversAssigned:["DR005","DR006","DR007"],hotelBookings:["Al-Safwah Hotel Makkah","Madinah Palace"],totalCost:1125e3,pricePerPilgrim:7500,createdAt:new Date("2025-01-10T09:00:00"),updatedAt:new Date("2025-01-25T11:15:00")},{id:"UP003",packageName:"VIP Umrah Experience",departureCity:"Dammam",duration:14,startDate:new Date("2025-04-01T05:00:00"),endDate:new Date("2025-04-15T22:00:00"),pilgrims:48,maxCapacity:50,status:"draft",busesAssigned:1,driversAssigned:["DR008"],hotelBookings:["Raffles Makkah Palace","Four Seasons Madinah"],totalCost:15e5,pricePerPilgrim:3e4,createdAt:new Date("2025-01-22T16:00:00"),updatedAt:new Date("2025-01-22T16:00:00")},{id:"UP004",packageName:"Standard Umrah Package - March",departureCity:"Riyadh",duration:8,startDate:new Date("2025-03-05T07:00:00"),endDate:new Date("2025-03-13T19:00:00"),pilgrims:92,maxCapacity:100,status:"completed",busesAssigned:2,driversAssigned:["DR009","DR010"],hotelBookings:["Makkah Towers","Madinah Grand Hotel"],totalCost:9e5,pricePerPilgrim:9e3,createdAt:new Date("2025-01-05T11:00:00"),updatedAt:new Date("2025-03-13T20:00:00")},{id:"UP005",packageName:"Family Umrah Package",departureCity:"Makkah",duration:5,startDate:new Date("2025-02-20T09:00:00"),endDate:new Date("2025-02-25T17:00:00"),pilgrims:78,maxCapacity:80,status:"active",busesAssigned:2,driversAssigned:["DR011","DR012"],hotelBookings:["Family Suites Makkah","Al-Haram View Hotel"],totalCost:64e4,pricePerPilgrim:8e3,createdAt:new Date("2025-01-18T13:00:00"),updatedAt:new Date("2025-02-18T10:00:00")}]).pipe(Me(500),te(i=>t?i.filter(r=>{if(t.status&&r.status!==t.status||t.departureCity&&r.departureCity!==t.departureCity)return!1;if(t.dateRange){let s=new Date(r.startDate);if(s<t.dateRange.start||s>t.dateRange.end)return!1}return!0}):i))}getUmrahPackage(t){return this.getUmrahPackages().pipe(te(e=>e.find(i=>i.id===t)),Me(300))}deleteUmrahPackage(t){return G(!0).pipe(Me(500))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},Rd=class n{constructor(t){this.umrahService=t}packages=[];filteredPackages=[];loading=!1;searchTerm="";statusFilter="";cityFilter="";sortBy="startDate";sortDirection="desc";currentPage=1;itemsPerPage=12;totalItems=0;Math=Math;ngOnInit(){this.loadPackages()}loadPackages(){this.loading=!0,this.umrahService.getUmrahPackages().subscribe({next:t=>{this.packages=t,this.applyFilters(),this.loading=!1},error:t=>{console.error("Error loading packages:",t),this.loading=!1}})}applyFilters(){let t=this.packages;this.searchTerm&&(t=t.filter(e=>e.packageName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.departureCity.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.statusFilter&&(t=t.filter(e=>e.status===this.statusFilter)),this.cityFilter&&(t=t.filter(e=>e.departureCity===this.cityFilter)),t.sort((e,i)=>{let r,s;switch(this.sortBy){case"packageName":r=e.packageName.toLowerCase(),s=i.packageName.toLowerCase();break;case"startDate":r=new Date(e.startDate),s=new Date(i.startDate);break;case"duration":r=e.duration,s=i.duration;break;case"pilgrims":r=e.pilgrims,s=i.pilgrims;break;case"status":r=e.status,s=i.status;break;default:return 0}return r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0}),this.filteredPackages=t,this.totalItems=t.length,this.currentPage=1}onSearchChange(){this.applyFilters()}onFilterChange(){this.applyFilters()}toggleSortDirection(){this.sortDirection=this.sortDirection==="asc"?"desc":"asc",this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}getStatusClass(t){return{draft:"status-draft",upcoming:"status-upcoming",active:"status-active",completed:"status-completed",cancelled:"status-cancelled"}[t]||""}getCapacityPercentage(t,e){return Math.round(t/e*100)}getCapacityClass(t){return t>=95?"capacity-full":t>=80?"capacity-high":t>=50?"capacity-medium":"capacity-low"}getDurationText(t){return t===1?"1 day":`${t} days`}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getPaginatedPackages(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredPackages.slice(t,e)}getTotalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}goToPage(t){t>=1&&t<=this.getTotalPages()&&(this.currentPage=t)}getPageNumbers(){let t=this.getTotalPages(),e=[],i=5,r=Math.max(1,this.currentPage-Math.floor(i/2)),s=Math.min(t,r+i-1);s-r<i-1&&(r=Math.max(1,s-i+1));for(let d=r;d<=s;d++)e.push(d);return e}onDeletePackage(t,e){e.stopPropagation(),confirm("Are you sure you want to delete this Umrah package? This action cannot be undone.")&&this.umrahService.deleteUmrahPackage(t).subscribe({next:()=>{this.loadPackages()},error:i=>{console.error("Error deleting package:",i),alert("Failed to delete package. Please try again.")}})}getUniqueCities(){return[...new Set(this.packages.map(e=>e.departureCity))].sort()}static \u0275fac=function(e){return new(e||n)(w(Tg))};static \u0275cmp=J({type:n,selectors:[["app-umrah-list"]],decls:46,vars:8,consts:[[1,"umrah-list-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["routerLink","/umrah/create",1,"action-btn","primary"],[1,"filters-section"],[1,"search-container"],["type","text","placeholder","\u{1F50D} Search packages...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filters-container"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],["value","draft"],["value","upcoming"],["value","active"],["value","completed"],["value","cancelled"],[3,"value",4,"ngFor","ngForOf"],["value","startDate"],["value","packageName"],["value","duration"],["value","pilgrims"],["value","status"],[1,"sort-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","packages-section",4,"ngIf"],[3,"value"],[1,"loading-container"],[1,"loading-spinner"],[1,"packages-section"],[1,"packages-grid"],["class","package-card",3,"class","routerLink",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"package-card",3,"routerLink"],[1,"package-header"],[1,"package-info"],[1,"departure-info"],[1,"package-status"],[1,"status-badge"],[1,"package-body"],[1,"package-meta"],[1,"meta-row"],[1,"meta-label"],[1,"meta-value"],[1,"capacity-section"],[1,"capacity-label"],[1,"progress-bar"],[1,"progress-fill"],[1,"hotels-section"],[1,"hotels-label"],[1,"hotels-list"],["class","hotel-name",4,"ngFor","ngForOf"],[1,"package-actions",3,"click"],["title","Edit Package",1,"action-btn","secondary",3,"routerLink"],["title","Delete Package",1,"action-btn","danger",3,"click"],[1,"hotel-name"],[4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-controls"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"\u{1F54C} Umrah Package Management"),o(),a(5,"p"),l(6,"Manage your Umrah pilgrimage packages and itineraries"),o()(),a(7,"div",3)(8,"button",4),l(9," \u2795 Create New Package "),o()()(),a(10,"div",5)(11,"div",6)(12,"input",7),L("ngModelChange",function(s){return $(i.searchTerm,s)||(i.searchTerm=s),s}),h("input",function(){return i.onSearchChange()}),o()(),a(13,"div",8)(14,"select",9),L("ngModelChange",function(s){return $(i.statusFilter,s)||(i.statusFilter=s),s}),h("change",function(){return i.onFilterChange()}),a(15,"option",10),l(16,"All Statuses"),o(),a(17,"option",11),l(18,"Draft"),o(),a(19,"option",12),l(20,"Upcoming"),o(),a(21,"option",13),l(22,"Active"),o(),a(23,"option",14),l(24,"Completed"),o(),a(25,"option",15),l(26,"Cancelled"),o()(),a(27,"select",9),L("ngModelChange",function(s){return $(i.cityFilter,s)||(i.cityFilter=s),s}),h("change",function(){return i.onFilterChange()}),a(28,"option",10),l(29,"All Cities"),o(),v(30,q4,2,2,"option",16),o(),a(31,"select",9),L("ngModelChange",function(s){return $(i.sortBy,s)||(i.sortBy=s),s}),h("change",function(){return i.applyFilters()}),a(32,"option",17),l(33,"Sort by Date"),o(),a(34,"option",18),l(35,"Sort by Name"),o(),a(36,"option",19),l(37,"Sort by Duration"),o(),a(38,"option",20),l(39,"Sort by Pilgrims"),o(),a(40,"option",21),l(41,"Sort by Status"),o()(),a(42,"button",22),h("click",function(){return i.toggleSortDirection()}),l(43),o()()(),v(44,Y4,4,0,"div",23)(45,r5,5,3,"div",24),o()),e&2&&(c(12),F("ngModel",i.searchTerm),c(2),F("ngModel",i.statusFilter),c(13),F("ngModel",i.cityFilter),c(3),m("ngForOf",i.getUniqueCities()),c(),F("ngModel",i.sortBy),c(12),x(" ",i.getSortIcon(i.sortBy)," "),c(),m("ngIf",i.loading),c(),m("ngIf",!i.loading))},dependencies:[K,ae,ee,Ge,qn,gi,et,Re,Oe,Se,Pe,Ie,it],styles:[".umrah-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background:#f8fafc;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:28px;font-weight:700}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px}.search-container[_ngcontent-%COMP%]{margin-bottom:15px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:border-color .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filters-container[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;font-size:14px;cursor:pointer;transition:border-color .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.sort-btn[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;cursor:pointer;font-size:16px;transition:all .2s ease}.sort-btn[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;background:#f7fafc}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:15px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.packages-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.packages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:20px;padding:20px}.package-card[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:12px;padding:20px;cursor:pointer;transition:all .3s ease;background:#fff;position:relative;overflow:hidden}.package-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.package-card.status-active[_ngcontent-%COMP%]{border-left:4px solid #48bb78}.package-card.status-upcoming[_ngcontent-%COMP%]{border-left:4px solid #4299e1}.package-card.status-draft[_ngcontent-%COMP%]{border-left:4px solid #a0aec0}.package-card.status-completed[_ngcontent-%COMP%]{border-left:4px solid #38b2ac}.package-card.status-cancelled[_ngcontent-%COMP%]{border-left:4px solid #f56565}.package-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.package-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:18px;font-weight:600;line-height:1.3}.departure-info[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-badge.status-upcoming[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.status-badge.status-completed[_ngcontent-%COMP%]{background:#b2f5ea;color:#234e52}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.package-body[_ngcontent-%COMP%]{margin-bottom:20px}.package-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.meta-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px}.meta-label[_ngcontent-%COMP%]{color:#718096;font-weight:500}.meta-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:600}.capacity-section[_ngcontent-%COMP%]{margin-bottom:15px}.capacity-label[_ngcontent-%COMP%]{font-size:14px;color:#718096;margin-bottom:8px;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.progress-fill.capacity-low[_ngcontent-%COMP%]{background:#48bb78}.progress-fill.capacity-medium[_ngcontent-%COMP%]{background:#ed8936}.progress-fill.capacity-high[_ngcontent-%COMP%]{background:#f6ad55}.progress-fill.capacity-full[_ngcontent-%COMP%]{background:#f56565}.hotels-section[_ngcontent-%COMP%]{margin-bottom:15px}.hotels-label[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500;margin-bottom:8px}.hotels-list[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;line-height:1.4}.hotel-name[_ngcontent-%COMP%]{font-weight:500}.package-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding-top:15px;border-top:1px solid #e2e8f0}.action-btn.secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568;border:1px solid #e2e8f0;padding:8px 16px;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#cbd5e0;transform:translateY(-1px)}.action-btn.danger[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a;border:1px solid #f56565;padding:8px 16px;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s ease}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#f56565;color:#fff;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:24px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 25px;color:#718096;font-size:16px;max-width:400px;line-height:1.5}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-top:1px solid #e2e8f0;background:#f8fafc}.pagination-info[_ngcontent-%COMP%]{font-size:14px;color:#718096}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;background:#fff;color:#4a5568;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s ease}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.page-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.umrah-list-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.filters-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-select[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]{width:100%}.packages-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px;padding:15px}.package-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:flex-start}.package-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:center}.pagination-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.package-card[_ngcontent-%COMP%]{padding:15px}.package-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.action-btn[_ngcontent-%COMP%]{font-size:11px;padding:6px 12px}}"]})};var o5=n=>["/umrah",n,"edit"];function a5(n,t){if(n&1&&(a(0,"div",58)(1,"h4"),l(2,"Description"),o(),a(3,"p"),l(4),o()()),n&2){let e=g(3);c(4),_(e.packageData.description)}}function s5(n,t){if(n&1&&(a(0,"div",59),l(1),o()),n&2){let e=t.$implicit;c(),x(" \u{1F3E8} ",e," ")}}function l5(n,t){if(n&1&&(a(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3"),l(4,"\u{1F4CB} Basic Information"),o(),a(5,"div",30)(6,"div",31)(7,"span",32),l(8,"Package Name:"),o(),a(9,"span",33),l(10),o()(),a(11,"div",31)(12,"span",32),l(13,"Departure City:"),o(),a(14,"span",33),l(15),o()(),a(16,"div",31)(17,"span",32),l(18,"Duration:"),o(),a(19,"span",33),l(20),o()(),a(21,"div",31)(22,"span",32),l(23,"Start Date:"),o(),a(24,"span",33),l(25),o()(),a(26,"div",31)(27,"span",32),l(28,"End Date:"),o(),a(29,"span",33),l(30),o()(),a(31,"div",31)(32,"span",32),l(33,"Price per Pilgrim:"),o(),a(34,"span",33),l(35),o()()(),v(36,a5,5,1,"div",34),o(),a(37,"div",29)(38,"h3"),l(39,"\u{1F465} Capacity & Booking"),o(),a(40,"div",35)(41,"div",36)(42,"div",37),l(43),o(),a(44,"div",38),l(45,"Filled"),o()(),a(46,"div",39)(47,"div",40)(48,"span",41),l(49),o(),a(50,"span",42),l(51,"Current Pilgrims"),o()(),a(52,"div",40)(53,"span",41),l(54),o(),a(55,"span",42),l(56,"Total Capacity"),o()(),a(57,"div",40)(58,"span",41),l(59),o(),a(60,"span",42),l(61,"Available Spots"),o()()()(),a(62,"div",43),P(63,"div",44),o()(),a(64,"div",29)(65,"h3"),l(66,"\u{1F4B0} Financial Information"),o(),a(67,"div",45)(68,"div",46)(69,"span",47),l(70,"Price per Pilgrim"),o(),a(71,"span",48),l(72),o()(),a(73,"div",46)(74,"span",47),l(75,"Current Revenue"),o(),a(76,"span",48),l(77),o()(),a(78,"div",46)(79,"span",47),l(80,"Potential Revenue"),o(),a(81,"span",48),l(82),o()(),a(83,"div",46)(84,"span",47),l(85,"Revenue Achievement"),o(),a(86,"span",48),l(87),o()()()(),a(88,"div",29)(89,"h3"),l(90,"\u{1F68C} Resource Allocation"),o(),a(91,"div",49)(92,"div",50)(93,"div",51),l(94,"\u{1F68C}"),o(),a(95,"div",52)(96,"span",53),l(97),o(),a(98,"span",54),l(99,"Buses Assigned"),o()()(),a(100,"div",50)(101,"div",51),l(102,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(103,"div",52)(104,"span",53),l(105),o(),a(106,"span",54),l(107,"Drivers Assigned"),o()()(),a(108,"div",50)(109,"div",51),l(110,"\u{1F3E8}"),o(),a(111,"div",52)(112,"span",53),l(113),o(),a(114,"span",54),l(115,"Hotel Bookings"),o()()()(),a(116,"div",55)(117,"h4"),l(118,"Hotel Bookings"),o(),a(119,"div",56),v(120,s5,2,1,"div",57),o()()()()()),n&2){let e=g(2);c(10),_(e.packageData.packageName),c(5),x("\u{1F4CD} ",e.packageData.departureCity,""),c(5),_(e.getDurationText(e.packageData.duration)),c(5),_(e.formatDate(e.packageData.startDate)),c(5),_(e.formatDate(e.packageData.endDate)),c(5),_(e.formatCurrency(e.packageData.pricePerPilgrim)),c(),m("ngIf",e.packageData.description),c(7),x("",e.getCapacityPercentage(e.packageData.pilgrims,e.packageData.maxCapacity),"%"),c(6),_(e.packageData.pilgrims),c(5),_(e.packageData.maxCapacity),c(5),_(e.packageData.maxCapacity-e.packageData.pilgrims),c(4),q(e.getCapacityClass(e.getCapacityPercentage(e.packageData.pilgrims,e.packageData.maxCapacity))),Be("width",e.getCapacityPercentage(e.packageData.pilgrims,e.packageData.maxCapacity),"%"),c(9),_(e.formatCurrency(e.packageData.pricePerPilgrim)),c(5),_(e.formatCurrency(e.packageData.pilgrims*e.packageData.pricePerPilgrim)),c(5),_(e.formatCurrency(e.packageData.totalCost)),c(5),x("",e.getCapacityPercentage(e.packageData.pilgrims*e.packageData.pricePerPilgrim,e.packageData.totalCost),"%"),c(10),_(e.packageData.busesAssigned),c(8),_(e.packageData.driversAssigned.length),c(8),_(e.packageData.hotelBookings.length),c(7),m("ngForOf",e.packageData.hotelBookings)}}function c5(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g(2).$implicit,i=g(4);c(),x(" - ",i.formatTime(e.endTime),"")}}function d5(n,t){if(n&1&&(a(0,"div",79),l(1),v(2,c5,2,1,"span",80),o()),n&2){let e=g().$implicit,i=g(4);c(),x(" \u{1F550} ",i.formatTime(e.startTime)," "),c(),m("ngIf",e.endTime)}}function u5(n,t){if(n&1&&(a(0,"span",83),l(1),o()),n&2){let e=g(2).$implicit;c(),x(" \u{1F68C} Bus: ",e.busId," ")}}function p5(n,t){if(n&1&&(a(0,"span",83),l(1),o()),n&2){let e=g(2).$implicit;c(),x(" \u{1F468}\u200D\u2708\uFE0F Driver: ",e.driverId," ")}}function m5(n,t){if(n&1&&(a(0,"div",81),v(1,u5,2,1,"span",82)(2,p5,2,1,"span",82),o()),n&2){let e=g().$implicit;c(),m("ngIf",e.busId),c(),m("ngIf",e.driverId)}}function g5(n,t){if(n&1&&(a(0,"div",84)(1,"strong"),l(2,"\u{1F4DD} Notes:"),o(),l(3),o()),n&2){let e=g().$implicit;c(3),x(" ",e.notes," ")}}function f5(n,t){if(n&1&&(a(0,"div",69)(1,"div",70)(2,"span",71),l(3),o()(),a(4,"div",72)(5,"div",73)(6,"h5"),l(7),o(),v(8,d5,3,2,"div",74),o(),a(9,"p",75),l(10),o(),a(11,"div",76),l(12),o(),v(13,m5,3,2,"div",77)(14,g5,4,1,"div",78),o()()),n&2){let e=t.$implicit,i=g(4);c(),q(e.type),c(2),_(i.getTypeIcon(e.type)),c(4),_(e.title),c(),m("ngIf",e.startTime),c(2),_(e.description),c(2),x(" \u{1F4CD} ",e.location," "),c(),m("ngIf",e.busId||e.driverId),c(),m("ngIf",e.notes)}}function _5(n,t){if(n&1&&(a(0,"div",64)(1,"div",65)(2,"h4"),l(3),o(),a(4,"span",66),l(5),o()(),a(6,"div",67),v(7,f5,15,9,"div",68),o()()),n&2){let e=t.$implicit,i=g(3);c(3),x("Day ",e,""),c(2),_(i.formatDate(i.getItineraryByDay()[e][0].date)),c(2),m("ngForOf",i.getItineraryByDay()[e])}}function h5(n,t){if(n&1&&(a(0,"div",60)(1,"div",61)(2,"h3"),l(3,"\u{1F4C5} Complete Itinerary"),o(),a(4,"p"),l(5),o()(),a(6,"div",62),v(7,_5,8,3,"div",63),o()()),n&2){let e=g(2);c(5),x("Day-by-day schedule for ",e.packageData.packageName,""),c(2),m("ngForOf",e.getGroupedDays())}}function v5(n,t){if(n&1&&(a(0,"div",89)(1,"div",90)(2,"div",91)(3,"h4"),l(4),o(),a(5,"p",92),l(6),o()(),a(7,"div",93)(8,"span",37),l(9),o(),a(10,"span",38),l(11,"seats"),o()()(),a(12,"div",94)(13,"h5"),l(14,"\u{1F468}\u200D\u2708\uFE0F Assigned Driver"),o(),a(15,"div",95)(16,"div",96)(17,"span",97),l(18,"Name:"),o(),a(19,"span",98),l(20),o()(),a(21,"div",96)(22,"span",97),l(23,"Phone:"),o(),a(24,"span",98),l(25),o()(),a(26,"div",96)(27,"span",97),l(28,"License:"),o(),a(29,"span",98),l(30),o()()()()()),n&2){let e=t.$implicit;c(4),x("\u{1F68C} ",e.busNumber,""),c(2),_(e.model),c(3),_(e.capacity),c(11),_(e.driverName),c(5),_(e.driverPhone),c(5),_(e.licenseNumber)}}function x5(n,t){if(n&1&&(a(0,"div",85)(1,"div",86)(2,"h3"),l(3,"\u{1F68C} Assigned Buses & Drivers"),o(),a(4,"p"),l(5,"Fleet resources allocated for this package"),o()(),a(6,"div",87),v(7,v5,31,6,"div",88),o()()),n&2){let e=g(2);c(7),m("ngForOf",e.assignedBuses)}}function C5(n,t){if(n&1&&(a(0,"span",117),l(1),o()),n&2){let e=t.$implicit;c(),x(" ",e," ")}}function y5(n,t){if(n&1&&(a(0,"div",114)(1,"h5"),l(2,"\u2728 Amenities"),o(),a(3,"div",115),v(4,C5,2,1,"span",116),o()()),n&2){let e=g().$implicit;c(4),m("ngForOf",e.amenities)}}function b5(n,t){if(n&1&&(a(0,"div",103)(1,"div",104)(2,"h4"),l(3),o(),a(4,"span",105),l(5),o()(),a(6,"div",106)(7,"div",107)(8,"span",108),l(9,"\u{1F4C5} Check-in:"),o(),a(10,"span",109),l(11),o()(),a(12,"div",107)(13,"span",108),l(14,"\u{1F4C5} Check-out:"),o(),a(15,"span",109),l(16),o()(),a(17,"div",107)(18,"span",108),l(19,"\u{1F3E0} Rooms Booked:"),o(),a(20,"span",109),l(21),o()(),a(22,"div",107)(23,"span",108),l(24,"\u{1F6CF}\uFE0F Room Type:"),o(),a(25,"span",109),l(26),o()(),a(27,"div",107)(28,"span",108),l(29,"\u{1F4B0} Cost per Night:"),o(),a(30,"span",109),l(31),o()(),a(32,"div",107)(33,"span",108),l(34,"\u{1F4B0} Total Cost:"),o(),a(35,"span",109),l(36),o()()(),a(37,"div",110)(38,"h5"),l(39,"\u{1F4DE} Contact Information"),o(),a(40,"div",111)(41,"div",112),l(42),o(),a(43,"div",112),l(44),o(),a(45,"div",112),l(46),o()()(),v(47,y5,5,1,"div",113),o()),n&2){let e=t.$implicit,i=g(3);c(3),x("\u{1F3E8} ",e.hotelName,""),c(2),x("\u{1F4CD} ",e.location,""),c(6),_(i.formatDateTime(e.checkInDate)),c(5),_(i.formatDateTime(e.checkOutDate)),c(5),_(e.roomsBooked),c(5),_(e.roomType),c(5),_(i.formatCurrency(e.costPerNight)),c(5),_(i.formatCurrency(e.totalCost)),c(6),x("\u{1F4DE} ",e.contactInfo.phone,""),c(2),x("\u2709\uFE0F ",e.contactInfo.email,""),c(2),x("\u{1F4CD} ",e.contactInfo.address,""),c(),m("ngIf",e.amenities.length>0)}}function E5(n,t){if(n&1&&(a(0,"div",99)(1,"div",100)(2,"h3"),l(3,"\u{1F3E8} Hotel Accommodations"),o(),a(4,"p"),l(5,"Lodging arrangements for the pilgrimage"),o()(),a(6,"div",101),v(7,b5,48,12,"div",102),o()()),n&2){let e=g(2);c(7),m("ngForOf",e.accommodations)}}function D5(n,t){if(n&1&&(a(0,"div",127)(1,"div",128)(2,"div",129),l(3,"\u{1F4B0}"),o(),a(4,"div",130)(5,"div",131),l(6),o(),a(7,"div",132),l(8,"Total Revenue"),o()()(),a(9,"div",128)(10,"div",129),l(11,"\u2B50"),o(),a(12,"div",130)(13,"div",131),l(14),o(),a(15,"div",132),l(16,"Average Rating"),o(),a(17,"div",133),l(18),o()()(),a(19,"div",128)(20,"div",129),l(21,"\u2705"),o(),a(22,"div",130)(23,"div",131),l(24),o(),a(25,"div",132),l(26,"Completion Rate"),o()()(),a(27,"div",128)(28,"div",129),l(29,"\u23F0"),o(),a(30,"div",130)(31,"div",131),l(32),o(),a(33,"div",132),l(34,"On-Time Rate"),o()()()()),n&2){let e=g(3);c(6),_(e.formatCurrency(e.packageStats.totalRevenue)),c(8),x("",e.packageStats.avgRating,"/5"),c(4),_(e.getRatingStars(e.packageStats.avgRating)),c(6),x("",e.packageStats.completionRate,"%"),c(8),x("",e.packageStats.onTimeRate,"%")}}function M5(n,t){if(n&1&&(a(0,"div",118)(1,"div",119)(2,"h3"),l(3,"\u{1F4C8} Package Statistics"),o(),a(4,"p"),l(5,"Performance metrics and analytics"),o()(),v(6,D5,35,5,"div",120),a(7,"div",121)(8,"div",122)(9,"h4"),l(10,"\u{1F4CA} Package Timeline"),o(),a(11,"div",123)(12,"div",124)(13,"span",125),l(14,"Created:"),o(),a(15,"span",126),l(16),o()(),a(17,"div",124)(18,"span",125),l(19,"Last Updated:"),o(),a(20,"span",126),l(21),o()(),a(22,"div",124)(23,"span",125),l(24,"Days Until Departure:"),o(),a(25,"span",126),l(26),o()()()()()()),n&2){let e=g(2);c(6),m("ngIf",e.packageStats),c(10),_(e.formatDateTime(e.packageData.createdAt)),c(5),_(e.formatDateTime(e.packageData.updatedAt)),c(5),x(" ",e.Math.max(0,e.Math.ceil((e.packageData.startDate.getTime()-e.Date.now())/(1e3*60*60*24)))," days ")}}function S5(n,t){if(n&1){let e=O();a(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"a",7),l(5,"\u{1F54C} Umrah Packages"),o(),l(6),o(),a(7,"h1"),l(8),o(),a(9,"div",8)(10,"span",9),l(11),j(12,"titlecase"),o(),a(13,"span",10),l(14),o()()(),a(15,"div",11)(16,"button",12),l(17," \u270F\uFE0F Edit Package "),o(),a(18,"select",13),h("change",function(r){C(e);let s=g();return y(s.onStatusChange(r.target.value))}),a(19,"option",14),l(20,"Draft"),o(),a(21,"option",15),l(22,"Upcoming"),o(),a(23,"option",16),l(24,"Active"),o(),a(25,"option",17),l(26,"Completed"),o(),a(27,"option",18),l(28,"Cancelled"),o()()()(),a(29,"div",19)(30,"button",20),h("click",function(){C(e);let r=g();return y(r.setActiveTab("overview"))}),l(31," \u{1F4CA} Overview "),o(),a(32,"button",20),h("click",function(){C(e);let r=g();return y(r.setActiveTab("itinerary"))}),l(33," \u{1F4C5} Itinerary "),o(),a(34,"button",20),h("click",function(){C(e);let r=g();return y(r.setActiveTab("buses"))}),l(35," \u{1F68C} Buses & Drivers "),o(),a(36,"button",20),h("click",function(){C(e);let r=g();return y(r.setActiveTab("accommodations"))}),l(37," \u{1F3E8} Accommodations "),o(),a(38,"button",20),h("click",function(){C(e);let r=g();return y(r.setActiveTab("stats"))}),l(39," \u{1F4C8} Statistics "),o()(),a(40,"div",21),v(41,l5,121,23,"div",22)(42,h5,8,2,"div",23)(43,x5,8,1,"div",24)(44,E5,8,1,"div",25)(45,M5,27,4,"div",26),o()()}if(n&2){let e=g();c(6),x(" / ",e.packageData.packageName," "),c(2),_(e.packageData.packageName),c(2),q(e.getStatusClass(e.packageData.status)),c(),x(" ",se(12,23,e.packageData.status)," "),c(3),x("ID: ",e.packageData.id,""),c(2),m("routerLink",$i(25,o5,e.packageData.id)),c(2),m("value",e.packageData.status),c(12),I("active",e.activeTab==="overview"),c(2),I("active",e.activeTab==="itinerary"),c(2),I("active",e.activeTab==="buses"),c(2),I("active",e.activeTab==="accommodations"),c(2),I("active",e.activeTab==="stats"),c(3),m("ngIf",e.activeTab==="overview"),c(),m("ngIf",e.activeTab==="itinerary"),c(),m("ngIf",e.activeTab==="buses"),c(),m("ngIf",e.activeTab==="accommodations"),c(),m("ngIf",e.activeTab==="stats")}}function I5(n,t){n&1&&(a(0,"div",134),P(1,"div",135),a(2,"p"),l(3,"Loading package details..."),o()())}function P5(n,t){n&1&&(a(0,"div",136)(1,"div",137),l(2,"\u274C"),o(),a(3,"h3"),l(4,"Package Not Found"),o(),a(5,"p"),l(6,"The requested Umrah package could not be found."),o(),a(7,"button",138),l(8," \u2190 Back to Packages "),o()())}var Rg=class n{API_URL="/api/umrah";getUmrahPackage(t){let i=[{id:"UP001",packageName:"Premium Umrah Package - Ramadan",departureCity:"Riyadh",duration:10,startDate:new Date("2025-03-15T06:00:00"),endDate:new Date("2025-03-25T20:00:00"),pilgrims:185,maxCapacity:200,status:"upcoming",busesAssigned:4,driversAssigned:["DR001","DR002","DR003","DR004"],hotelBookings:["Hilton Makkah Convention","Marriott Madinah"],totalCost:25e5,pricePerPilgrim:12500,description:"A premium Umrah experience during the blessed month of Ramadan, featuring luxury accommodations, comfortable transportation, and guided spiritual activities.",createdAt:new Date("2025-01-15T10:00:00"),updatedAt:new Date("2025-01-20T14:30:00")},{id:"UP002",packageName:"Economy Umrah Package - February",departureCity:"Jeddah",duration:7,startDate:new Date("2025-02-10T08:00:00"),endDate:new Date("2025-02-17T18:00:00"),pilgrims:145,maxCapacity:150,status:"active",busesAssigned:3,driversAssigned:["DR005","DR006","DR007"],hotelBookings:["Al-Safwah Hotel Makkah","Madinah Palace"],totalCost:1125e3,pricePerPilgrim:7500,description:"An affordable Umrah package designed for pilgrims seeking a meaningful spiritual journey without compromising on comfort and safety.",createdAt:new Date("2025-01-10T09:00:00"),updatedAt:new Date("2025-01-25T11:15:00")},{id:"UP003",packageName:"VIP Umrah Experience",departureCity:"Dammam",duration:14,startDate:new Date("2025-04-01T05:00:00"),endDate:new Date("2025-04-15T22:00:00"),pilgrims:48,maxCapacity:50,status:"draft",busesAssigned:1,driversAssigned:["DR008"],hotelBookings:["Raffles Makkah Palace","Four Seasons Madinah"],totalCost:15e5,pricePerPilgrim:3e4,description:"VIP Umrah experience with luxury accommodations and personalized services.",createdAt:new Date("2025-01-22T16:00:00"),updatedAt:new Date("2025-01-22T16:00:00")},{id:"UP004",packageName:"Standard Umrah Package - March",departureCity:"Riyadh",duration:8,startDate:new Date("2025-03-05T07:00:00"),endDate:new Date("2025-03-13T19:00:00"),pilgrims:92,maxCapacity:100,status:"completed",busesAssigned:2,driversAssigned:["DR009","DR010"],hotelBookings:["Makkah Towers","Madinah Grand Hotel"],totalCost:9e5,pricePerPilgrim:9e3,description:"Standard Umrah package with comfortable accommodations.",createdAt:new Date("2025-01-05T11:00:00"),updatedAt:new Date("2025-03-13T20:00:00")},{id:"UP005",packageName:"Family Umrah Package",departureCity:"Makkah",duration:5,startDate:new Date("2025-02-20T09:00:00"),endDate:new Date("2025-02-25T17:00:00"),pilgrims:78,maxCapacity:80,status:"active",busesAssigned:2,driversAssigned:["DR011","DR012"],hotelBookings:["Family Suites Makkah","Al-Haram View Hotel"],totalCost:64e4,pricePerPilgrim:8e3,description:"Family-friendly Umrah package with suitable accommodations for families with children.",createdAt:new Date("2025-01-18T13:00:00"),updatedAt:new Date("2025-02-18T10:00:00")}].find(r=>r.id===t);if(i)return G(i).pipe(Me(300));{let r={id:t,packageName:`Umrah Package ${t}`,departureCity:"Riyadh",duration:7,startDate:new Date("2025-03-01T06:00:00"),endDate:new Date("2025-03-08T18:00:00"),pilgrims:50,maxCapacity:60,status:"draft",busesAssigned:1,driversAssigned:["DR001"],hotelBookings:["Standard Hotel Makkah"],totalCost:42e4,pricePerPilgrim:7e3,description:"Standard Umrah package with basic amenities.",createdAt:new Date,updatedAt:new Date};return G(r).pipe(Me(300))}}getPackageItinerary(t){return G([{id:"IT001",day:1,date:new Date("2025-03-15T06:00:00"),type:"travel",title:"Departure from Riyadh",description:"Comfortable bus journey from Riyadh Central Bus Station to the holy city of Makkah",startTime:"06:00",endTime:"14:00",location:"Riyadh \u2192 Makkah",busId:"BUS001",driverId:"DR001",notes:"Prayer breaks scheduled at 10:00 AM and 12:30 PM. Light refreshments will be served."},{id:"IT002",day:1,date:new Date("2025-03-15T15:00:00"),type:"accommodation",title:"Hotel Check-in & Welcome",description:"Check-in at premium accommodation with welcome package distribution",startTime:"15:00",endTime:"17:00",location:"Hilton Makkah Convention",accommodationId:"ACC001",notes:"Distribute room keys, welcome packages, and conduct orientation session"},{id:"IT003",day:1,date:new Date("2025-03-15T20:00:00"),type:"activity",title:"First Umrah Performance",description:"Perform the blessed Umrah rituals at Masjid al-Haram with experienced guide",startTime:"20:00",endTime:"02:00",location:"Masjid al-Haram",notes:"Group guide will provide step-by-step instructions for Tawaf and Sa'i"},{id:"IT004",day:2,date:new Date("2025-03-16T08:00:00"),type:"activity",title:"Holy Sites Visit",description:"Visit to Cave of Hira, Jabal al-Nour, and other significant Islamic historical sites",startTime:"08:00",endTime:"16:00",location:"Various Holy Sites in Makkah",busId:"BUS001",driverId:"DR001",notes:"Guided tour with historical context and spiritual significance explained"},{id:"IT005",day:3,date:new Date("2025-03-17T09:00:00"),type:"travel",title:"Journey to Madinah",description:"Comfortable bus journey from Makkah to the enlightened city of Madinah",startTime:"09:00",endTime:"13:00",location:"Makkah \u2192 Madinah",busId:"BUS001",driverId:"DR001",notes:"Rest stop at halfway point with refreshments"},{id:"IT006",day:3,date:new Date("2025-03-17T14:00:00"),type:"accommodation",title:"Madinah Hotel Check-in",description:"Check-in at Madinah accommodation near the Prophet's Mosque",startTime:"14:00",endTime:"16:00",location:"Marriott Madinah",accommodationId:"ACC002",notes:"Room allocation and brief about Madinah etiquettes"},{id:"IT007",day:3,date:new Date("2025-03-17T17:00:00"),type:"activity",title:"Visit to Prophet's Mosque",description:"First visit to Masjid an-Nabawi for prayers and reflection",startTime:"17:00",endTime:"21:00",location:"Masjid an-Nabawi",notes:"Prayer in the blessed mosque and visit to the Rawdah"},{id:"IT008",day:4,date:new Date("2025-03-18T08:00:00"),type:"activity",title:"Madinah Historical Sites",description:"Visit to Quba Mosque, Mount Uhud, and other historical locations",startTime:"08:00",endTime:"17:00",location:"Historical Sites in Madinah",busId:"BUS002",driverId:"DR002",notes:"Educational tour with historical significance of each location"}]).pipe(Me(400))}getAssignedBuses(t){return G([{id:"BUS001",busNumber:"RLD-001",model:"Mercedes Travego",capacity:50,driverName:"Ahmed Al-Rashid",driverPhone:"+966 50 123 4567",licenseNumber:"DL001"},{id:"BUS002",busNumber:"RLD-002",model:"Volvo 9700",capacity:45,driverName:"Mohammed Al-Fahad",driverPhone:"+966 50 234 5678",licenseNumber:"DL002"},{id:"BUS003",busNumber:"RLD-003",model:"Scania Touring",capacity:55,driverName:"Omar Al-Salem",driverPhone:"+966 50 345 6789",licenseNumber:"DL003"}]).pipe(Me(300))}getPackageAccommodations(t){return G([{id:"ACC001",hotelName:"Hilton Makkah Convention",location:"Makkah",checkInDate:new Date("2025-03-15T15:00:00"),checkOutDate:new Date("2025-03-17T11:00:00"),roomsBooked:100,roomType:"Standard Double",costPerNight:450,totalCost:9e4,contactInfo:{phone:"+966 12 555 0001",email:"reservations@hiltonmakkah.com",address:"King Abdul Aziz Road, Makkah, Saudi Arabia"},amenities:["WiFi","Air Conditioning","Room Service","Prayer Mats","Qibla Direction"]},{id:"ACC002",hotelName:"Marriott Madinah",location:"Madinah",checkInDate:new Date("2025-03-17T14:00:00"),checkOutDate:new Date("2025-03-25T12:00:00"),roomsBooked:100,roomType:"Deluxe Room",costPerNight:380,totalCost:304e3,contactInfo:{phone:"+966 14 555 0002",email:"info@marriottmadinah.com",address:"Al-Haram Street, Madinah, Saudi Arabia"},amenities:["WiFi","Air Conditioning","Buffet Breakfast","Prayer Mats","Shuttle Service"]}]).pipe(Me(300))}getPackageStats(t){return G({totalRevenue:2312500,avgRating:4.7,completionRate:98.5,onTimeRate:96.2}).pipe(Me(200))}updatePackageStatus(t,e){return G(!0).pipe(Me(500))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},Od=class n{constructor(t,e){this.route=t;this.umrahService=e}packageData=null;itinerary=[];assignedBuses=[];accommodations=[];packageStats=null;loading=!1;packageId="";Math=Math;Date=Date;activeTab="overview";ngOnInit(){this.route.params.subscribe(t=>{this.packageId=t.id,this.loadPackageDetails()})}loadPackageDetails(){this.loading=!0,this.umrahService.getUmrahPackage(this.packageId).subscribe({next:t=>{this.packageData=t,this.loading=!1},error:t=>{console.error("Error loading package:",t),this.loading=!1}}),this.umrahService.getPackageItinerary(this.packageId).subscribe({next:t=>{this.itinerary=t},error:t=>{console.error("Error loading itinerary:",t)}}),this.umrahService.getAssignedBuses(this.packageId).subscribe({next:t=>{this.assignedBuses=t},error:t=>{console.error("Error loading buses:",t)}}),this.umrahService.getPackageAccommodations(this.packageId).subscribe({next:t=>{this.accommodations=t},error:t=>{console.error("Error loading accommodations:",t)}}),this.umrahService.getPackageStats(this.packageId).subscribe({next:t=>{this.packageStats=t},error:t=>{console.error("Error loading stats:",t)}})}setActiveTab(t){this.activeTab=t}getStatusClass(t){return{draft:"status-draft",upcoming:"status-upcoming",active:"status-active",completed:"status-completed",cancelled:"status-cancelled"}[t]||""}getTypeIcon(t){return{travel:"\u{1F68C}",accommodation:"\u{1F3E8}",activity:"\u{1F54C}",rest:"\u{1F634}"}[t]||"\u{1F4CD}"}getCapacityPercentage(t,e){return Math.round(t/e*100)}getCapacityClass(t){return t>=95?"capacity-full":t>=80?"capacity-high":t>=50?"capacity-medium":"capacity-low"}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatDateTime(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}formatTime(t){return t}getDurationText(t){return t===1?"1 day":`${t} days`}getRatingStars(t){let e=Math.floor(t),i=t%1>=.5,r="\u2B50".repeat(e);return i&&(r+="\u2B50"),r}onStatusChange(t){confirm(`Are you sure you want to change the status to ${t}?`)&&this.umrahService.updatePackageStatus(this.packageId,t).subscribe({next:()=>{this.packageData&&(this.packageData.status=t)},error:e=>{console.error("Error updating status:",e),alert("Failed to update status. Please try again.")}})}getItineraryByDay(){let t={};return this.itinerary.forEach(e=>{t[e.day]||(t[e.day]=[]),t[e.day].push(e)}),t}getGroupedDays(){return Object.keys(this.getItineraryByDay()).map(Number).sort((t,e)=>t-e)}static \u0275fac=function(e){return new(e||n)(w(Te),w(Rg))};static \u0275cmp=J({type:n,selectors:[["app-umrah-detail"]],decls:3,vars:3,consts:[["class","umrah-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"umrah-detail-container"],[1,"detail-header"],[1,"header-content"],[1,"breadcrumb"],["routerLink","/umrah"],[1,"header-meta"],[1,"status-badge"],[1,"package-id"],[1,"header-actions"],[1,"action-btn","secondary",3,"routerLink"],[1,"status-select",3,"change","value"],["value","draft"],["value","upcoming"],["value","active"],["value","completed"],["value","cancelled"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],[1,"tab-content"],["class","overview-content",4,"ngIf"],["class","itinerary-content",4,"ngIf"],["class","buses-content",4,"ngIf"],["class","accommodations-content",4,"ngIf"],["class","stats-content",4,"ngIf"],[1,"overview-content"],[1,"overview-grid"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],["class","description",4,"ngIf"],[1,"capacity-visual"],[1,"capacity-circle"],[1,"capacity-number"],[1,"capacity-label"],[1,"capacity-details"],[1,"capacity-item"],[1,"capacity-count"],[1,"capacity-desc"],[1,"progress-bar"],[1,"progress-fill"],[1,"financial-grid"],[1,"financial-item"],[1,"financial-label"],[1,"financial-value"],[1,"resource-grid"],[1,"resource-item"],[1,"resource-icon"],[1,"resource-details"],[1,"resource-count"],[1,"resource-label"],[1,"hotels-section"],[1,"hotels-list"],["class","hotel-item",4,"ngFor","ngForOf"],[1,"description"],[1,"hotel-item"],[1,"itinerary-content"],[1,"itinerary-header"],[1,"timeline-container"],["class","day-section",4,"ngFor","ngForOf"],[1,"day-section"],[1,"day-header"],[1,"day-date"],[1,"day-timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-icon"],[1,"timeline-content"],[1,"timeline-header"],["class","timeline-time",4,"ngIf"],[1,"timeline-description"],[1,"timeline-location"],["class","timeline-details",4,"ngIf"],["class","timeline-notes",4,"ngIf"],[1,"timeline-time"],[4,"ngIf"],[1,"timeline-details"],["class","detail-item",4,"ngIf"],[1,"detail-item"],[1,"timeline-notes"],[1,"buses-content"],[1,"buses-header"],[1,"buses-grid"],["class","bus-card",4,"ngFor","ngForOf"],[1,"bus-card"],[1,"bus-header"],[1,"bus-info"],[1,"bus-model"],[1,"bus-capacity"],[1,"driver-info"],[1,"driver-details"],[1,"driver-item"],[1,"driver-label"],[1,"driver-value"],[1,"accommodations-content"],[1,"accommodations-header"],[1,"accommodations-grid"],["class","accommodation-card",4,"ngFor","ngForOf"],[1,"accommodation-card"],[1,"accommodation-header"],[1,"location-badge"],[1,"accommodation-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"contact-info"],[1,"contact-details"],[1,"contact-item"],["class","amenities",4,"ngIf"],[1,"amenities"],[1,"amenities-list"],["class","amenity-tag",4,"ngFor","ngForOf"],[1,"amenity-tag"],[1,"stats-content"],[1,"stats-header"],["class","stats-grid",4,"ngIf"],[1,"additional-stats"],[1,"stats-section"],[1,"timeline-stats"],[1,"timeline-stat"],[1,"timeline-label"],[1,"timeline-value"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"rating-stars"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"],["routerLink","/umrah",1,"action-btn","primary"]],template:function(e,i){e&1&&v(0,S5,46,27,"div",0)(1,I5,4,0,"div",1)(2,P5,9,0,"div",2),e&2&&(m("ngIf",!i.loading&&i.packageData),c(),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&!i.packageData))},dependencies:[K,ae,ee,Ge,qn,gi],styles:['.umrah-detail-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background:#f8fafc;min-height:100vh}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#718096;margin-bottom:10px}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:28px;font-weight:700}.header-meta[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-badge.status-upcoming[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.status-badge.status-draft[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.status-badge.status-completed[_ngcontent-%COMP%]{background:#b2f5ea;color:#234e52}.status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.package-id[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.action-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.action-btn.secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568;border:1px solid #e2e8f0}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#cbd5e0;transform:translateY(-1px)}.status-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;font-size:14px;cursor:pointer;transition:border-color .2s ease}.status-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;gap:4px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;background:transparent;color:#718096;font-size:14px;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#4a5568}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;box-shadow:0 2px 4px #667eea4d}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.overview-content[_ngcontent-%COMP%]{padding:30px}.overview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:25px}.info-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;transition:all .2s ease}.info-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:15px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #edf2f7}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#718096;font-weight:500;font-size:14px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-weight:600;font-size:14px}.description[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #e2e8f0}.description[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:16px;font-weight:600}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4a5568;line-height:1.6}.capacity-visual[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px;margin-bottom:20px}.capacity-circle[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background:conic-gradient(#667eea 0deg,#667eea var(--percentage, 0deg),#e2e8f0 var(--percentage, 0deg));display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}.capacity-circle[_ngcontent-%COMP%]:before{content:"";position:absolute;width:70px;height:70px;background:#fff;border-radius:50%}.capacity-number[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#2d3748;z-index:1}.capacity-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;z-index:1}.capacity-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.capacity-item[_ngcontent-%COMP%]{text-align:center}.capacity-count[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#2d3748}.capacity-desc[_ngcontent-%COMP%]{display:block;font-size:12px;color:#718096;margin-top:5px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.progress-fill.capacity-low[_ngcontent-%COMP%]{background:#48bb78}.progress-fill.capacity-medium[_ngcontent-%COMP%]{background:#ed8936}.progress-fill.capacity-high[_ngcontent-%COMP%]{background:#f6ad55}.progress-fill.capacity-full[_ngcontent-%COMP%]{background:#f56565}.financial-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.financial-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:15px;background:#fff;border-radius:8px;border:1px solid #e2e8f0}.financial-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.financial-value[_ngcontent-%COMP%]{font-size:18px;color:#2d3748;font-weight:700}.resource-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:20px}.resource-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:#fff;border-radius:8px;border:1px solid #e2e8f0}.resource-icon[_ngcontent-%COMP%]{font-size:32px}.resource-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.resource-count[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#2d3748}.resource-label[_ngcontent-%COMP%]{font-size:12px;color:#718096}.hotels-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:20px 0 15px;color:#2d3748;font-size:16px;font-weight:600;border-top:1px solid #e2e8f0;padding-top:20px}.hotels-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hotel-item[_ngcontent-%COMP%]{padding:10px 15px;background:#fff;border:1px solid #e2e8f0;border-radius:6px;font-size:14px;color:#2d3748}.itinerary-content[_ngcontent-%COMP%]{padding:30px}.itinerary-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.itinerary-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.itinerary-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.timeline-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.day-section[_ngcontent-%COMP%]{margin-bottom:40px}.day-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:15px 20px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:10px}.day-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.day-date[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.day-timeline[_ngcontent-%COMP%]{position:relative;padding-left:40px}.day-timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:20px;top:0;bottom:0;width:2px;background:#e2e8f0}.timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:30px}.timeline-marker[_ngcontent-%COMP%]{position:absolute;left:-28px;top:0;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px #0000001a}.timeline-marker.travel[_ngcontent-%COMP%]{background:#4299e1}.timeline-marker.accommodation[_ngcontent-%COMP%]{background:#38b2ac}.timeline-marker.activity[_ngcontent-%COMP%]{background:#ed8936}.timeline-marker.rest[_ngcontent-%COMP%]{background:#9f7aea}.timeline-icon[_ngcontent-%COMP%]{font-size:16px}.timeline-content[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:20px;box-shadow:0 2px 4px #0000000d}.timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}.timeline-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.timeline-time[_ngcontent-%COMP%]{background:#f7fafc;padding:4px 8px;border-radius:4px;font-size:12px;color:#4a5568;font-weight:500}.timeline-description[_ngcontent-%COMP%]{margin:0 0 15px;color:#4a5568;line-height:1.5}.timeline-location[_ngcontent-%COMP%]{margin-bottom:10px;color:#718096;font-size:14px;font-weight:500}.timeline-details[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:10px}.detail-item[_ngcontent-%COMP%]{background:#edf2f7;padding:4px 8px;border-radius:4px;font-size:12px;color:#4a5568}.timeline-notes[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #fed7d7;border-radius:6px;padding:10px;font-size:14px;color:#742a2a}.buses-content[_ngcontent-%COMP%]{padding:30px}.buses-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.buses-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.buses-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.buses-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:25px}.bus-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;transition:all .2s ease}.bus-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.bus-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.bus-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;color:#2d3748;font-size:18px;font-weight:600}.bus-model[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.bus-capacity[_ngcontent-%COMP%]{text-align:center}.capacity-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#667eea}.capacity-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#718096}.driver-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:16px;font-weight:600}.driver-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.driver-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.driver-label[_ngcontent-%COMP%]{color:#718096;font-size:14px;font-weight:500}.driver-value[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:600}.accommodations-content[_ngcontent-%COMP%]{padding:30px}.accommodations-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.accommodations-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.accommodations-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.accommodations-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:25px}.accommodation-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;transition:all .2s ease}.accommodation-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.accommodation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.accommodation-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.location-badge[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600}.accommodation-details[_ngcontent-%COMP%]{margin-bottom:20px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #edf2f7}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{color:#718096;font-size:14px;font-weight:500}.detail-value[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:600}.contact-info[_ngcontent-%COMP%]{margin-bottom:20px;padding-top:15px;border-top:1px solid #e2e8f0}.contact-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:16px;font-weight:600}.contact-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.contact-item[_ngcontent-%COMP%]{font-size:14px;color:#4a5568}.amenities[_ngcontent-%COMP%]{padding-top:15px;border-top:1px solid #e2e8f0}.amenities[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:16px;font-weight:600}.amenities-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.amenity-tag[_ngcontent-%COMP%]{background:#e6fffa;color:#234e52;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.stats-content[_ngcontent-%COMP%]{padding:30px}.stats-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.stats-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:25px;margin-bottom:40px}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px;padding:25px;text-align:center;transition:transform .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.stat-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:8px}.stat-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9;font-weight:500}.rating-stars[_ngcontent-%COMP%]{margin-top:5px;font-size:16px}.additional-stats[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px}.stats-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600}.timeline-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.timeline-stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#fff;border:1px solid #e2e8f0;border-radius:8px}.timeline-label[_ngcontent-%COMP%]{color:#718096;font-size:14px;font-weight:500}.timeline-value[_ngcontent-%COMP%]{color:#2d3748;font-size:14px;font-weight:600}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;text-align:center;margin:20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:24px;font-weight:600}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 25px;color:#718096;font-size:16px}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}@media (max-width: 768px){.umrah-detail-container[_ngcontent-%COMP%]{padding:15px}.detail-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.tab-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.tab-btn[_ngcontent-%COMP%]{justify-content:flex-start;padding:16px 20px}.overview-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.capacity-visual[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.financial-grid[_ngcontent-%COMP%], .resource-grid[_ngcontent-%COMP%], .buses-grid[_ngcontent-%COMP%], .accommodations-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.timeline-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.day-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}.timeline-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:flex-start}.timeline-details[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.info-card[_ngcontent-%COMP%], .bus-card[_ngcontent-%COMP%], .accommodation-card[_ngcontent-%COMP%], .tab-content[_ngcontent-%COMP%], .overview-content[_ngcontent-%COMP%], .itinerary-content[_ngcontent-%COMP%], .buses-content[_ngcontent-%COMP%], .accommodations-content[_ngcontent-%COMP%], .stats-content[_ngcontent-%COMP%]{padding:20px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.capacity-circle[_ngcontent-%COMP%]{width:80px;height:80px}.capacity-circle[_ngcontent-%COMP%]:before{width:56px;height:56px}.capacity-number[_ngcontent-%COMP%]{font-size:16px}.day-timeline[_ngcontent-%COMP%]{padding-left:30px}.timeline-marker[_ngcontent-%COMP%]{left:-23px;width:30px;height:30px}.timeline-icon[_ngcontent-%COMP%]{font-size:14px}}']})};var T5=()=>[1,2,3,4];function R5(n,t){if(n&1){let e=O();a(0,"div",24),h("click",function(){let r=C(e).$implicit,s=g(2);return y(s.goToStep(r))}),a(1,"div",25)(2,"span",26),l(3),o(),a(4,"span",27),l(5),o()(),a(6,"div",28),l(7),o()()}if(n&2){let e=t.$implicit,i=g(2);I("active",i.currentStep===e)("completed",i.currentStep>e)("valid",i.isStepValid(e)),c(3),_(i.getStepIcon(e)),c(2),_(e),c(2),_(i.getStepTitle(e))}}function O5(n,t){n&1&&(a(0,"span"),l(1,"Package name is required"),o())}function w5(n,t){n&1&&(a(0,"span"),l(1,"Package name must be at least 3 characters"),o())}function A5(n,t){if(n&1&&(a(0,"div",52),v(1,O5,2,0,"span",53)(2,w5,2,0,"span",53),o()),n&2){let e,i,r=g(3);c(),m("ngIf",(e=r.packageForm.get("basicInfo.packageName"))==null||e.errors==null?null:e.errors.required),c(),m("ngIf",(i=r.packageForm.get("basicInfo.packageName"))==null||i.errors==null?null:i.errors.minlength)}}function N5(n,t){if(n&1&&(a(0,"option",54),l(1),o()),n&2){let e=t.$implicit;m("value",e),c(),_(e)}}function k5(n,t){n&1&&(a(0,"div",52),l(1," Departure city is required "),o())}function V5(n,t){n&1&&(a(0,"div",52),l(1," Start date is required "),o())}function F5(n,t){n&1&&(a(0,"span"),l(1,"Duration is required"),o())}function L5(n,t){n&1&&(a(0,"span"),l(1,"Duration must be at least 3 days"),o())}function $5(n,t){n&1&&(a(0,"span"),l(1,"Duration cannot exceed 30 days"),o())}function B5(n,t){if(n&1&&(a(0,"div",52),v(1,F5,2,0,"span",53)(2,L5,2,0,"span",53)(3,$5,2,0,"span",53),o()),n&2){let e,i,r,s=g(3);c(),m("ngIf",(e=s.packageForm.get("basicInfo.duration"))==null||e.errors==null?null:e.errors.required),c(),m("ngIf",(i=s.packageForm.get("basicInfo.duration"))==null||i.errors==null?null:i.errors.min),c(),m("ngIf",(r=s.packageForm.get("basicInfo.duration"))==null||r.errors==null?null:r.errors.max)}}function z5(n,t){n&1&&(a(0,"span"),l(1,"Maximum capacity is required"),o())}function j5(n,t){n&1&&(a(0,"span"),l(1,"Capacity must be at least 10 pilgrims"),o())}function U5(n,t){n&1&&(a(0,"span"),l(1,"Capacity cannot exceed 500 pilgrims"),o())}function G5(n,t){if(n&1&&(a(0,"div",52),v(1,z5,2,0,"span",53)(2,j5,2,0,"span",53)(3,U5,2,0,"span",53),o()),n&2){let e,i,r,s=g(3);c(),m("ngIf",(e=s.packageForm.get("basicInfo.maxCapacity"))==null||e.errors==null?null:e.errors.required),c(),m("ngIf",(i=s.packageForm.get("basicInfo.maxCapacity"))==null||i.errors==null?null:i.errors.min),c(),m("ngIf",(r=s.packageForm.get("basicInfo.maxCapacity"))==null||r.errors==null?null:r.errors.max)}}function H5(n,t){n&1&&(a(0,"span"),l(1,"Price per pilgrim is required"),o())}function X5(n,t){n&1&&(a(0,"span"),l(1,"Price must be at least 1000 SAR"),o())}function W5(n,t){if(n&1&&(a(0,"div",52),v(1,H5,2,0,"span",53)(2,X5,2,0,"span",53),o()),n&2){let e,i,r=g(3);c(),m("ngIf",(e=r.packageForm.get("basicInfo.pricePerPilgrim"))==null||e.errors==null?null:e.errors.required),c(),m("ngIf",(i=r.packageForm.get("basicInfo.pricePerPilgrim"))==null||i.errors==null?null:i.errors.min)}}function q5(n,t){if(n&1){let e=O();a(0,"div",29)(1,"div",30)(2,"h2"),l(3,"\u{1F4CB} Basic Information"),o(),a(4,"p"),l(5,"Enter the fundamental details of your Umrah package"),o()(),a(6,"div",31)(7,"div",32)(8,"div",33)(9,"label",34),l(10,"Package Name *"),o(),a(11,"input",35),h("change",function(){C(e);let r=g(2);return y(r.onDateOrDurationChange())}),o(),v(12,A5,3,2,"div",36),o(),a(13,"div",37)(14,"label",38),l(15,"Departure City *"),o(),a(16,"select",39)(17,"option",40),l(18,"Select departure city"),o(),v(19,N5,2,2,"option",41),o(),v(20,k5,2,0,"div",36),o(),a(21,"div",37)(22,"label",42),l(23,"Start Date *"),o(),P(24,"input",43),v(25,V5,2,0,"div",36),o(),a(26,"div",37)(27,"label",44),l(28,"Duration (Days) *"),o(),a(29,"input",45),h("change",function(){C(e);let r=g(2);return y(r.onDateOrDurationChange())}),o(),v(30,B5,4,3,"div",36),o(),a(31,"div",37)(32,"label",46),l(33,"Maximum Capacity *"),o(),P(34,"input",47),v(35,G5,4,3,"div",36),o(),a(36,"div",37)(37,"label",48),l(38,"Price per Pilgrim (SAR) *"),o(),P(39,"input",49),v(40,W5,3,2,"div",36),o(),a(41,"div",33)(42,"label",50),l(43,"Package Description"),o(),P(44,"textarea",51),o()()()()}if(n&2){let e,i,r,s,d,u,p=g(2);c(12),m("ngIf",((e=p.packageForm.get("basicInfo.packageName"))==null?null:e.touched)&&((e=p.packageForm.get("basicInfo.packageName"))==null?null:e.errors)),c(7),m("ngForOf",p.cities),c(),m("ngIf",((i=p.packageForm.get("basicInfo.departureCity"))==null?null:i.touched)&&((i=p.packageForm.get("basicInfo.departureCity"))==null||i.errors==null?null:i.errors.required)),c(4),m("min",p.minDate),c(),m("ngIf",((r=p.packageForm.get("basicInfo.startDate"))==null?null:r.touched)&&((r=p.packageForm.get("basicInfo.startDate"))==null||r.errors==null?null:r.errors.required)),c(5),m("ngIf",((s=p.packageForm.get("basicInfo.duration"))==null?null:s.touched)&&((s=p.packageForm.get("basicInfo.duration"))==null?null:s.errors)),c(5),m("ngIf",((d=p.packageForm.get("basicInfo.maxCapacity"))==null?null:d.touched)&&((d=p.packageForm.get("basicInfo.maxCapacity"))==null?null:d.errors)),c(5),m("ngIf",((u=p.packageForm.get("basicInfo.pricePerPilgrim"))==null?null:u.touched)&&((u=p.packageForm.get("basicInfo.pricePerPilgrim"))==null?null:u.errors))}}function Y5(n,t){if(n&1){let e=O();a(0,"button",77),h("click",function(){C(e);let r=g().index,s=g(3);return y(s.removeItinerarySegment(r))}),l(1," \u{1F5D1}\uFE0F Remove "),o()}}function Z5(n,t){if(n&1){let e=O();a(0,"div",61)(1,"div",62)(2,"h4"),l(3),o(),v(4,Y5,2,0,"button",63),o(),a(5,"div",32)(6,"div",37)(7,"label"),l(8,"Day Number *"),o(),a(9,"input",64),h("change",function(){let r=C(e).index,s=g(3);return y(s.updateItineraryDate(r))}),o()(),a(10,"div",37)(11,"label"),l(12,"Date *"),o(),P(13,"input",65),o(),a(14,"div",37)(15,"label"),l(16,"Type *"),o(),a(17,"select",66)(18,"option",67),l(19,"\u{1F68C} Travel"),o(),a(20,"option",68),l(21,"\u{1F3E8} Accommodation"),o(),a(22,"option",69),l(23,"\u{1F54C} Activity"),o(),a(24,"option",70),l(25,"\u{1F634} Rest"),o()()(),a(26,"div",37)(27,"label"),l(28,"Start Time"),o(),P(29,"input",71),o(),a(30,"div",37)(31,"label"),l(32,"End Time"),o(),P(33,"input",72),o(),a(34,"div",33)(35,"label"),l(36,"Title *"),o(),P(37,"input",73),o(),a(38,"div",33)(39,"label"),l(40,"Description *"),o(),P(41,"textarea",74),o(),a(42,"div",33)(43,"label"),l(44,"Location *"),o(),P(45,"input",75),o(),a(46,"div",33)(47,"label"),l(48,"Notes"),o(),P(49,"textarea",76),o()()()}if(n&2){let e=t.index,i=g(3);m("formGroupName",e),c(3),x("Segment ",e+1,""),c(),m("ngIf",i.itinerarySegments.length>1)}}function J5(n,t){if(n&1){let e=O();a(0,"div",78)(1,"div",79),l(2,"\u{1F4C5}"),o(),a(3,"h3"),l(4,"No itinerary segments added"),o(),a(5,"p"),l(6,"Start building your Umrah package itinerary by adding segments"),o(),a(7,"button",80),h("click",function(){C(e);let r=g(3);return y(r.addItinerarySegment())}),l(8," \u2795 Add First Segment "),o()()}}function K5(n,t){if(n&1){let e=O();a(0,"div",29)(1,"div",30)(2,"h2"),l(3,"\u{1F4C5} Itinerary Planning"),o(),a(4,"p"),l(5,"Plan the day-by-day activities and schedule for your Umrah package"),o()(),a(6,"div",55)(7,"div",56)(8,"h3"),l(9,"Itinerary Segments"),o(),a(10,"button",57),h("click",function(){C(e);let r=g(2);return y(r.addItinerarySegment())}),l(11," \u2795 Add Segment "),o()(),a(12,"div",58),v(13,Z5,50,3,"div",59),o(),v(14,J5,9,0,"div",60),o()()}if(n&2){let e=g(2);c(13),m("ngForOf",e.itinerarySegments.controls),c(),m("ngIf",e.itinerarySegments.length===0)}}function Q5(n,t){if(n&1){let e=O();a(0,"button",77),h("click",function(){C(e);let r=g().index,s=g(3);return y(s.removeAccommodation(r))}),l(1," \u{1F5D1}\uFE0F Remove "),o()}}function ek(n,t){if(n&1){let e=O();a(0,"div",83)(1,"div",62)(2,"h4"),l(3),o(),v(4,Q5,2,0,"button",63),o(),a(5,"div",32)(6,"div",37)(7,"label"),l(8,"Hotel Name *"),o(),P(9,"input",84),o(),a(10,"div",37)(11,"label"),l(12,"Location *"),o(),a(13,"select",85)(14,"option",86),l(15,"\u{1F54C} Makkah"),o(),a(16,"option",87),l(17,"\u{1F54C} Madinah"),o(),a(18,"option",88),l(19,"\u{1F4CD} Other"),o()()(),a(20,"div",37)(21,"label"),l(22,"Check-in Date *"),o(),a(23,"input",89),h("change",function(){let r=C(e).index,s=g(3);return y(s.updateAccommodationCost(r))}),o()(),a(24,"div",37)(25,"label"),l(26,"Check-out Date *"),o(),a(27,"input",90),h("change",function(){let r=C(e).index,s=g(3);return y(s.updateAccommodationCost(r))}),o()(),a(28,"div",37)(29,"label"),l(30,"Rooms Booked *"),o(),a(31,"input",91),h("change",function(){let r=C(e).index,s=g(3);return y(s.updateAccommodationCost(r))}),o()(),a(32,"div",37)(33,"label"),l(34,"Room Type *"),o(),a(35,"select",92)(36,"option",93),l(37,"Standard Single"),o(),a(38,"option",94),l(39,"Standard Double"),o(),a(40,"option",95),l(41,"Deluxe Room"),o(),a(42,"option",96),l(43,"Suite"),o(),a(44,"option",97),l(45,"Family Room"),o()()(),a(46,"div",37)(47,"label"),l(48,"Cost per Night (SAR) *"),o(),a(49,"input",98),h("change",function(){let r=C(e).index,s=g(3);return y(s.updateAccommodationCost(r))}),o()(),a(50,"div",37)(51,"label"),l(52,"Total Cost (SAR)"),o(),P(53,"input",99),o(),a(54,"div",33)(55,"h5"),l(56,"Contact Information"),o(),a(57,"div",100)(58,"div",37)(59,"label"),l(60,"Phone *"),o(),P(61,"input",101),o(),a(62,"div",37)(63,"label"),l(64,"Email *"),o(),P(65,"input",102),o(),a(66,"div",33)(67,"label"),l(68,"Address *"),o(),P(69,"textarea",103),o()()(),a(70,"div",33)(71,"label"),l(72,"Amenities"),o(),a(73,"div",104)(74,"label",105),P(75,"input",106),l(76," WiFi "),o(),a(77,"label",105),P(78,"input",107),l(79," Air Conditioning "),o(),a(80,"label",105),P(81,"input",108),l(82," Room Service "),o(),a(83,"label",105),P(84,"input",109),l(85," Buffet Breakfast "),o(),a(86,"label",105),P(87,"input",110),l(88," Prayer Mats "),o(),a(89,"label",105),P(90,"input",111),l(91," Shuttle Service "),o()()()()()}if(n&2){let e=t.index,i=g(3);m("formGroupName",e),c(3),x("Hotel ",e+1,""),c(),m("ngIf",i.accommodations.length>1)}}function tk(n,t){if(n&1){let e=O();a(0,"div",78)(1,"div",79),l(2,"\u{1F3E8}"),o(),a(3,"h3"),l(4,"No accommodations added"),o(),a(5,"p"),l(6,"Add hotel bookings for your Umrah package"),o(),a(7,"button",80),h("click",function(){C(e);let r=g(3);return y(r.addAccommodation())}),l(8," \u2795 Add First Hotel "),o()()}}function nk(n,t){if(n&1){let e=O();a(0,"div",29)(1,"div",30)(2,"h2"),l(3,"\u{1F3E8} Accommodations"),o(),a(4,"p"),l(5,"Configure hotel bookings and lodging arrangements"),o()(),a(6,"div",55)(7,"div",56)(8,"h3"),l(9,"Hotel Accommodations"),o(),a(10,"button",57),h("click",function(){C(e);let r=g(2);return y(r.addAccommodation())}),l(11," \u2795 Add Hotel "),o()(),a(12,"div",81),v(13,ek,92,3,"div",82),o(),v(14,tk,9,0,"div",60),o()()}if(n&2){let e=g(2);c(13),m("ngForOf",e.accommodations.controls),c(),m("ngIf",e.accommodations.length===0)}}function ik(n,t){if(n&1){let e=O();a(0,"div",122)(1,"div",123)(2,"h4"),l(3),o(),a(4,"span",124),l(5),o()(),a(6,"div",125)(7,"p")(8,"strong"),l(9,"Model:"),o(),l(10),o(),a(11,"p")(12,"strong"),l(13,"Capacity:"),o(),l(14),o()(),a(15,"div",126)(16,"label",105)(17,"input",127),h("change",function(r){let s=C(e).$implicit,d=g(3);return y(d.toggleBusSelection(s.id,r))}),o(),l(18," Select Bus "),o()()()}if(n&2){let e,i,r=t.$implicit,s=g(3);I("selected",(e=s.packageForm.get("resourceAssignment.buses"))==null||e.value==null?null:e.value.includes(r.id)),c(3),_(r.busNumber),c(2),_(r.type),c(5),x(" ",r.model,""),c(4),x(" ",r.capacity," seats"),c(3),m("value",r.id)("checked",(i=s.packageForm.get("resourceAssignment.buses"))==null||i.value==null?null:i.value.includes(r.id))}}function rk(n,t){n&1&&(a(0,"div",78)(1,"div",79),l(2,"\u{1F68C}"),o(),a(3,"p"),l(4,"No buses available for the selected dates"),o()())}function ok(n,t){if(n&1){let e=O();a(0,"div",122)(1,"div",123)(2,"h4"),l(3),o(),a(4,"span",128),l(5),o()(),a(6,"div",125)(7,"p")(8,"strong"),l(9,"License:"),o(),l(10),o(),a(11,"p")(12,"strong"),l(13,"Phone:"),o(),l(14),o()(),a(15,"div",126)(16,"label",105)(17,"input",127),h("change",function(r){let s=C(e).$implicit,d=g(3);return y(d.toggleDriverSelection(s.id,r))}),o(),l(18," Select Driver "),o()()()}if(n&2){let e,i,r=t.$implicit,s=g(3);I("selected",(e=s.packageForm.get("resourceAssignment.drivers"))==null||e.value==null?null:e.value.includes(r.id)),c(3),_(r.name),c(2),x("",r.experience,"y exp"),c(5),x(" ",r.licenseNumber,""),c(4),x(" ",r.phone,""),c(3),m("value",r.id)("checked",(i=s.packageForm.get("resourceAssignment.drivers"))==null||i.value==null?null:i.value.includes(r.id))}}function ak(n,t){n&1&&(a(0,"div",78)(1,"div",79),l(2,"\u{1F468}\u200D\u2708\uFE0F"),o(),a(3,"p"),l(4,"No drivers available for the selected dates"),o()())}function sk(n,t){if(n&1&&(a(0,"div",29)(1,"div",30)(2,"h2"),l(3,"\u{1F68C} Resource Assignment"),o(),a(4,"p"),l(5,"Assign buses and drivers to your Umrah package"),o()(),a(6,"div",112)(7,"div",113)(8,"div",114)(9,"h3"),l(10,"\u{1F68C} Select Buses"),o(),a(11,"div",115),v(12,ik,19,8,"div",116),o(),v(13,rk,5,0,"div",60),o(),a(14,"div",114)(15,"h3"),l(16,"\u{1F468}\u200D\u2708\uFE0F Select Drivers"),o(),a(17,"div",115),v(18,ok,19,8,"div",116),o(),v(19,ak,5,0,"div",60),o()(),a(20,"div",117)(21,"h3"),l(22,"\u{1F4CB} Selection Summary"),o(),a(23,"div",118)(24,"div",119)(25,"span",120),l(26,"Selected Buses:"),o(),a(27,"span",121),l(28),o()(),a(29,"div",119)(30,"span",120),l(31,"Selected Drivers:"),o(),a(32,"span",121),l(33),o()(),a(34,"div",119)(35,"span",120),l(36,"Total Capacity:"),o(),a(37,"span",121),l(38),o()(),a(39,"div",119)(40,"span",120),l(41,"Package Capacity:"),o(),a(42,"span",121),l(43),o()()()()()()),n&2){let e,i,r,s=g(2);c(12),m("ngForOf",s.availableBuses),c(),m("ngIf",s.availableBuses.length===0),c(5),m("ngForOf",s.availableDrivers),c(),m("ngIf",s.availableDrivers.length===0),c(9),_(((e=s.packageForm.get("resourceAssignment.buses"))==null||e.value==null?null:e.value.length)||0),c(5),_(((i=s.packageForm.get("resourceAssignment.drivers"))==null||i.value==null?null:i.value.length)||0),c(5),x("",s.getTotalBusCapacity()," pilgrims"),c(5),x("",((r=s.packageForm.get("basicInfo.maxCapacity"))==null?null:r.value)||0," pilgrims")}}function lk(n,t){if(n&1){let e=O();a(0,"button",129),h("click",function(){C(e);let r=g(2);return y(r.nextStep())}),l(1," Next \u2192 "),o()}if(n&2){let e=g(2);m("disabled",!e.isStepValid(e.currentStep))}}function ck(n,t){if(n&1&&(a(0,"span"),l(1),o()),n&2){let e=g(3);c(),_(e.isEditMode?"\u{1F4BE} Update Package":"\u2705 Create Package")}}function dk(n,t){n&1&&(a(0,"span"),l(1,"\u23F3 Saving..."),o())}function uk(n,t){if(n&1&&(a(0,"button",130),v(1,ck,2,1,"span",53)(2,dk,2,0,"span",53),o()),n&2){let e=g(2);m("disabled",!e.packageForm.valid||e.saving),c(),m("ngIf",!e.saving),c(),m("ngIf",e.saving)}}function pk(n,t){if(n&1){let e=O();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"a",6),l(5,"\u{1F54C} Umrah Packages"),o(),l(6),o(),a(7,"h1"),l(8),o(),a(9,"p"),l(10),o()(),a(11,"div",7)(12,"button",8),l(13," \u2190 Cancel "),o()()(),a(14,"div",9)(15,"div",10),P(16,"div",11),o(),a(17,"div",12),v(18,R5,8,9,"div",13),o()(),a(19,"form",14),h("ngSubmit",function(){C(e);let r=g();return y(r.onSubmit())}),v(20,q5,45,8,"div",15)(21,K5,15,2,"div",15)(22,nk,15,2,"div",15)(23,sk,44,8,"div",15),a(24,"div",16)(25,"div",17)(26,"button",18),h("click",function(){C(e);let r=g();return y(r.previousStep())}),l(27," \u2190 Previous "),o()(),a(28,"div",19)(29,"span",20),l(30),o()(),a(31,"div",21),v(32,lk,2,1,"button",22)(33,uk,3,3,"button",23),o()()()()}if(n&2){let e=g();c(6),x(" / ",e.isEditMode?"Edit Package":"Create New Package"," "),c(2),_(e.isEditMode?"Edit Umrah Package":"Create New Umrah Package"),c(2),_(e.isEditMode?"Update your Umrah package details":"Design a comprehensive Umrah pilgrimage experience"),c(6),Be("width",e.currentStep/e.totalSteps*100,"%"),c(2),m("ngForOf",si(16,T5)),c(),m("formGroup",e.packageForm),c(),m("ngIf",e.currentStep===1),c(),m("ngIf",e.currentStep===2),c(),m("ngIf",e.currentStep===3),c(),m("ngIf",e.currentStep===4),c(3),m("disabled",e.currentStep===1),c(4),Y("Step ",e.currentStep," of ",e.totalSteps,""),c(2),m("ngIf",e.currentStep<e.totalSteps),c(),m("ngIf",e.currentStep===e.totalSteps)}}function mk(n,t){n&1&&(a(0,"div",131),P(1,"div",132),a(2,"p"),l(3,"Loading form data..."),o()())}var Og=class n{API_URL="/api/umrah";getAvailableBuses(t,e){return G([{id:"BUS001",busNumber:"RLD-001",model:"Mercedes Travego",capacity:50,type:"Luxury"},{id:"BUS002",busNumber:"RLD-002",model:"Volvo 9700",capacity:45,type:"Standard"},{id:"BUS003",busNumber:"RLD-003",model:"Scania Touring",capacity:55,type:"Premium"},{id:"BUS004",busNumber:"RLD-004",model:"Mercedes Setra",capacity:48,type:"Luxury"},{id:"BUS005",busNumber:"RLD-005",model:"Iveco Magelys",capacity:52,type:"Standard"}]).pipe(Me(300))}getAvailableDrivers(t,e){return G([{id:"DR001",name:"Ahmed Al-Rashid",licenseNumber:"DL001",phone:"+966 50 123 4567",experience:8},{id:"DR002",name:"Mohammed Al-Fahad",licenseNumber:"DL002",phone:"+966 50 234 5678",experience:12},{id:"DR003",name:"Omar Al-Salem",licenseNumber:"DL003",phone:"+966 50 345 6789",experience:6},{id:"DR004",name:"Abdullah Al-Harbi",licenseNumber:"DL004",phone:"+966 50 456 7890",experience:10},{id:"DR005",name:"Khalid Al-Otaibi",licenseNumber:"DL005",phone:"+966 50 567 8901",experience:15}]).pipe(Me(300))}getCities(){return G(["Riyadh","Jeddah","Dammam","Khobar","Makkah","Madinah","Taif","Abha","Buraidah","Tabuk"]).pipe(Me(200))}createUmrahPackage(t){return console.log("Creating Umrah package:",t),G({id:"UP"+Date.now().toString().slice(-3),success:!0}).pipe(Me(1e3))}updateUmrahPackage(t,e){return console.log("Updating Umrah package:",t,e),G({id:t,success:!0}).pipe(Me(1e3))}getUmrahPackage(t){return G({id:t,basicInfo:{packageName:"Premium Umrah Package - Ramadan",departureCity:"Riyadh",startDate:new Date("2025-03-15T06:00:00"),duration:10,maxCapacity:200,pricePerPilgrim:12500,description:"A premium Umrah experience during the blessed month of Ramadan."},itinerarySegments:[{day:1,date:new Date("2025-03-15T06:00:00"),type:"travel",title:"Departure from Riyadh",description:"Bus journey from Riyadh to Makkah",startTime:"06:00",endTime:"14:00",location:"Riyadh \u2192 Makkah",notes:"Prayer breaks at 10:00 and 12:30"},{day:1,date:new Date("2025-03-15T15:00:00"),type:"accommodation",title:"Hotel Check-in",description:"Check-in at hotel and room allocation",startTime:"15:00",endTime:"17:00",location:"Hilton Makkah Convention",notes:"Welcome package distribution"}],accommodations:[{hotelName:"Hilton Makkah Convention",location:"Makkah",checkInDate:new Date("2025-03-15T15:00:00"),checkOutDate:new Date("2025-03-17T11:00:00"),roomsBooked:100,roomType:"Standard Double",costPerNight:450,totalCost:9e4,contactInfo:{phone:"+966 12 555 0001",email:"reservations@hiltonmakkah.com",address:"King Abdul Aziz Road, Makkah, Saudi Arabia"},amenities:["WiFi","Air Conditioning","Room Service"]}],resourceAssignment:{buses:["BUS001","BUS002"],drivers:["DR001","DR002"]}}).pipe(Me(500))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},ls=class n{constructor(t,e,i,r){this.fb=t;this.router=e;this.route=i;this.umrahFormService=r;this.initializeForm()}packageForm;currentStep=1;totalSteps=4;loading=!1;saving=!1;availableBuses=[];availableDrivers=[];cities=[];isEditMode=!1;packageId=null;minDate=new Date().toISOString().split("T")[0];stepValidation={1:!1,2:!1,3:!1,4:!1};ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.packageId=t.id,this.loadPackageForEdit())}),this.loadFormData(),this.setupFormValidation()}initializeForm(){this.packageForm=this.fb.group({basicInfo:this.fb.group({packageName:["",[T.required,T.minLength(3)]],departureCity:["",T.required],startDate:["",T.required],duration:[7,[T.required,T.min(3),T.max(30)]],maxCapacity:[50,[T.required,T.min(10),T.max(500)]],pricePerPilgrim:[0,[T.required,T.min(1e3)]],description:[""]}),itinerarySegments:this.fb.array([]),accommodations:this.fb.array([]),resourceAssignment:this.fb.group({buses:[[],T.required],drivers:[[],T.required]})})}setupFormValidation(){this.packageForm.get("basicInfo")?.statusChanges.subscribe(t=>{this.stepValidation[1]=t==="VALID"}),this.packageForm.get("itinerarySegments")?.statusChanges.subscribe(t=>{this.stepValidation[2]=t==="VALID"&&this.itinerarySegments.length>0}),this.packageForm.get("accommodations")?.statusChanges.subscribe(t=>{this.stepValidation[3]=t==="VALID"&&this.accommodations.length>0}),this.packageForm.get("resourceAssignment")?.statusChanges.subscribe(t=>{this.stepValidation[4]=t==="VALID"})}loadFormData(){this.loading=!0,this.umrahFormService.getCities().subscribe({next:t=>{this.cities=t},error:t=>{console.error("Error loading cities:",t)}}),this.loading=!1}loadAvailableResources(){let t=this.packageForm.get("basicInfo"),e=t?.get("startDate")?.value,i=t?.get("duration")?.value;if(e&&i){let r=new Date(e),s=new Date(r);s.setDate(s.getDate()+i),this.umrahFormService.getAvailableBuses(r,s).subscribe({next:d=>{this.availableBuses=d,console.log("Loaded buses:",d)},error:d=>{console.error("Error loading buses:",d)}}),this.umrahFormService.getAvailableDrivers(r,s).subscribe({next:d=>{this.availableDrivers=d,console.log("Loaded drivers:",d)},error:d=>{console.error("Error loading drivers:",d)}})}}onDateOrDurationChange(){this.loadAvailableResources()}loadPackageForEdit(){this.packageId&&(this.loading=!0,this.umrahFormService.getUmrahPackage(this.packageId).subscribe({next:t=>{this.populateForm(t),this.loading=!1},error:t=>{console.error("Error loading package:",t),this.loading=!1}}))}populateForm(t){for(this.packageForm.patchValue({basicInfo:t.basicInfo,resourceAssignment:t.resourceAssignment});this.itinerarySegments.length;)this.itinerarySegments.removeAt(0);for(;this.accommodations.length;)this.accommodations.removeAt(0);t.itinerarySegments&&t.itinerarySegments.length>0&&t.itinerarySegments.forEach(e=>{this.addItinerarySegment(e)}),t.accommodations&&t.accommodations.length>0&&t.accommodations.forEach(e=>{this.addAccommodation(e)}),this.loadAvailableResources()}get itinerarySegments(){return this.packageForm.get("itinerarySegments")}get accommodations(){return this.packageForm.get("accommodations")}createItinerarySegmentForm(t){return this.fb.group({day:[t?.day||1,[T.required,T.min(1)]],date:[t?.date||"",T.required],type:[t?.type||"activity",T.required],title:[t?.title||"",[T.required,T.minLength(3)]],description:[t?.description||"",[T.required,T.minLength(10)]],startTime:[t?.startTime||""],endTime:[t?.endTime||""],location:[t?.location||"",T.required],busId:[t?.busId||""],driverId:[t?.driverId||""],accommodationId:[t?.accommodationId||""],notes:[t?.notes||""]})}addItinerarySegment(t){this.itinerarySegments.push(this.createItinerarySegmentForm(t))}removeItinerarySegment(t){this.itinerarySegments.removeAt(t)}createAccommodationForm(t){return this.fb.group({hotelName:[t?.hotelName||"",[T.required,T.minLength(3)]],location:[t?.location||"Makkah",T.required],checkInDate:[t?.checkInDate||"",T.required],checkOutDate:[t?.checkOutDate||"",T.required],roomsBooked:[t?.roomsBooked||1,[T.required,T.min(1)]],roomType:[t?.roomType||"Standard Double",T.required],costPerNight:[t?.costPerNight||0,[T.required,T.min(50)]],totalCost:[t?.totalCost||0,[T.required,T.min(100)]],contactInfo:this.fb.group({phone:[t?.contactInfo?.phone||"",[T.required,T.pattern(/^\+966\s\d{2}\s\d{3}\s\d{4}$/)]],email:[t?.contactInfo?.email||"",[T.required,T.email]],address:[t?.contactInfo?.address||"",T.required]}),amenities:[t?.amenities||[]]})}addAccommodation(t){this.accommodations.push(this.createAccommodationForm(t))}removeAccommodation(t){this.accommodations.removeAt(t)}nextStep(){this.currentStep<this.totalSteps&&this.isStepValid(this.currentStep)&&(this.currentStep++,this.currentStep===4&&this.loadAvailableResources())}previousStep(){this.currentStep>1&&this.currentStep--}goToStep(t){t>=1&&t<=this.totalSteps&&(this.currentStep=t,this.currentStep===4&&this.loadAvailableResources())}isStepValid(t){switch(t){case 1:return this.packageForm.get("basicInfo")?.valid||!1;case 2:return this.itinerarySegments.valid&&this.itinerarySegments.length>0;case 3:return this.accommodations.valid&&this.accommodations.length>0;case 4:return this.packageForm.get("resourceAssignment")?.valid||!1;default:return!1}}onSubmit(){if(this.packageForm.valid){this.saving=!0;let t=this.packageForm.value;(this.isEditMode?this.umrahFormService.updateUmrahPackage(this.packageId,t):this.umrahFormService.createUmrahPackage(t)).subscribe({next:i=>{this.saving=!1,console.log("Package saved successfully:",i),this.router.navigate(["/umrah",i.id])},error:i=>{this.saving=!1,console.error("Error saving package:",i),alert("Error saving package. Please try again.")}})}else this.markFormGroupTouched(this.packageForm),alert("Please fill in all required fields.")}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let i=t.get(e);i?.markAsTouched({onlySelf:!0}),i instanceof Pi?this.markFormGroupTouched(i):i instanceof is&&i.controls.forEach(r=>{r instanceof Pi&&this.markFormGroupTouched(r)})})}getStepTitle(t){return{1:"Basic Information",2:"Itinerary Planning",3:"Accommodations",4:"Resource Assignment"}[t]||""}getStepIcon(t){return{1:"\u{1F4CB}",2:"\u{1F4C5}",3:"\u{1F3E8}",4:"\u{1F68C}"}[t]||""}calculateTotalCost(){let t=this.accommodations.controls.reduce((r,s)=>r+(s.get("totalCost")?.value||0),0),e=this.packageForm.get("basicInfo.maxCapacity")?.value||0,i=this.packageForm.get("basicInfo.pricePerPilgrim")?.value||0;return e*i}updateItineraryDate(t){let e=this.packageForm.get("basicInfo.startDate")?.value,i=this.itinerarySegments.at(t).get("day")?.value;if(e&&i){let r=new Date(e);r.setDate(r.getDate()+i-1),this.itinerarySegments.at(t).patchValue({date:r.toISOString().split("T")[0]})}}updateAccommodationCost(t){let e=this.accommodations.at(t),i=e.get("checkInDate")?.value,r=e.get("checkOutDate")?.value,s=e.get("costPerNight")?.value,d=e.get("roomsBooked")?.value;if(i&&r&&s&&d){let p=Math.ceil((new Date(r).getTime()-new Date(i).getTime())/864e5)*s*d;e.patchValue({totalCost:p})}}toggleBusSelection(t,e){let i=this.packageForm.get("resourceAssignment.buses")?.value||[];e.target.checked?this.packageForm.get("resourceAssignment.buses")?.setValue([...i,t]):this.packageForm.get("resourceAssignment.buses")?.setValue(i.filter(r=>r!==t))}toggleDriverSelection(t,e){let i=this.packageForm.get("resourceAssignment.drivers")?.value||[];e.target.checked?this.packageForm.get("resourceAssignment.drivers")?.setValue([...i,t]):this.packageForm.get("resourceAssignment.drivers")?.setValue(i.filter(r=>r!==t))}getTotalBusCapacity(){return(this.packageForm.get("resourceAssignment.buses")?.value||[]).reduce((e,i)=>{let r=this.availableBuses.find(s=>s.id===i);return e+(r?.capacity||0)},0)}static \u0275fac=function(e){return new(e||n)(w(Kt),w(ne),w(Te),w(Og))};static \u0275cmp=J({type:n,selectors:[["app-umrah-form"]],decls:2,vars:2,consts:[["class","umrah-form-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"umrah-form-container"],[1,"form-header"],[1,"header-content"],[1,"breadcrumb"],["routerLink","/umrah"],[1,"header-actions"],["routerLink","/umrah",1,"action-btn","secondary"],[1,"progress-indicator"],[1,"progress-bar"],[1,"progress-fill"],[1,"step-indicators"],["class","step-indicator",3,"active","completed","valid","click",4,"ngFor","ngForOf"],[1,"package-form",3,"ngSubmit","formGroup"],["class","form-step",4,"ngIf"],[1,"form-navigation"],[1,"nav-left"],["type","button",1,"action-btn","secondary",3,"click","disabled"],[1,"nav-center"],[1,"step-counter"],[1,"nav-right"],["type","button","class","action-btn primary",3,"disabled","click",4,"ngIf"],["type","submit","class","action-btn success",3,"disabled",4,"ngIf"],[1,"step-indicator",3,"click"],[1,"step-circle"],[1,"step-icon"],[1,"step-number"],[1,"step-label"],[1,"form-step"],[1,"step-header"],["formGroupName","basicInfo",1,"form-section"],[1,"form-grid"],[1,"form-group","full-width"],["for","packageName"],["type","text","id","packageName","formControlName","packageName","placeholder","e.g., Premium Umrah Package - Ramadan",1,"form-control",3,"change"],["class","error-message",4,"ngIf"],[1,"form-group"],["for","departureCity"],["id","departureCity","formControlName","departureCity",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","startDate"],["type","date","id","startDate","formControlName","startDate",1,"form-control",3,"min"],["for","duration"],["type","number","id","duration","formControlName","duration","min","3","max","30","placeholder","7",1,"form-control",3,"change"],["for","maxCapacity"],["type","number","id","maxCapacity","formControlName","maxCapacity","min","10","max","500","placeholder","50",1,"form-control"],["for","pricePerPilgrim"],["type","number","id","pricePerPilgrim","formControlName","pricePerPilgrim","min","1000","placeholder","8000",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","4","placeholder","Describe the unique features and highlights of this Umrah package...",1,"form-control"],[1,"error-message"],[4,"ngIf"],[3,"value"],[1,"form-section"],[1,"section-header"],["type","button",1,"action-btn","primary","small",3,"click"],["formArrayName","itinerarySegments",1,"itinerary-list"],["class","itinerary-item",3,"formGroupName",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"itinerary-item",3,"formGroupName"],[1,"item-header"],["type","button","class","action-btn danger small",3,"click",4,"ngIf"],["type","number","formControlName","day","min","1",1,"form-control",3,"change"],["type","date","formControlName","date",1,"form-control"],["formControlName","type",1,"form-control"],["value","travel"],["value","accommodation"],["value","activity"],["value","rest"],["type","time","formControlName","startTime",1,"form-control"],["type","time","formControlName","endTime",1,"form-control"],["type","text","formControlName","title","placeholder","e.g., First Umrah Performance",1,"form-control"],["formControlName","description","rows","3","placeholder","Detailed description of this itinerary segment...",1,"form-control"],["type","text","formControlName","location","placeholder","e.g., Masjid al-Haram",1,"form-control"],["formControlName","notes","rows","2","placeholder","Additional notes or instructions...",1,"form-control"],["type","button",1,"action-btn","danger","small",3,"click"],[1,"empty-state"],[1,"empty-icon"],["type","button",1,"action-btn","primary",3,"click"],["formArrayName","accommodations",1,"accommodations-list"],["class","accommodation-item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"accommodation-item",3,"formGroupName"],["type","text","formControlName","hotelName","placeholder","e.g., Hilton Makkah Convention",1,"form-control"],["formControlName","location",1,"form-control"],["value","Makkah"],["value","Madinah"],["value","Other"],["type","date","formControlName","checkInDate",1,"form-control",3,"change"],["type","date","formControlName","checkOutDate",1,"form-control",3,"change"],["type","number","formControlName","roomsBooked","min","1",1,"form-control",3,"change"],["formControlName","roomType",1,"form-control"],["value","Standard Single"],["value","Standard Double"],["value","Deluxe Room"],["value","Suite"],["value","Family Room"],["type","number","formControlName","costPerNight","min","50",1,"form-control",3,"change"],["type","number","formControlName","totalCost","readonly","",1,"form-control"],["formGroupName","contactInfo",1,"contact-grid"],["type","tel","formControlName","phone","placeholder","+966 12 555 0001",1,"form-control"],["type","email","formControlName","email","placeholder","reservations@hotel.com",1,"form-control"],["formControlName","address","rows","2","placeholder","Full hotel address...",1,"form-control"],[1,"amenities-selector"],[1,"checkbox-label"],["type","checkbox","value","WiFi"],["type","checkbox","value","Air Conditioning"],["type","checkbox","value","Room Service"],["type","checkbox","value","Buffet Breakfast"],["type","checkbox","value","Prayer Mats"],["type","checkbox","value","Shuttle Service"],["formGroupName","resourceAssignment",1,"form-section"],[1,"resource-grid"],[1,"resource-section"],[1,"resource-list"],["class","resource-card",3,"selected",4,"ngFor","ngForOf"],[1,"selection-summary"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"resource-card"],[1,"resource-header"],[1,"resource-type"],[1,"resource-details"],[1,"resource-actions"],["type","checkbox",3,"change","value","checked"],[1,"experience-badge"],["type","button",1,"action-btn","primary",3,"click","disabled"],["type","submit",1,"action-btn","success",3,"disabled"],[1,"loading-container"],[1,"loading-spinner"]],template:function(e,i){e&1&&v(0,pk,34,17,"div",0)(1,mk,4,0,"div",1),e&2&&(m("ngIf",!i.loading),c(),m("ngIf",i.loading))},dependencies:[K,ae,ee,qn,gi,Mt,ct,Re,Oe,Se,vt,Pe,Ie,lt,xt,wt,Dt,Ot,ld,cd],styles:[".umrah-form-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;background:#f8fafc;min-height:100vh}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.breadcrumb[_ngcontent-%COMP%]{font-size:14px;color:#718096;margin-bottom:10px}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:28px;font-weight:700}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.action-btn.secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568;border:1px solid #e2e8f0}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#cbd5e0;transform:translateY(-1px)}.progress-indicator[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d}.progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#e2e8f0;border-radius:3px;margin-bottom:20px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:3px;transition:width .3s ease}.step-indicators[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.step-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:all .2s ease;flex:1}.step-indicator[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.step-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e2e8f0;color:#718096;margin-bottom:10px;position:relative;transition:all .3s ease;font-size:20px}.step-indicator.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea66}.step-indicator.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.step-indicator.valid[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{border:2px solid #48bb78}.step-icon[_ngcontent-%COMP%]{position:absolute;font-size:24px}.step-number[_ngcontent-%COMP%]{font-size:14px;font-weight:600;position:absolute;bottom:-2px;right:-2px;background:#667eea;color:#fff;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center}.step-indicator.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%], .step-indicator.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#fff;color:#667eea}.step-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500;text-align:center;max-width:100px}.step-indicator.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#2d3748;font-weight:600}.package-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.form-step[_ngcontent-%COMP%]{padding:30px}.step-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;padding-bottom:20px;border-bottom:2px solid #e2e8f0}.step-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.step-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:18px;font-weight:600}.action-btn.small[_ngcontent-%COMP%]{padding:8px 16px;font-size:12px}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.action-btn.success[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.action-btn.success[_ngcontent-%COMP%]:hover{background:#38a169;transform:translateY(-1px);box-shadow:0 4px 12px #48bb7866}.action-btn.danger[_ngcontent-%COMP%]{background:#f56565;color:#fff}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#e53e3e;transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;align-items:start}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;color:#2d3748;font-size:14px;font-weight:600}.form-control[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control[_ngcontent-%COMP%]:invalid{border-color:#f56565}.form-control[readonly][_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.error-message[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:#e53e3e;font-weight:500}.itinerary-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.itinerary-item[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:12px;padding:20px;background:#f8fafc;transition:all .2s ease}.itinerary-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.item-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.accommodations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.accommodation-item[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:12px;padding:20px;background:#f8fafc;transition:all .2s ease}.accommodation-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.contact-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.contact-grid[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.amenities-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:10px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#4a5568;cursor:pointer;padding:8px;border-radius:6px;transition:background-color .2s ease}.checkbox-label[_ngcontent-%COMP%]:hover{background:#edf2f7}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;cursor:pointer}.resource-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:30px;margin-bottom:30px}.resource-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;padding-bottom:10px;border-bottom:2px solid #e2e8f0}.resource-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;max-height:400px;overflow-y:auto}.resource-card[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:15px;background:#fff;transition:all .2s ease;cursor:pointer}.resource-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 8px #0000001a}.resource-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff;box-shadow:0 4px 12px #667eea33}.resource-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.resource-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.resource-type[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.experience-badge[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600}.resource-details[_ngcontent-%COMP%]{margin-bottom:15px}.resource-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 5px;font-size:14px;color:#4a5568}.resource-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.selection-summary[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:12px;padding:20px}.selection-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:18px;font-weight:600}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}.summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;text-align:center}.summary-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.summary-value[_ngcontent-%COMP%]{font-size:20px;color:#2d3748;font-weight:700}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;border:2px dashed #e2e8f0;border-radius:12px;background:#f8fafc}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:18px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#718096;font-size:14px}.form-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:#f8fafc;border-top:1px solid #e2e8f0}.nav-left[_ngcontent-%COMP%], .nav-right[_ngcontent-%COMP%]{flex:1}.nav-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.nav-center[_ngcontent-%COMP%]{text-align:center}.step-counter[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;text-align:center;margin:20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.umrah-form-container[_ngcontent-%COMP%]{padding:15px}.form-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.step-indicators[_ngcontent-%COMP%]{flex-wrap:wrap;gap:15px}.step-circle[_ngcontent-%COMP%]{width:50px;height:50px;font-size:18px}.step-number[_ngcontent-%COMP%]{width:18px;height:18px;font-size:12px}.form-grid[_ngcontent-%COMP%], .contact-grid[_ngcontent-%COMP%], .amenities-selector[_ngcontent-%COMP%], .resource-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.form-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.nav-left[_ngcontent-%COMP%], .nav-right[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.form-step[_ngcontent-%COMP%]{padding:20px}.step-header[_ngcontent-%COMP%]{margin-bottom:30px}.step-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 480px){.step-indicators[_ngcontent-%COMP%]{justify-content:center}.step-circle[_ngcontent-%COMP%]{width:45px;height:45px;font-size:16px}.step-label[_ngcontent-%COMP%]{font-size:11px;max-width:80px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.resource-list[_ngcontent-%COMP%]{max-height:300px}.action-btn[_ngcontent-%COMP%]{font-size:13px;padding:10px 16px}}"]})};var gk=n=>["/bookings",n],fk=n=>["/bookings",n,"edit"];function _k(n,t){if(n&1&&(a(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),l(4,"\u{1F3AB}"),o(),a(5,"div",32)(6,"div",33),l(7),o(),a(8,"div",34),l(9,"Total Bookings"),o()()(),a(10,"div",35)(11,"div",31),l(12,"\u2705"),o(),a(13,"div",32)(14,"div",33),l(15),o(),a(16,"div",34),l(17,"Confirmed"),o()()(),a(18,"div",36)(19,"div",31),l(20,"\u23F3"),o(),a(21,"div",32)(22,"div",33),l(23),o(),a(24,"div",34),l(25,"Pending"),o()()(),a(26,"div",37)(27,"div",31),l(28,"\u{1F4B0}"),o(),a(29,"div",32)(30,"div",33),l(31),o(),a(32,"div",34),l(33,"Total Revenue"),o()()(),a(34,"div",38)(35,"div",31),l(36,"\u{1F4B3}"),o(),a(37,"div",32)(38,"div",33),l(39),o(),a(40,"div",34),l(41,"Collected"),o()()(),a(42,"div",39)(43,"div",31),l(44,"\u{1F4CB}"),o(),a(45,"div",32)(46,"div",33),l(47),o(),a(48,"div",34),l(49,"Pending Payment"),o()()()()()),n&2){let e=g();c(7),_(e.bookingStats.totalBookings),c(8),_(e.bookingStats.confirmedBookings),c(8),_(e.bookingStats.pendingBookings),c(8),_(e.formatCurrency(e.bookingStats.totalRevenue)),c(8),_(e.formatCurrency(e.bookingStats.paidAmount)),c(8),_(e.formatCurrency(e.bookingStats.pendingAmount))}}function hk(n,t){n&1&&(a(0,"div",40),P(1,"div",41),a(2,"p"),l(3,"Loading bookings..."),o()())}function vk(n,t){if(n&1&&(a(0,"span",81),l(1),o()),n&2){let e=g().$implicit,i=g(2);c(),x(" Due: ",i.formatCurrency(e.remainingAmount)," ")}}function xk(n,t){if(n&1&&(a(0,"button",82),l(1," \u270F\uFE0F "),o()),n&2){let e=g().$implicit;m("routerLink",$i(1,fk,e.id))}}function Ck(n,t){if(n&1){let e=O();a(0,"button",83),h("click",function(){C(e);let r=g().$implicit,s=g(2);return y(s.onCancelBooking(r.id))}),l(1," \u274C "),o()}}function yk(n,t){if(n&1&&(a(0,"tr",48)(1,"td",49)(2,"div",50)(3,"strong"),l(4),o(),a(5,"span",51),l(6),o()()(),a(7,"td",52)(8,"div",53)(9,"strong"),l(10),o(),a(11,"span",54),l(12),o(),a(13,"span",55),l(14),o()()(),a(15,"td",56)(16,"div",57)(17,"strong"),l(18),o(),a(19,"span",58),l(20),o(),a(21,"span",59),l(22),o()()(),a(23,"td",60)(24,"div",61)(25,"strong"),l(26),o(),a(27,"span",62),l(28),o()()(),a(29,"td",63)(30,"div",64)(31,"span",65),l(32),o(),a(33,"span",66),l(34),o()()(),a(35,"td",67)(36,"div",68)(37,"strong"),l(38),o(),a(39,"span",69),l(40),o(),v(41,vk,2,1,"span",70),o()(),a(42,"td",71)(43,"span",72),l(44),o(),a(45,"span",73),l(46),j(47,"titlecase"),o()(),a(48,"td",74)(49,"span",75),l(50),o()(),a(51,"td",76)(52,"div",77)(53,"button",78),l(54," \u{1F441}\uFE0F "),o(),v(55,xk,2,3,"button",79)(56,Ck,2,0,"button",80),o()()()),n&2){let e=t.$implicit,i=g(2);q(i.getStatusClass(e.bookingStatus)),c(4),_(e.bookingReference),c(2),_(i.formatDate(e.bookingDate)),c(4),_(e.passengerName),c(2),_(e.passengerPhone),c(2),_(e.passengerEmail),c(4),_(e.tripName),c(2),_(e.routeName),c(2),x("\u{1F68C} ",e.busNumber,""),c(4),_(i.formatDate(e.departureDate)),c(2),Y("",e.departureTime," - ",e.arrivalTime,""),c(4),x("",e.passengerCount," passenger(s)"),c(2),_(e.seatNumbers.join(", ")),c(4),_(i.formatCurrency(e.totalAmount)),c(2),x("Paid: ",i.formatCurrency(e.paidAmount),""),c(),m("ngIf",e.remainingAmount>0),c(2),q(i.getPaymentStatusClass(e.paymentStatus)),c(),x(" ",i.getPaymentStatusText(e.paymentStatus)," "),c(2),_(se(47,28,e.paymentMethod)),c(3),q(i.getStatusClass(e.bookingStatus)),c(),x(" ",i.getBookingStatusText(e.bookingStatus)," "),c(3),m("routerLink",$i(30,gk,e.id)),c(2),m("ngIf",e.bookingStatus!=="completed"&&e.bookingStatus!=="cancelled"),c(),m("ngIf",e.bookingStatus==="confirmed"||e.bookingStatus==="pending")}}function bk(n,t){n&1&&(a(0,"p"),l(1," Try adjusting your filters or search terms. "),o())}function Ek(n,t){n&1&&(a(0,"p"),l(1," No bookings have been made yet. "),o())}function Dk(n,t){if(n&1&&(a(0,"div",84)(1,"div",85),l(2,"\u{1F3AB}"),o(),a(3,"h3"),l(4,"No bookings found"),o(),v(5,bk,2,0,"p",86)(6,Ek,2,0,"p",86),a(7,"button",4),l(8," Create First Booking "),o()()),n&2){let e=g(2);c(5),m("ngIf",e.searchTerm||e.statusFilter||e.paymentStatusFilter),c(),m("ngIf",!e.searchTerm&&!e.statusFilter&&!e.paymentStatusFilter)}}function Mk(n,t){if(n&1){let e=O();a(0,"button",92),h("click",function(){let r=C(e).$implicit,s=g(3);return y(s.goToPage(r))}),l(1),o()}if(n&2){let e=t.$implicit,i=g(3);I("active",e===i.currentPage),c(),x(" ",e," ")}}function Sk(n,t){if(n&1){let e=O();a(0,"div",87)(1,"div",88),l(2),o(),a(3,"div",89)(4,"button",90),h("click",function(){C(e);let r=g(2);return y(r.goToPage(r.currentPage-1))}),l(5," \u2190 Previous "),o(),v(6,Mk,2,3,"button",91),a(7,"button",90),h("click",function(){C(e);let r=g(2);return y(r.goToPage(r.currentPage+1))}),l(8," Next \u2192 "),o()()()}if(n&2){let e=g(2);c(2),Ke(" Showing ",(e.currentPage-1)*e.itemsPerPage+1,"-",e.Math.min(e.currentPage*e.itemsPerPage,e.totalItems)," of ",e.totalItems," bookings "),c(2),m("disabled",e.currentPage===1),c(2),m("ngForOf",e.getPageNumbers()),c(),m("disabled",e.currentPage===e.getTotalPages())}}function Ik(n,t){if(n&1&&(a(0,"div",42)(1,"div",43)(2,"table",44)(3,"thead")(4,"tr")(5,"th"),l(6,"Booking Reference"),o(),a(7,"th"),l(8,"Passenger"),o(),a(9,"th"),l(10,"Trip Details"),o(),a(11,"th"),l(12,"Departure"),o(),a(13,"th"),l(14,"Seats"),o(),a(15,"th"),l(16,"Amount"),o(),a(17,"th"),l(18,"Payment"),o(),a(19,"th"),l(20,"Status"),o(),a(21,"th"),l(22,"Actions"),o()()(),a(23,"tbody"),v(24,yk,57,32,"tr",45),o()()(),v(25,Dk,9,2,"div",46)(26,Sk,9,6,"div",47),o()),n&2){let e=g();c(24),m("ngForOf",e.getPaginatedBookings()),c(),m("ngIf",e.filteredBookings.length===0),c(),m("ngIf",e.getTotalPages()>1)}}var wg=class n{API_URL="/api/bookings";getBookings(t){return G([{id:"BK001",bookingReference:"RLD-2025-001",passengerName:"Ahmed Mohammed Al-Rashid",passengerPhone:"+966 50 123 4567",passengerEmail:"ahmed.rashid@email.com",passengerNationalId:"1234567890",tripId:"TR001",tripName:"Riyadh to Makkah Express",routeName:"Riyadh \u2192 Makkah",departureCity:"Riyadh",arrivalCity:"Makkah",departureDate:new Date("2025-02-15T08:00:00"),departureTime:"08:00",arrivalTime:"16:00",busNumber:"RLD-001",seatNumbers:["A1","A2"],passengerCount:2,totalAmount:600,paidAmount:600,remainingAmount:0,paymentStatus:"paid",bookingStatus:"confirmed",bookingDate:new Date("2025-01-28T14:30:00"),paymentMethod:"online",discountAmount:0,taxAmount:90,specialRequests:"Window seats preferred",emergencyContact:{name:"Fatima Al-Rashid",phone:"+966 50 234 5678",relationship:"Wife"},createdAt:new Date("2025-01-28T14:30:00"),updatedAt:new Date("2025-01-28T14:30:00")},{id:"BK002",bookingReference:"RLD-2025-002",passengerName:"Sarah Abdullah Al-Fahad",passengerPhone:"+966 55 987 6543",passengerEmail:"sarah.fahad@email.com",passengerNationalId:"2345678901",tripId:"UP001",tripName:"Premium Umrah Package - Ramadan",routeName:"Riyadh \u2192 Makkah \u2192 Madinah",departureCity:"Riyadh",arrivalCity:"Riyadh",departureDate:new Date("2025-03-15T06:00:00"),departureTime:"06:00",arrivalTime:"20:00",busNumber:"RLD-002",seatNumbers:["B5"],passengerCount:1,totalAmount:12500,paidAmount:5e3,remainingAmount:7500,paymentStatus:"partial",bookingStatus:"confirmed",bookingDate:new Date("2025-01-25T10:15:00"),paymentMethod:"bank_transfer",discountAmount:500,taxAmount:1875,specialRequests:"Halal meals only, prayer time reminders",emergencyContact:{name:"Mohammed Al-Fahad",phone:"+966 50 111 2222",relationship:"Father"},createdAt:new Date("2025-01-25T10:15:00"),updatedAt:new Date("2025-01-30T16:45:00")},{id:"BK003",bookingReference:"RLD-2025-003",passengerName:"Omar Khalid Al-Salem",passengerPhone:"+966 56 555 7777",passengerEmail:"omar.salem@email.com",passengerNationalId:"3456789012",tripId:"TR002",tripName:"Jeddah to Dammam Business Route",routeName:"Jeddah \u2192 Dammam",departureCity:"Jeddah",arrivalCity:"Dammam",departureDate:new Date("2025-02-10T14:00:00"),departureTime:"14:00",arrivalTime:"20:30",busNumber:"RLD-003",seatNumbers:["C10"],passengerCount:1,totalAmount:450,paidAmount:0,remainingAmount:450,paymentStatus:"pending",bookingStatus:"pending",bookingDate:new Date("2025-02-05T09:20:00"),paymentMethod:"cash",discountAmount:50,taxAmount:67.5,createdAt:new Date("2025-02-05T09:20:00"),updatedAt:new Date("2025-02-05T09:20:00")},{id:"BK004",bookingReference:"RLD-2025-004",passengerName:"Aisha Mohammed Al-Harbi",passengerPhone:"+966 54 333 9999",passengerEmail:"aisha.harbi@email.com",passengerNationalId:"4567890123",tripId:"UP002",tripName:"Economy Umrah Package - February",routeName:"Jeddah \u2192 Makkah \u2192 Madinah",departureCity:"Jeddah",arrivalCity:"Jeddah",departureDate:new Date("2025-02-10T08:00:00"),departureTime:"08:00",arrivalTime:"18:00",busNumber:"RLD-004",seatNumbers:["D3","D4"],passengerCount:2,totalAmount:15e3,paidAmount:15e3,remainingAmount:0,paymentStatus:"paid",bookingStatus:"completed",bookingDate:new Date("2025-01-20T11:45:00"),paymentMethod:"card",discountAmount:0,taxAmount:2250,specialRequests:"Family with elderly mother - assistance needed",emergencyContact:{name:"Khalid Al-Harbi",phone:"+966 50 444 8888",relationship:"Husband"},createdAt:new Date("2025-01-20T11:45:00"),updatedAt:new Date("2025-02-17T19:00:00")},{id:"BK005",bookingReference:"RLD-2025-005",passengerName:"Abdullah Nasser Al-Otaibi",passengerPhone:"+966 53 777 1111",passengerEmail:"abdullah.otaibi@email.com",passengerNationalId:"5678901234",tripId:"TR003",tripName:"Riyadh to Abha Mountain Route",routeName:"Riyadh \u2192 Abha",departureCity:"Riyadh",arrivalCity:"Abha",departureDate:new Date("2025-02-20T06:00:00"),departureTime:"06:00",arrivalTime:"18:00",busNumber:"RLD-005",seatNumbers:["E7"],passengerCount:1,totalAmount:350,paidAmount:350,remainingAmount:0,paymentStatus:"paid",bookingStatus:"cancelled",bookingDate:new Date("2025-02-15T13:10:00"),paymentMethod:"online",discountAmount:0,taxAmount:52.5,specialRequests:"Cancelled due to emergency",createdAt:new Date("2025-02-15T13:10:00"),updatedAt:new Date("2025-02-18T10:30:00")}]).pipe(Me(500),te(i=>t?i.filter(r=>{if(t.status&&r.bookingStatus!==t.status||t.paymentStatus&&r.paymentStatus!==t.paymentStatus||t.tripId&&r.tripId!==t.tripId)return!1;if(t.dateRange){let s=new Date(r.departureDate);if(s<t.dateRange.start||s>t.dateRange.end)return!1}return!0}):i))}getBooking(t){return this.getBookings().pipe(te(e=>e.find(i=>i.id===t)),Me(300))}getBookingStats(){return this.getBookings().pipe(te(t=>{let e=t.length,i=t.filter(S=>S.bookingStatus==="confirmed").length,r=t.filter(S=>S.bookingStatus==="pending").length,s=t.filter(S=>S.bookingStatus==="cancelled").length,d=t.reduce((S,M)=>S+M.totalAmount,0),u=t.reduce((S,M)=>S+M.paidAmount,0),p=t.reduce((S,M)=>S+M.remainingAmount,0),f=e>0?d/e:0,b=t.reduce((S,M)=>S+M.seatNumbers.length,0),D=b>0?b/(e*2)*100:0;return{totalBookings:e,confirmedBookings:i,pendingBookings:r,cancelledBookings:s,totalRevenue:d,paidAmount:u,pendingAmount:p,averageBookingValue:f,occupancyRate:D}}),Me(400))}updateBookingStatus(t,e){return G(!0).pipe(Me(500))}processPayment(t,e,i){return G(!0).pipe(Me(800))}cancelBooking(t,e){return G(!0).pipe(Me(600))}getPaymentHistory(t){return G([{id:"PAY001",bookingId:t,amount:5e3,paymentMethod:"Bank Transfer",paymentDate:new Date("2025-01-25T10:30:00"),transactionId:"TXN123456789",status:"success",notes:"Initial payment - 40% of total amount"}]).pipe(Me(300))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},wd=class n{constructor(t){this.bookingService=t}bookings=[];filteredBookings=[];bookingStats=null;loading=!1;searchTerm="";statusFilter="";paymentStatusFilter="";sortBy="bookingDate";sortDirection="desc";currentPage=1;itemsPerPage=10;totalItems=0;Math=Math;ngOnInit(){this.loadBookings(),this.loadBookingStats()}loadBookings(){this.loading=!0,this.bookingService.getBookings().subscribe({next:t=>{this.bookings=t,this.applyFilters(),this.loading=!1},error:t=>{console.error("Error loading bookings:",t),this.loading=!1}})}loadBookingStats(){this.bookingService.getBookingStats().subscribe({next:t=>{this.bookingStats=t},error:t=>{console.error("Error loading booking stats:",t)}})}applyFilters(){let t=this.bookings;this.searchTerm&&(t=t.filter(e=>e.passengerName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.bookingReference.toLowerCase().includes(this.searchTerm.toLowerCase())||e.passengerPhone.includes(this.searchTerm)||e.tripName.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.statusFilter&&(t=t.filter(e=>e.bookingStatus===this.statusFilter)),this.paymentStatusFilter&&(t=t.filter(e=>e.paymentStatus===this.paymentStatusFilter)),t.sort((e,i)=>{let r,s;switch(this.sortBy){case"passengerName":r=e.passengerName.toLowerCase(),s=i.passengerName.toLowerCase();break;case"bookingDate":r=new Date(e.bookingDate),s=new Date(i.bookingDate);break;case"departureDate":r=new Date(e.departureDate),s=new Date(i.departureDate);break;case"totalAmount":r=e.totalAmount,s=i.totalAmount;break;case"bookingStatus":r=e.bookingStatus,s=i.bookingStatus;break;default:return 0}return r<s?this.sortDirection==="asc"?-1:1:r>s?this.sortDirection==="asc"?1:-1:0}),this.filteredBookings=t,this.totalItems=t.length,this.currentPage=1}onSearchChange(){this.applyFilters()}onFilterChange(){this.applyFilters()}toggleSortDirection(){this.sortDirection=this.sortDirection==="asc"?"desc":"asc",this.applyFilters()}getSortIcon(t){return this.sortBy!==t?"\u2195\uFE0F":this.sortDirection==="asc"?"\u2191":"\u2193"}getStatusClass(t){return{confirmed:"status-confirmed",pending:"status-pending",cancelled:"status-cancelled",completed:"status-completed","no-show":"status-no-show"}[t]||""}getPaymentStatusClass(t){return{paid:"payment-paid",partial:"payment-partial",pending:"payment-pending",refunded:"payment-refunded",cancelled:"payment-cancelled"}[t]||""}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatDateTime(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getPaginatedBookings(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredBookings.slice(t,e)}getTotalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}goToPage(t){t>=1&&t<=this.getTotalPages()&&(this.currentPage=t)}getPageNumbers(){let t=this.getTotalPages(),e=[],i=5,r=Math.max(1,this.currentPage-Math.floor(i/2)),s=Math.min(t,r+i-1);s-r<i-1&&(r=Math.max(1,s-i+1));for(let d=r;d<=s;d++)e.push(d);return e}onUpdateStatus(t,e){confirm(`Are you sure you want to change the booking status to ${e}?`)&&this.bookingService.updateBookingStatus(t,e).subscribe({next:()=>{this.loadBookings(),this.loadBookingStats()},error:i=>{console.error("Error updating status:",i),alert("Failed to update booking status. Please try again.")}})}onCancelBooking(t){let e=prompt("Please enter cancellation reason:");e&&this.bookingService.cancelBooking(t,e).subscribe({next:()=>{this.loadBookings(),this.loadBookingStats()},error:i=>{console.error("Error cancelling booking:",i),alert("Failed to cancel booking. Please try again.")}})}getPaymentStatusText(t){return{paid:"Fully Paid",partial:"Partially Paid",pending:"Payment Pending",refunded:"Refunded",cancelled:"Cancelled"}[t]||t}getBookingStatusText(t){return{confirmed:"Confirmed",pending:"Pending",cancelled:"Cancelled",completed:"Completed","no-show":"No Show"}[t]||t}static \u0275fac=function(e){return new(e||n)(w(wg))};static \u0275cmp=J({type:n,selectors:[["app-booking-list"]],decls:56,vars:8,consts:[[1,"booking-list-container"],[1,"page-header"],[1,"header-content"],[1,"header-actions"],["routerLink","/bookings/create",1,"action-btn","primary"],["class","stats-section",4,"ngIf"],[1,"filters-section"],[1,"search-container"],["type","text","placeholder","\u{1F50D} Search by passenger name, booking reference, phone...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filters-container"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],["value","confirmed"],["value","pending"],["value","cancelled"],["value","completed"],["value","no-show"],["value","paid"],["value","partial"],["value","refunded"],["value","bookingDate"],["value","departureDate"],["value","passengerName"],["value","totalAmount"],["value","bookingStatus"],[1,"sort-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","bookings-section",4,"ngIf"],[1,"stats-section"],[1,"stats-grid"],[1,"stat-card","total"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","confirmed"],[1,"stat-card","pending"],[1,"stat-card","revenue"],[1,"stat-card","paid"],[1,"stat-card","pending-amount"],[1,"loading-container"],[1,"loading-spinner"],[1,"bookings-section"],[1,"table-container"],[1,"bookings-table"],["class","booking-row",3,"class",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"booking-row"],[1,"booking-reference"],[1,"reference-info"],[1,"booking-date"],[1,"passenger-info"],[1,"passenger-details"],[1,"passenger-contact"],[1,"passenger-email"],[1,"trip-info"],[1,"trip-details"],[1,"route-name"],[1,"bus-info"],[1,"departure-info"],[1,"departure-details"],[1,"departure-time"],[1,"seat-info"],[1,"seat-details"],[1,"seat-count"],[1,"seat-numbers"],[1,"amount-info"],[1,"amount-details"],[1,"paid-amount"],["class","remaining-amount",4,"ngIf"],[1,"payment-status"],[1,"payment-badge"],[1,"payment-method"],[1,"booking-status"],[1,"status-badge"],[1,"actions"],[1,"action-buttons"],["title","View Details",1,"action-btn","view",3,"routerLink"],["class","action-btn edit","title","Edit Booking",3,"routerLink",4,"ngIf"],["class","action-btn cancel","title","Cancel Booking",3,"click",4,"ngIf"],[1,"remaining-amount"],["title","Edit Booking",1,"action-btn","edit",3,"routerLink"],["title","Cancel Booking",1,"action-btn","cancel",3,"click"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-controls"],[1,"page-btn",3,"click","disabled"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"\u{1F3AB} Booking Management"),o(),a(5,"p"),l(6,"Manage passenger bookings and reservations"),o()(),a(7,"div",3)(8,"button",4),l(9," \u2795 New Booking "),o()()(),v(10,_k,50,6,"div",5),a(11,"div",6)(12,"div",7)(13,"input",8),L("ngModelChange",function(s){return $(i.searchTerm,s)||(i.searchTerm=s),s}),h("input",function(){return i.onSearchChange()}),o()(),a(14,"div",9)(15,"select",10),L("ngModelChange",function(s){return $(i.statusFilter,s)||(i.statusFilter=s),s}),h("change",function(){return i.onFilterChange()}),a(16,"option",11),l(17,"All Booking Status"),o(),a(18,"option",12),l(19,"Confirmed"),o(),a(20,"option",13),l(21,"Pending"),o(),a(22,"option",14),l(23,"Cancelled"),o(),a(24,"option",15),l(25,"Completed"),o(),a(26,"option",16),l(27,"No Show"),o()(),a(28,"select",10),L("ngModelChange",function(s){return $(i.paymentStatusFilter,s)||(i.paymentStatusFilter=s),s}),h("change",function(){return i.onFilterChange()}),a(29,"option",11),l(30,"All Payment Status"),o(),a(31,"option",17),l(32,"Fully Paid"),o(),a(33,"option",18),l(34,"Partially Paid"),o(),a(35,"option",13),l(36,"Payment Pending"),o(),a(37,"option",19),l(38,"Refunded"),o(),a(39,"option",14),l(40,"Cancelled"),o()(),a(41,"select",10),L("ngModelChange",function(s){return $(i.sortBy,s)||(i.sortBy=s),s}),h("change",function(){return i.applyFilters()}),a(42,"option",20),l(43,"Sort by Booking Date"),o(),a(44,"option",21),l(45,"Sort by Departure Date"),o(),a(46,"option",22),l(47,"Sort by Passenger Name"),o(),a(48,"option",23),l(49,"Sort by Amount"),o(),a(50,"option",24),l(51,"Sort by Status"),o()(),a(52,"button",25),h("click",function(){return i.toggleSortDirection()}),l(53),o()()(),v(54,hk,4,0,"div",26)(55,Ik,27,3,"div",27),o()),e&2&&(c(10),m("ngIf",i.bookingStats),c(3),F("ngModel",i.searchTerm),c(2),F("ngModel",i.statusFilter),c(13),F("ngModel",i.paymentStatusFilter),c(13),F("ngModel",i.sortBy),c(12),x(" ",i.getSortIcon(i.sortBy)," "),c(),m("ngIf",i.loading),c(),m("ngIf",!i.loading))},dependencies:[K,ae,ee,Ge,qn,gi,et,Re,Oe,Se,Pe,Ie,it],styles:[".booking-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1600px;margin:0 auto;background:#f8fafc;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:28px;font-weight:700}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px}.action-btn.primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.stats-section[_ngcontent-%COMP%]{margin-bottom:25px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 6px #0000000d;transition:transform .2s ease;border-left:4px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.stat-card.total[_ngcontent-%COMP%]{border-left-color:#667eea}.stat-card.confirmed[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.pending[_ngcontent-%COMP%]{border-left-color:#ed8936}.stat-card.revenue[_ngcontent-%COMP%]{border-left-color:#38b2ac}.stat-card.paid[_ngcontent-%COMP%]{border-left-color:#48bb78}.stat-card.pending-amount[_ngcontent-%COMP%]{border-left-color:#f56565}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.stat-icon[_ngcontent-%COMP%]{font-size:32px;opacity:.8}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#2d3748;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#718096;font-weight:500}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #0000000d;margin-bottom:25px}.search-container[_ngcontent-%COMP%]{margin-bottom:15px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;transition:border-color .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filters-container[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;font-size:14px;cursor:pointer;transition:border-color .2s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.sort-btn[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;cursor:pointer;font-size:16px;transition:all .2s ease}.sort-btn[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;background:#f7fafc}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:15px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.bookings-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.bookings-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.bookings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;padding:15px 12px;text-align:left;font-weight:600;color:#2d3748;border-bottom:2px solid #e2e8f0;white-space:nowrap}.bookings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;border-bottom:1px solid #f1f5f9;vertical-align:top}.booking-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.booking-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.booking-row.status-cancelled[_ngcontent-%COMP%]{background:#fef5e7}.booking-row.status-completed[_ngcontent-%COMP%]{background:#f0fff4}.booking-reference[_ngcontent-%COMP%]{font-family:monospace}.reference-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.booking-date[_ngcontent-%COMP%]{font-size:12px;color:#718096}.passenger-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;min-width:200px}.passenger-contact[_ngcontent-%COMP%]{font-size:12px;color:#4a5568}.passenger-email[_ngcontent-%COMP%]{font-size:12px;color:#718096}.trip-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;min-width:180px}.route-name[_ngcontent-%COMP%]{font-size:12px;color:#4a5568}.bus-info[_ngcontent-%COMP%]{font-size:12px;color:#718096}.departure-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.departure-time[_ngcontent-%COMP%]{font-size:12px;color:#4a5568}.seat-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.seat-count[_ngcontent-%COMP%]{font-weight:500}.seat-numbers[_ngcontent-%COMP%]{font-size:12px;color:#4a5568;font-family:monospace}.amount-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;text-align:right}.paid-amount[_ngcontent-%COMP%]{font-size:12px;color:#48bb78;font-weight:500}.remaining-amount[_ngcontent-%COMP%]{font-size:12px;color:#f56565;font-weight:500}.payment-status[_ngcontent-%COMP%]{text-align:center}.payment-badge[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:4px}.payment-method[_ngcontent-%COMP%]{font-size:11px;color:#718096}.payment-paid[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.payment-partial[_ngcontent-%COMP%]{background:#faf089;color:#744210}.payment-pending[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.payment-refunded[_ngcontent-%COMP%]{background:#bee3f8;color:#2a4365}.payment-cancelled[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.status-confirmed[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-pending[_ngcontent-%COMP%]{background:#faf089;color:#744210}.status-cancelled[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.status-completed[_ngcontent-%COMP%]{background:#b2f5ea;color:#234e52}.status-no-show[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568}.actions[_ngcontent-%COMP%]{text-align:center}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.action-btn[_ngcontent-%COMP%]{padding:6px 8px;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s ease;background:#f7fafc;color:#4a5568;text-decoration:none}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.action-btn.view[_ngcontent-%COMP%]:hover{background:#bee3f8;color:#2a4365}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#faf089;color:#744210}.action-btn.cancel[_ngcontent-%COMP%]:hover{background:#fed7d7;color:#742a2a}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:24px;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 25px;color:#718096;font-size:16px;max-width:400px;line-height:1.5}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-top:1px solid #e2e8f0;background:#f8fafc}.pagination-info[_ngcontent-%COMP%]{font-size:14px;color:#718096}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.page-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;background:#fff;color:#4a5568;border-radius:6px;cursor:pointer;font-size:14px;transition:all .2s ease}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.page-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.booking-list-container[_ngcontent-%COMP%]{padding:15px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filters-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-select[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{font-size:12px}.bookings-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bookings-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:center}.pagination-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .stat-value[_ngcontent-%COMP%]{font-size:20px}.bookings-table[_ngcontent-%COMP%]{font-size:11px}.passenger-details[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]{min-width:150px}}"]})};function Pk(n,t){n&1&&(a(0,"div",15),P(1,"div",16),a(2,"p"),l(3,"Loading revenue analytics..."),o()())}function Tk(n,t){if(n&1&&(a(0,"div",52)(1,"div",53)(2,"div",54),l(3),o(),a(4,"div",55),l(5),o()(),a(6,"div",56),P(7,"div",57),o(),a(8,"div",58),l(9),o()()),n&2){let e=t.$implicit,i=g(3);c(3),_(e.method),c(2),_(i.formatCurrency(e.amount)),c(2),Be("width",e.percentage,"%")("background-color",i.getPaymentMethodColor(e.method)),c(2),Y(" ",e.transactions," transactions \u2022 ",i.formatPercentage(e.percentage)," ")}}function Rk(n,t){if(n&1&&(a(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26),l(4,"\u{1F4B0}"),o(),a(5,"div",27)(6,"div",28),l(7),o(),a(8,"div",29),l(9,"Total Revenue"),o(),a(10,"div",30),l(11),o()()(),a(12,"div",31)(13,"div",26),l(14,"\u{1F3AB}"),o(),a(15,"div",27)(16,"div",28),l(17),o(),a(18,"div",29),l(19,"Total Bookings"),o(),a(20,"div",30),l(21),o()()(),a(22,"div",32)(23,"div",26),l(24,"\u{1F4CA}"),o(),a(25,"div",27)(26,"div",28),l(27),o(),a(28,"div",29),l(29,"Average Booking Value"),o(),a(30,"div",30),l(31),o()()(),a(32,"div",33)(33,"div",26),l(34,"\u{1F68C}"),o(),a(35,"div",27)(36,"div",28),l(37),o(),a(38,"div",29),l(39,"Occupancy Rate"),o(),a(40,"div",30),l(41),o()()()(),a(42,"div",34)(43,"div",35)(44,"h3"),l(45,"\u{1F4BC} Revenue Breakdown"),o(),a(46,"div",36)(47,"div",37)(48,"div",38),l(49,"Regular Trips"),o(),a(50,"div",39),P(51,"div",40),o(),a(52,"div",41),l(53),o()(),a(54,"div",37)(55,"div",38),l(56,"Umrah Packages"),o(),a(57,"div",39),P(58,"div",42),o(),a(59,"div",41),l(60),o()()()(),a(61,"div",35)(62,"h3"),l(63,"\u{1F4B3} Payment Methods"),o(),a(64,"div",43),v(65,Tk,10,8,"div",44),o()()(),a(66,"div",45)(67,"h3"),l(68,"\u{1F50D} Quick Insights"),o(),a(69,"div",46)(70,"div",47)(71,"div",48),l(72,"\u{1F3C6}"),o(),a(73,"div",49)(74,"div",50),l(75,"Top Performing Category"),o(),a(76,"div",51),l(77),o()()(),a(78,"div",47)(79,"div",48),l(80,"\u{1F4C8}"),o(),a(81,"div",49)(82,"div",50),l(83,"Monthly Growth"),o(),a(84,"div",51),l(85),o()()(),a(86,"div",47)(87,"div",48),l(88,"\u{1F4CA}"),o(),a(89,"div",49)(90,"div",50),l(91,"Average Monthly Revenue"),o(),a(92,"div",51),l(93),o()()()()()()),n&2){let e=g(2);c(7),_(e.formatCurrency(e.revenueMetrics.currentPeriod.totalRevenue)),c(3),q(e.getGrowthClass(e.revenueMetrics.growth.revenue)),c(),Y(" ",e.getGrowthIcon(e.revenueMetrics.growth.revenue)," ",e.formatPercentage(e.revenueMetrics.growth.revenue)," "),c(6),_(e.formatNumber(e.revenueMetrics.currentPeriod.totalBookings)),c(3),q(e.getGrowthClass(e.revenueMetrics.growth.bookings)),c(),Y(" ",e.getGrowthIcon(e.revenueMetrics.growth.bookings)," ",e.formatPercentage(e.revenueMetrics.growth.bookings)," "),c(6),_(e.formatCurrency(e.revenueMetrics.currentPeriod.averageBookingValue)),c(3),q(e.getGrowthClass(e.revenueMetrics.growth.averageValue)),c(),Y(" ",e.getGrowthIcon(e.revenueMetrics.growth.averageValue)," ",e.formatPercentage(e.revenueMetrics.growth.averageValue)," "),c(6),_(e.formatPercentage(e.revenueMetrics.currentPeriod.occupancyRate)),c(3),q(e.getGrowthClass(e.revenueMetrics.growth.occupancy)),c(),Y(" ",e.getGrowthIcon(e.revenueMetrics.growth.occupancy)," ",e.formatPercentage(e.revenueMetrics.growth.occupancy)," "),c(10),Be("width",e.getRevenueDistribution().regular,"%"),c(2),Y(" ",e.formatCurrency(e.revenueMetrics.currentPeriod.regularRevenue)," (",e.formatPercentage(e.getRevenueDistribution().regular),") "),c(5),Be("width",e.getRevenueDistribution().umrah,"%"),c(2),Y(" ",e.formatCurrency(e.revenueMetrics.currentPeriod.umrahRevenue)," (",e.formatPercentage(e.getRevenueDistribution().umrah),") "),c(5),m("ngForOf",e.revenueMetrics.paymentMethods),c(12),_(e.getTopPerformingCategory()),c(8),_(e.formatPercentage(e.getMonthlyGrowth())),c(8),_(e.formatCurrency(e.getAverageMonthlyRevenue()))}}function Ok(n,t){if(n&1&&(a(0,"div",63)(1,"div",64)(2,"h4"),l(3),o(),a(4,"div",65),l(5),o()(),a(6,"div",66)(7,"div",67)(8,"span",29),l(9,"Total Revenue"),o(),a(10,"span",28),l(11),o()(),a(12,"div",67)(13,"span",29),l(14,"Bookings"),o(),a(15,"span",28),l(16),o()(),a(17,"div",67)(18,"span",29),l(19,"Average Price"),o(),a(20,"span",28),l(21),o()(),a(22,"div",67)(23,"span",29),l(24,"Occupancy Rate"),o(),a(25,"span",28),l(26),o()()(),a(27,"div",68)(28,"div",69),P(29,"div",70),o()()()),n&2){let e=t.$implicit,i=g(3);c(3),_(e.routeName),c(),q(i.getGrowthClass(e.growth)),c(),Y(" ",i.getGrowthIcon(e.growth)," ",i.formatPercentage(e.growth)," "),c(6),_(i.formatCurrency(e.totalRevenue)),c(5),_(i.formatNumber(e.totalBookings)),c(5),_(i.formatCurrency(e.averagePrice)),c(5),_(i.formatPercentage(e.occupancyRate)),c(3),Be("width",e.occupancyRate,"%")}}function wk(n,t){if(n&1&&(a(0,"div",59)(1,"div",60)(2,"h3"),l(3,"\u{1F68C} Route Performance Analysis"),o(),a(4,"p"),l(5,"Revenue breakdown by route with performance metrics"),o()(),a(6,"div",61),v(7,Ok,30,11,"div",62),o()()),n&2){let e=g(2);c(7),m("ngForOf",e.revenueMetrics.topRoutes)}}function Ak(n,t){if(n&1&&(a(0,"div",74)(1,"div",75)(2,"h4"),l(3),o(),a(4,"div",76),l(5),o()(),a(6,"div",77)(7,"div",78)(8,"span",29),l(9,"Total Revenue"),o(),a(10,"span",28),l(11),o()(),a(12,"div",78)(13,"span",29),l(14,"Bookings"),o(),a(15,"span",28),l(16),o()(),a(17,"div",78)(18,"span",29),l(19,"Average Price"),o(),a(20,"span",28),l(21),o()(),a(22,"div",78)(23,"span",29),l(24,"Profit Margin"),o(),a(25,"span",28),l(26),o()()(),a(27,"div",79)(28,"div",80),P(29,"div",81),o()()()),n&2){let e=t.$implicit,i=g(3);c(3),_(e.packageName),c(),q(i.getGrowthClass(e.growth)),c(),Y(" ",i.getGrowthIcon(e.growth)," ",i.formatPercentage(e.growth)," "),c(6),_(i.formatCurrency(e.totalRevenue)),c(5),_(i.formatNumber(e.totalBookings)),c(5),_(i.formatCurrency(e.averagePrice)),c(5),_(i.formatPercentage(e.profitMargin)),c(3),Be("width",e.profitMargin,"%")}}function Nk(n,t){if(n&1&&(a(0,"div",71)(1,"div",60)(2,"h3"),l(3,"\u{1F54C} Umrah Package Performance"),o(),a(4,"p"),l(5,"Revenue analysis for Umrah pilgrimage packages"),o()(),a(6,"div",72),v(7,Ak,30,11,"div",73),o()()),n&2){let e=g(2);c(7),m("ngForOf",e.revenueMetrics.topUmrahPackages)}}function kk(n,t){if(n&1&&(a(0,"div",91),P(1,"div",92),a(2,"div",93),l(3),o()()),n&2){let e=t.$implicit,i=g(3);c(),Be("height",e.revenue/3e6*100,"%"),m("title",i.formatCurrency(e.revenue)),c(2),_(e.month)}}function Vk(n,t){if(n&1&&(a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td"),l(6),o(),a(7,"td"),l(8),o(),a(9,"td"),l(10),o(),a(11,"td"),l(12),o()()),n&2){let e=t.$implicit,i=g(3);c(2),_(e.month),c(2),_(i.formatCurrency(e.revenue)),c(2),_(i.formatNumber(e.bookings)),c(2),_(i.formatNumber(e.regularTrips)),c(2),_(i.formatNumber(e.umrahPackages)),c(2),_(i.formatCurrency(e.revenue/e.bookings))}}function Fk(n,t){if(n&1&&(a(0,"div",82)(1,"div",60)(2,"h3"),l(3,"\u{1F4C8} Revenue Trends"),o(),a(4,"p"),l(5,"Historical performance and growth patterns"),o()(),a(6,"div",83)(7,"div",84)(8,"h4"),l(9,"Monthly Revenue Trend"),o()(),a(10,"div",85)(11,"div",86),v(12,kk,4,4,"div",87),o()()(),a(13,"div",88)(14,"h4"),l(15,"Monthly Breakdown"),o(),a(16,"table",89)(17,"thead")(18,"tr")(19,"th"),l(20,"Month"),o(),a(21,"th"),l(22,"Revenue"),o(),a(23,"th"),l(24,"Bookings"),o(),a(25,"th"),l(26,"Regular Trips"),o(),a(27,"th"),l(28,"Umrah Packages"),o(),a(29,"th"),l(30,"Avg. Value"),o()()(),a(31,"tbody"),v(32,Vk,13,6,"tr",90),o()()()()),n&2){let e=g(2);c(12),m("ngForOf",e.revenueMetrics.monthlyTrends),c(20),m("ngForOf",e.revenueMetrics.monthlyTrends)}}function Lk(n,t){if(n&1&&(a(0,"div",96)(1,"div",97)(2,"div",98)(3,"h4"),l(4,"\u{1F4B5} Revenue"),o()(),a(5,"div",99),l(6),o(),a(7,"div",100),l(8,"Total Revenue"),o()(),a(9,"div",101)(10,"div",98)(11,"h4"),l(12,"\u{1F4B8} Operating Costs"),o()(),a(13,"div",99),l(14),o(),a(15,"div",100),l(16,"Total Operating Costs"),o()(),a(17,"div",102)(18,"div",98)(19,"h4"),l(20,"\u{1F4B0} Gross Profit"),o()(),a(21,"div",99),l(22),o(),a(23,"div",100),l(24),o()(),a(25,"div",103)(26,"div",98)(27,"h4"),l(28,"\u{1F4CB} Outstanding"),o()(),a(29,"div",99),l(30),o(),a(31,"div",100),l(32,"Pending Payments"),o()(),a(33,"div",104)(34,"div",98)(35,"h4"),l(36,"\u21A9\uFE0F Refunds"),o()(),a(37,"div",99),l(38),o(),a(39,"div",100),l(40,"Total Refunds Issued"),o()(),a(41,"div",105)(42,"div",98)(43,"h4"),l(44,"\u{1F3DB}\uFE0F Tax"),o()(),a(45,"div",99),l(46),o(),a(47,"div",100),l(48,"Tax Collected"),o()(),a(49,"div",106)(50,"div",98)(51,"h4"),l(52,"\u2705 Net Income"),o()(),a(53,"div",99),l(54),o(),a(55,"div",100),l(56,"After Tax & Expenses"),o()()()),n&2){let e=g(3);c(6),_(e.formatCurrency(e.financialSummary.totalRevenue)),c(8),_(e.formatCurrency(e.financialSummary.operatingCosts)),c(8),_(e.formatCurrency(e.financialSummary.grossProfit)),c(2),x("Margin: ",e.formatPercentage(e.financialSummary.profitMargin),""),c(6),_(e.formatCurrency(e.financialSummary.outstandingPayments)),c(8),_(e.formatCurrency(e.financialSummary.refundsIssued)),c(8),_(e.formatCurrency(e.financialSummary.taxCollected)),c(8),_(e.formatCurrency(e.financialSummary.netIncome))}}function $k(n,t){if(n&1&&(a(0,"div",94)(1,"div",60)(2,"h3"),l(3,"\u{1F4B0} Financial Summary"),o(),a(4,"p"),l(5,"Comprehensive financial overview and profitability analysis"),o()(),v(6,Lk,57,8,"div",95),o()),n&2){let e=g(2);c(6),m("ngIf",e.financialSummary)}}function Bk(n,t){if(n&1&&(a(0,"div",17),v(1,Rk,94,32,"div",18)(2,wk,8,1,"div",19)(3,Nk,8,1,"div",20)(4,Fk,33,2,"div",21)(5,$k,7,1,"div",22),o()),n&2){let e=g();c(),m("ngIf",e.selectedTab==="overview"),c(),m("ngIf",e.selectedTab==="routes"),c(),m("ngIf",e.selectedTab==="umrah"),c(),m("ngIf",e.selectedTab==="trends"),c(),m("ngIf",e.selectedTab==="financial")}}var Ag=class n{API_URL="/api/revenue";getRevenueMetrics(t="month"){return G({currentPeriod:{period:"January 2025",totalRevenue:245e4,totalBookings:284,averageBookingValue:8627,regularTrips:156,umrahPackages:128,regularRevenue:78e4,umrahRevenue:167e4,occupancyRate:87.5,refunds:45e3,netRevenue:2405e3},previousPeriod:{period:"December 2024",totalRevenue:218e4,totalBookings:251,averageBookingValue:8687,regularTrips:142,umrahPackages:109,regularRevenue:71e4,umrahRevenue:147e4,occupancyRate:82.3,refunds:32e3,netRevenue:2148e3},growth:{revenue:12.4,bookings:13.1,averageValue:-.7,occupancy:6.3},topRoutes:[{routeId:"RT001",routeName:"Riyadh \u2192 Makkah",totalRevenue:485e3,totalBookings:89,averagePrice:5449,occupancyRate:92.1,growth:15.2},{routeId:"RT002",routeName:"Jeddah \u2192 Madinah",totalRevenue:345e3,totalBookings:67,averagePrice:5149,occupancyRate:88.4,growth:8.7},{routeId:"RT003",routeName:"Dammam \u2192 Riyadh",totalRevenue:267e3,totalBookings:54,averagePrice:4944,occupancyRate:85.2,growth:22.1}],topUmrahPackages:[{packageId:"UP001",packageName:"Premium Umrah Package - Ramadan",totalRevenue:875e3,totalBookings:70,averagePrice:12500,profitMargin:28.5,growth:18.3},{packageId:"UP002",packageName:"Economy Umrah Package",totalRevenue:525e3,totalBookings:70,averagePrice:7500,profitMargin:22.1,growth:12.7},{packageId:"UP003",packageName:"VIP Umrah Experience",totalRevenue:45e4,totalBookings:15,averagePrice:3e4,profitMargin:35.2,growth:25.8}],paymentMethods:[{method:"Online Payment",amount:1225e3,percentage:50,transactions:142,averageAmount:8626},{method:"Bank Transfer",amount:735e3,percentage:30,transactions:85,averageAmount:8647},{method:"Credit Card",amount:368e3,percentage:15,transactions:43,averageAmount:8558},{method:"Cash",amount:122500,percentage:5,transactions:14,averageAmount:8750}],monthlyTrends:[{month:"Jul 2024",revenue:198e4,bookings:234,regularTrips:128,umrahPackages:106},{month:"Aug 2024",revenue:21e5,bookings:248,regularTrips:135,umrahPackages:113},{month:"Sep 2024",revenue:195e4,bookings:229,regularTrips:124,umrahPackages:105},{month:"Oct 2024",revenue:22e5,bookings:267,regularTrips:145,umrahPackages:122},{month:"Nov 2024",revenue:205e4,bookings:241,regularTrips:132,umrahPackages:109},{month:"Dec 2024",revenue:218e4,bookings:251,regularTrips:142,umrahPackages:109},{month:"Jan 2025",revenue:245e4,bookings:284,regularTrips:156,umrahPackages:128}]}).pipe(Me(600))}getFinancialSummary(t="month"){return G({totalRevenue:245e4,operatingCosts:165e4,grossProfit:8e5,profitMargin:32.7,outstandingPayments:185e3,refundsIssued:45e3,taxCollected:367500,netIncome:387500}).pipe(Me(400))}exportRevenueReport(t,e){return console.log(`Exporting ${t} report for ${e}`),G(!0).pipe(Me(1e3))}getRouteRevenue(t){return this.getRevenueMetrics().pipe(te(e=>e.topRoutes),Me(300))}getUmrahRevenue(t){return this.getRevenueMetrics().pipe(te(e=>e.topUmrahPackages),Me(300))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},No=class n{constructor(t){this.revenueService=t}revenueMetrics=null;financialSummary=null;loading=!1;selectedPeriod="month";selectedTab="overview";exporting=!1;ngOnInit(){this.loadRevenueData(),this.loadFinancialSummary()}loadRevenueData(){this.loading=!0,this.revenueService.getRevenueMetrics(this.selectedPeriod).subscribe({next:t=>{this.revenueMetrics=t,this.loading=!1},error:t=>{console.error("Error loading revenue metrics:",t),this.loading=!1}})}loadFinancialSummary(){this.revenueService.getFinancialSummary().subscribe({next:t=>{this.financialSummary=t},error:t=>{console.error("Error loading financial summary:",t)}})}onPeriodChange(){this.loadRevenueData()}setActiveTab(t){this.selectedTab=t}formatCurrency(t){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}formatNumber(t){return new Intl.NumberFormat("en-US").format(t)}formatPercentage(t){return`${t.toFixed(1)}%`}getGrowthClass(t){return t>0?"growth-positive":t<0?"growth-negative":"growth-neutral"}getGrowthIcon(t){return t>0?"\u{1F4C8}":t<0?"\u{1F4C9}":"\u27A1\uFE0F"}getPeriodLabel(){return{week:"This Week",month:"This Month",quarter:"This Quarter",year:"This Year"}[this.selectedPeriod]}onExportReport(t){this.exporting=!0;let e=this.revenueMetrics?.currentPeriod.period||"Current Period";this.revenueService.exportRevenueReport(t,e).subscribe({next:()=>{this.exporting=!1,alert(`${t.toUpperCase()} report has been generated successfully!`)},error:i=>{this.exporting=!1,console.error("Error exporting report:",i),alert("Failed to export report. Please try again.")}})}calculateProfitMargin(t,e){return t===0?0:(t-e)/t*100}getPaymentMethodColor(t){return{"Online Payment":"#667eea","Bank Transfer":"#48bb78","Credit Card":"#ed8936",Cash:"#38b2ac"}[t]||"#718096"}getTopPerformingCategory(){if(!this.revenueMetrics)return"";let{regularRevenue:t,umrahRevenue:e}=this.revenueMetrics.currentPeriod;return e>t?"Umrah Packages":"Regular Trips"}getRevenueDistribution(){if(!this.revenueMetrics)return{regular:0,umrah:0};let{regularRevenue:t,umrahRevenue:e,totalRevenue:i}=this.revenueMetrics.currentPeriod;return{regular:t/i*100,umrah:e/i*100}}getMonthlyGrowth(){if(!this.revenueMetrics)return 0;let t=this.revenueMetrics.monthlyTrends;if(t.length<2)return 0;let e=t[t.length-1],i=t[t.length-2];return(e.revenue-i.revenue)/i.revenue*100}getAverageMonthlyRevenue(){if(!this.revenueMetrics)return 0;let t=this.revenueMetrics.monthlyTrends;return t.reduce((i,r)=>i+r.revenue,0)/t.length}getBestPerformingRoute(){return!this.revenueMetrics||this.revenueMetrics.topRoutes.length===0?null:this.revenueMetrics.topRoutes.reduce((t,e)=>e.totalRevenue>t.totalRevenue?e:t)}getBestPerformingUmrahPackage(){return!this.revenueMetrics||this.revenueMetrics.topUmrahPackages.length===0?null:this.revenueMetrics.topUmrahPackages.reduce((t,e)=>e.totalRevenue>t.totalRevenue?e:t)}static \u0275fac=function(e){return new(e||n)(w(Ag))};static \u0275cmp=J({type:n,selectors:[["app-revenue-analytics"]],decls:35,vars:15,consts:[[1,"revenue-analytics-container"],[1,"analytics-header"],[1,"header-content"],[1,"header-controls"],[1,"period-select",3,"ngModelChange","change","ngModel"],["value","week"],["value","month"],["value","quarter"],["value","year"],[1,"export-buttons"],[1,"export-btn",3,"click","disabled"],[1,"tab-navigation"],[1,"tab-btn",3,"click"],["class","loading-container",4,"ngIf"],["class","tab-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"tab-content"],["class","overview-content",4,"ngIf"],["class","routes-content",4,"ngIf"],["class","umrah-content",4,"ngIf"],["class","trends-content",4,"ngIf"],["class","financial-content",4,"ngIf"],[1,"overview-content"],[1,"metrics-grid"],[1,"metric-card","primary"],[1,"metric-icon"],[1,"metric-content"],[1,"metric-value"],[1,"metric-label"],[1,"metric-growth"],[1,"metric-card","bookings"],[1,"metric-card","average"],[1,"metric-card","occupancy"],[1,"analytics-grid"],[1,"analytics-card"],[1,"revenue-breakdown"],[1,"breakdown-item"],[1,"breakdown-label"],[1,"breakdown-bar"],[1,"breakdown-fill","regular"],[1,"breakdown-value"],[1,"breakdown-fill","umrah"],[1,"payment-methods"],["class","payment-item",4,"ngFor","ngForOf"],[1,"insights-section"],[1,"insights-grid"],[1,"insight-card"],[1,"insight-icon"],[1,"insight-content"],[1,"insight-label"],[1,"insight-value"],[1,"payment-item"],[1,"payment-info"],[1,"payment-method"],[1,"payment-amount"],[1,"payment-bar"],[1,"payment-fill"],[1,"payment-stats"],[1,"routes-content"],[1,"section-header"],[1,"routes-grid"],["class","route-card",4,"ngFor","ngForOf"],[1,"route-card"],[1,"route-header"],[1,"route-growth"],[1,"route-metrics"],[1,"route-metric"],[1,"route-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"umrah-content"],[1,"umrah-grid"],["class","umrah-card",4,"ngFor","ngForOf"],[1,"umrah-card"],[1,"umrah-header"],[1,"umrah-growth"],[1,"umrah-metrics"],[1,"umrah-metric"],[1,"profit-indicator"],[1,"profit-bar"],[1,"profit-fill"],[1,"trends-content"],[1,"trends-chart"],[1,"chart-header"],[1,"chart-container"],[1,"chart-bars"],["class","chart-bar",4,"ngFor","ngForOf"],[1,"trends-table"],[1,"trends-data"],[4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"bar-fill",3,"title"],[1,"bar-label"],[1,"financial-content"],["class","financial-grid",4,"ngIf"],[1,"financial-grid"],[1,"financial-card","revenue"],[1,"financial-header"],[1,"financial-amount"],[1,"financial-label"],[1,"financial-card","costs"],[1,"financial-card","profit"],[1,"financial-card","outstanding"],[1,"financial-card","refunds"],[1,"financial-card","tax"],[1,"financial-card","net-income"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"\u{1F4CA} Revenue Analytics"),o(),a(5,"p"),l(6,"Comprehensive financial insights and performance metrics"),o()(),a(7,"div",3)(8,"select",4),L("ngModelChange",function(s){return $(i.selectedPeriod,s)||(i.selectedPeriod=s),s}),h("change",function(){return i.onPeriodChange()}),a(9,"option",5),l(10,"This Week"),o(),a(11,"option",6),l(12,"This Month"),o(),a(13,"option",7),l(14,"This Quarter"),o(),a(15,"option",8),l(16,"This Year"),o()(),a(17,"div",9)(18,"button",10),h("click",function(){return i.onExportReport("excel")}),l(19," \u{1F4CA} Export Excel "),o(),a(20,"button",10),h("click",function(){return i.onExportReport("pdf")}),l(21," \u{1F4C4} Export PDF "),o()()()(),a(22,"div",11)(23,"button",12),h("click",function(){return i.setActiveTab("overview")}),l(24," \u{1F4CA} Overview "),o(),a(25,"button",12),h("click",function(){return i.setActiveTab("routes")}),l(26," \u{1F68C} Routes Performance "),o(),a(27,"button",12),h("click",function(){return i.setActiveTab("umrah")}),l(28," \u{1F54C} Umrah Packages "),o(),a(29,"button",12),h("click",function(){return i.setActiveTab("trends")}),l(30," \u{1F4C8} Trends "),o(),a(31,"button",12),h("click",function(){return i.setActiveTab("financial")}),l(32," \u{1F4B0} Financial Summary "),o()(),v(33,Pk,4,0,"div",13)(34,Bk,6,5,"div",14),o()),e&2&&(c(8),F("ngModel",i.selectedPeriod),c(10),m("disabled",i.exporting),c(2),m("disabled",i.exporting),c(3),I("active",i.selectedTab==="overview"),c(2),I("active",i.selectedTab==="routes"),c(2),I("active",i.selectedTab==="umrah"),c(2),I("active",i.selectedTab==="trends"),c(2),I("active",i.selectedTab==="financial"),c(2),m("ngIf",i.loading),c(),m("ngIf",!i.loading&&i.revenueMetrics))},dependencies:[K,ae,ee,qn,et,Re,Oe,Pe,Ie,it],styles:[".revenue-analytics-container[_ngcontent-%COMP%]{padding:20px;max-width:1600px;margin:0 auto;background:#f8fafc;min-height:100vh}.analytics-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 6px #0000000d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:28px;font-weight:700}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.header-controls[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.period-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e2e8f0;border-radius:6px;background:#fff;font-size:14px;cursor:pointer;transition:border-color .2s ease}.period-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.export-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.export-btn[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #e2e8f0;border-radius:6px;background:#fff;color:#4a5568;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.export-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0;transform:translateY(-1px)}.export-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.tab-navigation[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:8px;margin-bottom:25px;box-shadow:0 4px 6px #0000000d;gap:4px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;background:transparent;color:#718096;font-size:14px;font-weight:500;cursor:pointer;border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#4a5568}.tab-btn.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;box-shadow:0 2px 4px #667eea4d}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.tab-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden}.overview-content[_ngcontent-%COMP%], .routes-content[_ngcontent-%COMP%], .umrah-content[_ngcontent-%COMP%], .trends-content[_ngcontent-%COMP%], .financial-content[_ngcontent-%COMP%]{padding:30px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:30px}.metric-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px;padding:25px;display:flex;align-items:center;gap:20px;transition:transform .2s ease}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.metric-card.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.metric-card.bookings[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169)}.metric-card.average[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ed8936,#dd6b20)}.metric-card.occupancy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#38b2ac,#319795)}.metric-icon[_ngcontent-%COMP%]{font-size:36px;opacity:.9}.metric-content[_ngcontent-%COMP%]{flex:1}.metric-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:8px;line-height:1}.metric-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9;font-weight:500;margin-bottom:8px}.metric-growth[_ngcontent-%COMP%]{font-size:12px;font-weight:600;opacity:.9}.growth-positive[_ngcontent-%COMP%]{color:#c6f6d5}.growth-negative[_ngcontent-%COMP%]{color:#fed7d7}.growth-neutral[_ngcontent-%COMP%]{color:#e2e8f0}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:25px;margin-bottom:30px}.analytics-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px}.analytics-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600;border-bottom:2px solid #e2e8f0;padding-bottom:10px}.revenue-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.breakdown-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.breakdown-label[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;font-weight:500}.breakdown-bar[_ngcontent-%COMP%]{width:100%;height:12px;background:#e2e8f0;border-radius:6px;overflow:hidden}.breakdown-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;transition:width .3s ease}.breakdown-fill.regular[_ngcontent-%COMP%]{background:linear-gradient(90deg,#48bb78,#38a169)}.breakdown-fill.umrah[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2)}.breakdown-value[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:600}.payment-methods[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.payment-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.payment-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.payment-method[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:500}.payment-amount[_ngcontent-%COMP%]{font-size:14px;color:#2d3748;font-weight:600}.payment-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.payment-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.payment-stats[_ngcontent-%COMP%]{font-size:12px;color:#718096}.insights-section[_ngcontent-%COMP%]{margin-top:30px}.insights-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:20px;font-weight:600}.insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.insight-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px;display:flex;align-items:center;gap:15px}.insight-icon[_ngcontent-%COMP%]{font-size:28px}.insight-content[_ngcontent-%COMP%]{flex:1}.insight-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;margin-bottom:4px}.insight-value[_ngcontent-%COMP%]{font-size:18px;color:#2d3748;font-weight:600}.section-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2d3748;font-size:24px;font-weight:700}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:16px}.routes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:25px}.route-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;transition:all .2s ease}.route-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.route-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.route-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.route-growth[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 8px;border-radius:12px}.route-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px}.route-metric[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.route-metric[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.route-metric[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:16px;color:#2d3748;font-weight:600}.route-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.route-progress[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#48bb78,#38a169);border-radius:4px;transition:width .3s ease}.umrah-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:25px}.umrah-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;transition:all .2s ease}.umrah-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.umrah-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e2e8f0}.umrah-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:16px;font-weight:600}.umrah-growth[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 8px;border-radius:12px}.umrah-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px}.umrah-metric[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.umrah-metric[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.umrah-metric[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:16px;color:#2d3748;font-weight:600}.profit-indicator[_ngcontent-%COMP%]   .profit-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.profit-indicator[_ngcontent-%COMP%]   .profit-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:4px;transition:width .3s ease}.trends-chart[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px;margin-bottom:30px}.chart-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600}.chart-container[_ngcontent-%COMP%]{height:300px;display:flex;align-items:end;padding:20px 0}.chart-bars[_ngcontent-%COMP%]{display:flex;align-items:end;gap:15px;width:100%;height:100%}.chart-bar[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;height:100%}.bar-fill[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,#667eea,#764ba2);border-radius:4px 4px 0 0;transition:height .3s ease;cursor:pointer;min-height:10px}.bar-label[_ngcontent-%COMP%]{margin-top:10px;font-size:11px;color:#718096;text-align:center;writing-mode:horizontal-tb}.trends-table[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:25px}.trends-table[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 20px;color:#2d3748;font-size:18px;font-weight:600}.trends-data[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.trends-data[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#edf2f7;padding:12px;text-align:left;font-weight:600;color:#2d3748;border-bottom:2px solid #e2e8f0}.trends-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f1f5f9;color:#4a5568}.trends-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f7fafc}.financial-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.financial-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:20px;text-align:center;transition:all .2s ease}.financial-card[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a}.financial-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2d3748;font-size:16px;font-weight:600}.financial-amount[_ngcontent-%COMP%]{font-size:24px;color:#2d3748;font-weight:700;margin-bottom:8px}.financial-label[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:500}.financial-card.revenue[_ngcontent-%COMP%]{border-left:4px solid #48bb78}.financial-card.costs[_ngcontent-%COMP%]{border-left:4px solid #f56565}.financial-card.profit[_ngcontent-%COMP%]{border-left:4px solid #667eea}.financial-card.outstanding[_ngcontent-%COMP%]{border-left:4px solid #ed8936}.financial-card.refunds[_ngcontent-%COMP%]{border-left:4px solid #9f7aea}.financial-card.tax[_ngcontent-%COMP%]{border-left:4px solid #38b2ac}.financial-card.net-income[_ngcontent-%COMP%]{border-left:4px solid #48bb78;background:linear-gradient(135deg,#c6f6d5,#f0fff4)}@media (max-width: 1200px){.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.revenue-analytics-container[_ngcontent-%COMP%]{padding:15px}.analytics-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.header-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.export-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%}.tab-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.tab-btn[_ngcontent-%COMP%]{justify-content:flex-start;padding:16px 20px}.metrics-grid[_ngcontent-%COMP%], .insights-grid[_ngcontent-%COMP%], .routes-grid[_ngcontent-%COMP%], .umrah-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.financial-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.chart-container[_ngcontent-%COMP%]{height:200px}.trends-data[_ngcontent-%COMP%]{font-size:12px}.trends-data[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trends-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.financial-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.metric-value[_ngcontent-%COMP%]{font-size:24px}.financial-amount[_ngcontent-%COMP%]{font-size:20px}.chart-bars[_ngcontent-%COMP%]{gap:8px}.bar-label[_ngcontent-%COMP%]{font-size:10px}}"]})};var NC=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:ud},{path:"",component:pd,children:[{path:"dashboard",component:md},{path:"buses",component:gd},{path:"buses/add",component:fd},{path:"buses/:id",component:_d},{path:"buses/:id/edit",component:hd},{path:"buses/maintenance",redirectTo:"/buses"},{path:"drivers",component:vd},{path:"drivers/add",component:xd},{path:"drivers/:id",component:Cd},{path:"drivers/:id/edit",component:yd},{path:"drivers/:id/assign",component:bd},{path:"routes",component:Ed},{path:"routes/add",component:as},{path:"routes/:id",component:Dd},{path:"routes/:id/edit",component:as},{path:"cities-stops",component:Md},{path:"trips",component:Sd},{path:"trips/schedule",component:ss},{path:"trips/calendar",component:Pd},{path:"trips/active",component:Td},{path:"trips/:id",component:Id},{path:"trips/:id/edit",component:ss},{path:"umrah",component:Rd},{path:"umrah/create",component:ls},{path:"umrah/:id",component:Od},{path:"umrah/:id/edit",component:ls},{path:"bookings",component:wd},{path:"bookings/create",redirectTo:"/bookings"},{path:"bookings/:id",redirectTo:"/bookings"},{path:"bookings/:id/edit",redirectTo:"/bookings"},{path:"reports",component:No},{path:"reports/revenue",component:No},{path:"reports/analytics",component:No},{path:"umrah",redirectTo:"/dashboard"},{path:"bookings",redirectTo:"/dashboard"},{path:"reports",redirectTo:"/dashboard"}]},{path:"**",redirectTo:"/login"}];Bm(dd,{providers:[hg(NC),Um(),Ip(Mt,et)]}).catch(n=>console.error(n));
